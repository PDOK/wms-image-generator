{"mappings":"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","sources":["node_modules/ol/Observable.js","node_modules/ol/events/Target.js","node_modules/ol/Disposable.js","node_modules/ol/events/Event.js","node_modules/ol/functions.js","node_modules/ol/array.js","node_modules/ol/obj.js","node_modules/ol/events/EventType.js","node_modules/ol/events.js","node_modules/ol/layer/Group.js","node_modules/ol/layer/Base.js","node_modules/ol/Object.js","node_modules/ol/ObjectEventType.js","node_modules/ol/util.js","node_modules/ol/layer/Property.js","node_modules/ol/asserts.js","node_modules/ol/AssertionError.js","node_modules/ol/math.js","node_modules/ol/Collection.js","node_modules/ol/CollectionEventType.js","node_modules/ol/extent.js","node_modules/ol/extent/Relationship.js","node_modules/ol/control/Control.js","node_modules/ol/MapEventType.js","node_modules/ol/dom.js","node_modules/ol/has.js","node_modules/ol/xml.js","node_modules/ol/format/XML.js","node_modules/ol/string.js","node_modules/ol/format/xsd.js","node_modules/ol/format/xlink.js","node_modules/ol/format/WMSCapabilities.js","node_modules/ol/Map.js","node_modules/ol/renderer/Map.js","node_modules/ol/transform.js","node_modules/ol/color.js","node_modules/ol/style/IconImageCache.js","node_modules/ol/layer/Layer.js","node_modules/ol/render/EventType.js","node_modules/ol/coordinate.js","node_modules/ol/render/Event.js","node_modules/ol/css.js","node_modules/ol/render/canvas.js","node_modules/ol/renderer/Composite.js","node_modules/ol/MapEvent.js","node_modules/ol/MapBrowserEvent.js","node_modules/ol/MapBrowserEventType.js","node_modules/ol/MapBrowserEventHandler.js","node_modules/ol/pointer/EventType.js","node_modules/ol/MapProperty.js","node_modules/ol/TileQueue.js","node_modules/ol/structs/PriorityQueue.js","node_modules/ol/TileState.js","node_modules/ol/View.js","node_modules/ol/ViewHint.js","node_modules/ol/ViewProperty.js","node_modules/ol/proj/Units.js","node_modules/ol/proj/Projection.js","node_modules/ol/proj/epsg3857.js","node_modules/ol/proj/epsg4326.js","node_modules/ol/proj/projections.js","node_modules/ol/proj/transforms.js","node_modules/ol/sphere.js","node_modules/ol/proj.js","node_modules/ol/centerconstraint.js","node_modules/ol/resolutionconstraint.js","node_modules/ol/rotationconstraint.js","node_modules/ol/easing.js","node_modules/ol/geom/Geometry.js","node_modules/ol/geom/flat/transform.js","node_modules/ol/geom/SimpleGeometry.js","node_modules/ol/geom/flat/closest.js","node_modules/ol/geom/flat/deflate.js","node_modules/ol/geom/flat/simplify.js","node_modules/ol/geom/flat/inflate.js","node_modules/ol/geom/flat/area.js","node_modules/ol/geom/LinearRing.js","node_modules/ol/geom/Point.js","node_modules/ol/geom/flat/contains.js","node_modules/ol/geom/flat/interiorpoint.js","node_modules/ol/geom/flat/intersectsextent.js","node_modules/ol/geom/flat/segments.js","node_modules/ol/geom/flat/reverse.js","node_modules/ol/geom/flat/orient.js","node_modules/ol/geom/Polygon.js","node_modules/ol/tilegrid/common.js","node_modules/ol/control/Attribution.js","node_modules/ol/control/Rotate.js","node_modules/ol/control/Zoom.js","node_modules/ol/control/defaults.js","node_modules/ol/interaction/defaults.js","node_modules/ol/interaction/Interaction.js","node_modules/ol/interaction/Property.js","node_modules/ol/interaction/DoubleClickZoom.js","node_modules/ol/interaction/Pointer.js","node_modules/ol/events/condition.js","node_modules/ol/interaction/DragPan.js","node_modules/ol/interaction/DragRotate.js","node_modules/ol/interaction/DragBox.js","node_modules/ol/render/Box.js","node_modules/ol/interaction/DragZoom.js","node_modules/ol/events/KeyCode.js","node_modules/ol/interaction/KeyboardPan.js","node_modules/ol/interaction/KeyboardZoom.js","node_modules/ol/Kinetic.js","node_modules/ol/interaction/MouseWheelZoom.js","node_modules/ol/interaction/PinchRotate.js","node_modules/ol/interaction/PinchZoom.js","node_modules/ol/size.js","node_modules/ol/source/TileImage.js","node_modules/ol/Tile.js","node_modules/ol/Image.js","node_modules/ol/ImageBase.js","node_modules/ol/ImageState.js","node_modules/ol/ImageTile.js","node_modules/ol/reproj/Triangulation.js","node_modules/ol/reproj.js","node_modules/ol/reproj/Tile.js","node_modules/ol/reproj/common.js","node_modules/ol/structs/LRUCache.js","node_modules/ol/tilecoord.js","node_modules/ol/TileCache.js","node_modules/ol/source/TileEventType.js","node_modules/ol/source/Tile.js","node_modules/ol/source/Source.js","node_modules/ol/TileRange.js","node_modules/ol/tilegrid/TileGrid.js","node_modules/ol/tilegrid.js","node_modules/ol/tileurlfunction.js","node_modules/ol/source/UrlTile.js","node_modules/ol/uri.js","node_modules/ol/tilegrid/WMTS.js","node_modules/ol/source/WMTS.js","node_modules/ol/layer/BaseImage.js","node_modules/ol/renderer/Layer.js","node_modules/ol/renderer/canvas/Layer.js","node_modules/ol/renderer/canvas/ImageLayer.js","node_modules/ol/layer/Image.js","node_modules/ol/layer/TileProperty.js","node_modules/ol/layer/BaseTile.js","node_modules/ol/renderer/canvas/TileLayer.js","node_modules/ol/layer/Tile.js","node_modules/proj4/lib/constants/values.js","node_modules/proj4/lib/constants/PrimeMeridian.js","node_modules/proj4/lib/constants/units.js","node_modules/proj4/lib/match.js","node_modules/proj4/lib/projString.js","node_modules/wkt-parser/parser.js","node_modules/wkt-parser/process.js","node_modules/wkt-parser/index.js","node_modules/proj4/lib/global.js","node_modules/proj4/lib/defs.js","node_modules/proj4/lib/parseCode.js","node_modules/proj4/lib/extend.js","node_modules/proj4/lib/common/msfnz.js","node_modules/proj4/lib/common/sign.js","node_modules/proj4/lib/common/adjust_lon.js","node_modules/proj4/lib/common/tsfnz.js","node_modules/proj4/lib/common/phi2z.js","node_modules/proj4/lib/projections/longlat.js","node_modules/proj4/lib/projections.js","node_modules/proj4/lib/projections/merc.js","node_modules/proj4/lib/constants/Ellipsoid.js","node_modules/proj4/lib/deriveConstants.js","node_modules/proj4/lib/constants/Datum.js","node_modules/proj4/lib/datum.js","node_modules/proj4/lib/nadgrid.js","node_modules/proj4/lib/Proj.js","node_modules/proj4/lib/datumUtils.js","node_modules/proj4/lib/datum_transform.js","node_modules/proj4/lib/adjust_axis.js","node_modules/proj4/lib/common/toPoint.js","node_modules/proj4/lib/checkSanity.js","node_modules/proj4/lib/transform.js","node_modules/proj4/lib/core.js","node_modules/mgrs/mgrs.js","node_modules/proj4/lib/Point.js","node_modules/proj4/lib/common/pj_enfn.js","node_modules/proj4/lib/common/pj_mlfn.js","node_modules/proj4/lib/common/pj_inv_mlfn.js","node_modules/proj4/lib/projections/tmerc.js","node_modules/proj4/lib/common/sinh.js","node_modules/proj4/lib/common/hypot.js","node_modules/proj4/lib/common/log1py.js","node_modules/proj4/lib/common/asinhy.js","node_modules/proj4/lib/common/gatg.js","node_modules/proj4/lib/common/clens.js","node_modules/proj4/lib/common/cosh.js","node_modules/proj4/lib/common/clens_cmplx.js","node_modules/proj4/lib/projections/etmerc.js","node_modules/proj4/lib/common/adjust_zone.js","node_modules/proj4/lib/projections/utm.js","node_modules/proj4/lib/common/srat.js","node_modules/proj4/lib/projections/gauss.js","node_modules/proj4/lib/projections/sterea.js","node_modules/proj4/lib/projections/stere.js","node_modules/proj4/lib/projections/somerc.js","node_modules/proj4/lib/projections/omerc.js","node_modules/proj4/lib/projections/lcc.js","node_modules/proj4/lib/projections/krovak.js","node_modules/proj4/lib/common/mlfn.js","node_modules/proj4/lib/common/e0fn.js","node_modules/proj4/lib/common/e1fn.js","node_modules/proj4/lib/common/e2fn.js","node_modules/proj4/lib/common/e3fn.js","node_modules/proj4/lib/common/gN.js","node_modules/proj4/lib/common/adjust_lat.js","node_modules/proj4/lib/common/imlfn.js","node_modules/proj4/lib/projections/cass.js","node_modules/proj4/lib/common/qsfnz.js","node_modules/proj4/lib/projections/laea.js","node_modules/proj4/lib/common/asinz.js","node_modules/proj4/lib/projections/aea.js","node_modules/proj4/lib/projections/gnom.js","node_modules/proj4/lib/common/iqsfnz.js","node_modules/proj4/lib/projections/cea.js","node_modules/proj4/lib/projections/eqc.js","node_modules/proj4/lib/projections/poly.js","node_modules/proj4/lib/projections/nzmg.js","node_modules/proj4/lib/projections/mill.js","node_modules/proj4/lib/projections/sinu.js","node_modules/proj4/lib/projections/moll.js","node_modules/proj4/lib/projections/eqdc.js","node_modules/proj4/lib/projections/vandg.js","node_modules/proj4/lib/projections/aeqd.js","node_modules/proj4/lib/projections/ortho.js","node_modules/proj4/lib/projections/qsc.js","node_modules/proj4/lib/projections/robin.js","node_modules/proj4/lib/projections/geocent.js","node_modules/proj4/lib/projections/tpers.js","node_modules/proj4/lib/projections/geos.js","node_modules/proj4/projs.js","node_modules/proj4/lib/index.js","node_modules/ol/source/ImageWMS.js","node_modules/ol/source/Image.js","node_modules/ol/reproj/Image.js","src/index.js","node_modules/ol/source/wms.js","node_modules/ol-layerswitcher/dist/ol-layerswitcher.js","node_modules/ol/proj/proj4.js"],"sourcesContent":["/**\n * @module ol/Observable\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport {listen, listenOnce, unlistenByKey} from './events.js';\n\n/***\n * @template {string} Type\n * @template {Event|import(\"./events/Event.js\").default} EventClass\n * @template Return\n * @typedef {(type: Type, listener: (event: EventClass) => ?) => Return} OnSignature\n */\n\n/***\n * @template {string} Type\n * @template Return\n * @typedef {(type: Type[], listener: (event: Event|import(\"./events/Event\").default) => ?) => Return extends void ? void : Return[]} CombinedOnSignature\n */\n\n/**\n * @typedef {'change'|'error'} EventTypes\n */\n\n/***\n * @template Return\n * @typedef {OnSignature<EventTypes, import(\"./events/Event.js\").default, Return> & CombinedOnSignature<EventTypes, Return>} ObservableOnSignature\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires import(\"./events/Event.js\").default\n * @api\n */\nclass Observable extends EventTarget {\n  constructor() {\n    super();\n\n    this.on =\n      /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (\n        this.onInternal\n      );\n\n    this.once =\n      /** @type {ObservableOnSignature<import(\"./events\").EventsKey>} */ (\n        this.onceInternal\n      );\n\n    this.un = /** @type {ObservableOnSignature<void>} */ (this.unInternal);\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.revision_ = 0;\n  }\n\n  /**\n   * Increases the revision counter and dispatches a 'change' event.\n   * @api\n   */\n  changed() {\n    ++this.revision_;\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * Get the version number for this object.  Each time the object is modified,\n   * its version number will be incremented.\n   * @return {number} Revision.\n   * @api\n   */\n  getRevision() {\n    return this.revision_;\n  }\n\n  /**\n   * @param {string|Array<string>} type Type.\n   * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n   * @protected\n   */\n  onInternal(type, listener) {\n    if (Array.isArray(type)) {\n      const len = type.length;\n      const keys = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        keys[i] = listen(this, type[i], listener);\n      }\n      return keys;\n    } else {\n      return listen(this, /** @type {string} */ (type), listener);\n    }\n  }\n\n  /**\n   * @param {string|Array<string>} type Type.\n   * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Event key.\n   * @protected\n   */\n  onceInternal(type, listener) {\n    let key;\n    if (Array.isArray(type)) {\n      const len = type.length;\n      key = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        key[i] = listenOnce(this, type[i], listener);\n      }\n    } else {\n      key = listenOnce(this, /** @type {string} */ (type), listener);\n    }\n    /** @type {Object} */ (listener).ol_key = key;\n    return key;\n  }\n\n  /**\n   * Unlisten for a certain type of event.\n   * @param {string|Array<string>} type Type.\n   * @param {function((Event|import(\"./events/Event\").default)): ?} listener Listener.\n   * @protected\n   */\n  unInternal(type, listener) {\n    const key = /** @type {Object} */ (listener).ol_key;\n    if (key) {\n      unByKey(key);\n    } else if (Array.isArray(type)) {\n      for (let i = 0, ii = type.length; i < ii; ++i) {\n        this.removeEventListener(type[i], listener);\n      }\n    } else {\n      this.removeEventListener(type, listener);\n    }\n  }\n}\n\n/**\n * Listen for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.on;\n\n/**\n * Listen once for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n *     called with an array of event types as the first argument, the return\n *     will be an array of keys.\n * @api\n */\nObservable.prototype.once;\n\n/**\n * Unlisten for a certain type of event.\n * @function\n * @param {string|Array<string>} type The event type or array of event types.\n * @param {function((Event|import(\"./events/Event\").default)): ?} listener The listener function.\n * @api\n */\nObservable.prototype.un;\n\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n  if (Array.isArray(key)) {\n    for (let i = 0, ii = key.length; i < ii; ++i) {\n      unlistenByKey(key[i]);\n    }\n  } else {\n    unlistenByKey(/** @type {import(\"./events.js\").EventsKey} */ (key));\n  }\n}\n\nexport default Observable;\n","/**\n * @module ol/events/Target\n */\nimport Disposable from '../Disposable.js';\nimport Event from './Event.js';\nimport {VOID} from '../functions.js';\nimport {clear} from '../obj.js';\n\n/**\n * @typedef {EventTarget|Target} EventTargetLike\n */\n\n/**\n * @classdesc\n * A simplified implementation of the W3C DOM Level 2 EventTarget interface.\n * See https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget.\n *\n * There are two important simplifications compared to the specification:\n *\n * 1. The handling of `useCapture` in `addEventListener` and\n *    `removeEventListener`. There is no real capture model.\n * 2. The handling of `stopPropagation` and `preventDefault` on `dispatchEvent`.\n *    There is no event target hierarchy. When a listener calls\n *    `stopPropagation` or `preventDefault` on an event object, it means that no\n *    more listeners after this one will be called. Same as when the listener\n *    returns false.\n */\nclass Target extends Disposable {\n  /**\n   * @param {*} [target] Default event target for dispatched events.\n   */\n  constructor(target) {\n    super();\n\n    /**\n     * @private\n     * @type {*}\n     */\n    this.eventTarget_ = target;\n\n    /**\n     * @private\n     * @type {Object<string, number>}\n     */\n    this.pendingRemovals_ = null;\n\n    /**\n     * @private\n     * @type {Object<string, number>}\n     */\n    this.dispatching_ = null;\n\n    /**\n     * @private\n     * @type {Object<string, Array<import(\"../events.js\").Listener>>}\n     */\n    this.listeners_ = null;\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../events.js\").Listener} listener Listener.\n   */\n  addEventListener(type, listener) {\n    if (!type || !listener) {\n      return;\n    }\n    const listeners = this.listeners_ || (this.listeners_ = {});\n    const listenersForType = listeners[type] || (listeners[type] = []);\n    if (!listenersForType.includes(listener)) {\n      listenersForType.push(listener);\n    }\n  }\n\n  /**\n   * Dispatches an event and calls all listeners listening for events\n   * of this type. The event parameter can either be a string or an\n   * Object with a `type` property.\n   *\n   * @param {import(\"./Event.js\").default|string} event Event object.\n   * @return {boolean|undefined} `false` if anyone called preventDefault on the\n   *     event object or if any of the listeners returned false.\n   * @api\n   */\n  dispatchEvent(event) {\n    const isString = typeof event === 'string';\n    const type = isString ? event : event.type;\n    const listeners = this.listeners_ && this.listeners_[type];\n    if (!listeners) {\n      return;\n    }\n\n    const evt = isString ? new Event(event) : /** @type {Event} */ (event);\n    if (!evt.target) {\n      evt.target = this.eventTarget_ || this;\n    }\n    const dispatching = this.dispatching_ || (this.dispatching_ = {});\n    const pendingRemovals =\n      this.pendingRemovals_ || (this.pendingRemovals_ = {});\n    if (!(type in dispatching)) {\n      dispatching[type] = 0;\n      pendingRemovals[type] = 0;\n    }\n    ++dispatching[type];\n    let propagate;\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\n      if ('handleEvent' in listeners[i]) {\n        propagate = /** @type {import(\"../events.js\").ListenerObject} */ (\n          listeners[i]\n        ).handleEvent(evt);\n      } else {\n        propagate = /** @type {import(\"../events.js\").ListenerFunction} */ (\n          listeners[i]\n        ).call(this, evt);\n      }\n      if (propagate === false || evt.propagationStopped) {\n        propagate = false;\n        break;\n      }\n    }\n    if (--dispatching[type] === 0) {\n      let pr = pendingRemovals[type];\n      delete pendingRemovals[type];\n      while (pr--) {\n        this.removeEventListener(type, VOID);\n      }\n      delete dispatching[type];\n    }\n    return propagate;\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    this.listeners_ && clear(this.listeners_);\n  }\n\n  /**\n   * Get the listeners for a specified event type. Listeners are returned in the\n   * order that they will be called in.\n   *\n   * @param {string} type Type.\n   * @return {Array<import(\"../events.js\").Listener>|undefined} Listeners.\n   */\n  getListeners(type) {\n    return (this.listeners_ && this.listeners_[type]) || undefined;\n  }\n\n  /**\n   * @param {string} [type] Type. If not provided,\n   *     `true` will be returned if this event target has any listeners.\n   * @return {boolean} Has listeners.\n   */\n  hasListener(type) {\n    if (!this.listeners_) {\n      return false;\n    }\n    return type\n      ? type in this.listeners_\n      : Object.keys(this.listeners_).length > 0;\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../events.js\").Listener} listener Listener.\n   */\n  removeEventListener(type, listener) {\n    const listeners = this.listeners_ && this.listeners_[type];\n    if (listeners) {\n      const index = listeners.indexOf(listener);\n      if (index !== -1) {\n        if (this.pendingRemovals_ && type in this.pendingRemovals_) {\n          // make listener a no-op, and remove later in #dispatchEvent()\n          listeners[index] = VOID;\n          ++this.pendingRemovals_[type];\n        } else {\n          listeners.splice(index, 1);\n          if (listeners.length === 0) {\n            delete this.listeners_[type];\n          }\n        }\n      }\n    }\n  }\n}\n\nexport default Target;\n","/**\n * @module ol/Disposable\n */\n\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nclass Disposable {\n  constructor() {\n    /**\n     * The object has already been disposed.\n     * @type {boolean}\n     * @protected\n     */\n    this.disposed = false;\n  }\n\n  /**\n   * Clean up.\n   */\n  dispose() {\n    if (!this.disposed) {\n      this.disposed = true;\n      this.disposeInternal();\n    }\n  }\n\n  /**\n   * Extension point for disposable objects.\n   * @protected\n   */\n  disposeInternal() {}\n}\n\nexport default Disposable;\n","/**\n * @module ol/events/Event\n */\n\n/**\n * @classdesc\n * Stripped down implementation of the W3C DOM Level 2 Event interface.\n * See https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface.\n *\n * This implementation only provides `type` and `target` properties, and\n * `stopPropagation` and `preventDefault` methods. It is meant as base class\n * for higher level events defined in the library, and works with\n * {@link module:ol/events/Target~Target}.\n */\nclass BaseEvent {\n  /**\n   * @param {string} type Type.\n   */\n  constructor(type) {\n    /**\n     * @type {boolean}\n     */\n    this.propagationStopped;\n\n    /**\n     * @type {boolean}\n     */\n    this.defaultPrevented;\n\n    /**\n     * The event type.\n     * @type {string}\n     * @api\n     */\n    this.type = type;\n\n    /**\n     * The event target.\n     * @type {Object}\n     * @api\n     */\n    this.target = null;\n  }\n\n  /**\n   * Prevent default. This means that no emulated `click`, `singleclick` or `doubleclick` events\n   * will be fired.\n   * @api\n   */\n  preventDefault() {\n    this.defaultPrevented = true;\n  }\n\n  /**\n   * Stop event propagation.\n   * @api\n   */\n  stopPropagation() {\n    this.propagationStopped = true;\n  }\n}\n\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function stopPropagation(evt) {\n  evt.stopPropagation();\n}\n\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function preventDefault(evt) {\n  evt.preventDefault();\n}\n\nexport default BaseEvent;\n","/**\n * @module ol/functions\n */\n\nimport {equals as arrayEquals} from './array.js';\n\n/**\n * Always returns true.\n * @return {boolean} true.\n */\nexport function TRUE() {\n  return true;\n}\n\n/**\n * Always returns false.\n * @return {boolean} false.\n */\nexport function FALSE() {\n  return false;\n}\n\n/**\n * A reusable function, used e.g. as a default for callbacks.\n *\n * @return {void} Nothing.\n */\nexport function VOID() {}\n\n/**\n * Wrap a function in another function that remembers the last return.  If the\n * returned function is called twice in a row with the same arguments and the same\n * this object, it will return the value from the first call in the second call.\n *\n * @param {function(...any): ReturnType} fn The function to memoize.\n * @return {function(...any): ReturnType} The memoized function.\n * @template ReturnType\n */\nexport function memoizeOne(fn) {\n  let called = false;\n\n  /** @type {ReturnType} */\n  let lastResult;\n\n  /** @type {Array<any>} */\n  let lastArgs;\n\n  let lastThis;\n\n  return function () {\n    const nextArgs = Array.prototype.slice.call(arguments);\n    if (!called || this !== lastThis || !arrayEquals(nextArgs, lastArgs)) {\n      called = true;\n      lastThis = this;\n      lastArgs = nextArgs;\n      lastResult = fn.apply(this, arguments);\n    }\n    return lastResult;\n  };\n}\n\n/**\n * @template T\n * @param {function(): (T | Promise<T>)} getter A function that returns a value or a promise for a value.\n * @return {Promise<T>} A promise for the value.\n */\nexport function toPromise(getter) {\n  function promiseGetter() {\n    let value;\n    try {\n      value = getter();\n    } catch (err) {\n      return Promise.reject(err);\n    }\n    if (value instanceof Promise) {\n      return value;\n    }\n    return Promise.resolve(value);\n  }\n  return promiseGetter();\n}\n","/**\n * @module ol/array\n */\n\n/**\n * Performs a binary search on the provided sorted list and returns the index of the item if found. If it can't be found it'll return -1.\n * https://github.com/darkskyapp/binary-search\n *\n * @param {Array<*>} haystack Items to search through.\n * @param {*} needle The item to look for.\n * @param {Function} [comparator] Comparator function.\n * @return {number} The index of the item if found, -1 if not.\n */\nexport function binarySearch(haystack, needle, comparator) {\n  let mid, cmp;\n  comparator = comparator || numberSafeCompareFunction;\n  let low = 0;\n  let high = haystack.length;\n  let found = false;\n\n  while (low < high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + ((high - low) >> 1);\n    cmp = +comparator(haystack[mid], needle);\n\n    if (cmp < 0.0) {\n      /* Too low. */\n      low = mid + 1;\n    } else {\n      /* Key found or too high */\n      high = mid;\n      found = !cmp;\n    }\n  }\n\n  /* Key not found. */\n  return found ? low : ~low;\n}\n\n/**\n * Compare function for array sort that is safe for numbers.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second.\n */\nexport function numberSafeCompareFunction(a, b) {\n  return a > b ? 1 : a < b ? -1 : 0;\n}\n\n/**\n * {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution} can use a function\n * of this type to determine which nearest resolution to use.\n *\n * This function takes a `{number}` representing a value between two array entries,\n * a `{number}` representing the value of the nearest higher entry and\n * a `{number}` representing the value of the nearest lower entry\n * as arguments and returns a `{number}`. If a negative number or zero is returned\n * the lower value will be used, if a positive number is returned the higher value\n * will be used.\n * @typedef {function(number, number, number): number} NearestDirectionFunction\n * @api\n */\n\n/**\n * @param {Array<number>} arr Array in descending order.\n * @param {number} target Target.\n * @param {number|NearestDirectionFunction} direction\n *    0 means return the nearest,\n *    > 0 means return the largest nearest,\n *    < 0 means return the smallest nearest.\n * @return {number} Index.\n */\nexport function linearFindNearest(arr, target, direction) {\n  const n = arr.length;\n  if (arr[0] <= target) {\n    return 0;\n  } else if (target <= arr[n - 1]) {\n    return n - 1;\n  } else {\n    let i;\n    if (direction > 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] < target) {\n          return i - 1;\n        }\n      }\n    } else if (direction < 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] <= target) {\n          return i;\n        }\n      }\n    } else {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] == target) {\n          return i;\n        } else if (arr[i] < target) {\n          if (typeof direction === 'function') {\n            if (direction(target, arr[i - 1], arr[i]) > 0) {\n              return i - 1;\n            } else {\n              return i;\n            }\n          } else if (arr[i - 1] - target < target - arr[i]) {\n            return i - 1;\n          } else {\n            return i;\n          }\n        }\n      }\n    }\n    return n - 1;\n  }\n}\n\n/**\n * @param {Array<*>} arr Array.\n * @param {number} begin Begin index.\n * @param {number} end End index.\n */\nexport function reverseSubArray(arr, begin, end) {\n  while (begin < end) {\n    const tmp = arr[begin];\n    arr[begin] = arr[end];\n    arr[end] = tmp;\n    ++begin;\n    --end;\n  }\n}\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {!Array<VALUE>|VALUE} data The elements or arrays of elements to add to arr.\n * @template VALUE\n */\nexport function extend(arr, data) {\n  const extension = Array.isArray(data) ? data : [data];\n  const length = extension.length;\n  for (let i = 0; i < length; i++) {\n    arr[arr.length] = extension[i];\n  }\n}\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {VALUE} obj The element to remove.\n * @template VALUE\n * @return {boolean} If the element was removed.\n */\nexport function remove(arr, obj) {\n  const i = arr.indexOf(obj);\n  const found = i > -1;\n  if (found) {\n    arr.splice(i, 1);\n  }\n  return found;\n}\n\n/**\n * @param {Array|Uint8ClampedArray} arr1 The first array to compare.\n * @param {Array|Uint8ClampedArray} arr2 The second array to compare.\n * @return {boolean} Whether the two arrays are equal.\n */\nexport function equals(arr1, arr2) {\n  const len1 = arr1.length;\n  if (len1 !== arr2.length) {\n    return false;\n  }\n  for (let i = 0; i < len1; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Sort the passed array such that the relative order of equal elements is preserved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n * @api\n */\nexport function stableSort(arr, compareFnc) {\n  const length = arr.length;\n  const tmp = Array(arr.length);\n  let i;\n  for (i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]};\n  }\n  tmp.sort(function (a, b) {\n    return compareFnc(a.value, b.value) || a.index - b.index;\n  });\n  for (i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value;\n  }\n}\n\n/**\n * @param {Array<*>} arr The array to test.\n * @param {Function} [func] Comparison function.\n * @param {boolean} [strict] Strictly sorted (default false).\n * @return {boolean} Return index.\n */\nexport function isSorted(arr, func, strict) {\n  const compare = func || numberSafeCompareFunction;\n  return arr.every(function (currentVal, index) {\n    if (index === 0) {\n      return true;\n    }\n    const res = compare(arr[index - 1], currentVal);\n    return !(res > 0 || (strict && res === 0));\n  });\n}\n","/**\n * @module ol/obj\n */\n\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\nexport function clear(object) {\n  for (const property in object) {\n    delete object[property];\n  }\n}\n\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n  let property;\n  for (property in object) {\n    return false;\n  }\n  return !property;\n}\n","/**\n * @module ol/events/EventType\n */\n\n/**\n * @enum {string}\n * @const\n */\nexport default {\n  /**\n   * Generic change event. Triggered when the revision counter is increased.\n   * @event module:ol/events/Event~BaseEvent#change\n   * @api\n   */\n  CHANGE: 'change',\n\n  /**\n   * Generic error event. Triggered when an error occurs.\n   * @event module:ol/events/Event~BaseEvent#error\n   * @api\n   */\n  ERROR: 'error',\n\n  BLUR: 'blur',\n  CLEAR: 'clear',\n  CONTEXTMENU: 'contextmenu',\n  CLICK: 'click',\n  DBLCLICK: 'dblclick',\n  DRAGENTER: 'dragenter',\n  DRAGOVER: 'dragover',\n  DROP: 'drop',\n  FOCUS: 'focus',\n  KEYDOWN: 'keydown',\n  KEYPRESS: 'keypress',\n  LOAD: 'load',\n  RESIZE: 'resize',\n  TOUCHMOVE: 'touchmove',\n  WHEEL: 'wheel',\n};\n","/**\n * @module ol/events\n */\nimport {clear} from './obj.js';\n\n/**\n * Key to use with {@link module:ol/Observable.unByKey}.\n * @typedef {Object} EventsKey\n * @property {ListenerFunction} listener Listener.\n * @property {import(\"./events/Target.js\").EventTargetLike} target Target.\n * @property {string} type Type.\n * @api\n */\n\n/**\n * Listener function. This function is called with an event object as argument.\n * When the function returns `false`, event propagation will stop.\n *\n * @typedef {function((Event|import(\"./events/Event.js\").default)): (void|boolean)} ListenerFunction\n * @api\n */\n\n/**\n * @typedef {Object} ListenerObject\n * @property {ListenerFunction} handleEvent HandleEvent listener function.\n */\n\n/**\n * @typedef {ListenerFunction|ListenerObject} Listener\n */\n\n/**\n * Registers an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link module:ol/events.unlistenByKey}.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [thisArg] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean} [once] If true, add the listener as one-off listener.\n * @return {EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, thisArg, once) {\n  if (thisArg && thisArg !== target) {\n    listener = listener.bind(thisArg);\n  }\n  if (once) {\n    const originalListener = listener;\n    listener = function () {\n      target.removeEventListener(type, listener);\n      originalListener.apply(this, arguments);\n    };\n  }\n  const eventsKey = {\n    target: target,\n    type: type,\n    listener: listener,\n  };\n  target.addEventListener(type, listener);\n  return eventsKey;\n}\n\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link module:ol/events.unlistenByKey} in case the listener needs to be\n * unregistered before it is called.\n *\n * When {@link module:ol/events.listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object} [thisArg] Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, thisArg) {\n  return listen(target, type, listener, thisArg, true);\n}\n\n/**\n * Unregisters event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * The argument passed to this function is the key returned from\n * {@link module:ol/events.listen} or {@link module:ol/events.listenOnce}.\n *\n * @param {EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n  if (key && key.target) {\n    key.target.removeEventListener(key.type, key.listener);\n    clear(key);\n  }\n}\n","/**\n * @module ol/layer/Group\n */\nimport BaseLayer from './Base.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport {assert} from '../asserts.js';\nimport {clear} from '../obj.js';\nimport {getIntersection} from '../extent.js';\nimport {getUid} from '../util.js';\nimport {listen, unlistenByKey} from '../events.js';\n\n/**\n * @typedef {'addlayer'|'removelayer'} EventType\n */\n\n/**\n * @classdesc\n * A layer group triggers 'addlayer' and 'removelayer' events when layers are added to or removed from\n * the group or one of its child groups.  When a layer group is added to or removed from another layer group,\n * a single event will be triggered (instead of one per layer in the group added or removed).\n */\nexport class GroupEvent extends Event {\n  /**\n   * @param {EventType} type The event type.\n   * @param {BaseLayer} layer The layer.\n   */\n  constructor(type, layer) {\n    super(type);\n\n    /**\n     * The added or removed layer.\n     * @type {BaseLayer}\n     * @api\n     */\n    this.layer = layer;\n  }\n}\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./Base\").BaseLayerObjectEventTypes|\n *     'change:layers', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"./Base\").BaseLayerObjectEventTypes|'change:layers', Return>} GroupOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {Array<import(\"./Base.js\").default>|Collection<import(\"./Base.js\").default>} [layers] Child layers.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  LAYERS: 'layers',\n};\n\n/**\n * @classdesc\n * A {@link module:ol/Collection~Collection} of layers that are handled together.\n *\n * A generic `change` event is triggered when the group/Collection changes.\n *\n * @api\n */\nclass LayerGroup extends BaseLayer {\n  /**\n   * @param {Options} [options] Layer options.\n   */\n  constructor(options) {\n    options = options || {};\n    const baseOptions = /** @type {Options} */ (Object.assign({}, options));\n    delete baseOptions.layers;\n\n    let layers = options.layers;\n\n    super(baseOptions);\n\n    /***\n     * @type {GroupOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {GroupOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {GroupOnSignature<void>}\n     */\n    this.un;\n\n    /**\n     * @private\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n    this.layersListenerKeys_ = [];\n\n    /**\n     * @private\n     * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n     */\n    this.listenerKeys_ = {};\n\n    this.addChangeListener(Property.LAYERS, this.handleLayersChanged_);\n\n    if (layers) {\n      if (Array.isArray(layers)) {\n        layers = new Collection(layers.slice(), {unique: true});\n      } else {\n        assert(typeof (/** @type {?} */ (layers).getArray) === 'function', 43); // Expected `layers` to be an array or a `Collection`\n      }\n    } else {\n      layers = new Collection(undefined, {unique: true});\n    }\n\n    this.setLayers(layers);\n  }\n\n  /**\n   * @private\n   */\n  handleLayerChange_() {\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  handleLayersChanged_() {\n    this.layersListenerKeys_.forEach(unlistenByKey);\n    this.layersListenerKeys_.length = 0;\n\n    const layers = this.getLayers();\n    this.layersListenerKeys_.push(\n      listen(layers, CollectionEventType.ADD, this.handleLayersAdd_, this),\n      listen(layers, CollectionEventType.REMOVE, this.handleLayersRemove_, this)\n    );\n\n    for (const id in this.listenerKeys_) {\n      this.listenerKeys_[id].forEach(unlistenByKey);\n    }\n    clear(this.listenerKeys_);\n\n    const layersArray = layers.getArray();\n    for (let i = 0, ii = layersArray.length; i < ii; i++) {\n      const layer = layersArray[i];\n      this.registerLayerListeners_(layer);\n      this.dispatchEvent(new GroupEvent('addlayer', layer));\n    }\n    this.changed();\n  }\n\n  /**\n   * @param {BaseLayer} layer The layer.\n   */\n  registerLayerListeners_(layer) {\n    const listenerKeys = [\n      listen(\n        layer,\n        ObjectEventType.PROPERTYCHANGE,\n        this.handleLayerChange_,\n        this\n      ),\n      listen(layer, EventType.CHANGE, this.handleLayerChange_, this),\n    ];\n\n    if (layer instanceof LayerGroup) {\n      listenerKeys.push(\n        listen(layer, 'addlayer', this.handleLayerGroupAdd_, this),\n        listen(layer, 'removelayer', this.handleLayerGroupRemove_, this)\n      );\n    }\n\n    this.listenerKeys_[getUid(layer)] = listenerKeys;\n  }\n\n  /**\n   * @param {GroupEvent} event The layer group event.\n   */\n  handleLayerGroupAdd_(event) {\n    this.dispatchEvent(new GroupEvent('addlayer', event.layer));\n  }\n\n  /**\n   * @param {GroupEvent} event The layer group event.\n   */\n  handleLayerGroupRemove_(event) {\n    this.dispatchEvent(new GroupEvent('removelayer', event.layer));\n  }\n\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent<import(\"./Base.js\").default>} collectionEvent CollectionEvent.\n   * @private\n   */\n  handleLayersAdd_(collectionEvent) {\n    const layer = collectionEvent.element;\n    this.registerLayerListeners_(layer);\n    this.dispatchEvent(new GroupEvent('addlayer', layer));\n    this.changed();\n  }\n\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent<import(\"./Base.js\").default>} collectionEvent CollectionEvent.\n   * @private\n   */\n  handleLayersRemove_(collectionEvent) {\n    const layer = collectionEvent.element;\n    const key = getUid(layer);\n    this.listenerKeys_[key].forEach(unlistenByKey);\n    delete this.listenerKeys_[key];\n    this.dispatchEvent(new GroupEvent('removelayer', layer));\n    this.changed();\n  }\n\n  /**\n   * Returns the {@link module:ol/Collection~Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n   * in this group.\n   * @return {!Collection<import(\"./Base.js\").default>} Collection of\n   *   {@link module:ol/layer/Base~BaseLayer layers} that are part of this group.\n   * @observable\n   * @api\n   */\n  getLayers() {\n    return /** @type {!Collection<import(\"./Base.js\").default>} */ (\n      this.get(Property.LAYERS)\n    );\n  }\n\n  /**\n   * Set the {@link module:ol/Collection~Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n   * in this group.\n   * @param {!Collection<import(\"./Base.js\").default>} layers Collection of\n   *   {@link module:ol/layer/Base~BaseLayer layers} that are part of this group.\n   * @observable\n   * @api\n   */\n  setLayers(layers) {\n    const collection = this.getLayers();\n    if (collection) {\n      const currentLayers = collection.getArray();\n      for (let i = 0, ii = currentLayers.length; i < ii; ++i) {\n        this.dispatchEvent(new GroupEvent('removelayer', currentLayers[i]));\n      }\n    }\n\n    this.set(Property.LAYERS, layers);\n  }\n\n  /**\n   * @param {Array<import(\"./Layer.js\").default>} [array] Array of layers (to be modified in place).\n   * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n   */\n  getLayersArray(array) {\n    array = array !== undefined ? array : [];\n    this.getLayers().forEach(function (layer) {\n      layer.getLayersArray(array);\n    });\n    return array;\n  }\n\n  /**\n   * Get the layer states list and use this groups z-index as the default\n   * for all layers in this and nested groups, if it is unset at this point.\n   * If dest is not provided and this group's z-index is undefined\n   * 0 is used a the default z-index.\n   * @param {Array<import(\"./Layer.js\").State>} [dest] Optional list\n   * of layer states (to be modified in place).\n   * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n   */\n  getLayerStatesArray(dest) {\n    const states = dest !== undefined ? dest : [];\n    const pos = states.length;\n\n    this.getLayers().forEach(function (layer) {\n      layer.getLayerStatesArray(states);\n    });\n\n    const ownLayerState = this.getLayerState();\n    let defaultZIndex = ownLayerState.zIndex;\n    if (!dest && ownLayerState.zIndex === undefined) {\n      defaultZIndex = 0;\n    }\n    for (let i = pos, ii = states.length; i < ii; i++) {\n      const layerState = states[i];\n      layerState.opacity *= ownLayerState.opacity;\n      layerState.visible = layerState.visible && ownLayerState.visible;\n      layerState.maxResolution = Math.min(\n        layerState.maxResolution,\n        ownLayerState.maxResolution\n      );\n      layerState.minResolution = Math.max(\n        layerState.minResolution,\n        ownLayerState.minResolution\n      );\n      layerState.minZoom = Math.max(layerState.minZoom, ownLayerState.minZoom);\n      layerState.maxZoom = Math.min(layerState.maxZoom, ownLayerState.maxZoom);\n      if (ownLayerState.extent !== undefined) {\n        if (layerState.extent !== undefined) {\n          layerState.extent = getIntersection(\n            layerState.extent,\n            ownLayerState.extent\n          );\n        } else {\n          layerState.extent = ownLayerState.extent;\n        }\n      }\n      if (layerState.zIndex === undefined) {\n        layerState.zIndex = defaultZIndex;\n      }\n    }\n\n    return states;\n  }\n\n  /**\n   * @return {import(\"../source/Source.js\").State} Source state.\n   */\n  getSourceState() {\n    return 'ready';\n  }\n}\n\nexport default LayerGroup;\n","/**\n * @module ol/layer/Base\n */\nimport BaseObject from '../Object.js';\nimport LayerProperty from './Property.js';\nimport {abstract} from '../util.js';\nimport {assert} from '../asserts.js';\nimport {clamp} from '../math.js';\n\n/**\n * A css color, or a function called with a view resolution returning a css color.\n *\n * @typedef {string|function(number):string} BackgroundColor\n * @api\n */\n\n/**\n * @typedef {import(\"../ObjectEventType\").Types|'change:extent'|'change:maxResolution'|'change:maxZoom'|\n *    'change:minResolution'|'change:minZoom'|'change:opacity'|'change:visible'|'change:zIndex'} BaseLayerObjectEventTypes\n */\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<BaseLayerObjectEventTypes, import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|BaseLayerObjectEventTypes, Return>} BaseLayerOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {BackgroundColor} [background] Background color for the layer. If not specified, no background\n * will be rendered.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Note that with {@link module:ol/layer/Base~BaseLayer} and all its subclasses, any property set in\n * the options is set as a {@link module:ol/Object~BaseObject} property on the layer object, so\n * is observable, and has get/set accessors.\n *\n * @api\n */\nclass BaseLayer extends BaseObject {\n  /**\n   * @param {Options} options Layer options.\n   */\n  constructor(options) {\n    super();\n\n    /***\n     * @type {BaseLayerOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {BaseLayerOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {BaseLayerOnSignature<void>}\n     */\n    this.un;\n\n    /**\n     * @type {BackgroundColor|false}\n     * @private\n     */\n    this.background_ = options.background;\n\n    /**\n     * @type {Object<string, *>}\n     */\n    const properties = Object.assign({}, options);\n    if (typeof options.properties === 'object') {\n      delete properties.properties;\n      Object.assign(properties, options.properties);\n    }\n\n    properties[LayerProperty.OPACITY] =\n      options.opacity !== undefined ? options.opacity : 1;\n    assert(typeof properties[LayerProperty.OPACITY] === 'number', 64); // Layer opacity must be a number\n\n    properties[LayerProperty.VISIBLE] =\n      options.visible !== undefined ? options.visible : true;\n    properties[LayerProperty.Z_INDEX] = options.zIndex;\n    properties[LayerProperty.MAX_RESOLUTION] =\n      options.maxResolution !== undefined ? options.maxResolution : Infinity;\n    properties[LayerProperty.MIN_RESOLUTION] =\n      options.minResolution !== undefined ? options.minResolution : 0;\n    properties[LayerProperty.MIN_ZOOM] =\n      options.minZoom !== undefined ? options.minZoom : -Infinity;\n    properties[LayerProperty.MAX_ZOOM] =\n      options.maxZoom !== undefined ? options.maxZoom : Infinity;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.className_ =\n      properties.className !== undefined ? properties.className : 'ol-layer';\n    delete properties.className;\n\n    this.setProperties(properties);\n\n    /**\n     * @type {import(\"./Layer.js\").State}\n     * @private\n     */\n    this.state_ = null;\n  }\n\n  /**\n   * Get the background for this layer.\n   * @return {BackgroundColor|false} Layer background.\n   */\n  getBackground() {\n    return this.background_;\n  }\n\n  /**\n   * @return {string} CSS class name.\n   */\n  getClassName() {\n    return this.className_;\n  }\n\n  /**\n   * This method is not meant to be called by layers or layer renderers because the state\n   * is incorrect if the layer is included in a layer group.\n   *\n   * @param {boolean} [managed] Layer is managed.\n   * @return {import(\"./Layer.js\").State} Layer state.\n   */\n  getLayerState(managed) {\n    /** @type {import(\"./Layer.js\").State} */\n    const state =\n      this.state_ ||\n      /** @type {?} */ ({\n        layer: this,\n        managed: managed === undefined ? true : managed,\n      });\n    const zIndex = this.getZIndex();\n    state.opacity = clamp(Math.round(this.getOpacity() * 100) / 100, 0, 1);\n    state.visible = this.getVisible();\n    state.extent = this.getExtent();\n    state.zIndex = zIndex === undefined && !state.managed ? Infinity : zIndex;\n    state.maxResolution = this.getMaxResolution();\n    state.minResolution = Math.max(this.getMinResolution(), 0);\n    state.minZoom = this.getMinZoom();\n    state.maxZoom = this.getMaxZoom();\n    this.state_ = state;\n\n    return state;\n  }\n\n  /**\n   * @abstract\n   * @param {Array<import(\"./Layer.js\").default>} [array] Array of layers (to be\n   *     modified in place).\n   * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n   */\n  getLayersArray(array) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {Array<import(\"./Layer.js\").State>} [states] Optional list of layer\n   *     states (to be modified in place).\n   * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n   */\n  getLayerStatesArray(states) {\n    return abstract();\n  }\n\n  /**\n   * Return the {@link module:ol/extent~Extent extent} of the layer or `undefined` if it\n   * will be visible regardless of extent.\n   * @return {import(\"../extent.js\").Extent|undefined} The layer extent.\n   * @observable\n   * @api\n   */\n  getExtent() {\n    return /** @type {import(\"../extent.js\").Extent|undefined} */ (\n      this.get(LayerProperty.EXTENT)\n    );\n  }\n\n  /**\n   * Return the maximum resolution of the layer.\n   * @return {number} The maximum resolution of the layer.\n   * @observable\n   * @api\n   */\n  getMaxResolution() {\n    return /** @type {number} */ (this.get(LayerProperty.MAX_RESOLUTION));\n  }\n\n  /**\n   * Return the minimum resolution of the layer.\n   * @return {number} The minimum resolution of the layer.\n   * @observable\n   * @api\n   */\n  getMinResolution() {\n    return /** @type {number} */ (this.get(LayerProperty.MIN_RESOLUTION));\n  }\n\n  /**\n   * Return the minimum zoom level of the layer.\n   * @return {number} The minimum zoom level of the layer.\n   * @observable\n   * @api\n   */\n  getMinZoom() {\n    return /** @type {number} */ (this.get(LayerProperty.MIN_ZOOM));\n  }\n\n  /**\n   * Return the maximum zoom level of the layer.\n   * @return {number} The maximum zoom level of the layer.\n   * @observable\n   * @api\n   */\n  getMaxZoom() {\n    return /** @type {number} */ (this.get(LayerProperty.MAX_ZOOM));\n  }\n\n  /**\n   * Return the opacity of the layer (between 0 and 1).\n   * @return {number} The opacity of the layer.\n   * @observable\n   * @api\n   */\n  getOpacity() {\n    return /** @type {number} */ (this.get(LayerProperty.OPACITY));\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../source/Source.js\").State} Source state.\n   */\n  getSourceState() {\n    return abstract();\n  }\n\n  /**\n   * Return the visibility of the layer (`true` or `false`).\n   * @return {boolean} The visibility of the layer.\n   * @observable\n   * @api\n   */\n  getVisible() {\n    return /** @type {boolean} */ (this.get(LayerProperty.VISIBLE));\n  }\n\n  /**\n   * Return the Z-index of the layer, which is used to order layers before\n   * rendering. The default Z-index is 0.\n   * @return {number} The Z-index of the layer.\n   * @observable\n   * @api\n   */\n  getZIndex() {\n    return /** @type {number} */ (this.get(LayerProperty.Z_INDEX));\n  }\n\n  /**\n   * Sets the background color.\n   * @param {BackgroundColor} [background] Background color.\n   */\n  setBackground(background) {\n    this.background_ = background;\n    this.changed();\n  }\n\n  /**\n   * Set the extent at which the layer is visible.  If `undefined`, the layer\n   * will be visible at all extents.\n   * @param {import(\"../extent.js\").Extent|undefined} extent The extent of the layer.\n   * @observable\n   * @api\n   */\n  setExtent(extent) {\n    this.set(LayerProperty.EXTENT, extent);\n  }\n\n  /**\n   * Set the maximum resolution at which the layer is visible.\n   * @param {number} maxResolution The maximum resolution of the layer.\n   * @observable\n   * @api\n   */\n  setMaxResolution(maxResolution) {\n    this.set(LayerProperty.MAX_RESOLUTION, maxResolution);\n  }\n\n  /**\n   * Set the minimum resolution at which the layer is visible.\n   * @param {number} minResolution The minimum resolution of the layer.\n   * @observable\n   * @api\n   */\n  setMinResolution(minResolution) {\n    this.set(LayerProperty.MIN_RESOLUTION, minResolution);\n  }\n\n  /**\n   * Set the maximum zoom (exclusive) at which the layer is visible.\n   * Note that the zoom levels for layer visibility are based on the\n   * view zoom level, which may be different from a tile source zoom level.\n   * @param {number} maxZoom The maximum zoom of the layer.\n   * @observable\n   * @api\n   */\n  setMaxZoom(maxZoom) {\n    this.set(LayerProperty.MAX_ZOOM, maxZoom);\n  }\n\n  /**\n   * Set the minimum zoom (inclusive) at which the layer is visible.\n   * Note that the zoom levels for layer visibility are based on the\n   * view zoom level, which may be different from a tile source zoom level.\n   * @param {number} minZoom The minimum zoom of the layer.\n   * @observable\n   * @api\n   */\n  setMinZoom(minZoom) {\n    this.set(LayerProperty.MIN_ZOOM, minZoom);\n  }\n\n  /**\n   * Set the opacity of the layer, allowed values range from 0 to 1.\n   * @param {number} opacity The opacity of the layer.\n   * @observable\n   * @api\n   */\n  setOpacity(opacity) {\n    assert(typeof opacity === 'number', 64); // Layer opacity must be a number\n    this.set(LayerProperty.OPACITY, opacity);\n  }\n\n  /**\n   * Set the visibility of the layer (`true` or `false`).\n   * @param {boolean} visible The visibility of the layer.\n   * @observable\n   * @api\n   */\n  setVisible(visible) {\n    this.set(LayerProperty.VISIBLE, visible);\n  }\n\n  /**\n   * Set Z-index of the layer, which is used to order layers before rendering.\n   * The default Z-index is 0.\n   * @param {number} zindex The z-index of the layer.\n   * @observable\n   * @api\n   */\n  setZIndex(zindex) {\n    this.set(LayerProperty.Z_INDEX, zindex);\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    if (this.state_) {\n      this.state_.layer = null;\n      this.state_ = null;\n    }\n    super.disposeInternal();\n  }\n}\n\nexport default BaseLayer;\n","/**\n * @module ol/Object\n */\nimport Event from './events/Event.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport {getUid} from './util.js';\nimport {isEmpty} from './obj.js';\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n */\nexport class ObjectEvent extends Event {\n  /**\n   * @param {string} type The event type.\n   * @param {string} key The property name.\n   * @param {*} oldValue The old value for `key`.\n   */\n  constructor(type, key, oldValue) {\n    super(type);\n\n    /**\n     * The name of the property whose value is changing.\n     * @type {string}\n     * @api\n     */\n    this.key = key;\n\n    /**\n     * The old value. To get the new value use `e.target.get(e.key)` where\n     * `e` is the event object.\n     * @type {*}\n     * @api\n     */\n    this.oldValue = oldValue;\n  }\n}\n\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types, ObjectEvent, Return> &\n *    import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types, Return>} ObjectOnSignature\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable~Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires ObjectEvent\n * @api\n */\nclass BaseObject extends Observable {\n  /**\n   * @param {Object<string, *>} [values] An object with key-value pairs.\n   */\n  constructor(values) {\n    super();\n\n    /***\n     * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {ObjectOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {ObjectOnSignature<void>}\n     */\n    this.un;\n\n    // Call {@link module:ol/util.getUid} to ensure that the order of objects' ids is\n    // the same as the order in which they were created.  This also helps to\n    // ensure that object properties are always added in the same order, which\n    // helps many JavaScript engines generate faster code.\n    getUid(this);\n\n    /**\n     * @private\n     * @type {Object<string, *>}\n     */\n    this.values_ = null;\n\n    if (values !== undefined) {\n      this.setProperties(values);\n    }\n  }\n\n  /**\n   * Gets a value.\n   * @param {string} key Key name.\n   * @return {*} Value.\n   * @api\n   */\n  get(key) {\n    let value;\n    if (this.values_ && this.values_.hasOwnProperty(key)) {\n      value = this.values_[key];\n    }\n    return value;\n  }\n\n  /**\n   * Get a list of object property names.\n   * @return {Array<string>} List of property names.\n   * @api\n   */\n  getKeys() {\n    return (this.values_ && Object.keys(this.values_)) || [];\n  }\n\n  /**\n   * Get an object of all property names and values.\n   * @return {Object<string, *>} Object.\n   * @api\n   */\n  getProperties() {\n    return (this.values_ && Object.assign({}, this.values_)) || {};\n  }\n\n  /**\n   * @return {boolean} The object has properties.\n   */\n  hasProperties() {\n    return !!this.values_;\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {*} oldValue Old value.\n   */\n  notify(key, oldValue) {\n    let eventType;\n    eventType = `change:${key}`;\n    if (this.hasListener(eventType)) {\n      this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    }\n    eventType = ObjectEventType.PROPERTYCHANGE;\n    if (this.hasListener(eventType)) {\n      this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    }\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {import(\"./events.js\").Listener} listener Listener.\n   */\n  addChangeListener(key, listener) {\n    this.addEventListener(`change:${key}`, listener);\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {import(\"./events.js\").Listener} listener Listener.\n   */\n  removeChangeListener(key, listener) {\n    this.removeEventListener(`change:${key}`, listener);\n  }\n\n  /**\n   * Sets a value.\n   * @param {string} key Key name.\n   * @param {*} value Value.\n   * @param {boolean} [silent] Update without triggering an event.\n   * @api\n   */\n  set(key, value, silent) {\n    const values = this.values_ || (this.values_ = {});\n    if (silent) {\n      values[key] = value;\n    } else {\n      const oldValue = values[key];\n      values[key] = value;\n      if (oldValue !== value) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n\n  /**\n   * Sets a collection of key-value pairs.  Note that this changes any existing\n   * properties and adds new ones (it does not remove any existing properties).\n   * @param {Object<string, *>} values Values.\n   * @param {boolean} [silent] Update without triggering an event.\n   * @api\n   */\n  setProperties(values, silent) {\n    for (const key in values) {\n      this.set(key, values[key], silent);\n    }\n  }\n\n  /**\n   * Apply any properties from another object without triggering events.\n   * @param {BaseObject} source The source object.\n   * @protected\n   */\n  applyProperties(source) {\n    if (!source.values_) {\n      return;\n    }\n    Object.assign(this.values_ || (this.values_ = {}), source.values_);\n  }\n\n  /**\n   * Unsets a property.\n   * @param {string} key Key name.\n   * @param {boolean} [silent] Unset without triggering an event.\n   * @api\n   */\n  unset(key, silent) {\n    if (this.values_ && key in this.values_) {\n      const oldValue = this.values_[key];\n      delete this.values_[key];\n      if (isEmpty(this.values_)) {\n        this.values_ = null;\n      }\n      if (!silent) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n}\n\nexport default BaseObject;\n","/**\n * @module ol/ObjectEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a property is changed.\n   * @event module:ol/Object.ObjectEvent#propertychange\n   * @api\n   */\n  PROPERTYCHANGE: 'propertychange',\n};\n\n/**\n * @typedef {'propertychange'} Types\n */\n","/**\n * @module ol/util\n */\n\n/**\n * @return {never} Any return.\n */\nexport function abstract() {\n  throw new Error('Unimplemented abstract method.');\n}\n\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nlet uidCounter_ = 0;\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {string} The unique ID for the object.\n * @api\n */\nexport function getUid(obj) {\n  return obj.ol_uid || (obj.ol_uid = String(++uidCounter_));\n}\n\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport const VERSION = '7.1.0';\n","/**\n * @module ol/layer/Property\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  OPACITY: 'opacity',\n  VISIBLE: 'visible',\n  EXTENT: 'extent',\n  Z_INDEX: 'zIndex',\n  MAX_RESOLUTION: 'maxResolution',\n  MIN_RESOLUTION: 'minResolution',\n  MAX_ZOOM: 'maxZoom',\n  MIN_ZOOM: 'minZoom',\n  SOURCE: 'source',\n  MAP: 'map',\n};\n","/**\n * @module ol/asserts\n */\nimport AssertionError from './AssertionError.js';\n\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {number} errorCode Error code.\n */\nexport function assert(assertion, errorCode) {\n  if (!assertion) {\n    throw new AssertionError(errorCode);\n  }\n}\n","/**\n * @module ol/AssertionError\n */\n\n/** @type {Object<number, string>} */\nconst messages = {\n  1: 'The view center is not defined',\n  2: 'The view resolution is not defined',\n  3: 'The view rotation is not defined',\n  4: '`image` and `src` cannot be provided at the same time',\n  5: '`imgSize` must be set when `image` is provided',\n  7: '`format` must be set when `url` is set',\n  8: 'Unknown `serverType` configured',\n  9: '`url` must be configured or set using `#setUrl()`',\n  10: 'The default `geometryFunction` can only handle `Point` geometries',\n  11: '`options.featureTypes` must be an Array',\n  12: '`options.geometryName` must also be provided when `options.bbox` is set',\n  13: 'Invalid corner',\n  14: 'Invalid color',\n  15: 'Tried to get a value for a key that does not exist in the cache',\n  16: 'Tried to set a value for a key that is used already',\n  17: '`resolutions` must be sorted in descending order',\n  18: 'Either `origin` or `origins` must be configured, never both',\n  19: 'Number of `tileSizes` and `resolutions` must be equal',\n  20: 'Number of `origins` and `resolutions` must be equal',\n  22: 'Either `tileSize` or `tileSizes` must be configured, never both',\n  24: 'Invalid extent or geometry provided as `geometry`',\n  25: 'Cannot fit empty extent provided as `geometry`',\n  26: 'Features must have an id set',\n  27: 'Features must have an id set',\n  28: '`renderMode` must be `\"hybrid\"` or `\"vector\"`',\n  30: 'The passed `feature` was already added to the source',\n  31: 'Tried to enqueue an `element` that was already added to the queue',\n  32: 'Transformation matrix cannot be inverted',\n  33: 'Invalid units',\n  34: 'Invalid geometry layout',\n  36: 'Unknown SRS type',\n  37: 'Unknown geometry type found',\n  38: '`styleMapValue` has an unknown type',\n  39: 'Unknown geometry type',\n  40: 'Expected `feature` to have a geometry',\n  41: 'Expected an `ol/style/Style` or an array of `ol/style/Style.js`',\n  42: 'Question unknown, the answer is 42',\n  43: 'Expected `layers` to be an array or a `Collection`',\n  47: 'Expected `controls` to be an array or an `ol/Collection`',\n  48: 'Expected `interactions` to be an array or an `ol/Collection`',\n  49: 'Expected `overlays` to be an array or an `ol/Collection`',\n  50: '`options.featureTypes` should be an Array',\n  51: 'Either `url` or `tileJSON` options must be provided',\n  52: 'Unknown `serverType` configured',\n  53: 'Unknown `tierSizeCalculation` configured',\n  55: 'The {-y} placeholder requires a tile grid with extent',\n  56: 'mapBrowserEvent must originate from a pointer event',\n  57: 'At least 2 conditions are required',\n  59: 'Invalid command found in the PBF',\n  60: 'Missing or invalid `size`',\n  61: 'Cannot determine IIIF Image API version from provided image information JSON',\n  62: 'A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`',\n  64: 'Layer opacity must be a number',\n  66: '`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`',\n  67: 'A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both',\n  68: 'A VectorTile source can only be rendered if it has a projection compatible with the view projection',\n};\n\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error.\n */\nclass AssertionError extends Error {\n  /**\n   * @param {number} code Error code.\n   */\n  constructor(code) {\n    const message = messages[code];\n\n    super(message);\n\n    /**\n     * Error code. The meaning of the code can be found on\n     * https://openlayers.org/en/latest/doc/errors/ (replace `latest` with\n     * the version found in the OpenLayers script's header comment if a version\n     * other than the latest is used).\n     * @type {number}\n     * @deprecated ol/AssertionError and error codes will be removed in v8.0\n     * @api\n     */\n    this.code = code;\n\n    /**\n     * @type {string}\n     */\n    this.name = 'AssertionError';\n\n    // Re-assign message, see https://github.com/Rich-Harris/buble/issues/40\n    this.message = message;\n  }\n}\n\nexport default AssertionError;\n","/**\n * @module ol/math\n */\n\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  if (dx !== 0 || dy !== 0) {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      x1 = x2;\n      y1 = y2;\n    } else if (t > 0) {\n      x1 += dx * t;\n      y1 += dy * t;\n    }\n  }\n  return squaredDistance(x, y, x1, y1);\n}\n\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  return dx * dx + dy * dy;\n}\n\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array<Array<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n  const n = mat.length;\n\n  for (let i = 0; i < n; i++) {\n    // Find max in the i-th column (ignoring i - 1 first rows)\n    let maxRow = i;\n    let maxEl = Math.abs(mat[i][i]);\n    for (let r = i + 1; r < n; r++) {\n      const absValue = Math.abs(mat[r][i]);\n      if (absValue > maxEl) {\n        maxEl = absValue;\n        maxRow = r;\n      }\n    }\n\n    if (maxEl === 0) {\n      return null; // matrix is singular\n    }\n\n    // Swap max row with i-th (current) row\n    const tmp = mat[maxRow];\n    mat[maxRow] = mat[i];\n    mat[i] = tmp;\n\n    // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n    for (let j = i + 1; j < n; j++) {\n      const coef = -mat[j][i] / mat[i][i];\n      for (let k = i; k < n + 1; k++) {\n        if (i == k) {\n          mat[j][k] = 0;\n        } else {\n          mat[j][k] += coef * mat[i][k];\n        }\n      }\n    }\n  }\n\n  // Solve Ax=b for upper triangular matrix A (mat)\n  const x = new Array(n);\n  for (let l = n - 1; l >= 0; l--) {\n    x[l] = mat[l][n] / mat[l][l];\n    for (let m = l - 1; m >= 0; m--) {\n      mat[m][n] -= mat[m][l] * x[l];\n    }\n  }\n  return x;\n}\n\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return (angleInRadians * 180) / Math.PI;\n}\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return (angleInDegrees * Math.PI) / 180;\n}\n\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n  const r = a % b;\n  return r * b < 0 ? r + b : r;\n}\n\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n  return a + x * (b - a);\n}\n\n/**\n * Returns a number with a limited number of decimal digits.\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The input number with a limited number of decimal digits.\n */\nexport function toFixed(n, decimals) {\n  const factor = Math.pow(10, decimals);\n  return Math.round(n * factor) / factor;\n}\n\n/**\n * Rounds a number to the nearest integer value considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The nearest integer.\n */\nexport function round(n, decimals) {\n  return Math.round(toFixed(n, decimals));\n}\n\n/**\n * Rounds a number to the next smaller integer considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The next smaller integer.\n */\nexport function floor(n, decimals) {\n  return Math.floor(toFixed(n, decimals));\n}\n\n/**\n * Rounds a number to the next bigger integer considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The next bigger integer.\n */\nexport function ceil(n, decimals) {\n  return Math.ceil(toFixed(n, decimals));\n}\n","/**\n * @module ol/Collection\n */\nimport AssertionError from './AssertionError.js';\nimport BaseObject from './Object.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport Event from './events/Event.js';\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  LENGTH: 'length',\n};\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Collection~Collection} instances are instances of this\n * type.\n * @template T\n */\nexport class CollectionEvent extends Event {\n  /**\n   * @param {import(\"./CollectionEventType.js\").default} type Type.\n   * @param {T} element Element.\n   * @param {number} index The index of the added or removed element.\n   */\n  constructor(type, element, index) {\n    super(type);\n\n    /**\n     * The element that is added to or removed from the collection.\n     * @type {T}\n     * @api\n     */\n    this.element = element;\n\n    /**\n     * The index of the added or removed element.\n     * @type {number}\n     * @api\n     */\n    this.index = index;\n  }\n}\n\n/***\n * @template T\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:length', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").OnSignature<'add'|'remove', CollectionEvent<T>, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types|\n *     'change:length'|'add'|'remove',Return>} CollectionOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [unique=false] Disallow the same item from being added to\n * the collection twice.\n */\n\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @fires CollectionEvent\n *\n * @template T\n * @api\n */\nclass Collection extends BaseObject {\n  /**\n   * @param {Array<T>} [array] Array.\n   * @param {Options} [options] Collection options.\n   */\n  constructor(array, options) {\n    super();\n\n    /***\n     * @type {CollectionOnSignature<T, import(\"./events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {CollectionOnSignature<T, import(\"./events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {CollectionOnSignature<T, void>}\n     */\n    this.un;\n\n    options = options || {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.unique_ = !!options.unique;\n\n    /**\n     * @private\n     * @type {!Array<T>}\n     */\n    this.array_ = array ? array : [];\n\n    if (this.unique_) {\n      for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n        this.assertUnique_(this.array_[i], i);\n      }\n    }\n\n    this.updateLength_();\n  }\n\n  /**\n   * Remove all elements from the collection.\n   * @api\n   */\n  clear() {\n    while (this.getLength() > 0) {\n      this.pop();\n    }\n  }\n\n  /**\n   * Add elements to the collection.  This pushes each item in the provided array\n   * to the end of the collection.\n   * @param {!Array<T>} arr Array.\n   * @return {Collection<T>} This collection.\n   * @api\n   */\n  extend(arr) {\n    for (let i = 0, ii = arr.length; i < ii; ++i) {\n      this.push(arr[i]);\n    }\n    return this;\n  }\n\n  /**\n   * Iterate over each element, calling the provided callback.\n   * @param {function(T, number, Array<T>): *} f The function to call\n   *     for every element. This function takes 3 arguments (the element, the\n   *     index and the array). The return value is ignored.\n   * @api\n   */\n  forEach(f) {\n    const array = this.array_;\n    for (let i = 0, ii = array.length; i < ii; ++i) {\n      f(array[i], i, array);\n    }\n  }\n\n  /**\n   * Get a reference to the underlying Array object. Warning: if the array\n   * is mutated, no events will be dispatched by the collection, and the\n   * collection's \"length\" property won't be in sync with the actual length\n   * of the array.\n   * @return {!Array<T>} Array.\n   * @api\n   */\n  getArray() {\n    return this.array_;\n  }\n\n  /**\n   * Get the element at the provided index.\n   * @param {number} index Index.\n   * @return {T} Element.\n   * @api\n   */\n  item(index) {\n    return this.array_[index];\n  }\n\n  /**\n   * Get the length of this collection.\n   * @return {number} The length of the array.\n   * @observable\n   * @api\n   */\n  getLength() {\n    return this.get(Property.LENGTH);\n  }\n\n  /**\n   * Insert an element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  insertAt(index, elem) {\n    if (index < 0 || index > this.getLength()) {\n      throw new Error('Index out of bounds: ' + index);\n    }\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    this.array_.splice(index, 0, elem);\n    this.updateLength_();\n    this.dispatchEvent(\n      new CollectionEvent(CollectionEventType.ADD, elem, index)\n    );\n  }\n\n  /**\n   * Remove the last element of the collection and return it.\n   * Return `undefined` if the collection is empty.\n   * @return {T|undefined} Element.\n   * @api\n   */\n  pop() {\n    return this.removeAt(this.getLength() - 1);\n  }\n\n  /**\n   * Insert the provided element at the end of the collection.\n   * @param {T} elem Element.\n   * @return {number} New length of the collection.\n   * @api\n   */\n  push(elem) {\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    const n = this.getLength();\n    this.insertAt(n, elem);\n    return this.getLength();\n  }\n\n  /**\n   * Remove the first occurrence of an element from the collection.\n   * @param {T} elem Element.\n   * @return {T|undefined} The removed element or undefined if none found.\n   * @api\n   */\n  remove(elem) {\n    const arr = this.array_;\n    for (let i = 0, ii = arr.length; i < ii; ++i) {\n      if (arr[i] === elem) {\n        return this.removeAt(i);\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Remove the element at the provided index and return it.\n   * Return `undefined` if the collection does not contain this index.\n   * @param {number} index Index.\n   * @return {T|undefined} Value.\n   * @api\n   */\n  removeAt(index) {\n    if (index < 0 || index >= this.getLength()) {\n      return undefined;\n    }\n    const prev = this.array_[index];\n    this.array_.splice(index, 1);\n    this.updateLength_();\n    this.dispatchEvent(\n      /** @type {CollectionEvent<T>} */ (\n        new CollectionEvent(CollectionEventType.REMOVE, prev, index)\n      )\n    );\n    return prev;\n  }\n\n  /**\n   * Set the element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  setAt(index, elem) {\n    const n = this.getLength();\n    if (index >= n) {\n      this.insertAt(index, elem);\n      return;\n    }\n    if (index < 0) {\n      throw new Error('Index out of bounds: ' + index);\n    }\n    if (this.unique_) {\n      this.assertUnique_(elem, index);\n    }\n    const prev = this.array_[index];\n    this.array_[index] = elem;\n    this.dispatchEvent(\n      /** @type {CollectionEvent<T>} */ (\n        new CollectionEvent(CollectionEventType.REMOVE, prev, index)\n      )\n    );\n    this.dispatchEvent(\n      /** @type {CollectionEvent<T>} */ (\n        new CollectionEvent(CollectionEventType.ADD, elem, index)\n      )\n    );\n  }\n\n  /**\n   * @private\n   */\n  updateLength_() {\n    this.set(Property.LENGTH, this.array_.length);\n  }\n\n  /**\n   * @private\n   * @param {T} elem Element.\n   * @param {number} [except] Optional index to ignore.\n   */\n  assertUnique_(elem, except) {\n    for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n      if (this.array_[i] === elem && i !== except) {\n        throw new AssertionError(58);\n      }\n    }\n  }\n}\n\nexport default Collection;\n","/**\n * @module ol/CollectionEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when an item is added to the collection.\n   * @event module:ol/Collection.CollectionEvent#add\n   * @api\n   */\n  ADD: 'add',\n  /**\n   * Triggered when an item is removed from the collection.\n   * @event module:ol/Collection.CollectionEvent#remove\n   * @api\n   */\n  REMOVE: 'remove',\n};\n","/**\n * @module ol/extent\n */\nimport Relationship from './extent/Relationship.js';\nimport {assert} from './asserts.js';\n\n/**\n * An array of numbers representing an extent: `[minx, miny, maxx, maxy]`.\n * @typedef {Array<number>} Extent\n * @api\n */\n\n/**\n * Extent corner.\n * @typedef {'bottom-left' | 'bottom-right' | 'top-left' | 'top-right'} Corner\n */\n\n/**\n * Build an extent that includes all given coordinates.\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Bounding extent.\n * @api\n */\nexport function boundingExtent(coordinates) {\n  const extent = createEmpty();\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n/**\n * @param {Array<number>} xs Xs.\n * @param {Array<number>} ys Ys.\n * @param {Extent} [dest] Destination extent.\n * @private\n * @return {Extent} Extent.\n */\nfunction _boundingExtentXYs(xs, ys, dest) {\n  const minX = Math.min.apply(null, xs);\n  const minY = Math.min.apply(null, ys);\n  const maxX = Math.max.apply(null, xs);\n  const maxY = Math.max.apply(null, ys);\n  return createOrUpdate(minX, minY, maxX, maxY, dest);\n}\n\n/**\n * Return extent increased by the provided value.\n * @param {Extent} extent Extent.\n * @param {number} value The amount by which the extent should be buffered.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function buffer(extent, value, dest) {\n  if (dest) {\n    dest[0] = extent[0] - value;\n    dest[1] = extent[1] - value;\n    dest[2] = extent[2] + value;\n    dest[3] = extent[3] + value;\n    return dest;\n  } else {\n    return [\n      extent[0] - value,\n      extent[1] - value,\n      extent[2] + value,\n      extent[3] + value,\n    ];\n  }\n}\n\n/**\n * Creates a clone of an extent.\n *\n * @param {Extent} extent Extent to clone.\n * @param {Extent} [dest] Extent.\n * @return {Extent} The clone.\n */\nexport function clone(extent, dest) {\n  if (dest) {\n    dest[0] = extent[0];\n    dest[1] = extent[1];\n    dest[2] = extent[2];\n    dest[3] = extent[3];\n    return dest;\n  } else {\n    return extent.slice();\n  }\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {number} Closest squared distance.\n */\nexport function closestSquaredDistanceXY(extent, x, y) {\n  let dx, dy;\n  if (x < extent[0]) {\n    dx = extent[0] - x;\n  } else if (extent[2] < x) {\n    dx = x - extent[2];\n  } else {\n    dx = 0;\n  }\n  if (y < extent[1]) {\n    dy = extent[1] - y;\n  } else if (extent[3] < y) {\n    dy = y - extent[3];\n  } else {\n    dy = 0;\n  }\n  return dx * dx + dy * dy;\n}\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @return {boolean} The coordinate is contained in the extent.\n * @api\n */\nexport function containsCoordinate(extent, coordinate) {\n  return containsXY(extent, coordinate[0], coordinate[1]);\n}\n\n/**\n * Check if one extent contains another.\n *\n * An extent is deemed contained if it lies completely within the other extent,\n * including if they share one or more edges.\n *\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The second extent is contained by or on the edge of the\n *     first.\n * @api\n */\nexport function containsExtent(extent1, extent2) {\n  return (\n    extent1[0] <= extent2[0] &&\n    extent2[2] <= extent1[2] &&\n    extent1[1] <= extent2[1] &&\n    extent2[3] <= extent1[3]\n  );\n}\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @return {boolean} The x, y values are contained in the extent.\n * @api\n */\nexport function containsXY(extent, x, y) {\n  return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n}\n\n/**\n * Get the relationship between a coordinate and extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate The coordinate.\n * @return {import(\"./extent/Relationship.js\").default} The relationship (bitwise compare with\n *     import(\"./extent/Relationship.js\").Relationship).\n */\nexport function coordinateRelationship(extent, coordinate) {\n  const minX = extent[0];\n  const minY = extent[1];\n  const maxX = extent[2];\n  const maxY = extent[3];\n  const x = coordinate[0];\n  const y = coordinate[1];\n  let relationship = Relationship.UNKNOWN;\n  if (x < minX) {\n    relationship = relationship | Relationship.LEFT;\n  } else if (x > maxX) {\n    relationship = relationship | Relationship.RIGHT;\n  }\n  if (y < minY) {\n    relationship = relationship | Relationship.BELOW;\n  } else if (y > maxY) {\n    relationship = relationship | Relationship.ABOVE;\n  }\n  if (relationship === Relationship.UNKNOWN) {\n    relationship = Relationship.INTERSECTING;\n  }\n  return relationship;\n}\n\n/**\n * Create an empty extent.\n * @return {Extent} Empty extent.\n * @api\n */\nexport function createEmpty() {\n  return [Infinity, Infinity, -Infinity, -Infinity];\n}\n\n/**\n * Create a new extent or update the provided extent.\n * @param {number} minX Minimum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxX Maximum X.\n * @param {number} maxY Maximum Y.\n * @param {Extent} [dest] Destination extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdate(minX, minY, maxX, maxY, dest) {\n  if (dest) {\n    dest[0] = minX;\n    dest[1] = minY;\n    dest[2] = maxX;\n    dest[3] = maxY;\n    return dest;\n  } else {\n    return [minX, minY, maxX, maxY];\n  }\n}\n\n/**\n * Create a new empty extent or make the provided one empty.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateEmpty(dest) {\n  return createOrUpdate(Infinity, Infinity, -Infinity, -Infinity, dest);\n}\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinate(coordinate, dest) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  return createOrUpdate(x, y, x, y, dest);\n}\n\n/**\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinates(coordinates, dest) {\n  const extent = createOrUpdateEmpty(dest);\n  return extendCoordinates(extent, coordinates);\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromFlatCoordinates(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  dest\n) {\n  const extent = createOrUpdateEmpty(dest);\n  return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n}\n\n/**\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromRings(rings, dest) {\n  const extent = createOrUpdateEmpty(dest);\n  return extendRings(extent, rings);\n}\n\n/**\n * Determine if two extents are equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The two extents are equivalent.\n * @api\n */\nexport function equals(extent1, extent2) {\n  return (\n    extent1[0] == extent2[0] &&\n    extent1[2] == extent2[2] &&\n    extent1[1] == extent2[1] &&\n    extent1[3] == extent2[3]\n  );\n}\n\n/**\n * Determine if two extents are approximately equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {number} tolerance Tolerance in extent coordinate units.\n * @return {boolean} The two extents differ by less than the tolerance.\n */\nexport function approximatelyEquals(extent1, extent2, tolerance) {\n  return (\n    Math.abs(extent1[0] - extent2[0]) < tolerance &&\n    Math.abs(extent1[2] - extent2[2]) < tolerance &&\n    Math.abs(extent1[1] - extent2[1]) < tolerance &&\n    Math.abs(extent1[3] - extent2[3]) < tolerance\n  );\n}\n\n/**\n * Modify an extent to include another extent.\n * @param {Extent} extent1 The extent to be modified.\n * @param {Extent} extent2 The extent that will be included in the first.\n * @return {Extent} A reference to the first (extended) extent.\n * @api\n */\nexport function extend(extent1, extent2) {\n  if (extent2[0] < extent1[0]) {\n    extent1[0] = extent2[0];\n  }\n  if (extent2[2] > extent1[2]) {\n    extent1[2] = extent2[2];\n  }\n  if (extent2[1] < extent1[1]) {\n    extent1[1] = extent2[1];\n  }\n  if (extent2[3] > extent1[3]) {\n    extent1[3] = extent2[3];\n  }\n  return extent1;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n */\nexport function extendCoordinate(extent, coordinate) {\n  if (coordinate[0] < extent[0]) {\n    extent[0] = coordinate[0];\n  }\n  if (coordinate[0] > extent[2]) {\n    extent[2] = coordinate[0];\n  }\n  if (coordinate[1] < extent[1]) {\n    extent[1] = coordinate[1];\n  }\n  if (coordinate[1] > extent[3]) {\n    extent[3] = coordinate[1];\n  }\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Extent.\n */\nexport function extendCoordinates(extent, coordinates) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Extent} Extent.\n */\nexport function extendFlatCoordinates(\n  extent,\n  flatCoordinates,\n  offset,\n  end,\n  stride\n) {\n  for (; offset < end; offset += stride) {\n    extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n  }\n  return extent;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @return {Extent} Extent.\n */\nexport function extendRings(extent, rings) {\n  for (let i = 0, ii = rings.length; i < ii; ++i) {\n    extendCoordinates(extent, rings[i]);\n  }\n  return extent;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n */\nexport function extendXY(extent, x, y) {\n  extent[0] = Math.min(extent[0], x);\n  extent[1] = Math.min(extent[1], y);\n  extent[2] = Math.max(extent[2], x);\n  extent[3] = Math.max(extent[3], y);\n}\n\n/**\n * This function calls `callback` for each corner of the extent. If the\n * callback returns a truthy value the function returns that value\n * immediately. Otherwise the function returns `false`.\n * @param {Extent} extent Extent.\n * @param {function(import(\"./coordinate.js\").Coordinate): S} callback Callback.\n * @return {S|boolean} Value.\n * @template S\n */\nexport function forEachCorner(extent, callback) {\n  let val;\n  val = callback(getBottomLeft(extent));\n  if (val) {\n    return val;\n  }\n  val = callback(getBottomRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback(getTopRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback(getTopLeft(extent));\n  if (val) {\n    return val;\n  }\n  return false;\n}\n\n/**\n * Get the size of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Area.\n * @api\n */\nexport function getArea(extent) {\n  let area = 0;\n  if (!isEmpty(extent)) {\n    area = getWidth(extent) * getHeight(extent);\n  }\n  return area;\n}\n\n/**\n * Get the bottom left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom left coordinate.\n * @api\n */\nexport function getBottomLeft(extent) {\n  return [extent[0], extent[1]];\n}\n\n/**\n * Get the bottom right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom right coordinate.\n * @api\n */\nexport function getBottomRight(extent) {\n  return [extent[2], extent[1]];\n}\n\n/**\n * Get the center coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Center.\n * @api\n */\nexport function getCenter(extent) {\n  return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n}\n\n/**\n * Get a corner coordinate of an extent.\n * @param {Extent} extent Extent.\n * @param {Corner} corner Corner.\n * @return {import(\"./coordinate.js\").Coordinate} Corner coordinate.\n */\nexport function getCorner(extent, corner) {\n  let coordinate;\n  if (corner === 'bottom-left') {\n    coordinate = getBottomLeft(extent);\n  } else if (corner === 'bottom-right') {\n    coordinate = getBottomRight(extent);\n  } else if (corner === 'top-left') {\n    coordinate = getTopLeft(extent);\n  } else if (corner === 'top-right') {\n    coordinate = getTopRight(extent);\n  } else {\n    assert(false, 13); // Invalid corner\n  }\n  return coordinate;\n}\n\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Enlarged area.\n */\nexport function getEnlargedArea(extent1, extent2) {\n  const minX = Math.min(extent1[0], extent2[0]);\n  const minY = Math.min(extent1[1], extent2[1]);\n  const maxX = Math.max(extent1[2], extent2[2]);\n  const maxY = Math.max(extent1[3], extent2[3]);\n  return (maxX - minX) * (maxY - minY);\n}\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @param {Extent} [dest] Destination extent.\n * @return {Extent} Extent.\n */\nexport function getForViewAndSize(center, resolution, rotation, size, dest) {\n  const [x0, y0, x1, y1, x2, y2, x3, y3] = getRotatedViewport(\n    center,\n    resolution,\n    rotation,\n    size\n  );\n  return createOrUpdate(\n    Math.min(x0, x1, x2, x3),\n    Math.min(y0, y1, y2, y3),\n    Math.max(x0, x1, x2, x3),\n    Math.max(y0, y1, y2, y3),\n    dest\n  );\n}\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @return {Array<number>} Linear ring representing the viewport.\n */\nexport function getRotatedViewport(center, resolution, rotation, size) {\n  const dx = (resolution * size[0]) / 2;\n  const dy = (resolution * size[1]) / 2;\n  const cosRotation = Math.cos(rotation);\n  const sinRotation = Math.sin(rotation);\n  const xCos = dx * cosRotation;\n  const xSin = dx * sinRotation;\n  const yCos = dy * cosRotation;\n  const ySin = dy * sinRotation;\n  const x = center[0];\n  const y = center[1];\n  return [\n    x - xCos + ySin,\n    y - xSin - yCos,\n    x - xCos - ySin,\n    y - xSin + yCos,\n    x + xCos - ySin,\n    y + xSin + yCos,\n    x + xCos + ySin,\n    y + xSin - yCos,\n    x - xCos + ySin,\n    y - xSin - yCos,\n  ];\n}\n\n/**\n * Get the height of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Height.\n * @api\n */\nexport function getHeight(extent) {\n  return extent[3] - extent[1];\n}\n\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Intersection area.\n */\nexport function getIntersectionArea(extent1, extent2) {\n  const intersection = getIntersection(extent1, extent2);\n  return getArea(intersection);\n}\n\n/**\n * Get the intersection of two extents.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {Extent} [dest] Optional extent to populate with intersection.\n * @return {Extent} Intersecting extent.\n * @api\n */\nexport function getIntersection(extent1, extent2, dest) {\n  const intersection = dest ? dest : createEmpty();\n  if (intersects(extent1, extent2)) {\n    if (extent1[0] > extent2[0]) {\n      intersection[0] = extent1[0];\n    } else {\n      intersection[0] = extent2[0];\n    }\n    if (extent1[1] > extent2[1]) {\n      intersection[1] = extent1[1];\n    } else {\n      intersection[1] = extent2[1];\n    }\n    if (extent1[2] < extent2[2]) {\n      intersection[2] = extent1[2];\n    } else {\n      intersection[2] = extent2[2];\n    }\n    if (extent1[3] < extent2[3]) {\n      intersection[3] = extent1[3];\n    } else {\n      intersection[3] = extent2[3];\n    }\n  } else {\n    createOrUpdateEmpty(intersection);\n  }\n  return intersection;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @return {number} Margin.\n */\nexport function getMargin(extent) {\n  return getWidth(extent) + getHeight(extent);\n}\n\n/**\n * Get the size (width, height) of an extent.\n * @param {Extent} extent The extent.\n * @return {import(\"./size.js\").Size} The extent size.\n * @api\n */\nexport function getSize(extent) {\n  return [extent[2] - extent[0], extent[3] - extent[1]];\n}\n\n/**\n * Get the top left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top left coordinate.\n * @api\n */\nexport function getTopLeft(extent) {\n  return [extent[0], extent[3]];\n}\n\n/**\n * Get the top right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top right coordinate.\n * @api\n */\nexport function getTopRight(extent) {\n  return [extent[2], extent[3]];\n}\n\n/**\n * Get the width of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Width.\n * @api\n */\nexport function getWidth(extent) {\n  return extent[2] - extent[0];\n}\n\n/**\n * Determine if one extent intersects another.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent.\n * @return {boolean} The two extents intersect.\n * @api\n */\nexport function intersects(extent1, extent2) {\n  return (\n    extent1[0] <= extent2[2] &&\n    extent1[2] >= extent2[0] &&\n    extent1[1] <= extent2[3] &&\n    extent1[3] >= extent2[1]\n  );\n}\n\n/**\n * Determine if an extent is empty.\n * @param {Extent} extent Extent.\n * @return {boolean} Is empty.\n * @api\n */\nexport function isEmpty(extent) {\n  return extent[2] < extent[0] || extent[3] < extent[1];\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function returnOrUpdate(extent, dest) {\n  if (dest) {\n    dest[0] = extent[0];\n    dest[1] = extent[1];\n    dest[2] = extent[2];\n    dest[3] = extent[3];\n    return dest;\n  } else {\n    return extent;\n  }\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} value Value.\n */\nexport function scaleFromCenter(extent, value) {\n  const deltaX = ((extent[2] - extent[0]) / 2) * (value - 1);\n  const deltaY = ((extent[3] - extent[1]) / 2) * (value - 1);\n  extent[0] -= deltaX;\n  extent[2] += deltaX;\n  extent[1] -= deltaY;\n  extent[3] += deltaY;\n}\n\n/**\n * Determine if the segment between two coordinates intersects (crosses,\n * touches, or is contained by) the provided extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} start Segment start coordinate.\n * @param {import(\"./coordinate.js\").Coordinate} end Segment end coordinate.\n * @return {boolean} The segment intersects the extent.\n */\nexport function intersectsSegment(extent, start, end) {\n  let intersects = false;\n  const startRel = coordinateRelationship(extent, start);\n  const endRel = coordinateRelationship(extent, end);\n  if (\n    startRel === Relationship.INTERSECTING ||\n    endRel === Relationship.INTERSECTING\n  ) {\n    intersects = true;\n  } else {\n    const minX = extent[0];\n    const minY = extent[1];\n    const maxX = extent[2];\n    const maxY = extent[3];\n    const startX = start[0];\n    const startY = start[1];\n    const endX = end[0];\n    const endY = end[1];\n    const slope = (endY - startY) / (endX - startX);\n    let x, y;\n    if (!!(endRel & Relationship.ABOVE) && !(startRel & Relationship.ABOVE)) {\n      // potentially intersects top\n      x = endX - (endY - maxY) / slope;\n      intersects = x >= minX && x <= maxX;\n    }\n    if (\n      !intersects &&\n      !!(endRel & Relationship.RIGHT) &&\n      !(startRel & Relationship.RIGHT)\n    ) {\n      // potentially intersects right\n      y = endY - (endX - maxX) * slope;\n      intersects = y >= minY && y <= maxY;\n    }\n    if (\n      !intersects &&\n      !!(endRel & Relationship.BELOW) &&\n      !(startRel & Relationship.BELOW)\n    ) {\n      // potentially intersects bottom\n      x = endX - (endY - minY) / slope;\n      intersects = x >= minX && x <= maxX;\n    }\n    if (\n      !intersects &&\n      !!(endRel & Relationship.LEFT) &&\n      !(startRel & Relationship.LEFT)\n    ) {\n      // potentially intersects left\n      y = endY - (endX - minX) * slope;\n      intersects = y >= minY && y <= maxY;\n    }\n  }\n  return intersects;\n}\n\n/**\n * Apply a transform function to the extent.\n * @param {Extent} extent Extent.\n * @param {import(\"./proj.js\").TransformFunction} transformFn Transform function.\n * Called with `[minX, minY, maxX, maxY]` extent coordinates.\n * @param {Extent} [dest] Destination extent.\n * @param {number} [stops] Number of stops per side used for the transform.\n * By default only the corners are used.\n * @return {Extent} Extent.\n * @api\n */\nexport function applyTransform(extent, transformFn, dest, stops) {\n  let coordinates = [];\n  if (stops > 1) {\n    const width = extent[2] - extent[0];\n    const height = extent[3] - extent[1];\n    for (let i = 0; i < stops; ++i) {\n      coordinates.push(\n        extent[0] + (width * i) / stops,\n        extent[1],\n        extent[2],\n        extent[1] + (height * i) / stops,\n        extent[2] - (width * i) / stops,\n        extent[3],\n        extent[0],\n        extent[3] - (height * i) / stops\n      );\n    }\n  } else {\n    coordinates = [\n      extent[0],\n      extent[1],\n      extent[2],\n      extent[1],\n      extent[2],\n      extent[3],\n      extent[0],\n      extent[3],\n    ];\n  }\n  transformFn(coordinates, coordinates, 2);\n  const xs = [];\n  const ys = [];\n  for (let i = 0, l = coordinates.length; i < l; i += 2) {\n    xs.push(coordinates[i]);\n    ys.push(coordinates[i + 1]);\n  }\n  return _boundingExtentXYs(xs, ys, dest);\n}\n\n/**\n * Modifies the provided extent in-place to be within the real world\n * extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./proj/Projection.js\").default} projection Projection\n * @return {Extent} The extent within the real world extent.\n */\nexport function wrapX(extent, projection) {\n  const projectionExtent = projection.getExtent();\n  const center = getCenter(extent);\n  if (\n    projection.canWrapX() &&\n    (center[0] < projectionExtent[0] || center[0] >= projectionExtent[2])\n  ) {\n    const worldWidth = getWidth(projectionExtent);\n    const worldsAway = Math.floor(\n      (center[0] - projectionExtent[0]) / worldWidth\n    );\n    const offset = worldsAway * worldWidth;\n    extent[0] -= offset;\n    extent[2] -= offset;\n  }\n  return extent;\n}\n\n/**\n * Fits the extent to the real world\n *\n * If the extent does not cross the anti meridian, this will return the extent in an array\n * If the extent crosses the anti meridian, the extent will be sliced, so each part fits within the\n * real world\n *\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./proj/Projection.js\").default} projection Projection\n * @return {Array<Extent>} The extent within the real world extent.\n */\nexport function wrapAndSliceX(extent, projection) {\n  if (projection.canWrapX()) {\n    const projectionExtent = projection.getExtent();\n\n    if (!isFinite(extent[0]) || !isFinite(extent[2])) {\n      return [[projectionExtent[0], extent[1], projectionExtent[2], extent[3]]];\n    }\n\n    wrapX(extent, projection);\n    const worldWidth = getWidth(projectionExtent);\n\n    if (getWidth(extent) > worldWidth) {\n      // the extent wraps around on itself\n      return [[projectionExtent[0], extent[1], projectionExtent[2], extent[3]]];\n    } else if (extent[0] < projectionExtent[0]) {\n      // the extent crosses the anti meridian, so it needs to be sliced\n      return [\n        [extent[0] + worldWidth, extent[1], projectionExtent[2], extent[3]],\n        [projectionExtent[0], extent[1], extent[2], extent[3]],\n      ];\n    } else if (extent[2] > projectionExtent[2]) {\n      // the extent crosses the anti meridian, so it needs to be sliced\n      return [\n        [extent[0], extent[1], projectionExtent[2], extent[3]],\n        [projectionExtent[0], extent[1], extent[2] - worldWidth, extent[3]],\n      ];\n    }\n  }\n\n  return [extent];\n}\n","/**\n * @module ol/extent/Relationship\n */\n\n/**\n * Relationship to an extent.\n * @enum {number}\n */\nexport default {\n  UNKNOWN: 0,\n  INTERSECTING: 1,\n  ABOVE: 2,\n  RIGHT: 4,\n  BELOW: 8,\n  LEFT: 16,\n};\n","/**\n * @module ol/control/Control\n */\nimport BaseObject from '../Object.js';\nimport MapEventType from '../MapEventType.js';\nimport {VOID} from '../functions.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport {removeNode} from '../dom.js';\n\n/**\n * @typedef {Object} Options\n * @property {HTMLElement} [element] The element is the control's\n * container element. This only needs to be specified if you're developing\n * a custom control.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n * @property {HTMLElement|string} [target] Specify a target if you want\n * the control to be rendered outside of the map's viewport.\n */\n\n/**\n * @classdesc\n * A control is a visible widget with a DOM element in a fixed position on the\n * screen. They can involve user input (buttons), or be informational only;\n * the position is determined using CSS. By default these are placed in the\n * container with CSS class name `ol-overlaycontainer-stopevent`, but can use\n * any outside DOM element.\n *\n * This is the base class for controls. You can use it for simple custom\n * controls by creating the element with listeners, creating an instance:\n * ```js\n * const myControl = new Control({element: myElement});\n * ```\n * and then adding this to the map.\n *\n * The main advantage of having this as a control rather than a simple separate\n * DOM element is that preventing propagation is handled for you. Controls\n * will also be objects in a {@link module:ol/Collection~Collection}, so you can use their methods.\n *\n * You can also extend this base for your own control class. See\n * examples/custom-controls for an example of how to do this.\n *\n * @api\n */\nclass Control extends BaseObject {\n  /**\n   * @param {Options} options Control options.\n   */\n  constructor(options) {\n    super();\n\n    const element = options.element;\n    if (element && !options.target && !element.style.pointerEvents) {\n      element.style.pointerEvents = 'auto';\n    }\n\n    /**\n     * @protected\n     * @type {HTMLElement}\n     */\n    this.element = element ? element : null;\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.target_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../Map.js\").default|null}\n     */\n    this.map_ = null;\n\n    /**\n     * @protected\n     * @type {!Array<import(\"../events.js\").EventsKey>}\n     */\n    this.listenerKeys = [];\n\n    if (options.render) {\n      this.render = options.render;\n    }\n\n    if (options.target) {\n      this.setTarget(options.target);\n    }\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    removeNode(this.element);\n    super.disposeInternal();\n  }\n\n  /**\n   * Get the map associated with this control.\n   * @return {import(\"../Map.js\").default|null} Map.\n   * @api\n   */\n  getMap() {\n    return this.map_;\n  }\n\n  /**\n   * Remove the control from its current map and attach it to the new map.\n   * Pass `null` to just remove the control from the current map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../Map.js\").default|null} map Map.\n   * @api\n   */\n  setMap(map) {\n    if (this.map_) {\n      removeNode(this.element);\n    }\n    for (let i = 0, ii = this.listenerKeys.length; i < ii; ++i) {\n      unlistenByKey(this.listenerKeys[i]);\n    }\n    this.listenerKeys.length = 0;\n    this.map_ = map;\n    if (map) {\n      const target = this.target_\n        ? this.target_\n        : map.getOverlayContainerStopEvent();\n      target.appendChild(this.element);\n      if (this.render !== VOID) {\n        this.listenerKeys.push(\n          listen(map, MapEventType.POSTRENDER, this.render, this)\n        );\n      }\n      map.render();\n    }\n  }\n\n  /**\n   * Renders the control.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @api\n   */\n  render(mapEvent) {}\n\n  /**\n   * This function is used to set a target element for the control. It has no\n   * effect if it is called after the control has been added to the map (i.e.\n   * after `setMap` is called on the control). If no `target` is set in the\n   * options passed to the control constructor and if `setTarget` is not called\n   * then the control is added to the map's overlay container.\n   * @param {HTMLElement|string} target Target.\n   * @api\n   */\n  setTarget(target) {\n    this.target_ =\n      typeof target === 'string' ? document.getElementById(target) : target;\n  }\n}\n\nexport default Control;\n","/**\n * @module ol/MapEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered after a map frame is rendered.\n   * @event module:ol/MapEvent~MapEvent#postrender\n   * @api\n   */\n  POSTRENDER: 'postrender',\n\n  /**\n   * Triggered when the map starts moving.\n   * @event module:ol/MapEvent~MapEvent#movestart\n   * @api\n   */\n  MOVESTART: 'movestart',\n\n  /**\n   * Triggered after the map is moved.\n   * @event module:ol/MapEvent~MapEvent#moveend\n   * @api\n   */\n  MOVEEND: 'moveend',\n\n  /**\n   * Triggered when loading of additional map data (tiles, images, features) starts.\n   * @event module:ol/MapEvent~MapEvent#loadstart\n   * @api\n   */\n  LOADSTART: 'loadstart',\n\n  /**\n   * Triggered when loading of additional map data has completed.\n   * @event module:ol/MapEvent~MapEvent#loadend\n   * @api\n   */\n  LOADEND: 'loadend',\n};\n\n/***\n * @typedef {'postrender'|'movestart'|'moveend'|'loadstart'|'loadend'} Types\n */\n","import {WORKER_OFFSCREEN_CANVAS} from './has.js';\n\n/**\n * @module ol/dom\n */\n\n//FIXME Move this function to the canvas module\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number} [width] Canvas width.\n * @param {number} [height] Canvas height.\n * @param {Array<HTMLCanvasElement>} [canvasPool] Canvas pool to take existing canvas from.\n * @param {CanvasRenderingContext2DSettings} [settings] CanvasRenderingContext2DSettings\n * @return {CanvasRenderingContext2D} The context.\n */\nexport function createCanvasContext2D(width, height, canvasPool, settings) {\n  /** @type {HTMLCanvasElement|OffscreenCanvas} */\n  let canvas;\n  if (canvasPool && canvasPool.length) {\n    canvas = canvasPool.shift();\n  } else if (WORKER_OFFSCREEN_CANVAS) {\n    canvas = new OffscreenCanvas(width || 300, height || 300);\n  } else {\n    canvas = document.createElement('canvas');\n  }\n  if (width) {\n    canvas.width = width;\n  }\n  if (height) {\n    canvas.height = height;\n  }\n  //FIXME Allow OffscreenCanvasRenderingContext2D as return type\n  return /** @type {CanvasRenderingContext2D} */ (\n    canvas.getContext('2d', settings)\n  );\n}\n\n/**\n * Releases canvas memory to avoid exceeding memory limits in Safari.\n * See https://pqina.nl/blog/total-canvas-memory-use-exceeds-the-maximum-limit/\n * @param {CanvasRenderingContext2D} context Context.\n */\nexport function releaseCanvas(context) {\n  const canvas = context.canvas;\n  canvas.width = 1;\n  canvas.height = 1;\n  context.clearRect(0, 0, 1, 1);\n}\n\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The width.\n */\nexport function outerWidth(element) {\n  let width = element.offsetWidth;\n  const style = getComputedStyle(element);\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n\n  return width;\n}\n\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The height.\n */\nexport function outerHeight(element) {\n  let height = element.offsetHeight;\n  const style = getComputedStyle(element);\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n\n  return height;\n}\n\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\nexport function replaceNode(newNode, oldNode) {\n  const parent = oldNode.parentNode;\n  if (parent) {\n    parent.replaceChild(newNode, oldNode);\n  }\n}\n\n/**\n * @param {Node} node The node to remove.\n * @return {Node|null} The node that was removed or null.\n */\nexport function removeNode(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild);\n  }\n}\n\n/**\n * Transform the children of a parent node so they match the\n * provided list of children.  This function aims to efficiently\n * remove, add, and reorder child nodes while maintaining a simple\n * implementation (it is not guaranteed to minimize DOM operations).\n * @param {Node} node The parent node whose children need reworking.\n * @param {Array<Node>} children The desired children.\n */\nexport function replaceChildren(node, children) {\n  const oldChildren = node.childNodes;\n\n  for (let i = 0; true; ++i) {\n    const oldChild = oldChildren[i];\n    const newChild = children[i];\n\n    // check if our work is done\n    if (!oldChild && !newChild) {\n      break;\n    }\n\n    // check if children match\n    if (oldChild === newChild) {\n      continue;\n    }\n\n    // check if a new child needs to be added\n    if (!oldChild) {\n      node.appendChild(newChild);\n      continue;\n    }\n\n    // check if an old child needs to be removed\n    if (!newChild) {\n      node.removeChild(oldChild);\n      --i;\n      continue;\n    }\n\n    // reorder\n    node.insertBefore(newChild, oldChild);\n  }\n}\n","/**\n * @module ol/has\n */\n\nconst ua =\n  typeof navigator !== 'undefined' && typeof navigator.userAgent !== 'undefined'\n    ? navigator.userAgent.toLowerCase()\n    : '';\n\n/**\n * User agent string says we are dealing with Firefox as browser.\n * @type {boolean}\n */\nexport const FIREFOX = ua.includes('firefox');\n\n/**\n * User agent string says we are dealing with Safari as browser.\n * @type {boolean}\n */\nexport const SAFARI = ua.includes('safari') && !ua.includes('chrom');\n\n/**\n * https://bugs.webkit.org/show_bug.cgi?id=237906\n * @type {boolean}\n */\nexport const SAFARI_BUG_237906 =\n  SAFARI &&\n  (ua.includes('version/15.4') ||\n    /cpu (os|iphone os) 15_4 like mac os x/.test(ua));\n\n/**\n * User agent string says we are dealing with a WebKit engine.\n * @type {boolean}\n */\nexport const WEBKIT = ua.includes('webkit') && !ua.includes('edge');\n\n/**\n * User agent string says we are dealing with a Mac as platform.\n * @type {boolean}\n */\nexport const MAC = ua.includes('macintosh');\n\n/**\n * The ratio between physical pixels and device-independent pixels\n * (dips) on the device (`window.devicePixelRatio`).\n * @const\n * @type {number}\n * @api\n */\nexport const DEVICE_PIXEL_RATIO =\n  typeof devicePixelRatio !== 'undefined' ? devicePixelRatio : 1;\n\n/**\n * The execution context is a worker with OffscreenCanvas available.\n * @const\n * @type {boolean}\n */\nexport const WORKER_OFFSCREEN_CANVAS =\n  typeof WorkerGlobalScope !== 'undefined' &&\n  typeof OffscreenCanvas !== 'undefined' &&\n  self instanceof WorkerGlobalScope; //eslint-disable-line\n\n/**\n * Image.prototype.decode() is supported.\n * @type {boolean}\n */\nexport const IMAGE_DECODE =\n  typeof Image !== 'undefined' && Image.prototype.decode;\n\n/**\n * @type {boolean}\n */\nexport const PASSIVE_EVENT_LISTENERS = (function () {\n  let passive = false;\n  try {\n    const options = Object.defineProperty({}, 'passive', {\n      get: function () {\n        passive = true;\n      },\n    });\n\n    window.addEventListener('_', null, options);\n    window.removeEventListener('_', null, options);\n  } catch (error) {\n    // passive not supported\n  }\n  return passive;\n})();\n","/**\n * @module ol/xml\n */\nimport {extend} from './array.js';\n\n/**\n * When using {@link module:ol/xml.makeChildAppender} or\n * {@link module:ol/xml.makeSimpleNodeFactory}, the top `objectStack` item needs\n * to have this structure.\n * @typedef {Object} NodeStackItem\n * @property {Element} node Node.\n */\n\n/**\n * @typedef {function(Element, Array<*>): void} Parser\n */\n\n/**\n * @typedef {function(Element, *, Array<*>): void} Serializer\n */\n\n/**\n * @type {string}\n */\nexport const XML_SCHEMA_INSTANCE_URI =\n  'http://www.w3.org/2001/XMLSchema-instance';\n\n/**\n * @param {string} namespaceURI Namespace URI.\n * @param {string} qualifiedName Qualified name.\n * @return {Element} Node.\n */\nexport function createElementNS(namespaceURI, qualifiedName) {\n  return getDocument().createElementNS(namespaceURI, qualifiedName);\n}\n\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @return {string} All text content.\n * @api\n */\nexport function getAllTextContent(node, normalizeWhitespace) {\n  return getAllTextContent_(node, normalizeWhitespace, []).join('');\n}\n\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @param {Array<string>} accumulator Accumulator.\n * @private\n * @return {Array<string>} Accumulator.\n */\nexport function getAllTextContent_(node, normalizeWhitespace, accumulator) {\n  if (\n    node.nodeType == Node.CDATA_SECTION_NODE ||\n    node.nodeType == Node.TEXT_NODE\n  ) {\n    if (normalizeWhitespace) {\n      accumulator.push(String(node.nodeValue).replace(/(\\r\\n|\\r|\\n)/g, ''));\n    } else {\n      accumulator.push(node.nodeValue);\n    }\n  } else {\n    let n;\n    for (n = node.firstChild; n; n = n.nextSibling) {\n      getAllTextContent_(n, normalizeWhitespace, accumulator);\n    }\n  }\n  return accumulator;\n}\n\n/**\n * @param {Object} object Object.\n * @return {boolean} Is a document.\n */\nexport function isDocument(object) {\n  return 'documentElement' in object;\n}\n\n/**\n * @param {Element} node Node.\n * @param {?string} namespaceURI Namespace URI.\n * @param {string} name Attribute name.\n * @return {string} Value\n */\nexport function getAttributeNS(node, namespaceURI, name) {\n  return node.getAttributeNS(namespaceURI, name) || '';\n}\n\n/**\n * Parse an XML string to an XML Document.\n * @param {string} xml XML.\n * @return {Document} Document.\n * @api\n */\nexport function parse(xml) {\n  return new DOMParser().parseFromString(xml, 'application/xml');\n}\n\n/**\n * Make an array extender function for extending the array at the top of the\n * object stack.\n * @param {function(this: T, Node, Array<*>): (Array<*>|undefined)} valueReader Value reader.\n * @param {T} [thisArg] The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeArrayExtender(valueReader, thisArg) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function (node, objectStack) {\n      const value = valueReader.call(\n        thisArg !== undefined ? thisArg : this,\n        node,\n        objectStack\n      );\n      if (value !== undefined) {\n        const array = /** @type {Array<*>} */ (\n          objectStack[objectStack.length - 1]\n        );\n        extend(array, value);\n      }\n    }\n  );\n}\n\n/**\n * Make an array pusher function for pushing to the array at the top of the\n * object stack.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {T} [thisArg] The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeArrayPusher(valueReader, thisArg) {\n  return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function (node, objectStack) {\n      const value = valueReader.call(\n        thisArg !== undefined ? thisArg : this,\n        node,\n        objectStack\n      );\n      if (value !== undefined) {\n        const array = /** @type {Array<*>} */ (\n          objectStack[objectStack.length - 1]\n        );\n        array.push(value);\n      }\n    }\n  );\n}\n\n/**\n * Make an object stack replacer function for replacing the object at the\n * top of the stack.\n * @param {function(this: T, Node, Array<*>): *} valueReader Value reader.\n * @param {T} [thisArg] The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeReplacer(valueReader, thisArg) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function (node, objectStack) {\n      const value = valueReader.call(\n        thisArg !== undefined ? thisArg : this,\n        node,\n        objectStack\n      );\n      if (value !== undefined) {\n        objectStack[objectStack.length - 1] = value;\n      }\n    }\n  );\n}\n\n/**\n * Make an object property pusher function for adding a property to the\n * object at the top of the stack.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {string} [property] Property.\n * @param {T} [thisArg] The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertyPusher(valueReader, property, thisArg) {\n  return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function (node, objectStack) {\n      const value = valueReader.call(\n        thisArg !== undefined ? thisArg : this,\n        node,\n        objectStack\n      );\n      if (value !== undefined) {\n        const object = /** @type {!Object} */ (\n          objectStack[objectStack.length - 1]\n        );\n        const name = property !== undefined ? property : node.localName;\n        let array;\n        if (name in object) {\n          array = object[name];\n        } else {\n          array = [];\n          object[name] = array;\n        }\n        array.push(value);\n      }\n    }\n  );\n}\n\n/**\n * Make an object property setter function.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {string} [property] Property.\n * @param {T} [thisArg] The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertySetter(valueReader, property, thisArg) {\n  return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function (node, objectStack) {\n      const value = valueReader.call(\n        thisArg !== undefined ? thisArg : this,\n        node,\n        objectStack\n      );\n      if (value !== undefined) {\n        const object = /** @type {!Object} */ (\n          objectStack[objectStack.length - 1]\n        );\n        const name = property !== undefined ? property : node.localName;\n        object[name] = value;\n      }\n    }\n  );\n}\n\n/**\n * Create a serializer that appends nodes written by its `nodeWriter` to its\n * designated parent. The parent is the `node` of the\n * {@link module:ol/xml~NodeStackItem} at the top of the `objectStack`.\n * @param {function(this: T, Node, V, Array<*>): void} nodeWriter Node writer.\n * @param {T} [thisArg] The object to use as `this` in `nodeWriter`.\n * @return {Serializer} Serializer.\n * @template T, V\n */\nexport function makeChildAppender(nodeWriter, thisArg) {\n  return function (node, value, objectStack) {\n    nodeWriter.call(\n      thisArg !== undefined ? thisArg : this,\n      node,\n      value,\n      objectStack\n    );\n    const parent = /** @type {NodeStackItem} */ (\n      objectStack[objectStack.length - 1]\n    );\n    const parentNode = parent.node;\n    parentNode.appendChild(node);\n  };\n}\n\n/**\n * Create a serializer that calls the provided `nodeWriter` from\n * {@link module:ol/xml.serialize}. This can be used by the parent writer to have the\n * `nodeWriter` called with an array of values when the `nodeWriter` was\n * designed to serialize a single item. An example would be a LineString\n * geometry writer, which could be reused for writing MultiLineString\n * geometries.\n * @param {function(this: T, Element, V, Array<*>): void} nodeWriter Node writer.\n * @param {T} [thisArg] The object to use as `this` in `nodeWriter`.\n * @return {Serializer} Serializer.\n * @template T, V\n */\nexport function makeArraySerializer(nodeWriter, thisArg) {\n  let serializersNS, nodeFactory;\n  return function (node, value, objectStack) {\n    if (serializersNS === undefined) {\n      serializersNS = {};\n      const serializers = {};\n      serializers[node.localName] = nodeWriter;\n      serializersNS[node.namespaceURI] = serializers;\n      nodeFactory = makeSimpleNodeFactory(node.localName);\n    }\n    serialize(serializersNS, nodeFactory, value, objectStack);\n  };\n}\n\n/**\n * Create a node factory which can use the `keys` passed to\n * {@link module:ol/xml.serialize} or {@link module:ol/xml.pushSerializeAndPop} as node names,\n * or a fixed node name. The namespace of the created nodes can either be fixed,\n * or the parent namespace will be used.\n * @param {string} [fixedNodeName] Fixed node name which will be used for all\n *     created nodes. If not provided, the 3rd argument to the resulting node\n *     factory needs to be provided and will be the nodeName.\n * @param {string} [fixedNamespaceURI] Fixed namespace URI which will be used for\n *     all created nodes. If not provided, the namespace of the parent node will\n *     be used.\n * @return {function(*, Array<*>, string=): (Node|undefined)} Node factory.\n */\nexport function makeSimpleNodeFactory(fixedNodeName, fixedNamespaceURI) {\n  return (\n    /**\n     * @param {*} value Value.\n     * @param {Array<*>} objectStack Object stack.\n     * @param {string} [newNodeName] Node name.\n     * @return {Node} Node.\n     */\n    function (value, objectStack, newNodeName) {\n      const context = /** @type {NodeStackItem} */ (\n        objectStack[objectStack.length - 1]\n      );\n      const node = context.node;\n      let nodeName = fixedNodeName;\n      if (nodeName === undefined) {\n        nodeName = newNodeName;\n      }\n\n      const namespaceURI =\n        fixedNamespaceURI !== undefined ? fixedNamespaceURI : node.namespaceURI;\n      return createElementNS(namespaceURI, /** @type {string} */ (nodeName));\n    }\n  );\n}\n\n/**\n * A node factory that creates a node using the parent's `namespaceURI` and the\n * `nodeName` passed by {@link module:ol/xml.serialize} or\n * {@link module:ol/xml.pushSerializeAndPop} to the node factory.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nexport const OBJECT_PROPERTY_NODE_FACTORY = makeSimpleNodeFactory();\n\n/**\n * Create an array of `values` to be used with {@link module:ol/xml.serialize} or\n * {@link module:ol/xml.pushSerializeAndPop}, where `orderedKeys` has to be provided as\n * `key` argument.\n * @param {Object<string, *>} object Key-value pairs for the sequence. Keys can\n *     be a subset of the `orderedKeys`.\n * @param {Array<string>} orderedKeys Keys in the order of the sequence.\n * @return {Array<*>} Values in the order of the sequence. The resulting array\n *     has the same length as the `orderedKeys` array. Values that are not\n *     present in `object` will be `undefined` in the resulting array.\n */\nexport function makeSequence(object, orderedKeys) {\n  const length = orderedKeys.length;\n  const sequence = new Array(length);\n  for (let i = 0; i < length; ++i) {\n    sequence[i] = object[orderedKeys[i]];\n  }\n  return sequence;\n}\n\n/**\n * Create a namespaced structure, using the same values for each namespace.\n * This can be used as a starting point for versioned parsers, when only a few\n * values are version specific.\n * @param {Array<string>} namespaceURIs Namespace URIs.\n * @param {T} structure Structure.\n * @param {Object<string, T>} [structureNS] Namespaced structure to add to.\n * @return {Object<string, T>} Namespaced structure.\n * @template T\n */\nexport function makeStructureNS(namespaceURIs, structure, structureNS) {\n  structureNS = structureNS !== undefined ? structureNS : {};\n  let i, ii;\n  for (i = 0, ii = namespaceURIs.length; i < ii; ++i) {\n    structureNS[namespaceURIs[i]] = structure;\n  }\n  return structureNS;\n}\n\n/**\n * Parse a node using the parsers and object stack.\n * @param {Object<string, Object<string, Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @param {*} [thisArg] The object to use as `this`.\n */\nexport function parseNode(parsersNS, node, objectStack, thisArg) {\n  let n;\n  for (n = node.firstElementChild; n; n = n.nextElementSibling) {\n    const parsers = parsersNS[n.namespaceURI];\n    if (parsers !== undefined) {\n      const parser = parsers[n.localName];\n      if (parser !== undefined) {\n        parser.call(thisArg, n, objectStack);\n      }\n    }\n  }\n}\n\n/**\n * Push an object on top of the stack, parse and return the popped object.\n * @param {T} object Object.\n * @param {Object<string, Object<string, Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @param {*} [thisArg] The object to use as `this`.\n * @return {T} Object.\n * @template T\n */\nexport function pushParseAndPop(object, parsersNS, node, objectStack, thisArg) {\n  objectStack.push(object);\n  parseNode(parsersNS, node, objectStack, thisArg);\n  return /** @type {T} */ (objectStack.pop());\n}\n\n/**\n * Walk through an array of `values` and call a serializer for each value.\n * @param {Object<string, Object<string, Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array<*>} objectStack Node stack.\n * @param {Array<string>} [keys] Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `keys` has\n *     to match the length of `values`. For serializing a sequence, `keys`\n *     determines the order of the sequence.\n * @param {T} [thisArg] The object to use as `this` for the node factory and\n *     serializers.\n * @template T\n */\nexport function serialize(\n  serializersNS,\n  nodeFactory,\n  values,\n  objectStack,\n  keys,\n  thisArg\n) {\n  const length = (keys !== undefined ? keys : values).length;\n  let value, node;\n  for (let i = 0; i < length; ++i) {\n    value = values[i];\n    if (value !== undefined) {\n      node = nodeFactory.call(\n        thisArg !== undefined ? thisArg : this,\n        value,\n        objectStack,\n        keys !== undefined ? keys[i] : undefined\n      );\n      if (node !== undefined) {\n        serializersNS[node.namespaceURI][node.localName].call(\n          thisArg,\n          node,\n          value,\n          objectStack\n        );\n      }\n    }\n  }\n}\n\n/**\n * @param {O} object Object.\n * @param {Object<string, Object<string, Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array<*>} objectStack Node stack.\n * @param {Array<string>} [keys] Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `keys` has\n *     to match the length of `values`. For serializing a sequence, `keys`\n *     determines the order of the sequence.\n * @param {T} [thisArg] The object to use as `this` for the node factory and\n *     serializers.\n * @return {O|undefined} Object.\n * @template O, T\n */\nexport function pushSerializeAndPop(\n  object,\n  serializersNS,\n  nodeFactory,\n  values,\n  objectStack,\n  keys,\n  thisArg\n) {\n  objectStack.push(object);\n  serialize(serializersNS, nodeFactory, values, objectStack, keys, thisArg);\n  return /** @type {O|undefined} */ (objectStack.pop());\n}\n\nlet xmlSerializer_ = undefined;\n\n/**\n * Register a XMLSerializer. Can be used  to inject a XMLSerializer\n * where there is no globally available implementation.\n *\n * @param {XMLSerializer} xmlSerializer A XMLSerializer.\n * @api\n */\nexport function registerXMLSerializer(xmlSerializer) {\n  xmlSerializer_ = xmlSerializer;\n}\n\n/**\n * @return {XMLSerializer} The XMLSerializer.\n */\nexport function getXMLSerializer() {\n  if (xmlSerializer_ === undefined && typeof XMLSerializer !== 'undefined') {\n    xmlSerializer_ = new XMLSerializer();\n  }\n  return xmlSerializer_;\n}\n\nlet document_ = undefined;\n\n/**\n * Register a Document to use when creating nodes for XML serializations. Can be used\n * to inject a Document where there is no globally available implementation.\n *\n * @param {Document} document A Document.\n * @api\n */\nexport function registerDocument(document) {\n  document_ = document;\n}\n\n/**\n * Get a document that should be used when creating nodes for XML serializations.\n * @return {Document} The document.\n */\nexport function getDocument() {\n  if (document_ === undefined && typeof document !== 'undefined') {\n    document_ = document.implementation.createDocument('', '', null);\n  }\n  return document_;\n}\n","/**\n * @module ol/format/XML\n */\nimport {isDocument, parse} from '../xml.js';\n\n/**\n * @classdesc\n * Generic format for reading non-feature XML data\n *\n * @abstract\n */\nclass XML {\n  /**\n   * Read the source document.\n   *\n   * @param {Document|Element|string} source The XML source.\n   * @return {Object} An object representing the source.\n   * @api\n   */\n  read(source) {\n    if (!source) {\n      return null;\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readFromDocument(doc);\n    } else if (isDocument(source)) {\n      return this.readFromDocument(/** @type {Document} */ (source));\n    } else {\n      return this.readFromNode(/** @type {Element} */ (source));\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {Object} Object\n   */\n  readFromDocument(doc) {\n    for (let n = doc.firstChild; n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        return this.readFromNode(/** @type {Element} */ (n));\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @abstract\n   * @param {Element} node Node.\n   * @return {Object} Object\n   */\n  readFromNode(node) {}\n}\n\nexport default XML;\n","/**\n * @module ol/string\n */\n\n/**\n * @param {number} number Number to be formatted\n * @param {number} width The desired width\n * @param {number} [precision] Precision of the output string (i.e. number of decimal places)\n * @return {string} Formatted string\n */\nexport function padNumber(number, width, precision) {\n  const numberString =\n    precision !== undefined ? number.toFixed(precision) : '' + number;\n  let decimal = numberString.indexOf('.');\n  decimal = decimal === -1 ? numberString.length : decimal;\n  return decimal > width\n    ? numberString\n    : new Array(1 + width - decimal).join('0') + numberString;\n}\n\n/**\n * Adapted from https://github.com/omichelsen/compare-versions/blob/master/index.js\n * @param {string|number} v1 First version\n * @param {string|number} v2 Second version\n * @return {number} Value\n */\nexport function compareVersions(v1, v2) {\n  const s1 = ('' + v1).split('.');\n  const s2 = ('' + v2).split('.');\n\n  for (let i = 0; i < Math.max(s1.length, s2.length); i++) {\n    const n1 = parseInt(s1[i] || '0', 10);\n    const n2 = parseInt(s2[i] || '0', 10);\n\n    if (n1 > n2) {\n      return 1;\n    }\n    if (n2 > n1) {\n      return -1;\n    }\n  }\n\n  return 0;\n}\n","/**\n * @module ol/format/xsd\n */\nimport {getAllTextContent, getDocument} from '../xml.js';\nimport {padNumber} from '../string.js';\n\n/**\n * @param {Node} node Node.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBoolean(node) {\n  const s = getAllTextContent(node, false);\n  return readBooleanString(s);\n}\n\n/**\n * @param {string} string String.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBooleanString(string) {\n  const m = /^\\s*(true|1)|(false|0)\\s*$/.exec(string);\n  if (m) {\n    return m[1] !== undefined || false;\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} DateTime in seconds.\n */\nexport function readDateTime(node) {\n  const s = getAllTextContent(node, false);\n  const dateTime = Date.parse(s);\n  return isNaN(dateTime) ? undefined : dateTime / 1000;\n}\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimal(node) {\n  const s = getAllTextContent(node, false);\n  return readDecimalString(s);\n}\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimalString(string) {\n  // FIXME check spec\n  const m = /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*$/i.exec(string);\n  if (m) {\n    return parseFloat(m[1]);\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Non negative integer.\n */\nexport function readPositiveInteger(node) {\n  const s = getAllTextContent(node, false);\n  return readNonNegativeIntegerString(s);\n}\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Non negative integer.\n */\nexport function readNonNegativeIntegerString(string) {\n  const m = /^\\s*(\\d+)\\s*$/.exec(string);\n  if (m) {\n    return parseInt(m[1], 10);\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * @param {Node} node Node.\n * @return {string|undefined} String.\n */\nexport function readString(node) {\n  return getAllTextContent(node, false).trim();\n}\n\n/**\n * @param {Node} node Node to append a TextNode with the boolean to.\n * @param {boolean} bool Boolean.\n */\nexport function writeBooleanTextNode(node, bool) {\n  writeStringTextNode(node, bool ? '1' : '0');\n}\n\n/**\n * @param {Node} node Node to append a CDATA Section with the string to.\n * @param {string} string String.\n */\nexport function writeCDATASection(node, string) {\n  node.appendChild(getDocument().createCDATASection(string));\n}\n\n/**\n * @param {Node} node Node to append a TextNode with the dateTime to.\n * @param {number} dateTime DateTime in seconds.\n */\nexport function writeDateTimeTextNode(node, dateTime) {\n  const date = new Date(dateTime * 1000);\n  const string =\n    date.getUTCFullYear() +\n    '-' +\n    padNumber(date.getUTCMonth() + 1, 2) +\n    '-' +\n    padNumber(date.getUTCDate(), 2) +\n    'T' +\n    padNumber(date.getUTCHours(), 2) +\n    ':' +\n    padNumber(date.getUTCMinutes(), 2) +\n    ':' +\n    padNumber(date.getUTCSeconds(), 2) +\n    'Z';\n  node.appendChild(getDocument().createTextNode(string));\n}\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} decimal Decimal.\n */\nexport function writeDecimalTextNode(node, decimal) {\n  const string = decimal.toPrecision();\n  node.appendChild(getDocument().createTextNode(string));\n}\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} nonNegativeInteger Non negative integer.\n */\nexport function writeNonNegativeIntegerTextNode(node, nonNegativeInteger) {\n  const string = nonNegativeInteger.toString();\n  node.appendChild(getDocument().createTextNode(string));\n}\n\n/**\n * @param {Node} node Node to append a TextNode with the string to.\n * @param {string} string String.\n */\nexport function writeStringTextNode(node, string) {\n  node.appendChild(getDocument().createTextNode(string));\n}\n","/**\n * @module ol/format/xlink\n */\n\n/**\n * @const\n * @type {string}\n */\nconst NAMESPACE_URI = 'http://www.w3.org/1999/xlink';\n\n/**\n * @param {Element} node Node.\n * @return {string|undefined} href.\n */\nexport function readHref(node) {\n  return node.getAttributeNS(NAMESPACE_URI, 'href');\n}\n","/**\n * @module ol/format/WMSCapabilities\n */\nimport XML from './XML.js';\nimport {\n  makeArrayPusher,\n  makeObjectPropertyPusher,\n  makeObjectPropertySetter,\n  makeStructureNS,\n  pushParseAndPop,\n} from '../xml.js';\nimport {\n  readBooleanString,\n  readDecimal,\n  readDecimalString,\n  readNonNegativeIntegerString,\n  readPositiveInteger,\n  readString,\n} from './xsd.js';\nimport {readHref} from './xlink.js';\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nconst NAMESPACE_URIS = [null, 'http://www.opengis.net/wms'];\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Service': makeObjectPropertySetter(readService),\n  'Capability': makeObjectPropertySetter(readCapability),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst CAPABILITY_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Request': makeObjectPropertySetter(readRequest),\n  'Exception': makeObjectPropertySetter(readException),\n  'Layer': makeObjectPropertySetter(readCapabilityLayer),\n});\n\n/**\n * @classdesc\n * Format for reading WMS capabilities data\n *\n * @api\n */\nclass WMSCapabilities extends XML {\n  constructor() {\n    super();\n\n    /**\n     * @type {string|undefined}\n     */\n    this.version = undefined;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {Object} Object\n   */\n  readFromNode(node) {\n    this.version = node.getAttribute('version').trim();\n    const wmsCapabilityObject = pushParseAndPop(\n      {\n        'version': this.version,\n      },\n      PARSERS,\n      node,\n      []\n    );\n    return wmsCapabilityObject ? wmsCapabilityObject : null;\n  }\n}\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst SERVICE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Name': makeObjectPropertySetter(readString),\n  'Title': makeObjectPropertySetter(readString),\n  'Abstract': makeObjectPropertySetter(readString),\n  'KeywordList': makeObjectPropertySetter(readKeywordList),\n  'OnlineResource': makeObjectPropertySetter(readHref),\n  'ContactInformation': makeObjectPropertySetter(readContactInformation),\n  'Fees': makeObjectPropertySetter(readString),\n  'AccessConstraints': makeObjectPropertySetter(readString),\n  'LayerLimit': makeObjectPropertySetter(readPositiveInteger),\n  'MaxWidth': makeObjectPropertySetter(readPositiveInteger),\n  'MaxHeight': makeObjectPropertySetter(readPositiveInteger),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst CONTACT_INFORMATION_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'ContactPersonPrimary': makeObjectPropertySetter(readContactPersonPrimary),\n  'ContactPosition': makeObjectPropertySetter(readString),\n  'ContactAddress': makeObjectPropertySetter(readContactAddress),\n  'ContactVoiceTelephone': makeObjectPropertySetter(readString),\n  'ContactFacsimileTelephone': makeObjectPropertySetter(readString),\n  'ContactElectronicMailAddress': makeObjectPropertySetter(readString),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst CONTACT_PERSON_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'ContactPerson': makeObjectPropertySetter(readString),\n  'ContactOrganization': makeObjectPropertySetter(readString),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst CONTACT_ADDRESS_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'AddressType': makeObjectPropertySetter(readString),\n  'Address': makeObjectPropertySetter(readString),\n  'City': makeObjectPropertySetter(readString),\n  'StateOrProvince': makeObjectPropertySetter(readString),\n  'PostCode': makeObjectPropertySetter(readString),\n  'Country': makeObjectPropertySetter(readString),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst EXCEPTION_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Format': makeArrayPusher(readString),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst LAYER_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Name': makeObjectPropertySetter(readString),\n  'Title': makeObjectPropertySetter(readString),\n  'Abstract': makeObjectPropertySetter(readString),\n  'KeywordList': makeObjectPropertySetter(readKeywordList),\n  'CRS': makeObjectPropertyPusher(readString),\n  'EX_GeographicBoundingBox': makeObjectPropertySetter(\n    readEXGeographicBoundingBox\n  ),\n  'BoundingBox': makeObjectPropertyPusher(readBoundingBox),\n  'Dimension': makeObjectPropertyPusher(readDimension),\n  'Attribution': makeObjectPropertySetter(readAttribution),\n  'AuthorityURL': makeObjectPropertyPusher(readAuthorityURL),\n  'Identifier': makeObjectPropertyPusher(readString),\n  'MetadataURL': makeObjectPropertyPusher(readMetadataURL),\n  'DataURL': makeObjectPropertyPusher(readFormatOnlineresource),\n  'FeatureListURL': makeObjectPropertyPusher(readFormatOnlineresource),\n  'Style': makeObjectPropertyPusher(readStyle),\n  'MinScaleDenominator': makeObjectPropertySetter(readDecimal),\n  'MaxScaleDenominator': makeObjectPropertySetter(readDecimal),\n  'Layer': makeObjectPropertyPusher(readLayer),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst ATTRIBUTION_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Title': makeObjectPropertySetter(readString),\n  'OnlineResource': makeObjectPropertySetter(readHref),\n  'LogoURL': makeObjectPropertySetter(readSizedFormatOnlineresource),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'westBoundLongitude': makeObjectPropertySetter(readDecimal),\n  'eastBoundLongitude': makeObjectPropertySetter(readDecimal),\n  'southBoundLatitude': makeObjectPropertySetter(readDecimal),\n  'northBoundLatitude': makeObjectPropertySetter(readDecimal),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst REQUEST_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'GetCapabilities': makeObjectPropertySetter(readOperationType),\n  'GetMap': makeObjectPropertySetter(readOperationType),\n  'GetFeatureInfo': makeObjectPropertySetter(readOperationType),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst OPERATIONTYPE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Format': makeObjectPropertyPusher(readString),\n  'DCPType': makeObjectPropertyPusher(readDCPType),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst DCPTYPE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'HTTP': makeObjectPropertySetter(readHTTP),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst HTTP_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Get': makeObjectPropertySetter(readFormatOnlineresource),\n  'Post': makeObjectPropertySetter(readFormatOnlineresource),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst STYLE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Name': makeObjectPropertySetter(readString),\n  'Title': makeObjectPropertySetter(readString),\n  'Abstract': makeObjectPropertySetter(readString),\n  'LegendURL': makeObjectPropertyPusher(readSizedFormatOnlineresource),\n  'StyleSheetURL': makeObjectPropertySetter(readFormatOnlineresource),\n  'StyleURL': makeObjectPropertySetter(readFormatOnlineresource),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst FORMAT_ONLINERESOURCE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Format': makeObjectPropertySetter(readString),\n  'OnlineResource': makeObjectPropertySetter(readHref),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst KEYWORDLIST_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Keyword': makeArrayPusher(readString),\n});\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Attribution object.\n */\nfunction readAttribution(node, objectStack) {\n  return pushParseAndPop({}, ATTRIBUTION_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object} Bounding box object.\n */\nfunction readBoundingBox(node, objectStack) {\n  const extent = [\n    readDecimalString(node.getAttribute('minx')),\n    readDecimalString(node.getAttribute('miny')),\n    readDecimalString(node.getAttribute('maxx')),\n    readDecimalString(node.getAttribute('maxy')),\n  ];\n\n  const resolutions = [\n    readDecimalString(node.getAttribute('resx')),\n    readDecimalString(node.getAttribute('resy')),\n  ];\n\n  return {\n    'crs': node.getAttribute('CRS'),\n    'extent': extent,\n    'res': resolutions,\n  };\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {import(\"../extent.js\").Extent|undefined} Bounding box object.\n */\nfunction readEXGeographicBoundingBox(node, objectStack) {\n  const geographicBoundingBox = pushParseAndPop(\n    {},\n    EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS,\n    node,\n    objectStack\n  );\n  if (!geographicBoundingBox) {\n    return undefined;\n  }\n  const westBoundLongitude =\n    /** @type {number|undefined} */\n    (geographicBoundingBox['westBoundLongitude']);\n  const southBoundLatitude =\n    /** @type {number|undefined} */\n    (geographicBoundingBox['southBoundLatitude']);\n  const eastBoundLongitude =\n    /** @type {number|undefined} */\n    (geographicBoundingBox['eastBoundLongitude']);\n  const northBoundLatitude =\n    /** @type {number|undefined} */\n    (geographicBoundingBox['northBoundLatitude']);\n  if (\n    westBoundLongitude === undefined ||\n    southBoundLatitude === undefined ||\n    eastBoundLongitude === undefined ||\n    northBoundLatitude === undefined\n  ) {\n    return undefined;\n  }\n  return [\n    westBoundLongitude,\n    southBoundLatitude,\n    eastBoundLongitude,\n    northBoundLatitude,\n  ];\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Capability object.\n */\nfunction readCapability(node, objectStack) {\n  return pushParseAndPop({}, CAPABILITY_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Service object.\n */\nfunction readService(node, objectStack) {\n  return pushParseAndPop({}, SERVICE_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Contact information object.\n */\nfunction readContactInformation(node, objectStack) {\n  return pushParseAndPop({}, CONTACT_INFORMATION_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Contact person object.\n */\nfunction readContactPersonPrimary(node, objectStack) {\n  return pushParseAndPop({}, CONTACT_PERSON_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Contact address object.\n */\nfunction readContactAddress(node, objectStack) {\n  return pushParseAndPop({}, CONTACT_ADDRESS_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<string>|undefined} Format array.\n */\nfunction readException(node, objectStack) {\n  return pushParseAndPop([], EXCEPTION_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Layer object.\n */\nfunction readCapabilityLayer(node, objectStack) {\n  const layerObject = pushParseAndPop({}, LAYER_PARSERS, node, objectStack);\n\n  if (layerObject['Layer'] === undefined) {\n    return Object.assign(layerObject, readLayer(node, objectStack));\n  }\n\n  return layerObject;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Layer object.\n */\nfunction readLayer(node, objectStack) {\n  const parentLayerObject = /**  @type {!Object<string,*>} */ (\n    objectStack[objectStack.length - 1]\n  );\n\n  const layerObject = pushParseAndPop({}, LAYER_PARSERS, node, objectStack);\n\n  if (!layerObject) {\n    return undefined;\n  }\n  let queryable = readBooleanString(node.getAttribute('queryable'));\n  if (queryable === undefined) {\n    queryable = parentLayerObject['queryable'];\n  }\n  layerObject['queryable'] = queryable !== undefined ? queryable : false;\n\n  let cascaded = readNonNegativeIntegerString(node.getAttribute('cascaded'));\n  if (cascaded === undefined) {\n    cascaded = parentLayerObject['cascaded'];\n  }\n  layerObject['cascaded'] = cascaded;\n\n  let opaque = readBooleanString(node.getAttribute('opaque'));\n  if (opaque === undefined) {\n    opaque = parentLayerObject['opaque'];\n  }\n  layerObject['opaque'] = opaque !== undefined ? opaque : false;\n\n  let noSubsets = readBooleanString(node.getAttribute('noSubsets'));\n  if (noSubsets === undefined) {\n    noSubsets = parentLayerObject['noSubsets'];\n  }\n  layerObject['noSubsets'] = noSubsets !== undefined ? noSubsets : false;\n\n  let fixedWidth = readDecimalString(node.getAttribute('fixedWidth'));\n  if (!fixedWidth) {\n    fixedWidth = parentLayerObject['fixedWidth'];\n  }\n  layerObject['fixedWidth'] = fixedWidth;\n\n  let fixedHeight = readDecimalString(node.getAttribute('fixedHeight'));\n  if (!fixedHeight) {\n    fixedHeight = parentLayerObject['fixedHeight'];\n  }\n  layerObject['fixedHeight'] = fixedHeight;\n\n  // See 7.2.4.8\n  const addKeys = ['Style', 'CRS', 'AuthorityURL'];\n  addKeys.forEach(function (key) {\n    if (key in parentLayerObject) {\n      const childValue = layerObject[key] || [];\n      layerObject[key] = childValue.concat(parentLayerObject[key]);\n    }\n  });\n\n  const replaceKeys = [\n    'EX_GeographicBoundingBox',\n    'BoundingBox',\n    'Dimension',\n    'Attribution',\n    'MinScaleDenominator',\n    'MaxScaleDenominator',\n  ];\n  replaceKeys.forEach(function (key) {\n    if (!(key in layerObject)) {\n      const parentValue = parentLayerObject[key];\n      layerObject[key] = parentValue;\n    }\n  });\n\n  return layerObject;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object} Dimension object.\n */\nfunction readDimension(node, objectStack) {\n  const dimensionObject = {\n    'name': node.getAttribute('name'),\n    'units': node.getAttribute('units'),\n    'unitSymbol': node.getAttribute('unitSymbol'),\n    'default': node.getAttribute('default'),\n    'multipleValues': readBooleanString(node.getAttribute('multipleValues')),\n    'nearestValue': readBooleanString(node.getAttribute('nearestValue')),\n    'current': readBooleanString(node.getAttribute('current')),\n    'values': readString(node),\n  };\n  return dimensionObject;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Online resource object.\n */\nfunction readFormatOnlineresource(node, objectStack) {\n  return pushParseAndPop({}, FORMAT_ONLINERESOURCE_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Request object.\n */\nfunction readRequest(node, objectStack) {\n  return pushParseAndPop({}, REQUEST_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} DCP type object.\n */\nfunction readDCPType(node, objectStack) {\n  return pushParseAndPop({}, DCPTYPE_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} HTTP object.\n */\nfunction readHTTP(node, objectStack) {\n  return pushParseAndPop({}, HTTP_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Operation type object.\n */\nfunction readOperationType(node, objectStack) {\n  return pushParseAndPop({}, OPERATIONTYPE_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Online resource object.\n */\nfunction readSizedFormatOnlineresource(node, objectStack) {\n  const formatOnlineresource = readFormatOnlineresource(node, objectStack);\n  if (formatOnlineresource) {\n    const size = [\n      readNonNegativeIntegerString(node.getAttribute('width')),\n      readNonNegativeIntegerString(node.getAttribute('height')),\n    ];\n    formatOnlineresource['size'] = size;\n    return formatOnlineresource;\n  }\n  return undefined;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Authority URL object.\n */\nfunction readAuthorityURL(node, objectStack) {\n  const authorityObject = readFormatOnlineresource(node, objectStack);\n  if (authorityObject) {\n    authorityObject['name'] = node.getAttribute('name');\n    return authorityObject;\n  }\n  return undefined;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Metadata URL object.\n */\nfunction readMetadataURL(node, objectStack) {\n  const metadataObject = readFormatOnlineresource(node, objectStack);\n  if (metadataObject) {\n    metadataObject['type'] = node.getAttribute('type');\n    return metadataObject;\n  }\n  return undefined;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Style object.\n */\nfunction readStyle(node, objectStack) {\n  return pushParseAndPop({}, STYLE_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<string>|undefined} Keyword list.\n */\nfunction readKeywordList(node, objectStack) {\n  return pushParseAndPop([], KEYWORDLIST_PARSERS, node, objectStack);\n}\n\nexport default WMSCapabilities;\n","/**\n * @module ol/Map\n */\nimport BaseObject from './Object.js';\nimport Collection from './Collection.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport CompositeMapRenderer from './renderer/Composite.js';\nimport EventType from './events/EventType.js';\nimport Layer from './layer/Layer.js';\nimport LayerGroup, {GroupEvent} from './layer/Group.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventHandler from './MapBrowserEventHandler.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapEvent from './MapEvent.js';\nimport MapEventType from './MapEventType.js';\nimport MapProperty from './MapProperty.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport PointerEventType from './pointer/EventType.js';\nimport RenderEventType from './render/EventType.js';\nimport TileQueue, {getTilePriority} from './TileQueue.js';\nimport View from './View.js';\nimport ViewHint from './ViewHint.js';\nimport {DEVICE_PIXEL_RATIO, PASSIVE_EVENT_LISTENERS} from './has.js';\nimport {TRUE} from './functions.js';\nimport {\n  apply as applyTransform,\n  create as createTransform,\n} from './transform.js';\nimport {assert} from './asserts.js';\nimport {\n  clone,\n  createOrUpdateEmpty,\n  equals,\n  getForViewAndSize,\n  isEmpty,\n} from './extent.js';\nimport {defaults as defaultControls} from './control/defaults.js';\nimport {defaults as defaultInteractions} from './interaction/defaults.js';\nimport {fromUserCoordinate, toUserCoordinate} from './proj.js';\nimport {getUid} from './util.js';\nimport {hasArea} from './size.js';\nimport {listen, unlistenByKey} from './events.js';\nimport {removeNode} from './dom.js';\n\n/**\n * State of the current frame. Only `pixelRatio`, `time` and `viewState` should\n * be used in applications.\n * @typedef {Object} FrameState\n * @property {number} pixelRatio The pixel ratio of the frame.\n * @property {number} time The time when rendering of the frame was requested.\n * @property {import(\"./View.js\").State} viewState The state of the current view.\n * @property {boolean} animate Animate.\n * @property {import(\"./transform.js\").Transform} coordinateToPixelTransform CoordinateToPixelTransform.\n * @property {import(\"rbush\").default} declutterTree DeclutterTree.\n * @property {null|import(\"./extent.js\").Extent} extent Extent.\n * @property {import(\"./extent.js\").Extent} [nextExtent] Next extent during an animation series.\n * @property {number} index Index.\n * @property {Array<import(\"./layer/Layer.js\").State>} layerStatesArray LayerStatesArray.\n * @property {number} layerIndex LayerIndex.\n * @property {import(\"./transform.js\").Transform} pixelToCoordinateTransform PixelToCoordinateTransform.\n * @property {Array<PostRenderFunction>} postRenderFunctions PostRenderFunctions.\n * @property {import(\"./size.js\").Size} size Size.\n * @property {TileQueue} tileQueue TileQueue.\n * @property {!Object<string, Object<string, boolean>>} usedTiles UsedTiles.\n * @property {Array<number>} viewHints ViewHints.\n * @property {!Object<string, Object<string, boolean>>} wantedTiles WantedTiles.\n * @property {string} mapId The id of the map.\n * @property {Object<string, boolean>} renderTargets Identifiers of previously rendered elements.\n */\n\n/**\n * @typedef {function(Map, ?FrameState): any} PostRenderFunction\n */\n\n/**\n * @typedef {Object} AtPixelOptions\n * @property {undefined|function(import(\"./layer/Layer.js\").default<import(\"./source/Source\").default>): boolean} [layerFilter] Layer filter\n * function. The filter function will receive one argument, the\n * {@link module:ol/layer/Layer~Layer layer-candidate} and it should return a boolean value.\n * Only layers which are visible and for which this function returns `true`\n * will be tested for features. By default, all visible layers will be tested.\n * @property {number} [hitTolerance=0] Hit-detection tolerance in css pixels. Pixels\n * inside the radius around the given position will be checked for features.\n * @property {boolean} [checkWrapped=true] Check-Wrapped Will check for wrapped geometries inside the range of\n *   +/- 1 world width. Works only if a projection is used that can be wrapped.\n */\n\n/**\n * @typedef {Object} MapOptionsInternal\n * @property {Collection<import(\"./control/Control.js\").default>} [controls] Controls.\n * @property {Collection<import(\"./interaction/Interaction.js\").default>} [interactions] Interactions.\n * @property {HTMLElement|Document} keyboardEventTarget KeyboardEventTarget.\n * @property {Collection<import(\"./Overlay.js\").default>} overlays Overlays.\n * @property {Object<string, *>} values Values.\n */\n\n/**\n * @typedef {import(\"./ObjectEventType\").Types|'change:layergroup'|'change:size'|'change:target'|'change:view'} MapObjectEventTypes\n */\n\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *    import(\"./Observable\").OnSignature<MapObjectEventTypes, import(\"./Object\").ObjectEvent, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./MapBrowserEventType\").Types, import(\"./MapBrowserEvent\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./MapEventType\").Types, import(\"./MapEvent\").default, Return> &\n *    import(\"./Observable\").OnSignature<import(\"./render/EventType\").MapRenderEventTypes, import(\"./render/Event\").default, Return> &\n *    import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|MapObjectEventTypes|\n *      import(\"./MapBrowserEventType\").Types|import(\"./MapEventType\").Types|\n *      import(\"./render/EventType\").MapRenderEventTypes, Return>} MapEventHandler\n */\n\n/**\n * Object literal with config options for the map.\n * @typedef {Object} MapOptions\n * @property {Collection<import(\"./control/Control.js\").default>|Array<import(\"./control/Control.js\").default>} [controls]\n * Controls initially added to the map. If not specified,\n * {@link module:ol/control/defaults.defaults} is used.\n * @property {number} [pixelRatio=window.devicePixelRatio] The ratio between\n * physical pixels and device-independent pixels (dips) on the device.\n * @property {Collection<import(\"./interaction/Interaction.js\").default>|Array<import(\"./interaction/Interaction.js\").default>} [interactions]\n * Interactions that are initially added to the map. If not specified,\n * {@link module:ol/interaction/defaults.defaults} is used.\n * @property {HTMLElement|Document|string} [keyboardEventTarget] The element to\n * listen to keyboard events on. This determines when the `KeyboardPan` and\n * `KeyboardZoom` interactions trigger. For example, if this option is set to\n * `document` the keyboard interactions will always trigger. If this option is\n * not specified, the element the library listens to keyboard events on is the\n * map target (i.e. the user-provided div for the map). If this is not\n * `document`, the target element needs to be focused for key events to be\n * emitted, requiring that the target element has a `tabindex` attribute.\n * @property {Array<import(\"./layer/Base.js\").default>|Collection<import(\"./layer/Base.js\").default>|LayerGroup} [layers]\n * Layers. If this is not defined, a map with no layers will be rendered. Note\n * that layers are rendered in the order supplied, so if you want, for example,\n * a vector layer to appear on top of a tile layer, it must come after the tile\n * layer.\n * @property {number} [maxTilesLoading=16] Maximum number tiles to load\n * simultaneously.\n * @property {number} [moveTolerance=1] The minimum distance in pixels the\n * cursor must move to be detected as a map move event instead of a click.\n * Increasing this value can make it easier to click on the map.\n * @property {Collection<import(\"./Overlay.js\").default>|Array<import(\"./Overlay.js\").default>} [overlays]\n * Overlays initially added to the map. By default, no overlays are added.\n * @property {HTMLElement|string} [target] The container for the map, either the\n * element itself or the `id` of the element. If not specified at construction\n * time, {@link module:ol/Map~Map#setTarget} must be called for the map to be\n * rendered. If passed by element, the container can be in a secondary document.\n * @property {View|Promise<import(\"./View.js\").ViewOptions>} [view] The map's view.  No layer sources will be\n * fetched unless this is specified at construction time or through\n * {@link module:ol/Map~Map#setView}.\n */\n\n/**\n * @param {import(\"./layer/Base.js\").default} layer Layer.\n */\nfunction removeLayerMapProperty(layer) {\n  if (layer instanceof Layer) {\n    layer.setMapInternal(null);\n    return;\n  }\n  if (layer instanceof LayerGroup) {\n    layer.getLayers().forEach(removeLayerMapProperty);\n  }\n}\n\n/**\n * @param {import(\"./layer/Base.js\").default} layer Layer.\n * @param {Map} map Map.\n */\nfunction setLayerMapProperty(layer, map) {\n  if (layer instanceof Layer) {\n    layer.setMapInternal(map);\n    return;\n  }\n  if (layer instanceof LayerGroup) {\n    const layers = layer.getLayers().getArray();\n    for (let i = 0, ii = layers.length; i < ii; ++i) {\n      setLayerMapProperty(layers[i], map);\n    }\n  }\n}\n\n/**\n * @classdesc\n * The map is the core component of OpenLayers. For a map to render, a view,\n * one or more layers, and a target container are needed:\n *\n *     import Map from 'ol/Map';\n *     import View from 'ol/View';\n *     import TileLayer from 'ol/layer/Tile';\n *     import OSM from 'ol/source/OSM';\n *\n *     const map = new Map({\n *       view: new View({\n *         center: [0, 0],\n *         zoom: 1,\n *       }),\n *       layers: [\n *         new TileLayer({\n *           source: new OSM(),\n *         }),\n *       ],\n *       target: 'map',\n *     });\n *\n * The above snippet creates a map using a {@link module:ol/layer/Tile~TileLayer} to\n * display {@link module:ol/source/OSM~OSM} OSM data and render it to a DOM\n * element with the id `map`.\n *\n * The constructor places a viewport container (with CSS class name\n * `ol-viewport`) in the target element (see `getViewport()`), and then two\n * further elements within the viewport: one with CSS class name\n * `ol-overlaycontainer-stopevent` for controls and some overlays, and one with\n * CSS class name `ol-overlaycontainer` for other overlays (see the `stopEvent`\n * option of {@link module:ol/Overlay~Overlay} for the difference). The map\n * itself is placed in a further element within the viewport.\n *\n * Layers are stored as a {@link module:ol/Collection~Collection} in\n * layerGroups. A top-level group is provided by the library. This is what is\n * accessed by `getLayerGroup` and `setLayerGroup`. Layers entered in the\n * options are added to this group, and `addLayer` and `removeLayer` change the\n * layer collection in the group. `getLayers` is a convenience function for\n * `getLayerGroup().getLayers()`. Note that {@link module:ol/layer/Group~LayerGroup}\n * is a subclass of {@link module:ol/layer/Base~BaseLayer}, so layers entered in the\n * options or added with `addLayer` can be groups, which can contain further\n * groups, and so on.\n *\n * @fires import(\"./MapBrowserEvent.js\").MapBrowserEvent\n * @fires import(\"./MapEvent.js\").MapEvent\n * @fires import(\"./render/Event.js\").default#precompose\n * @fires import(\"./render/Event.js\").default#postcompose\n * @fires import(\"./render/Event.js\").default#rendercomplete\n * @api\n */\nclass Map extends BaseObject {\n  /**\n   * @param {MapOptions} [options] Map options.\n   */\n  constructor(options) {\n    super();\n\n    options = options || {};\n\n    /***\n     * @type {MapEventHandler<import(\"./events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {MapEventHandler<import(\"./events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {MapEventHandler<void>}\n     */\n    this.un;\n\n    const optionsInternal = createOptionsInternal(options);\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.renderComplete_;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.loaded_ = true;\n\n    /** @private */\n    this.boundHandleBrowserEvent_ = this.handleBrowserEvent.bind(this);\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.maxTilesLoading_ =\n      options.maxTilesLoading !== undefined ? options.maxTilesLoading : 16;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ =\n      options.pixelRatio !== undefined\n        ? options.pixelRatio\n        : DEVICE_PIXEL_RATIO;\n\n    /**\n     * @private\n     * @type {*}\n     */\n    this.postRenderTimeoutHandle_;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.animationDelayKey_;\n\n    /**\n     * @private\n     */\n    this.animationDelay_ = this.animationDelay_.bind(this);\n\n    /**\n     * @private\n     * @type {import(\"./transform.js\").Transform}\n     */\n    this.coordinateToPixelTransform_ = createTransform();\n\n    /**\n     * @private\n     * @type {import(\"./transform.js\").Transform}\n     */\n    this.pixelToCoordinateTransform_ = createTransform();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.frameIndex_ = 0;\n\n    /**\n     * @private\n     * @type {?FrameState}\n     */\n    this.frameState_ = null;\n\n    /**\n     * The extent at the previous 'moveend' event.\n     * @private\n     * @type {import(\"./extent.js\").Extent}\n     */\n    this.previousExtent_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.viewPropertyListenerKey_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.viewChangeListenerKey_ = null;\n\n    /**\n     * @private\n     * @type {?Array<import(\"./events.js\").EventsKey>}\n     */\n    this.layerGroupPropertyListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.viewport_ = document.createElement('div');\n    this.viewport_.className =\n      'ol-viewport' + ('ontouchstart' in window ? ' ol-touch' : '');\n    this.viewport_.style.position = 'relative';\n    this.viewport_.style.overflow = 'hidden';\n    this.viewport_.style.width = '100%';\n    this.viewport_.style.height = '100%';\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.overlayContainer_ = document.createElement('div');\n    this.overlayContainer_.style.position = 'absolute';\n    this.overlayContainer_.style.zIndex = '0';\n    this.overlayContainer_.style.width = '100%';\n    this.overlayContainer_.style.height = '100%';\n    this.overlayContainer_.style.pointerEvents = 'none';\n    this.overlayContainer_.className = 'ol-overlaycontainer';\n    this.viewport_.appendChild(this.overlayContainer_);\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.overlayContainerStopEvent_ = document.createElement('div');\n    this.overlayContainerStopEvent_.style.position = 'absolute';\n    this.overlayContainerStopEvent_.style.zIndex = '0';\n    this.overlayContainerStopEvent_.style.width = '100%';\n    this.overlayContainerStopEvent_.style.height = '100%';\n    this.overlayContainerStopEvent_.style.pointerEvents = 'none';\n    this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n    this.viewport_.appendChild(this.overlayContainerStopEvent_);\n\n    /**\n     * @private\n     * @type {MapBrowserEventHandler}\n     */\n    this.mapBrowserEventHandler_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.moveTolerance_ = options.moveTolerance;\n\n    /**\n     * @private\n     * @type {HTMLElement|Document}\n     */\n    this.keyboardEventTarget_ = optionsInternal.keyboardEventTarget;\n\n    /**\n     * @private\n     * @type {?Array<import(\"./events.js\").EventsKey>}\n     */\n    this.targetChangeHandlerKeys_ = null;\n\n    /**\n     * @type {Collection<import(\"./control/Control.js\").default>}\n     * @protected\n     */\n    this.controls = optionsInternal.controls || defaultControls();\n\n    /**\n     * @type {Collection<import(\"./interaction/Interaction.js\").default>}\n     * @protected\n     */\n    this.interactions =\n      optionsInternal.interactions ||\n      defaultInteractions({\n        onFocusOnly: true,\n      });\n\n    /**\n     * @type {Collection<import(\"./Overlay.js\").default>}\n     * @private\n     */\n    this.overlays_ = optionsInternal.overlays;\n\n    /**\n     * A lookup of overlays by id.\n     * @private\n     * @type {Object<string, import(\"./Overlay.js\").default>}\n     */\n    this.overlayIdIndex_ = {};\n\n    /**\n     * @type {import(\"./renderer/Map.js\").default|null}\n     * @private\n     */\n    this.renderer_ = null;\n\n    /**\n     * @private\n     * @type {!Array<PostRenderFunction>}\n     */\n    this.postRenderFunctions_ = [];\n\n    /**\n     * @private\n     * @type {TileQueue}\n     */\n    this.tileQueue_ = new TileQueue(\n      this.getTilePriority.bind(this),\n      this.handleTileChange_.bind(this)\n    );\n\n    this.addChangeListener(\n      MapProperty.LAYERGROUP,\n      this.handleLayerGroupChanged_\n    );\n    this.addChangeListener(MapProperty.VIEW, this.handleViewChanged_);\n    this.addChangeListener(MapProperty.SIZE, this.handleSizeChanged_);\n    this.addChangeListener(MapProperty.TARGET, this.handleTargetChanged_);\n\n    // setProperties will trigger the rendering of the map if the map\n    // is \"defined\" already.\n    this.setProperties(optionsInternal.values);\n\n    const map = this;\n    if (options.view && !(options.view instanceof View)) {\n      options.view.then(function (viewOptions) {\n        map.setView(new View(viewOptions));\n      });\n    }\n\n    this.controls.addEventListener(\n      CollectionEventType.ADD,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent<import(\"./control/Control.js\").default>} event CollectionEvent\n       */\n      function (event) {\n        event.element.setMap(this);\n      }.bind(this)\n    );\n\n    this.controls.addEventListener(\n      CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent<import(\"./control/Control.js\").default>} event CollectionEvent.\n       */\n      function (event) {\n        event.element.setMap(null);\n      }.bind(this)\n    );\n\n    this.interactions.addEventListener(\n      CollectionEventType.ADD,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent<import(\"./interaction/Interaction.js\").default>} event CollectionEvent.\n       */\n      function (event) {\n        event.element.setMap(this);\n      }.bind(this)\n    );\n\n    this.interactions.addEventListener(\n      CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent<import(\"./interaction/Interaction.js\").default>} event CollectionEvent.\n       */\n      function (event) {\n        event.element.setMap(null);\n      }.bind(this)\n    );\n\n    this.overlays_.addEventListener(\n      CollectionEventType.ADD,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent<import(\"./Overlay.js\").default>} event CollectionEvent.\n       */\n      function (event) {\n        this.addOverlayInternal_(event.element);\n      }.bind(this)\n    );\n\n    this.overlays_.addEventListener(\n      CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent<import(\"./Overlay.js\").default>} event CollectionEvent.\n       */\n      function (event) {\n        const id = event.element.getId();\n        if (id !== undefined) {\n          delete this.overlayIdIndex_[id.toString()];\n        }\n        event.element.setMap(null);\n      }.bind(this)\n    );\n\n    this.controls.forEach(\n      /**\n       * @param {import(\"./control/Control.js\").default} control Control.\n       * @this {Map}\n       */\n      function (control) {\n        control.setMap(this);\n      }.bind(this)\n    );\n\n    this.interactions.forEach(\n      /**\n       * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction.\n       * @this {Map}\n       */\n      function (interaction) {\n        interaction.setMap(this);\n      }.bind(this)\n    );\n\n    this.overlays_.forEach(this.addOverlayInternal_.bind(this));\n  }\n\n  /**\n   * Add the given control to the map.\n   * @param {import(\"./control/Control.js\").default} control Control.\n   * @api\n   */\n  addControl(control) {\n    this.getControls().push(control);\n  }\n\n  /**\n   * Add the given interaction to the map. If you want to add an interaction\n   * at another point of the collection use `getInteractions()` and the methods\n   * available on {@link module:ol/Collection~Collection}. This can be used to\n   * stop the event propagation from the handleEvent function. The interactions\n   * get to handle the events in the reverse order of this collection.\n   * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to add.\n   * @api\n   */\n  addInteraction(interaction) {\n    this.getInteractions().push(interaction);\n  }\n\n  /**\n   * Adds the given layer to the top of this map. If you want to add a layer\n   * elsewhere in the stack, use `getLayers()` and the methods available on\n   * {@link module:ol/Collection~Collection}.\n   * @param {import(\"./layer/Base.js\").default} layer Layer.\n   * @api\n   */\n  addLayer(layer) {\n    const layers = this.getLayerGroup().getLayers();\n    layers.push(layer);\n  }\n\n  /**\n   * @param {import(\"./layer/Group.js\").GroupEvent} event The layer add event.\n   * @private\n   */\n  handleLayerAdd_(event) {\n    setLayerMapProperty(event.layer, this);\n  }\n\n  /**\n   * Add the given overlay to the map.\n   * @param {import(\"./Overlay.js\").default} overlay Overlay.\n   * @api\n   */\n  addOverlay(overlay) {\n    this.getOverlays().push(overlay);\n  }\n\n  /**\n   * This deals with map's overlay collection changes.\n   * @param {import(\"./Overlay.js\").default} overlay Overlay.\n   * @private\n   */\n  addOverlayInternal_(overlay) {\n    const id = overlay.getId();\n    if (id !== undefined) {\n      this.overlayIdIndex_[id.toString()] = overlay;\n    }\n    overlay.setMap(this);\n  }\n\n  /**\n   *\n   * Clean up.\n   */\n  disposeInternal() {\n    this.controls.clear();\n    this.interactions.clear();\n    this.overlays_.clear();\n    this.setTarget(null);\n    super.disposeInternal();\n  }\n\n  /**\n   * Detect features that intersect a pixel on the viewport, and execute a\n   * callback with each intersecting feature. Layers included in the detection can\n   * be configured through the `layerFilter` option in `options`.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {function(import(\"./Feature.js\").FeatureLike, import(\"./layer/Layer.js\").default<import(\"./source/Source\").default>, import(\"./geom/SimpleGeometry.js\").default): T} callback Feature callback. The callback will be\n   *     called with two arguments. The first argument is one\n   *     {@link module:ol/Feature~Feature feature} or\n   *     {@link module:ol/render/Feature~RenderFeature render feature} at the pixel, the second is\n   *     the {@link module:ol/layer/Layer~Layer layer} of the feature and will be null for\n   *     unmanaged layers. To stop detection, callback functions can return a\n   *     truthy value.\n   * @param {AtPixelOptions} [options] Optional options.\n   * @return {T|undefined} Callback result, i.e. the return value of last\n   * callback execution, or the first truthy callback return value.\n   * @template T\n   * @api\n   */\n  forEachFeatureAtPixel(pixel, callback, options) {\n    if (!this.frameState_ || !this.renderer_) {\n      return;\n    }\n    const coordinate = this.getCoordinateFromPixelInternal(pixel);\n    options = options !== undefined ? options : {};\n    const hitTolerance =\n      options.hitTolerance !== undefined ? options.hitTolerance : 0;\n    const layerFilter =\n      options.layerFilter !== undefined ? options.layerFilter : TRUE;\n    const checkWrapped = options.checkWrapped !== false;\n    return this.renderer_.forEachFeatureAtCoordinate(\n      coordinate,\n      this.frameState_,\n      hitTolerance,\n      checkWrapped,\n      callback,\n      null,\n      layerFilter,\n      null\n    );\n  }\n\n  /**\n   * Get all features that intersect a pixel on the viewport.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {AtPixelOptions} [options] Optional options.\n   * @return {Array<import(\"./Feature.js\").FeatureLike>} The detected features or\n   * an empty array if none were found.\n   * @api\n   */\n  getFeaturesAtPixel(pixel, options) {\n    const features = [];\n    this.forEachFeatureAtPixel(\n      pixel,\n      function (feature) {\n        features.push(feature);\n      },\n      options\n    );\n    return features;\n  }\n\n  /**\n   * Get all layers from all layer groups.\n   * @return {Array<import(\"./layer/Layer.js\").default>} Layers.\n   * @api\n   */\n  getAllLayers() {\n    const layers = [];\n    function addLayersFrom(layerGroup) {\n      layerGroup.forEach(function (layer) {\n        if (layer instanceof LayerGroup) {\n          addLayersFrom(layer.getLayers());\n        } else {\n          layers.push(layer);\n        }\n      });\n    }\n    addLayersFrom(this.getLayers());\n    return layers;\n  }\n\n  /**\n   * Detect if features intersect a pixel on the viewport. Layers included in the\n   * detection can be configured through the `layerFilter` option.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {AtPixelOptions} [options] Optional options.\n   * @return {boolean} Is there a feature at the given pixel?\n   * @api\n   */\n  hasFeatureAtPixel(pixel, options) {\n    if (!this.frameState_ || !this.renderer_) {\n      return false;\n    }\n    const coordinate = this.getCoordinateFromPixelInternal(pixel);\n    options = options !== undefined ? options : {};\n    const layerFilter =\n      options.layerFilter !== undefined ? options.layerFilter : TRUE;\n    const hitTolerance =\n      options.hitTolerance !== undefined ? options.hitTolerance : 0;\n    const checkWrapped = options.checkWrapped !== false;\n    return this.renderer_.hasFeatureAtCoordinate(\n      coordinate,\n      this.frameState_,\n      hitTolerance,\n      checkWrapped,\n      layerFilter,\n      null\n    );\n  }\n\n  /**\n   * Returns the coordinate in user projection for a browser event.\n   * @param {MouseEvent} event Event.\n   * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n   * @api\n   */\n  getEventCoordinate(event) {\n    return this.getCoordinateFromPixel(this.getEventPixel(event));\n  }\n\n  /**\n   * Returns the coordinate in view projection for a browser event.\n   * @param {MouseEvent} event Event.\n   * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n   */\n  getEventCoordinateInternal(event) {\n    return this.getCoordinateFromPixelInternal(this.getEventPixel(event));\n  }\n\n  /**\n   * Returns the map pixel position for a browser event relative to the viewport.\n   * @param {UIEvent} event Event.\n   * @return {import(\"./pixel.js\").Pixel} Pixel.\n   * @api\n   */\n  getEventPixel(event) {\n    const viewportPosition = this.viewport_.getBoundingClientRect();\n    const eventPosition =\n      //FIXME Are we really calling this with a TouchEvent anywhere?\n      'changedTouches' in event\n        ? /** @type {TouchEvent} */ (event).changedTouches[0]\n        : /** @type {MouseEvent} */ (event);\n\n    return [\n      eventPosition.clientX - viewportPosition.left,\n      eventPosition.clientY - viewportPosition.top,\n    ];\n  }\n\n  /**\n   * Get the target in which this map is rendered.\n   * Note that this returns what is entered as an option or in setTarget:\n   * if that was an element, it returns an element; if a string, it returns that.\n   * @return {HTMLElement|string|undefined} The Element or id of the Element that the\n   *     map is rendered in.\n   * @observable\n   * @api\n   */\n  getTarget() {\n    return /** @type {HTMLElement|string|undefined} */ (\n      this.get(MapProperty.TARGET)\n    );\n  }\n\n  /**\n   * Get the DOM element into which this map is rendered. In contrast to\n   * `getTarget` this method always return an `Element`, or `null` if the\n   * map has no target.\n   * @return {HTMLElement} The element that the map is rendered in.\n   * @api\n   */\n  getTargetElement() {\n    const target = this.getTarget();\n    if (target !== undefined) {\n      return typeof target === 'string'\n        ? document.getElementById(target)\n        : target;\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Get the coordinate for a given pixel.  This returns a coordinate in the\n   * user projection.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n   * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n   * @api\n   */\n  getCoordinateFromPixel(pixel) {\n    return toUserCoordinate(\n      this.getCoordinateFromPixelInternal(pixel),\n      this.getView().getProjection()\n    );\n  }\n\n  /**\n   * Get the coordinate for a given pixel.  This returns a coordinate in the\n   * map view projection.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n   * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n   */\n  getCoordinateFromPixelInternal(pixel) {\n    const frameState = this.frameState_;\n    if (!frameState) {\n      return null;\n    } else {\n      return applyTransform(\n        frameState.pixelToCoordinateTransform,\n        pixel.slice()\n      );\n    }\n  }\n\n  /**\n   * Get the map controls. Modifying this collection changes the controls\n   * associated with the map.\n   * @return {Collection<import(\"./control/Control.js\").default>} Controls.\n   * @api\n   */\n  getControls() {\n    return this.controls;\n  }\n\n  /**\n   * Get the map overlays. Modifying this collection changes the overlays\n   * associated with the map.\n   * @return {Collection<import(\"./Overlay.js\").default>} Overlays.\n   * @api\n   */\n  getOverlays() {\n    return this.overlays_;\n  }\n\n  /**\n   * Get an overlay by its identifier (the value returned by overlay.getId()).\n   * Note that the index treats string and numeric identifiers as the same. So\n   * `map.getOverlayById(2)` will return an overlay with id `'2'` or `2`.\n   * @param {string|number} id Overlay identifier.\n   * @return {import(\"./Overlay.js\").default} Overlay.\n   * @api\n   */\n  getOverlayById(id) {\n    const overlay = this.overlayIdIndex_[id.toString()];\n    return overlay !== undefined ? overlay : null;\n  }\n\n  /**\n   * Get the map interactions. Modifying this collection changes the interactions\n   * associated with the map.\n   *\n   * Interactions are used for e.g. pan, zoom and rotate.\n   * @return {Collection<import(\"./interaction/Interaction.js\").default>} Interactions.\n   * @api\n   */\n  getInteractions() {\n    return this.interactions;\n  }\n\n  /**\n   * Get the layergroup associated with this map.\n   * @return {LayerGroup} A layer group containing the layers in this map.\n   * @observable\n   * @api\n   */\n  getLayerGroup() {\n    return /** @type {LayerGroup} */ (this.get(MapProperty.LAYERGROUP));\n  }\n\n  /**\n   * Clear any existing layers and add layers to the map.\n   * @param {Array<import(\"./layer/Base.js\").default>|Collection<import(\"./layer/Base.js\").default>} layers The layers to be added to the map.\n   * @api\n   */\n  setLayers(layers) {\n    const group = this.getLayerGroup();\n    if (layers instanceof Collection) {\n      group.setLayers(layers);\n      return;\n    }\n\n    const collection = group.getLayers();\n    collection.clear();\n    collection.extend(layers);\n  }\n\n  /**\n   * Get the collection of layers associated with this map.\n   * @return {!Collection<import(\"./layer/Base.js\").default>} Layers.\n   * @api\n   */\n  getLayers() {\n    const layers = this.getLayerGroup().getLayers();\n    return layers;\n  }\n\n  /**\n   * @return {boolean} Layers have sources that are still loading.\n   */\n  getLoadingOrNotReady() {\n    const layerStatesArray = this.getLayerGroup().getLayerStatesArray();\n    for (let i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      const state = layerStatesArray[i];\n      if (!state.visible) {\n        continue;\n      }\n      const renderer = state.layer.getRenderer();\n      if (renderer && !renderer.ready) {\n        return true;\n      }\n      const source = state.layer.getSource();\n      if (source && source.loading) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Get the pixel for a coordinate.  This takes a coordinate in the user\n   * projection and returns the corresponding pixel.\n   * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n   * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n   * @api\n   */\n  getPixelFromCoordinate(coordinate) {\n    const viewCoordinate = fromUserCoordinate(\n      coordinate,\n      this.getView().getProjection()\n    );\n    return this.getPixelFromCoordinateInternal(viewCoordinate);\n  }\n\n  /**\n   * Get the pixel for a coordinate.  This takes a coordinate in the map view\n   * projection and returns the corresponding pixel.\n   * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n   * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n   */\n  getPixelFromCoordinateInternal(coordinate) {\n    const frameState = this.frameState_;\n    if (!frameState) {\n      return null;\n    } else {\n      return applyTransform(\n        frameState.coordinateToPixelTransform,\n        coordinate.slice(0, 2)\n      );\n    }\n  }\n\n  /**\n   * Get the map renderer.\n   * @return {import(\"./renderer/Map.js\").default|null} Renderer\n   */\n  getRenderer() {\n    return this.renderer_;\n  }\n\n  /**\n   * Get the size of this map.\n   * @return {import(\"./size.js\").Size|undefined} The size in pixels of the map in the DOM.\n   * @observable\n   * @api\n   */\n  getSize() {\n    return /** @type {import(\"./size.js\").Size|undefined} */ (\n      this.get(MapProperty.SIZE)\n    );\n  }\n\n  /**\n   * Get the view associated with this map. A view manages properties such as\n   * center and resolution.\n   * @return {View} The view that controls this map.\n   * @observable\n   * @api\n   */\n  getView() {\n    return /** @type {View} */ (this.get(MapProperty.VIEW));\n  }\n\n  /**\n   * Get the element that serves as the map viewport.\n   * @return {HTMLElement} Viewport.\n   * @api\n   */\n  getViewport() {\n    return this.viewport_;\n  }\n\n  /**\n   * Get the element that serves as the container for overlays.  Elements added to\n   * this container will let mousedown and touchstart events through to the map,\n   * so clicks and gestures on an overlay will trigger {@link module:ol/MapBrowserEvent~MapBrowserEvent}\n   * events.\n   * @return {!HTMLElement} The map's overlay container.\n   */\n  getOverlayContainer() {\n    return this.overlayContainer_;\n  }\n\n  /**\n   * Get the element that serves as a container for overlays that don't allow\n   * event propagation. Elements added to this container won't let mousedown and\n   * touchstart events through to the map, so clicks and gestures on an overlay\n   * don't trigger any {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n   * @return {!HTMLElement} The map's overlay container that stops events.\n   */\n  getOverlayContainerStopEvent() {\n    return this.overlayContainerStopEvent_;\n  }\n\n  /**\n   * @return {!Document} The document where the map is displayed.\n   */\n  getOwnerDocument() {\n    const targetElement = this.getTargetElement();\n    return targetElement ? targetElement.ownerDocument : document;\n  }\n\n  /**\n   * @param {import(\"./Tile.js\").default} tile Tile.\n   * @param {string} tileSourceKey Tile source key.\n   * @param {import(\"./coordinate.js\").Coordinate} tileCenter Tile center.\n   * @param {number} tileResolution Tile resolution.\n   * @return {number} Tile priority.\n   */\n  getTilePriority(tile, tileSourceKey, tileCenter, tileResolution) {\n    return getTilePriority(\n      this.frameState_,\n      tile,\n      tileSourceKey,\n      tileCenter,\n      tileResolution\n    );\n  }\n\n  /**\n   * @param {UIEvent} browserEvent Browser event.\n   * @param {string} [type] Type.\n   */\n  handleBrowserEvent(browserEvent, type) {\n    type = type || browserEvent.type;\n    const mapBrowserEvent = new MapBrowserEvent(type, this, browserEvent);\n    this.handleMapBrowserEvent(mapBrowserEvent);\n  }\n\n  /**\n   * @param {MapBrowserEvent} mapBrowserEvent The event to handle.\n   */\n  handleMapBrowserEvent(mapBrowserEvent) {\n    if (!this.frameState_) {\n      // With no view defined, we cannot translate pixels into geographical\n      // coordinates so interactions cannot be used.\n      return;\n    }\n    const originalEvent = /** @type {PointerEvent} */ (\n      mapBrowserEvent.originalEvent\n    );\n    const eventType = originalEvent.type;\n    if (\n      eventType === PointerEventType.POINTERDOWN ||\n      eventType === EventType.WHEEL ||\n      eventType === EventType.KEYDOWN\n    ) {\n      const doc = this.getOwnerDocument();\n      const rootNode = this.viewport_.getRootNode\n        ? this.viewport_.getRootNode()\n        : doc;\n      const target = /** @type {Node} */ (originalEvent.target);\n      if (\n        // Abort if the target is a child of the container for elements whose events are not meant\n        // to be handled by map interactions.\n        this.overlayContainerStopEvent_.contains(target) ||\n        // Abort if the event target is a child of the container that is no longer in the page.\n        // It's possible for the target to no longer be in the page if it has been removed in an\n        // event listener, this might happen in a Control that recreates it's content based on\n        // user interaction either manually or via a render in something like https://reactjs.org/\n        !(rootNode === doc ? doc.documentElement : rootNode).contains(target)\n      ) {\n        return;\n      }\n    }\n    mapBrowserEvent.frameState = this.frameState_;\n    if (this.dispatchEvent(mapBrowserEvent) !== false) {\n      const interactionsArray = this.getInteractions().getArray().slice();\n      for (let i = interactionsArray.length - 1; i >= 0; i--) {\n        const interaction = interactionsArray[i];\n        if (\n          interaction.getMap() !== this ||\n          !interaction.getActive() ||\n          !this.getTargetElement()\n        ) {\n          continue;\n        }\n        const cont = interaction.handleEvent(mapBrowserEvent);\n        if (!cont || mapBrowserEvent.propagationStopped) {\n          break;\n        }\n      }\n    }\n  }\n\n  /**\n   * @protected\n   */\n  handlePostRender() {\n    const frameState = this.frameState_;\n\n    // Manage the tile queue\n    // Image loads are expensive and a limited resource, so try to use them\n    // efficiently:\n    // * When the view is static we allow a large number of parallel tile loads\n    //   to complete the frame as quickly as possible.\n    // * When animating or interacting, image loads can cause janks, so we reduce\n    //   the maximum number of loads per frame and limit the number of parallel\n    //   tile loads to remain reactive to view changes and to reduce the chance of\n    //   loading tiles that will quickly disappear from view.\n    const tileQueue = this.tileQueue_;\n    if (!tileQueue.isEmpty()) {\n      let maxTotalLoading = this.maxTilesLoading_;\n      let maxNewLoads = maxTotalLoading;\n      if (frameState) {\n        const hints = frameState.viewHints;\n        if (hints[ViewHint.ANIMATING] || hints[ViewHint.INTERACTING]) {\n          const lowOnFrameBudget = Date.now() - frameState.time > 8;\n          maxTotalLoading = lowOnFrameBudget ? 0 : 8;\n          maxNewLoads = lowOnFrameBudget ? 0 : 2;\n        }\n      }\n      if (tileQueue.getTilesLoading() < maxTotalLoading) {\n        tileQueue.reprioritize(); // FIXME only call if view has changed\n        tileQueue.loadMoreTiles(maxTotalLoading, maxNewLoads);\n      }\n    }\n\n    if (frameState && this.renderer_ && !frameState.animate) {\n      if (this.renderComplete_ === true) {\n        if (this.hasListener(RenderEventType.RENDERCOMPLETE)) {\n          this.renderer_.dispatchRenderEvent(\n            RenderEventType.RENDERCOMPLETE,\n            frameState\n          );\n        }\n        if (this.loaded_ === false) {\n          this.loaded_ = true;\n          this.dispatchEvent(\n            new MapEvent(MapEventType.LOADEND, this, frameState)\n          );\n        }\n      } else if (this.loaded_ === true) {\n        this.loaded_ = false;\n        this.dispatchEvent(\n          new MapEvent(MapEventType.LOADSTART, this, frameState)\n        );\n      }\n    }\n\n    const postRenderFunctions = this.postRenderFunctions_;\n    for (let i = 0, ii = postRenderFunctions.length; i < ii; ++i) {\n      postRenderFunctions[i](this, frameState);\n    }\n    postRenderFunctions.length = 0;\n  }\n\n  /**\n   * @private\n   */\n  handleSizeChanged_() {\n    if (this.getView() && !this.getView().getAnimating()) {\n      this.getView().resolveConstraints(0);\n    }\n\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleTargetChanged_() {\n    if (this.mapBrowserEventHandler_) {\n      for (let i = 0, ii = this.targetChangeHandlerKeys_.length; i < ii; ++i) {\n        unlistenByKey(this.targetChangeHandlerKeys_[i]);\n      }\n      this.targetChangeHandlerKeys_ = null;\n      this.viewport_.removeEventListener(\n        EventType.CONTEXTMENU,\n        this.boundHandleBrowserEvent_\n      );\n      this.viewport_.removeEventListener(\n        EventType.WHEEL,\n        this.boundHandleBrowserEvent_\n      );\n      this.mapBrowserEventHandler_.dispose();\n      this.mapBrowserEventHandler_ = null;\n      removeNode(this.viewport_);\n    }\n\n    // target may be undefined, null, a string or an Element.\n    // If it's a string we convert it to an Element before proceeding.\n    // If it's not now an Element we remove the viewport from the DOM.\n    // If it's an Element we append the viewport element to it.\n\n    const targetElement = this.getTargetElement();\n    if (!targetElement) {\n      if (this.renderer_) {\n        clearTimeout(this.postRenderTimeoutHandle_);\n        this.postRenderTimeoutHandle_ = undefined;\n        this.postRenderFunctions_.length = 0;\n        this.renderer_.dispose();\n        this.renderer_ = null;\n      }\n      if (this.animationDelayKey_) {\n        cancelAnimationFrame(this.animationDelayKey_);\n        this.animationDelayKey_ = undefined;\n      }\n    } else {\n      targetElement.appendChild(this.viewport_);\n      if (!this.renderer_) {\n        this.renderer_ = new CompositeMapRenderer(this);\n      }\n\n      this.mapBrowserEventHandler_ = new MapBrowserEventHandler(\n        this,\n        this.moveTolerance_\n      );\n      for (const key in MapBrowserEventType) {\n        this.mapBrowserEventHandler_.addEventListener(\n          MapBrowserEventType[key],\n          this.handleMapBrowserEvent.bind(this)\n        );\n      }\n      this.viewport_.addEventListener(\n        EventType.CONTEXTMENU,\n        this.boundHandleBrowserEvent_,\n        false\n      );\n      this.viewport_.addEventListener(\n        EventType.WHEEL,\n        this.boundHandleBrowserEvent_,\n        PASSIVE_EVENT_LISTENERS ? {passive: false} : false\n      );\n\n      const defaultView = this.getOwnerDocument().defaultView;\n      const keyboardEventTarget = !this.keyboardEventTarget_\n        ? targetElement\n        : this.keyboardEventTarget_;\n      this.targetChangeHandlerKeys_ = [\n        listen(\n          keyboardEventTarget,\n          EventType.KEYDOWN,\n          this.handleBrowserEvent,\n          this\n        ),\n        listen(\n          keyboardEventTarget,\n          EventType.KEYPRESS,\n          this.handleBrowserEvent,\n          this\n        ),\n        listen(defaultView, EventType.RESIZE, this.updateSize, this),\n      ];\n    }\n\n    this.updateSize();\n    // updateSize calls setSize, so no need to call this.render\n    // ourselves here.\n  }\n\n  /**\n   * @private\n   */\n  handleTileChange_() {\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleViewPropertyChanged_() {\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleViewChanged_() {\n    if (this.viewPropertyListenerKey_) {\n      unlistenByKey(this.viewPropertyListenerKey_);\n      this.viewPropertyListenerKey_ = null;\n    }\n    if (this.viewChangeListenerKey_) {\n      unlistenByKey(this.viewChangeListenerKey_);\n      this.viewChangeListenerKey_ = null;\n    }\n    const view = this.getView();\n    if (view) {\n      this.updateViewportSize_();\n\n      this.viewPropertyListenerKey_ = listen(\n        view,\n        ObjectEventType.PROPERTYCHANGE,\n        this.handleViewPropertyChanged_,\n        this\n      );\n      this.viewChangeListenerKey_ = listen(\n        view,\n        EventType.CHANGE,\n        this.handleViewPropertyChanged_,\n        this\n      );\n\n      view.resolveConstraints(0);\n    }\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleLayerGroupChanged_() {\n    if (this.layerGroupPropertyListenerKeys_) {\n      this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey);\n      this.layerGroupPropertyListenerKeys_ = null;\n    }\n    const layerGroup = this.getLayerGroup();\n    if (layerGroup) {\n      this.handleLayerAdd_(new GroupEvent('addlayer', layerGroup));\n      this.layerGroupPropertyListenerKeys_ = [\n        listen(layerGroup, ObjectEventType.PROPERTYCHANGE, this.render, this),\n        listen(layerGroup, EventType.CHANGE, this.render, this),\n        listen(layerGroup, 'addlayer', this.handleLayerAdd_, this),\n        listen(layerGroup, 'removelayer', this.handleLayerRemove_, this),\n      ];\n    }\n    this.render();\n  }\n\n  /**\n   * @return {boolean} Is rendered.\n   */\n  isRendered() {\n    return !!this.frameState_;\n  }\n\n  /**\n   * @private\n   */\n  animationDelay_() {\n    this.animationDelayKey_ = undefined;\n    this.renderFrame_(Date.now());\n  }\n\n  /**\n   * Requests an immediate render in a synchronous manner.\n   * @api\n   */\n  renderSync() {\n    if (this.animationDelayKey_) {\n      cancelAnimationFrame(this.animationDelayKey_);\n    }\n    this.animationDelay_();\n  }\n\n  /**\n   * Redraws all text after new fonts have loaded\n   */\n  redrawText() {\n    const layerStates = this.getLayerGroup().getLayerStatesArray();\n    for (let i = 0, ii = layerStates.length; i < ii; ++i) {\n      const layer = layerStates[i].layer;\n      if (layer.hasRenderer()) {\n        layer.getRenderer().handleFontsChanged();\n      }\n    }\n  }\n\n  /**\n   * Request a map rendering (at the next animation frame).\n   * @api\n   */\n  render() {\n    if (this.renderer_ && this.animationDelayKey_ === undefined) {\n      this.animationDelayKey_ = requestAnimationFrame(this.animationDelay_);\n    }\n  }\n\n  /**\n   * Remove the given control from the map.\n   * @param {import(\"./control/Control.js\").default} control Control.\n   * @return {import(\"./control/Control.js\").default|undefined} The removed control (or undefined\n   *     if the control was not found).\n   * @api\n   */\n  removeControl(control) {\n    return this.getControls().remove(control);\n  }\n\n  /**\n   * Remove the given interaction from the map.\n   * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to remove.\n   * @return {import(\"./interaction/Interaction.js\").default|undefined} The removed interaction (or\n   *     undefined if the interaction was not found).\n   * @api\n   */\n  removeInteraction(interaction) {\n    return this.getInteractions().remove(interaction);\n  }\n\n  /**\n   * Removes the given layer from the map.\n   * @param {import(\"./layer/Base.js\").default} layer Layer.\n   * @return {import(\"./layer/Base.js\").default|undefined} The removed layer (or undefined if the\n   *     layer was not found).\n   * @api\n   */\n  removeLayer(layer) {\n    const layers = this.getLayerGroup().getLayers();\n    return layers.remove(layer);\n  }\n\n  /**\n   * @param {import(\"./layer/Group.js\").GroupEvent} event The layer remove event.\n   * @private\n   */\n  handleLayerRemove_(event) {\n    removeLayerMapProperty(event.layer);\n  }\n\n  /**\n   * Remove the given overlay from the map.\n   * @param {import(\"./Overlay.js\").default} overlay Overlay.\n   * @return {import(\"./Overlay.js\").default|undefined} The removed overlay (or undefined\n   *     if the overlay was not found).\n   * @api\n   */\n  removeOverlay(overlay) {\n    return this.getOverlays().remove(overlay);\n  }\n\n  /**\n   * @param {number} time Time.\n   * @private\n   */\n  renderFrame_(time) {\n    const size = this.getSize();\n    const view = this.getView();\n    const previousFrameState = this.frameState_;\n    /** @type {?FrameState} */\n    let frameState = null;\n    if (size !== undefined && hasArea(size) && view && view.isDef()) {\n      const viewHints = view.getHints(\n        this.frameState_ ? this.frameState_.viewHints : undefined\n      );\n      const viewState = view.getState();\n      frameState = {\n        animate: false,\n        coordinateToPixelTransform: this.coordinateToPixelTransform_,\n        declutterTree: null,\n        extent: getForViewAndSize(\n          viewState.center,\n          viewState.resolution,\n          viewState.rotation,\n          size\n        ),\n        index: this.frameIndex_++,\n        layerIndex: 0,\n        layerStatesArray: this.getLayerGroup().getLayerStatesArray(),\n        pixelRatio: this.pixelRatio_,\n        pixelToCoordinateTransform: this.pixelToCoordinateTransform_,\n        postRenderFunctions: [],\n        size: size,\n        tileQueue: this.tileQueue_,\n        time: time,\n        usedTiles: {},\n        viewState: viewState,\n        viewHints: viewHints,\n        wantedTiles: {},\n        mapId: getUid(this),\n        renderTargets: {},\n      };\n      if (viewState.nextCenter && viewState.nextResolution) {\n        const rotation = isNaN(viewState.nextRotation)\n          ? viewState.rotation\n          : viewState.nextRotation;\n\n        frameState.nextExtent = getForViewAndSize(\n          viewState.nextCenter,\n          viewState.nextResolution,\n          rotation,\n          size\n        );\n      }\n    }\n\n    this.frameState_ = frameState;\n    this.renderer_.renderFrame(frameState);\n\n    if (frameState) {\n      if (frameState.animate) {\n        this.render();\n      }\n      Array.prototype.push.apply(\n        this.postRenderFunctions_,\n        frameState.postRenderFunctions\n      );\n\n      if (previousFrameState) {\n        const moveStart =\n          !this.previousExtent_ ||\n          (!isEmpty(this.previousExtent_) &&\n            !equals(frameState.extent, this.previousExtent_));\n        if (moveStart) {\n          this.dispatchEvent(\n            new MapEvent(MapEventType.MOVESTART, this, previousFrameState)\n          );\n          this.previousExtent_ = createOrUpdateEmpty(this.previousExtent_);\n        }\n      }\n\n      const idle =\n        this.previousExtent_ &&\n        !frameState.viewHints[ViewHint.ANIMATING] &&\n        !frameState.viewHints[ViewHint.INTERACTING] &&\n        !equals(frameState.extent, this.previousExtent_);\n\n      if (idle) {\n        this.dispatchEvent(\n          new MapEvent(MapEventType.MOVEEND, this, frameState)\n        );\n        clone(frameState.extent, this.previousExtent_);\n      }\n    }\n\n    this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER, this, frameState));\n\n    this.renderComplete_ =\n      this.hasListener(MapEventType.LOADSTART) ||\n      this.hasListener(MapEventType.LOADEND) ||\n      this.hasListener(RenderEventType.RENDERCOMPLETE)\n        ? !this.tileQueue_.getTilesLoading() &&\n          !this.tileQueue_.getCount() &&\n          !this.getLoadingOrNotReady()\n        : undefined;\n\n    if (!this.postRenderTimeoutHandle_) {\n      this.postRenderTimeoutHandle_ = setTimeout(() => {\n        this.postRenderTimeoutHandle_ = undefined;\n        this.handlePostRender();\n      }, 0);\n    }\n  }\n\n  /**\n   * Sets the layergroup of this map.\n   * @param {LayerGroup} layerGroup A layer group containing the layers in this map.\n   * @observable\n   * @api\n   */\n  setLayerGroup(layerGroup) {\n    const oldLayerGroup = this.getLayerGroup();\n    if (oldLayerGroup) {\n      this.handleLayerRemove_(new GroupEvent('removelayer', oldLayerGroup));\n    }\n    this.set(MapProperty.LAYERGROUP, layerGroup);\n  }\n\n  /**\n   * Set the size of this map.\n   * @param {import(\"./size.js\").Size|undefined} size The size in pixels of the map in the DOM.\n   * @observable\n   * @api\n   */\n  setSize(size) {\n    this.set(MapProperty.SIZE, size);\n  }\n\n  /**\n   * Set the target element to render this map into.\n   * @param {HTMLElement|string} [target] The Element or id of the Element\n   *     that the map is rendered in.\n   * @observable\n   * @api\n   */\n  setTarget(target) {\n    this.set(MapProperty.TARGET, target);\n  }\n\n  /**\n   * Set the view for this map.\n   * @param {View|Promise<import(\"./View.js\").ViewOptions>} view The view that controls this map.\n   * It is also possible to pass a promise that resolves to options for constructing a view.  This\n   * alternative allows view properties to be resolved by sources or other components that load\n   * view-related metadata.\n   * @observable\n   * @api\n   */\n  setView(view) {\n    if (!view || view instanceof View) {\n      this.set(MapProperty.VIEW, view);\n      return;\n    }\n    this.set(MapProperty.VIEW, new View());\n\n    const map = this;\n    view.then(function (viewOptions) {\n      map.setView(new View(viewOptions));\n    });\n  }\n\n  /**\n   * Force a recalculation of the map viewport size.  This should be called when\n   * third-party code changes the size of the map viewport.\n   * @api\n   */\n  updateSize() {\n    const targetElement = this.getTargetElement();\n\n    let size = undefined;\n    if (targetElement) {\n      const computedStyle = getComputedStyle(targetElement);\n      const width =\n        targetElement.offsetWidth -\n        parseFloat(computedStyle['borderLeftWidth']) -\n        parseFloat(computedStyle['paddingLeft']) -\n        parseFloat(computedStyle['paddingRight']) -\n        parseFloat(computedStyle['borderRightWidth']);\n      const height =\n        targetElement.offsetHeight -\n        parseFloat(computedStyle['borderTopWidth']) -\n        parseFloat(computedStyle['paddingTop']) -\n        parseFloat(computedStyle['paddingBottom']) -\n        parseFloat(computedStyle['borderBottomWidth']);\n      if (!isNaN(width) && !isNaN(height)) {\n        size = [width, height];\n        if (\n          !hasArea(size) &&\n          !!(\n            targetElement.offsetWidth ||\n            targetElement.offsetHeight ||\n            targetElement.getClientRects().length\n          )\n        ) {\n          // eslint-disable-next-line\n          console.warn(\n            \"No map visible because the map container's width or height are 0.\"\n          );\n        }\n      }\n    }\n\n    this.setSize(size);\n    this.updateViewportSize_();\n  }\n\n  /**\n   * Recomputes the viewport size and save it on the view object (if any)\n   * @private\n   */\n  updateViewportSize_() {\n    const view = this.getView();\n    if (view) {\n      let size = undefined;\n      const computedStyle = getComputedStyle(this.viewport_);\n      if (computedStyle.width && computedStyle.height) {\n        size = [\n          parseInt(computedStyle.width, 10),\n          parseInt(computedStyle.height, 10),\n        ];\n      }\n      view.setViewportSize(size);\n    }\n  }\n}\n\n/**\n * @param {MapOptions} options Map options.\n * @return {MapOptionsInternal} Internal map options.\n */\nfunction createOptionsInternal(options) {\n  /**\n   * @type {HTMLElement|Document}\n   */\n  let keyboardEventTarget = null;\n  if (options.keyboardEventTarget !== undefined) {\n    keyboardEventTarget =\n      typeof options.keyboardEventTarget === 'string'\n        ? document.getElementById(options.keyboardEventTarget)\n        : options.keyboardEventTarget;\n  }\n\n  /**\n   * @type {Object<string, *>}\n   */\n  const values = {};\n\n  const layerGroup =\n    options.layers &&\n    typeof (/** @type {?} */ (options.layers).getLayers) === 'function'\n      ? /** @type {LayerGroup} */ (options.layers)\n      : new LayerGroup({\n          layers:\n            /** @type {Collection<import(\"./layer/Base.js\").default>|Array<import(\"./layer/Base.js\").default>} */ (\n              options.layers\n            ),\n        });\n  values[MapProperty.LAYERGROUP] = layerGroup;\n\n  values[MapProperty.TARGET] = options.target;\n\n  values[MapProperty.VIEW] =\n    options.view instanceof View ? options.view : new View();\n\n  /** @type {Collection<import(\"./control/Control.js\").default>} */\n  let controls;\n  if (options.controls !== undefined) {\n    if (Array.isArray(options.controls)) {\n      controls = new Collection(options.controls.slice());\n    } else {\n      assert(\n        typeof (/** @type {?} */ (options.controls).getArray) === 'function',\n        47\n      ); // Expected `controls` to be an array or an `import(\"./Collection.js\").Collection`\n      controls = options.controls;\n    }\n  }\n\n  /** @type {Collection<import(\"./interaction/Interaction\").default>} */\n  let interactions;\n  if (options.interactions !== undefined) {\n    if (Array.isArray(options.interactions)) {\n      interactions = new Collection(options.interactions.slice());\n    } else {\n      assert(\n        typeof (/** @type {?} */ (options.interactions).getArray) ===\n          'function',\n        48\n      ); // Expected `interactions` to be an array or an `import(\"./Collection.js\").Collection`\n      interactions = options.interactions;\n    }\n  }\n\n  /** @type {Collection<import(\"./Overlay.js\").default>} */\n  let overlays;\n  if (options.overlays !== undefined) {\n    if (Array.isArray(options.overlays)) {\n      overlays = new Collection(options.overlays.slice());\n    } else {\n      assert(\n        typeof (/** @type {?} */ (options.overlays).getArray) === 'function',\n        49\n      ); // Expected `overlays` to be an array or an `import(\"./Collection.js\").Collection`\n      overlays = options.overlays;\n    }\n  } else {\n    overlays = new Collection();\n  }\n\n  return {\n    controls: controls,\n    interactions: interactions,\n    keyboardEventTarget: keyboardEventTarget,\n    overlays: overlays,\n    values: values,\n  };\n}\nexport default Map;\n","/**\n * @module ol/renderer/Map\n */\nimport Disposable from '../Disposable.js';\nimport {TRUE} from '../functions.js';\nimport {abstract} from '../util.js';\nimport {compose as composeTransform, makeInverse} from '../transform.js';\nimport {getWidth} from '../extent.js';\nimport {shared as iconImageCache} from '../style/IconImageCache.js';\nimport {inView} from '../layer/Layer.js';\nimport {wrapX} from '../coordinate.js';\n\n/**\n * @typedef HitMatch\n * @property {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @property {import(\"../layer/Layer.js\").default} layer Layer.\n * @property {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n * @property {number} distanceSq Squared distance.\n * @property {import(\"./vector.js\").FeatureCallback<T>} callback Callback.\n * @template T\n */\n\n/**\n * @abstract\n */\nclass MapRenderer extends Disposable {\n  /**\n   * @param {import(\"../Map.js\").default} map Map.\n   */\n  constructor(map) {\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../Map.js\").default}\n     */\n    this.map_ = map;\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../render/EventType.js\").default} type Event type.\n   * @param {import(\"../Map.js\").FrameState} frameState Frame state.\n   */\n  dispatchRenderEvent(type, frameState) {\n    abstract();\n  }\n\n  /**\n   * @param {import(\"../Map.js\").FrameState} frameState FrameState.\n   * @protected\n   */\n  calculateMatrices2D(frameState) {\n    const viewState = frameState.viewState;\n    const coordinateToPixelTransform = frameState.coordinateToPixelTransform;\n    const pixelToCoordinateTransform = frameState.pixelToCoordinateTransform;\n\n    composeTransform(\n      coordinateToPixelTransform,\n      frameState.size[0] / 2,\n      frameState.size[1] / 2,\n      1 / viewState.resolution,\n      -1 / viewState.resolution,\n      -viewState.rotation,\n      -viewState.center[0],\n      -viewState.center[1]\n    );\n\n    makeInverse(pixelToCoordinateTransform, coordinateToPixelTransform);\n  }\n\n  /**\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../Map.js\").FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {boolean} checkWrapped Check for wrapped geometries.\n   * @param {import(\"./vector.js\").FeatureCallback<T>} callback Feature callback.\n   * @param {S} thisArg Value to use as `this` when executing `callback`.\n   * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n   *     function, only layers which are visible and for which this function\n   *     returns `true` will be tested for features.  By default, all visible\n   *     layers will be tested.\n   * @param {U} thisArg2 Value to use as `this` when executing `layerFilter`.\n   * @return {T|undefined} Callback result.\n   * @template S,T,U\n   */\n  forEachFeatureAtCoordinate(\n    coordinate,\n    frameState,\n    hitTolerance,\n    checkWrapped,\n    callback,\n    thisArg,\n    layerFilter,\n    thisArg2\n  ) {\n    let result;\n    const viewState = frameState.viewState;\n\n    /**\n     * @param {boolean} managed Managed layer.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     * @param {import(\"../layer/Layer.js\").default} layer Layer.\n     * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n     * @return {T|undefined} Callback result.\n     */\n    function forEachFeatureAtCoordinate(managed, feature, layer, geometry) {\n      return callback.call(thisArg, feature, managed ? layer : null, geometry);\n    }\n\n    const projection = viewState.projection;\n\n    const translatedCoordinate = wrapX(coordinate.slice(), projection);\n    const offsets = [[0, 0]];\n    if (projection.canWrapX() && checkWrapped) {\n      const projectionExtent = projection.getExtent();\n      const worldWidth = getWidth(projectionExtent);\n      offsets.push([-worldWidth, 0], [worldWidth, 0]);\n    }\n\n    const layerStates = frameState.layerStatesArray;\n    const numLayers = layerStates.length;\n\n    const matches = /** @type {Array<HitMatch<T>>} */ ([]);\n    const tmpCoord = [];\n    for (let i = 0; i < offsets.length; i++) {\n      for (let j = numLayers - 1; j >= 0; --j) {\n        const layerState = layerStates[j];\n        const layer = layerState.layer;\n        if (\n          layer.hasRenderer() &&\n          inView(layerState, viewState) &&\n          layerFilter.call(thisArg2, layer)\n        ) {\n          const layerRenderer = layer.getRenderer();\n          const source = layer.getSource();\n          if (layerRenderer && source) {\n            const coordinates = source.getWrapX()\n              ? translatedCoordinate\n              : coordinate;\n            const callback = forEachFeatureAtCoordinate.bind(\n              null,\n              layerState.managed\n            );\n            tmpCoord[0] = coordinates[0] + offsets[i][0];\n            tmpCoord[1] = coordinates[1] + offsets[i][1];\n            result = layerRenderer.forEachFeatureAtCoordinate(\n              tmpCoord,\n              frameState,\n              hitTolerance,\n              callback,\n              matches\n            );\n          }\n          if (result) {\n            return result;\n          }\n        }\n      }\n    }\n    if (matches.length === 0) {\n      return undefined;\n    }\n    const order = 1 / matches.length;\n    matches.forEach((m, i) => (m.distanceSq += i * order));\n    matches.sort((a, b) => a.distanceSq - b.distanceSq);\n    matches.some((m) => {\n      return (result = m.callback(m.feature, m.layer, m.geometry));\n    });\n    return result;\n  }\n\n  /**\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../Map.js\").FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {boolean} checkWrapped Check for wrapped geometries.\n   * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n   *     function, only layers which are visible and for which this function\n   *     returns `true` will be tested for features.  By default, all visible\n   *     layers will be tested.\n   * @param {U} thisArg Value to use as `this` when executing `layerFilter`.\n   * @return {boolean} Is there a feature at the given coordinate?\n   * @template U\n   */\n  hasFeatureAtCoordinate(\n    coordinate,\n    frameState,\n    hitTolerance,\n    checkWrapped,\n    layerFilter,\n    thisArg\n  ) {\n    const hasFeature = this.forEachFeatureAtCoordinate(\n      coordinate,\n      frameState,\n      hitTolerance,\n      checkWrapped,\n      TRUE,\n      this,\n      layerFilter,\n      thisArg\n    );\n\n    return hasFeature !== undefined;\n  }\n\n  /**\n   * @return {import(\"../Map.js\").default} Map.\n   */\n  getMap() {\n    return this.map_;\n  }\n\n  /**\n   * Render.\n   * @abstract\n   * @param {?import(\"../Map.js\").FrameState} frameState Frame state.\n   */\n  renderFrame(frameState) {\n    abstract();\n  }\n\n  /**\n   * @param {import(\"../Map.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n  scheduleExpireIconCache(frameState) {\n    if (iconImageCache.canExpireCache()) {\n      frameState.postRenderFunctions.push(expireIconCache);\n    }\n  }\n}\n\n/**\n * @param {import(\"../Map.js\").default} map Map.\n * @param {import(\"../Map.js\").FrameState} frameState Frame state.\n */\nfunction expireIconCache(map, frameState) {\n  iconImageCache.expire();\n}\n\nexport default MapRenderer;\n","/**\n * @module ol/transform\n */\nimport {WORKER_OFFSCREEN_CANVAS} from './has.js';\nimport {assert} from './asserts.js';\n\n/**\n * An array representing an affine 2d transformation for use with\n * {@link module:ol/transform} functions. The array has 6 elements.\n * @typedef {!Array<number>} Transform\n * @api\n */\n\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 3×3 matrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n\n/**\n * @private\n * @type {Transform}\n */\nconst tmp_ = new Array(6);\n\n/**\n * Create an identity transform.\n * @return {!Transform} Identity transform.\n */\nexport function create() {\n  return [1, 0, 0, 1, 0, 0];\n}\n\n/**\n * Resets the given transform to an identity transform.\n * @param {!Transform} transform Transform.\n * @return {!Transform} Transform.\n */\nexport function reset(transform) {\n  return set(transform, 1, 0, 0, 1, 0, 0);\n}\n\n/**\n * Multiply the underlying matrices of two transforms and return the result in\n * the first transform.\n * @param {!Transform} transform1 Transform parameters of matrix 1.\n * @param {!Transform} transform2 Transform parameters of matrix 2.\n * @return {!Transform} transform1 multiplied with transform2.\n */\nexport function multiply(transform1, transform2) {\n  const a1 = transform1[0];\n  const b1 = transform1[1];\n  const c1 = transform1[2];\n  const d1 = transform1[3];\n  const e1 = transform1[4];\n  const f1 = transform1[5];\n  const a2 = transform2[0];\n  const b2 = transform2[1];\n  const c2 = transform2[2];\n  const d2 = transform2[3];\n  const e2 = transform2[4];\n  const f2 = transform2[5];\n\n  transform1[0] = a1 * a2 + c1 * b2;\n  transform1[1] = b1 * a2 + d1 * b2;\n  transform1[2] = a1 * c2 + c1 * d2;\n  transform1[3] = b1 * c2 + d1 * d2;\n  transform1[4] = a1 * e2 + c1 * f2 + e1;\n  transform1[5] = b1 * e2 + d1 * f2 + f1;\n\n  return transform1;\n}\n\n/**\n * Set the transform components a-f on a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} a The a component of the transform.\n * @param {number} b The b component of the transform.\n * @param {number} c The c component of the transform.\n * @param {number} d The d component of the transform.\n * @param {number} e The e component of the transform.\n * @param {number} f The f component of the transform.\n * @return {!Transform} Matrix with transform applied.\n */\nexport function set(transform, a, b, c, d, e, f) {\n  transform[0] = a;\n  transform[1] = b;\n  transform[2] = c;\n  transform[3] = d;\n  transform[4] = e;\n  transform[5] = f;\n  return transform;\n}\n\n/**\n * Set transform on one matrix from another matrix.\n * @param {!Transform} transform1 Matrix to set transform to.\n * @param {!Transform} transform2 Matrix to set transform from.\n * @return {!Transform} transform1 with transform from transform2 applied.\n */\nexport function setFromArray(transform1, transform2) {\n  transform1[0] = transform2[0];\n  transform1[1] = transform2[1];\n  transform1[2] = transform2[2];\n  transform1[3] = transform2[3];\n  transform1[4] = transform2[4];\n  transform1[5] = transform2[5];\n  return transform1;\n}\n\n/**\n * Transforms the given coordinate with the given transform returning the\n * resulting, transformed coordinate. The coordinate will be modified in-place.\n *\n * @param {Transform} transform The transformation.\n * @param {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} coordinate The coordinate to transform.\n * @return {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} return coordinate so that operations can be\n *     chained together.\n */\nexport function apply(transform, coordinate) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  coordinate[0] = transform[0] * x + transform[2] * y + transform[4];\n  coordinate[1] = transform[1] * x + transform[3] * y + transform[5];\n  return coordinate;\n}\n\n/**\n * Applies rotation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} angle Angle in radians.\n * @return {!Transform} The rotated transform.\n */\nexport function rotate(transform, angle) {\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  return multiply(transform, set(tmp_, cos, sin, -sin, cos, 0, 0));\n}\n\n/**\n * Applies scale to a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scaled transform.\n */\nexport function scale(transform, x, y) {\n  return multiply(transform, set(tmp_, x, 0, 0, y, 0, 0));\n}\n\n/**\n * Creates a scale transform.\n * @param {!Transform} target Transform to overwrite.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scale transform.\n */\nexport function makeScale(target, x, y) {\n  return set(target, x, 0, 0, y, 0, 0);\n}\n\n/**\n * Applies translation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} dx Translation x.\n * @param {number} dy Translation y.\n * @return {!Transform} The translated transform.\n */\nexport function translate(transform, dx, dy) {\n  return multiply(transform, set(tmp_, 1, 0, 0, 1, dx, dy));\n}\n\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative).\n * @param {!Transform} transform The transform (will be modified in place).\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {!Transform} The composite transform.\n */\nexport function compose(transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n  const sin = Math.sin(angle);\n  const cos = Math.cos(angle);\n  transform[0] = sx * cos;\n  transform[1] = sy * sin;\n  transform[2] = -sx * sin;\n  transform[3] = sy * cos;\n  transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1;\n  transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1;\n  return transform;\n}\n\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative). The resulting transform\n * string can be applied as `transform` property of an HTMLElement's style.\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {string} The composite css transform.\n * @api\n */\nexport function composeCssTransform(dx1, dy1, sx, sy, angle, dx2, dy2) {\n  return toString(compose(create(), dx1, dy1, sx, sy, angle, dx2, dy2));\n}\n\n/**\n * Invert the given transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (source) transform.\n */\nexport function invert(source) {\n  return makeInverse(source, source);\n}\n\n/**\n * Invert the given transform.\n * @param {!Transform} target Transform to be set as the inverse of\n *     the source transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (target) transform.\n */\nexport function makeInverse(target, source) {\n  const det = determinant(source);\n  assert(det !== 0, 32); // Transformation matrix cannot be inverted\n\n  const a = source[0];\n  const b = source[1];\n  const c = source[2];\n  const d = source[3];\n  const e = source[4];\n  const f = source[5];\n\n  target[0] = d / det;\n  target[1] = -b / det;\n  target[2] = -c / det;\n  target[3] = a / det;\n  target[4] = (c * f - d * e) / det;\n  target[5] = -(a * f - b * e) / det;\n\n  return target;\n}\n\n/**\n * Returns the determinant of the given matrix.\n * @param {!Transform} mat Matrix.\n * @return {number} Determinant.\n */\nexport function determinant(mat) {\n  return mat[0] * mat[3] - mat[1] * mat[2];\n}\n\n/**\n * @type {HTMLElement}\n * @private\n */\nlet transformStringDiv;\n\n/**\n * A rounded string version of the transform.  This can be used\n * for CSS transforms.\n * @param {!Transform} mat Matrix.\n * @return {string} The transform as a string.\n */\nexport function toString(mat) {\n  const transformString = 'matrix(' + mat.join(', ') + ')';\n  if (WORKER_OFFSCREEN_CANVAS) {\n    return transformString;\n  }\n  const node =\n    transformStringDiv || (transformStringDiv = document.createElement('div'));\n  node.style.transform = transformString;\n  return node.style.transform;\n}\n","/**\n * @module ol/color\n */\nimport {assert} from './asserts.js';\nimport {clamp} from './math.js';\n\n/**\n * A color represented as a short array [red, green, blue, alpha].\n * red, green, and blue should be integers in the range 0..255 inclusive.\n * alpha should be a float in the range 0..1 inclusive. If no alpha value is\n * given then `1` will be used.\n * @typedef {Array<number>} Color\n * @api\n */\n\n/**\n * This RegExp matches # followed by 3, 4, 6, or 8 hex digits.\n * @const\n * @type {RegExp}\n * @private\n */\nconst HEX_COLOR_RE_ = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\n\n/**\n * Regular expression for matching potential named color style strings.\n * @const\n * @type {RegExp}\n * @private\n */\nconst NAMED_COLOR_RE_ = /^([a-z]*)$|^hsla?\\(.*\\)$/i;\n\n/**\n * Return the color as an rgba string.\n * @param {Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n  if (typeof color === 'string') {\n    return color;\n  } else {\n    return toString(color);\n  }\n}\n\n/**\n * Return named color as an rgba string.\n * @param {string} color Named color.\n * @return {string} Rgb string.\n */\nfunction fromNamed(color) {\n  const el = document.createElement('div');\n  el.style.color = color;\n  if (el.style.color !== '') {\n    document.body.appendChild(el);\n    const rgb = getComputedStyle(el).color;\n    document.body.removeChild(el);\n    return rgb;\n  } else {\n    return '';\n  }\n}\n\n/**\n * @param {string} s String.\n * @return {Color} Color.\n */\nexport const fromString = (function () {\n  // We maintain a small cache of parsed strings.  To provide cheap LRU-like\n  // semantics, whenever the cache grows too large we simply delete an\n  // arbitrary 25% of the entries.\n\n  /**\n   * @const\n   * @type {number}\n   */\n  const MAX_CACHE_SIZE = 1024;\n\n  /**\n   * @type {Object<string, Color>}\n   */\n  const cache = {};\n\n  /**\n   * @type {number}\n   */\n  let cacheSize = 0;\n\n  return (\n    /**\n     * @param {string} s String.\n     * @return {Color} Color.\n     */\n    function (s) {\n      let color;\n      if (cache.hasOwnProperty(s)) {\n        color = cache[s];\n      } else {\n        if (cacheSize >= MAX_CACHE_SIZE) {\n          let i = 0;\n          for (const key in cache) {\n            if ((i++ & 3) === 0) {\n              delete cache[key];\n              --cacheSize;\n            }\n          }\n        }\n        color = fromStringInternal_(s);\n        cache[s] = color;\n        ++cacheSize;\n      }\n      return color;\n    }\n  );\n})();\n\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {Color|string} color Color.\n * @return {Color} Color.\n * @api\n */\nexport function asArray(color) {\n  if (Array.isArray(color)) {\n    return color;\n  } else {\n    return fromString(color);\n  }\n}\n\n/**\n * @param {string} s String.\n * @private\n * @return {Color} Color.\n */\nfunction fromStringInternal_(s) {\n  let r, g, b, a, color;\n\n  if (NAMED_COLOR_RE_.exec(s)) {\n    s = fromNamed(s);\n  }\n\n  if (HEX_COLOR_RE_.exec(s)) {\n    // hex\n    const n = s.length - 1; // number of hex digits\n    let d; // number of digits per channel\n    if (n <= 4) {\n      d = 1;\n    } else {\n      d = 2;\n    }\n    const hasAlpha = n === 4 || n === 8;\n    r = parseInt(s.substr(1 + 0 * d, d), 16);\n    g = parseInt(s.substr(1 + 1 * d, d), 16);\n    b = parseInt(s.substr(1 + 2 * d, d), 16);\n    if (hasAlpha) {\n      a = parseInt(s.substr(1 + 3 * d, d), 16);\n    } else {\n      a = 255;\n    }\n    if (d == 1) {\n      r = (r << 4) + r;\n      g = (g << 4) + g;\n      b = (b << 4) + b;\n      if (hasAlpha) {\n        a = (a << 4) + a;\n      }\n    }\n    color = [r, g, b, a / 255];\n  } else if (s.startsWith('rgba(')) {\n    // rgba()\n    color = s.slice(5, -1).split(',').map(Number);\n    normalize(color);\n  } else if (s.startsWith('rgb(')) {\n    // rgb()\n    color = s.slice(4, -1).split(',').map(Number);\n    color.push(1);\n    normalize(color);\n  } else {\n    assert(false, 14); // Invalid color\n  }\n  return color;\n}\n\n/**\n * TODO this function is only used in the test, we probably shouldn't export it\n * @param {Color} color Color.\n * @return {Color} Clamped color.\n */\nexport function normalize(color) {\n  color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n  color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n  color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n  color[3] = clamp(color[3], 0, 1);\n  return color;\n}\n\n/**\n * @param {Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n  let r = color[0];\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0;\n  }\n  let g = color[1];\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0;\n  }\n  let b = color[2];\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0;\n  }\n  const a = color[3] === undefined ? 1 : Math.round(color[3] * 100) / 100;\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n\n/**\n * @param {string} s String.\n * @return {boolean} Whether the string is actually a valid color\n */\nexport function isStringColor(s) {\n  if (NAMED_COLOR_RE_.test(s)) {\n    s = fromNamed(s);\n  }\n  return HEX_COLOR_RE_.test(s) || s.startsWith('rgba(') || s.startsWith('rgb(');\n}\n","/**\n * @module ol/style/IconImageCache\n */\nimport {asString} from '../color.js';\n\n/**\n * @classdesc\n * Singleton class. Available through {@link module:ol/style/IconImageCache.shared}.\n */\nclass IconImageCache {\n  constructor() {\n    /**\n     * @type {!Object<string, import(\"./IconImage.js\").default>}\n     * @private\n     */\n    this.cache_ = {};\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.cacheSize_ = 0;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.maxCacheSize_ = 32;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  clear() {\n    this.cache_ = {};\n    this.cacheSize_ = 0;\n  }\n\n  /**\n   * @return {boolean} Can expire cache.\n   */\n  canExpireCache() {\n    return this.cacheSize_ > this.maxCacheSize_;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  expire() {\n    if (this.canExpireCache()) {\n      let i = 0;\n      for (const key in this.cache_) {\n        const iconImage = this.cache_[key];\n        if ((i++ & 3) === 0 && !iconImage.hasListener()) {\n          delete this.cache_[key];\n          --this.cacheSize_;\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {string} src Src.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"../color.js\").Color} color Color.\n   * @return {import(\"./IconImage.js\").default} Icon image.\n   */\n  get(src, crossOrigin, color) {\n    const key = getKey(src, crossOrigin, color);\n    return key in this.cache_ ? this.cache_[key] : null;\n  }\n\n  /**\n   * @param {string} src Src.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"../color.js\").Color} color Color.\n   * @param {import(\"./IconImage.js\").default} iconImage Icon image.\n   */\n  set(src, crossOrigin, color, iconImage) {\n    const key = getKey(src, crossOrigin, color);\n    this.cache_[key] = iconImage;\n    ++this.cacheSize_;\n  }\n\n  /**\n   * Set the cache size of the icon cache. Default is `32`. Change this value when\n   * your map uses more than 32 different icon images and you are not caching icon\n   * styles on the application level.\n   * @param {number} maxCacheSize Cache max size.\n   * @api\n   */\n  setSize(maxCacheSize) {\n    this.maxCacheSize_ = maxCacheSize;\n    this.expire();\n  }\n}\n\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {string} Cache key.\n */\nfunction getKey(src, crossOrigin, color) {\n  const colorString = color ? asString(color) : 'null';\n  return crossOrigin + ':' + src + ':' + colorString;\n}\n\nexport default IconImageCache;\n\n/**\n * The {@link module:ol/style/IconImageCache~IconImageCache} for\n * {@link module:ol/style/Icon~Icon} images.\n * @api\n */\nexport const shared = new IconImageCache();\n","/**\n * @module ol/layer/Layer\n */\nimport BaseLayer from './Base.js';\nimport EventType from '../events/EventType.js';\nimport LayerProperty from './Property.js';\nimport RenderEventType from '../render/EventType.js';\nimport {assert} from '../asserts.js';\nimport {listen, unlistenByKey} from '../events.js';\n\n/**\n * @typedef {function(import(\"../Map.js\").FrameState):HTMLElement} RenderFunction\n */\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./Base\").BaseLayerObjectEventTypes|\n *     'change:source', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../render/EventType\").LayerRenderEventTypes, import(\"../render/Event\").default, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"./Base\").BaseLayerObjectEventTypes|'change:source'|\n *     import(\"../render/EventType\").LayerRenderEventTypes, Return>} LayerOnSignature\n */\n\n/**\n * @template {import(\"../source/Source.js\").default} [SourceType=import(\"../source/Source.js\").default]\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {SourceType} [source] Source for this layer.  If not provided to the constructor,\n * the source can be set by calling {@link module:ol/layer/Layer~Layer#setSource layer.setSource(source)} after\n * construction.\n * @property {import(\"../Map.js\").default|null} [map] Map.\n * @property {RenderFunction} [render] Render function. Takes the frame state as input and is expected to return an\n * HTML element. Will overwrite the default rendering for the layer.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n\n/**\n * @typedef {Object} State\n * @property {import(\"./Layer.js\").default} layer Layer.\n * @property {number} opacity Opacity, the value is rounded to two digits to appear after the decimal point.\n * @property {boolean} visible Visible.\n * @property {boolean} managed Managed.\n * @property {import(\"../extent.js\").Extent} [extent] Extent.\n * @property {number} zIndex ZIndex.\n * @property {number} maxResolution Maximum resolution.\n * @property {number} minResolution Minimum resolution.\n * @property {number} minZoom Minimum zoom.\n * @property {number} maxZoom Maximum zoom.\n */\n\n/**\n * @classdesc\n * Base class from which all layer types are derived. This should only be instantiated\n * in the case where a custom layer is added to the map with a custom `render` function.\n * Such a function can be specified in the `options` object, and is expected to return an HTML element.\n *\n * A visual representation of raster or vector map data.\n * Layers group together those properties that pertain to how the data is to be\n * displayed, irrespective of the source of that data.\n *\n * Layers are usually added to a map with [map.addLayer()]{@link import(\"../Map.js\").default#addLayer}.\n * Components like {@link module:ol/interaction/Draw~Draw} use unmanaged layers\n * internally. These unmanaged layers are associated with the map using\n * [layer.setMap()]{@link module:ol/layer/Layer~Layer#setMap} instead.\n *\n * A generic `change` event is fired when the state of the source changes.\n *\n * @fires import(\"../render/Event.js\").RenderEvent#prerender\n * @fires import(\"../render/Event.js\").RenderEvent#postrender\n *\n * @template {import(\"../source/Source.js\").default} [SourceType=import(\"../source/Source.js\").default]\n * @template {import(\"../renderer/Layer.js\").default} [RendererType=import(\"../renderer/Layer.js\").default]\n * @api\n */\nclass Layer extends BaseLayer {\n  /**\n   * @param {Options<SourceType>} options Layer options.\n   */\n  constructor(options) {\n    const baseOptions = Object.assign({}, options);\n    delete baseOptions.source;\n\n    super(baseOptions);\n\n    /***\n     * @type {LayerOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {LayerOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {LayerOnSignature<void>}\n     */\n    this.un;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.mapPrecomposeKey_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.mapRenderKey_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.sourceChangeKey_ = null;\n\n    /**\n     * @private\n     * @type {RendererType}\n     */\n    this.renderer_ = null;\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.rendered = false;\n\n    // Overwrite default render method with a custom one\n    if (options.render) {\n      this.render = options.render;\n    }\n\n    if (options.map) {\n      this.setMap(options.map);\n    }\n\n    this.addChangeListener(\n      LayerProperty.SOURCE,\n      this.handleSourcePropertyChange_\n    );\n\n    const source = options.source\n      ? /** @type {SourceType} */ (options.source)\n      : null;\n    this.setSource(source);\n  }\n\n  /**\n   * @param {Array<import(\"./Layer.js\").default>} [array] Array of layers (to be modified in place).\n   * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n   */\n  getLayersArray(array) {\n    array = array ? array : [];\n    array.push(this);\n    return array;\n  }\n\n  /**\n   * @param {Array<import(\"./Layer.js\").State>} [states] Optional list of layer states (to be modified in place).\n   * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n   */\n  getLayerStatesArray(states) {\n    states = states ? states : [];\n    states.push(this.getLayerState());\n    return states;\n  }\n\n  /**\n   * Get the layer source.\n   * @return {SourceType|null} The layer source (or `null` if not yet set).\n   * @observable\n   * @api\n   */\n  getSource() {\n    return /** @type {SourceType} */ (this.get(LayerProperty.SOURCE)) || null;\n  }\n\n  /**\n   * @return {SourceType|null} The source being rendered.\n   */\n  getRenderSource() {\n    return this.getSource();\n  }\n\n  /**\n   * @return {import(\"../source/Source.js\").State} Source state.\n   */\n  getSourceState() {\n    const source = this.getSource();\n    return !source ? 'undefined' : source.getState();\n  }\n\n  /**\n   * @private\n   */\n  handleSourceChange_() {\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  handleSourcePropertyChange_() {\n    if (this.sourceChangeKey_) {\n      unlistenByKey(this.sourceChangeKey_);\n      this.sourceChangeKey_ = null;\n    }\n    const source = this.getSource();\n    if (source) {\n      this.sourceChangeKey_ = listen(\n        source,\n        EventType.CHANGE,\n        this.handleSourceChange_,\n        this\n      );\n    }\n    this.changed();\n  }\n\n  /**\n   * @param {import(\"../pixel\").Pixel} pixel Pixel.\n   * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with\n   * an array of features.\n   */\n  getFeatures(pixel) {\n    if (!this.renderer_) {\n      return new Promise((resolve) => resolve([]));\n    }\n    return this.renderer_.getFeatures(pixel);\n  }\n\n  /**\n   * @param {import(\"../pixel\").Pixel} pixel Pixel.\n   * @return {Uint8ClampedArray|Uint8Array|Float32Array|DataView|null} Pixel data.\n   */\n  getData(pixel) {\n    if (!this.renderer_ || !this.rendered) {\n      return null;\n    }\n    return this.renderer_.getData(pixel);\n  }\n\n  /**\n   * In charge to manage the rendering of the layer. One layer type is\n   * bounded with one layer renderer.\n   * @param {?import(\"../Map.js\").FrameState} frameState Frame state.\n   * @param {HTMLElement} target Target which the renderer may (but need not) use\n   * for rendering its content.\n   * @return {HTMLElement} The rendered element.\n   */\n  render(frameState, target) {\n    const layerRenderer = this.getRenderer();\n\n    if (layerRenderer.prepareFrame(frameState)) {\n      this.rendered = true;\n      return layerRenderer.renderFrame(frameState, target);\n    }\n  }\n\n  /**\n   * Called when a layer is not visible during a map render.\n   */\n  unrender() {\n    this.rendered = false;\n  }\n\n  /**\n   * For use inside the library only.\n   * @param {import(\"../Map.js\").default|null} map Map.\n   */\n  setMapInternal(map) {\n    if (!map) {\n      this.unrender();\n    }\n    this.set(LayerProperty.MAP, map);\n  }\n\n  /**\n   * For use inside the library only.\n   * @return {import(\"../Map.js\").default|null} Map.\n   */\n  getMapInternal() {\n    return this.get(LayerProperty.MAP);\n  }\n\n  /**\n   * Sets the layer to be rendered on top of other layers on a map. The map will\n   * not manage this layer in its layers collection. This\n   * is useful for temporary layers. To remove an unmanaged layer from the map,\n   * use `#setMap(null)`.\n   *\n   * To add the layer to a map and have it managed by the map, use\n   * {@link module:ol/Map~Map#addLayer} instead.\n   * @param {import(\"../Map.js\").default|null} map Map.\n   * @api\n   */\n  setMap(map) {\n    if (this.mapPrecomposeKey_) {\n      unlistenByKey(this.mapPrecomposeKey_);\n      this.mapPrecomposeKey_ = null;\n    }\n    if (!map) {\n      this.changed();\n    }\n    if (this.mapRenderKey_) {\n      unlistenByKey(this.mapRenderKey_);\n      this.mapRenderKey_ = null;\n    }\n    if (map) {\n      this.mapPrecomposeKey_ = listen(\n        map,\n        RenderEventType.PRECOMPOSE,\n        function (evt) {\n          const renderEvent =\n            /** @type {import(\"../render/Event.js\").default} */ (evt);\n          const layerStatesArray = renderEvent.frameState.layerStatesArray;\n          const layerState = this.getLayerState(false);\n          // A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both.\n          assert(\n            !layerStatesArray.some(function (arrayLayerState) {\n              return arrayLayerState.layer === layerState.layer;\n            }),\n            67\n          );\n          layerStatesArray.push(layerState);\n        },\n        this\n      );\n      this.mapRenderKey_ = listen(this, EventType.CHANGE, map.render, map);\n      this.changed();\n    }\n  }\n\n  /**\n   * Set the layer source.\n   * @param {SourceType|null} source The layer source.\n   * @observable\n   * @api\n   */\n  setSource(source) {\n    this.set(LayerProperty.SOURCE, source);\n  }\n\n  /**\n   * Get the renderer for this layer.\n   * @return {RendererType|null} The layer renderer.\n   */\n  getRenderer() {\n    if (!this.renderer_) {\n      this.renderer_ = this.createRenderer();\n    }\n    return this.renderer_;\n  }\n\n  /**\n   * @return {boolean} The layer has a renderer.\n   */\n  hasRenderer() {\n    return !!this.renderer_;\n  }\n\n  /**\n   * Create a renderer for this layer.\n   * @return {RendererType} A layer renderer.\n   * @protected\n   */\n  createRenderer() {\n    return null;\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    if (this.renderer_) {\n      this.renderer_.dispose();\n      delete this.renderer_;\n    }\n\n    this.setSource(null);\n    super.disposeInternal();\n  }\n}\n\n/**\n * Return `true` if the layer is visible and if the provided view state\n * has resolution and zoom levels that are in range of the layer's min/max.\n * @param {State} layerState Layer state.\n * @param {import(\"../View.js\").State} viewState View state.\n * @return {boolean} The layer is visible at the given view state.\n */\nexport function inView(layerState, viewState) {\n  if (!layerState.visible) {\n    return false;\n  }\n  const resolution = viewState.resolution;\n  if (\n    resolution < layerState.minResolution ||\n    resolution >= layerState.maxResolution\n  ) {\n    return false;\n  }\n  const zoom = viewState.zoom;\n  return zoom > layerState.minZoom && zoom <= layerState.maxZoom;\n}\n\nexport default Layer;\n","/**\n * @module ol/render/EventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered before a layer is rendered.\n   * @event module:ol/render/Event~RenderEvent#prerender\n   * @api\n   */\n  PRERENDER: 'prerender',\n\n  /**\n   * Triggered after a layer is rendered.\n   * @event module:ol/render/Event~RenderEvent#postrender\n   * @api\n   */\n  POSTRENDER: 'postrender',\n\n  /**\n   * Triggered before layers are composed.  When dispatched by the map, the event object will not have\n   * a `context` set.  When dispatched by a layer, the event object will have a `context` set.  Only\n   * WebGL layers currently dispatch this event.\n   * @event module:ol/render/Event~RenderEvent#precompose\n   * @api\n   */\n  PRECOMPOSE: 'precompose',\n\n  /**\n   * Triggered after layers are composed.  When dispatched by the map, the event object will not have\n   * a `context` set.  When dispatched by a layer, the event object will have a `context` set.  Only\n   * WebGL layers currently dispatch this event.\n   * @event module:ol/render/Event~RenderEvent#postcompose\n   * @api\n   */\n  POSTCOMPOSE: 'postcompose',\n\n  /**\n   * Triggered when rendering is complete, i.e. all sources and tiles have\n   * finished loading for the current viewport, and all tiles are faded in.\n   * The event object will not have a `context` set.\n   * @event module:ol/render/Event~RenderEvent#rendercomplete\n   * @api\n   */\n  RENDERCOMPLETE: 'rendercomplete',\n};\n\n/**\n * @typedef {'postrender'|'precompose'|'postcompose'|'rendercomplete'} MapRenderEventTypes\n */\n\n/**\n * @typedef {'postrender'|'prerender'} LayerRenderEventTypes\n */\n","/**\n * @module ol/coordinate\n */\nimport {getWidth} from './extent.js';\nimport {modulo, toFixed} from './math.js';\nimport {padNumber} from './string.js';\n\n/**\n * An array of numbers representing an xy coordinate. Example: `[16, 48]`.\n * @typedef {Array<number>} Coordinate\n * @api\n */\n\n/**\n * A function that takes a {@link module:ol/coordinate~Coordinate} and\n * transforms it into a `{string}`.\n *\n * @typedef {function((Coordinate|undefined)): string} CoordinateFormat\n * @api\n */\n\n/**\n * Add `delta` to `coordinate`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {add} from 'ol/coordinate';\n *\n *     const coord = [7.85, 47.983333];\n *     add(coord, [-2, 4]);\n *     // coord is now [5.85, 51.983333]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {Coordinate} delta Delta.\n * @return {Coordinate} The input coordinate adjusted by\n * the given delta.\n * @api\n */\nexport function add(coordinate, delta) {\n  coordinate[0] += +delta[0];\n  coordinate[1] += +delta[1];\n  return coordinate;\n}\n\n/**\n * Calculates the point closest to the passed coordinate on the passed circle.\n *\n * @param {Coordinate} coordinate The coordinate.\n * @param {import(\"./geom/Circle.js\").default} circle The circle.\n * @return {Coordinate} Closest point on the circumference.\n */\nexport function closestOnCircle(coordinate, circle) {\n  const r = circle.getRadius();\n  const center = circle.getCenter();\n  const x0 = center[0];\n  const y0 = center[1];\n  const x1 = coordinate[0];\n  const y1 = coordinate[1];\n\n  let dx = x1 - x0;\n  const dy = y1 - y0;\n  if (dx === 0 && dy === 0) {\n    dx = 1;\n  }\n  const d = Math.sqrt(dx * dx + dy * dy);\n\n  const x = x0 + (r * dx) / d;\n  const y = y0 + (r * dy) / d;\n\n  return [x, y];\n}\n\n/**\n * Calculates the point closest to the passed coordinate on the passed segment.\n * This is the foot of the perpendicular of the coordinate to the segment when\n * the foot is on the segment, or the closest segment coordinate when the foot\n * is outside the segment.\n *\n * @param {Coordinate} coordinate The coordinate.\n * @param {Array<Coordinate>} segment The two coordinates\n * of the segment.\n * @return {Coordinate} The foot of the perpendicular of\n * the coordinate to the segment.\n */\nexport function closestOnSegment(coordinate, segment) {\n  const x0 = coordinate[0];\n  const y0 = coordinate[1];\n  const start = segment[0];\n  const end = segment[1];\n  const x1 = start[0];\n  const y1 = start[1];\n  const x2 = end[0];\n  const y2 = end[1];\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const along =\n    dx === 0 && dy === 0\n      ? 0\n      : (dx * (x0 - x1) + dy * (y0 - y1)) / (dx * dx + dy * dy || 0);\n  let x, y;\n  if (along <= 0) {\n    x = x1;\n    y = y1;\n  } else if (along >= 1) {\n    x = x2;\n    y = y2;\n  } else {\n    x = x1 + along * dx;\n    y = y1 + along * dy;\n  }\n  return [x, y];\n}\n\n/**\n * Returns a {@link module:ol/coordinate~CoordinateFormat} function that can be\n * used to format\n * a {Coordinate} to a string.\n *\n * Example without specifying the fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     const coord = [7.85, 47.983333];\n *     const stringifyFunc = createStringXY();\n *     const out = stringifyFunc(coord);\n *     // out is now '8, 48'\n *\n * Example with explicitly specifying 2 fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     const coord = [7.85, 47.983333];\n *     const stringifyFunc = createStringXY(2);\n *     const out = stringifyFunc(coord);\n *     // out is now '7.85, 47.98'\n *\n * @param {number} [fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {CoordinateFormat} Coordinate format.\n * @api\n */\nexport function createStringXY(fractionDigits) {\n  return (\n    /**\n     * @param {Coordinate} coordinate Coordinate.\n     * @return {string} String XY.\n     */\n    function (coordinate) {\n      return toStringXY(coordinate, fractionDigits);\n    }\n  );\n}\n\n/**\n * @param {string} hemispheres Hemispheres.\n * @param {number} degrees Degrees.\n * @param {number} [fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} String.\n */\nexport function degreesToStringHDMS(hemispheres, degrees, fractionDigits) {\n  const normalizedDegrees = modulo(degrees + 180, 360) - 180;\n  const x = Math.abs(3600 * normalizedDegrees);\n  const decimals = fractionDigits || 0;\n\n  let deg = Math.floor(x / 3600);\n  let min = Math.floor((x - deg * 3600) / 60);\n  let sec = toFixed(x - deg * 3600 - min * 60, decimals);\n\n  if (sec >= 60) {\n    sec = 0;\n    min += 1;\n  }\n\n  if (min >= 60) {\n    min = 0;\n    deg += 1;\n  }\n\n  let hdms = deg + '\\u00b0';\n  if (min !== 0 || sec !== 0) {\n    hdms += ' ' + padNumber(min, 2) + '\\u2032';\n  }\n  if (sec !== 0) {\n    hdms += ' ' + padNumber(sec, 2, decimals) + '\\u2033';\n  }\n  if (normalizedDegrees !== 0) {\n    hdms += ' ' + hemispheres.charAt(normalizedDegrees < 0 ? 1 : 0);\n  }\n\n  return hdms;\n}\n\n/**\n * Transforms the given {@link module:ol/coordinate~Coordinate} to a string\n * using the given string template. The strings `{x}` and `{y}` in the template\n * will be replaced with the first and second coordinate values respectively.\n *\n * Example without specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     const coord = [7.85, 47.983333];\n *     const template = 'Coordinate is ({x}|{y}).';\n *     const out = format(coord, template);\n *     // out is now 'Coordinate is (8|48).'\n *\n * Example explicitly specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     const coord = [7.85, 47.983333];\n *     const template = 'Coordinate is ({x}|{y}).';\n *     const out = format(coord, template, 2);\n *     // out is now 'Coordinate is (7.85|47.98).'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {string} template A template string with `{x}` and `{y}` placeholders\n *     that will be replaced by first and second coordinate values.\n * @param {number} [fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Formatted coordinate.\n * @api\n */\nexport function format(coordinate, template, fractionDigits) {\n  if (coordinate) {\n    return template\n      .replace('{x}', coordinate[0].toFixed(fractionDigits))\n      .replace('{y}', coordinate[1].toFixed(fractionDigits));\n  } else {\n    return '';\n  }\n}\n\n/**\n * @param {Coordinate} coordinate1 First coordinate.\n * @param {Coordinate} coordinate2 Second coordinate.\n * @return {boolean} The two coordinates are equal.\n */\nexport function equals(coordinate1, coordinate2) {\n  let equals = true;\n  for (let i = coordinate1.length - 1; i >= 0; --i) {\n    if (coordinate1[i] != coordinate2[i]) {\n      equals = false;\n      break;\n    }\n  }\n  return equals;\n}\n\n/**\n * Rotate `coordinate` by `angle`. `coordinate` is modified in place and\n * returned by the function.\n *\n * Example:\n *\n *     import {rotate} from 'ol/coordinate';\n *\n *     const coord = [7.85, 47.983333];\n *     const rotateRadians = Math.PI / 2; // 90 degrees\n *     rotate(coord, rotateRadians);\n *     // coord is now [-47.983333, 7.85]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} angle Angle in radian.\n * @return {Coordinate} Coordinate.\n * @api\n */\nexport function rotate(coordinate, angle) {\n  const cosAngle = Math.cos(angle);\n  const sinAngle = Math.sin(angle);\n  const x = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n  const y = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n  coordinate[0] = x;\n  coordinate[1] = y;\n  return coordinate;\n}\n\n/**\n * Scale `coordinate` by `scale`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {scale as scaleCoordinate} from 'ol/coordinate';\n *\n *     const coord = [7.85, 47.983333];\n *     const scale = 1.2;\n *     scaleCoordinate(coord, scale);\n *     // coord is now [9.42, 57.5799996]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} scale Scale factor.\n * @return {Coordinate} Coordinate.\n */\nexport function scale(coordinate, scale) {\n  coordinate[0] *= scale;\n  coordinate[1] *= scale;\n  return coordinate;\n}\n\n/**\n * @param {Coordinate} coord1 First coordinate.\n * @param {Coordinate} coord2 Second coordinate.\n * @return {number} Squared distance between coord1 and coord2.\n */\nexport function squaredDistance(coord1, coord2) {\n  const dx = coord1[0] - coord2[0];\n  const dy = coord1[1] - coord2[1];\n  return dx * dx + dy * dy;\n}\n\n/**\n * @param {Coordinate} coord1 First coordinate.\n * @param {Coordinate} coord2 Second coordinate.\n * @return {number} Distance between coord1 and coord2.\n */\nexport function distance(coord1, coord2) {\n  return Math.sqrt(squaredDistance(coord1, coord2));\n}\n\n/**\n * Calculate the squared distance from a coordinate to a line segment.\n *\n * @param {Coordinate} coordinate Coordinate of the point.\n * @param {Array<Coordinate>} segment Line segment (2\n * coordinates).\n * @return {number} Squared distance from the point to the line segment.\n */\nexport function squaredDistanceToSegment(coordinate, segment) {\n  return squaredDistance(coordinate, closestOnSegment(coordinate, segment));\n}\n\n/**\n * Format a geographic coordinate with the hemisphere, degrees, minutes, and\n * seconds.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     const coord = [7.85, 47.983333];\n *     const out = toStringHDMS(coord);\n *     // out is now '47° 58′ 60″ N 7° 50′ 60″ E'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     const coord = [7.85, 47.983333];\n *     const out = toStringHDMS(coord, 1);\n *     // out is now '47° 58′ 60.0″ N 7° 50′ 60.0″ E'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} [fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Hemisphere, degrees, minutes and seconds.\n * @api\n */\nexport function toStringHDMS(coordinate, fractionDigits) {\n  if (coordinate) {\n    return (\n      degreesToStringHDMS('NS', coordinate[1], fractionDigits) +\n      ' ' +\n      degreesToStringHDMS('EW', coordinate[0], fractionDigits)\n    );\n  } else {\n    return '';\n  }\n}\n\n/**\n * Format a coordinate as a comma delimited string.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     const coord = [7.85, 47.983333];\n *     const out = toStringXY(coord);\n *     // out is now '8, 48'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     const coord = [7.85, 47.983333];\n *     const out = toStringXY(coord, 1);\n *     // out is now '7.8, 48.0'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} [fractionDigits] The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} XY.\n * @api\n */\nexport function toStringXY(coordinate, fractionDigits) {\n  return format(coordinate, '{x}, {y}', fractionDigits);\n}\n\n/**\n * Modifies the provided coordinate in-place to be within the real world\n * extent. The lower projection extent boundary is inclusive, the upper one\n * exclusive.\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {Coordinate} The coordinate within the real world extent.\n */\nexport function wrapX(coordinate, projection) {\n  if (projection.canWrapX()) {\n    const worldWidth = getWidth(projection.getExtent());\n    const worldsAway = getWorldsAway(coordinate, projection, worldWidth);\n    if (worldsAway) {\n      coordinate[0] -= worldsAway * worldWidth;\n    }\n  }\n  return coordinate;\n}\n/**\n * @param {Coordinate} coordinate Coordinate.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @param {number} [sourceExtentWidth] Width of the source extent.\n * @return {number} Offset in world widths.\n */\nexport function getWorldsAway(coordinate, projection, sourceExtentWidth) {\n  const projectionExtent = projection.getExtent();\n  let worldsAway = 0;\n  if (\n    projection.canWrapX() &&\n    (coordinate[0] < projectionExtent[0] || coordinate[0] > projectionExtent[2])\n  ) {\n    sourceExtentWidth = sourceExtentWidth || getWidth(projectionExtent);\n    worldsAway = Math.floor(\n      (coordinate[0] - projectionExtent[0]) / sourceExtentWidth\n    );\n  }\n  return worldsAway;\n}\n","/**\n * @module ol/render/Event\n */\n\nimport Event from '../events/Event.js';\n\nclass RenderEvent extends Event {\n  /**\n   * @param {import(\"./EventType.js\").default} type Type.\n   * @param {import(\"../transform.js\").Transform} [inversePixelTransform] Transform for\n   *     CSS pixels to rendered pixels.\n   * @param {import(\"../Map.js\").FrameState} [frameState] Frame state.\n   * @param {?(CanvasRenderingContext2D|WebGLRenderingContext)} [context] Context.\n   */\n  constructor(type, inversePixelTransform, frameState, context) {\n    super(type);\n\n    /**\n     * Transform from CSS pixels (relative to the top-left corner of the map viewport)\n     * to rendered pixels on this event's `context`. Only available when a Canvas renderer is used, null otherwise.\n     * @type {import(\"../transform.js\").Transform|undefined}\n     * @api\n     */\n    this.inversePixelTransform = inversePixelTransform;\n\n    /**\n     * An object representing the current render frame state.\n     * @type {import(\"../Map.js\").FrameState|undefined}\n     * @api\n     */\n    this.frameState = frameState;\n\n    /**\n     * Canvas context. Not available when the event is dispatched by the map. For Canvas 2D layers,\n     * the context will be the 2D rendering context.  For WebGL layers, the context will be the WebGL\n     * context.\n     * @type {CanvasRenderingContext2D|WebGLRenderingContext|undefined}\n     * @api\n     */\n    this.context = context;\n  }\n}\n\nexport default RenderEvent;\n","/**\n * @module ol/css\n */\n\n/**\n * @typedef {Object} FontParameters\n * @property {string} style Style.\n * @property {string} variant Variant.\n * @property {string} weight Weight.\n * @property {string} size Size.\n * @property {string} lineHeight LineHeight.\n * @property {string} family Family.\n * @property {Array<string>} families Families.\n */\n\n/**\n * The CSS class for hidden feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_HIDDEN = 'ol-hidden';\n\n/**\n * The CSS class that we'll give the DOM elements to have them selectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_SELECTABLE = 'ol-selectable';\n\n/**\n * The CSS class that we'll give the DOM elements to have them unselectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSELECTABLE = 'ol-unselectable';\n\n/**\n * The CSS class for unsupported feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSUPPORTED = 'ol-unsupported';\n\n/**\n * The CSS class for controls.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_CONTROL = 'ol-control';\n\n/**\n * The CSS class that we'll give the DOM elements that are collapsed, i.e.\n * to those elements which usually can be expanded.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_COLLAPSED = 'ol-collapsed';\n\n/**\n * From https://stackoverflow.com/questions/10135697/regex-to-parse-any-css-font\n * @type {RegExp}\n */\nconst fontRegEx = new RegExp(\n  [\n    '^\\\\s*(?=(?:(?:[-a-z]+\\\\s*){0,2}(italic|oblique))?)',\n    '(?=(?:(?:[-a-z]+\\\\s*){0,2}(small-caps))?)',\n    '(?=(?:(?:[-a-z]+\\\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)',\n    '(?:(?:normal|\\\\1|\\\\2|\\\\3)\\\\s*){0,3}((?:xx?-)?',\n    '(?:small|large)|medium|smaller|larger|[\\\\.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx]))',\n    '(?:\\\\s*\\\\/\\\\s*(normal|[\\\\.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx])?))',\n    '?\\\\s*([-,\\\\\"\\\\\\'\\\\sa-z]+?)\\\\s*$',\n  ].join(''),\n  'i'\n);\nconst fontRegExMatchIndex = [\n  'style',\n  'variant',\n  'weight',\n  'size',\n  'lineHeight',\n  'family',\n];\n\n/**\n * Get the list of font families from a font spec.  Note that this doesn't work\n * for font families that have commas in them.\n * @param {string} fontSpec The CSS font property.\n * @return {FontParameters|null} The font parameters (or null if the input spec is invalid).\n */\nexport const getFontParameters = function (fontSpec) {\n  const match = fontSpec.match(fontRegEx);\n  if (!match) {\n    return null;\n  }\n  const style = /** @type {FontParameters} */ ({\n    lineHeight: 'normal',\n    size: '1.2em',\n    style: 'normal',\n    weight: 'normal',\n    variant: 'normal',\n  });\n  for (let i = 0, ii = fontRegExMatchIndex.length; i < ii; ++i) {\n    const value = match[i + 1];\n    if (value !== undefined) {\n      style[fontRegExMatchIndex[i]] = value;\n    }\n  }\n  style.families = style.family.split(/,\\s?/);\n  return style;\n};\n","/**\n * @module ol/render/canvas\n */\nimport BaseObject from '../Object.js';\nimport {WORKER_OFFSCREEN_CANVAS} from '../has.js';\nimport {clear} from '../obj.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {getFontParameters} from '../css.js';\n\n/**\n * @typedef {'Circle' | 'Image' | 'LineString' | 'Polygon' | 'Text' | 'Default'} BuilderType\n */\n\n/**\n * @typedef {Object} FillState\n * @property {import(\"../colorlike.js\").ColorLike} fillStyle FillStyle.\n */\n\n/**\n * @typedef Label\n * @property {number} width Width.\n * @property {number} height Height.\n * @property {Array<string|number>} contextInstructions ContextInstructions.\n */\n\n/**\n * @typedef {Object} FillStrokeState\n * @property {import(\"../colorlike.js\").ColorLike} [currentFillStyle] Current FillStyle.\n * @property {import(\"../colorlike.js\").ColorLike} [currentStrokeStyle] Current StrokeStyle.\n * @property {CanvasLineCap} [currentLineCap] Current LineCap.\n * @property {Array<number>} currentLineDash Current LineDash.\n * @property {number} [currentLineDashOffset] Current LineDashOffset.\n * @property {CanvasLineJoin} [currentLineJoin] Current LineJoin.\n * @property {number} [currentLineWidth] Current LineWidth.\n * @property {number} [currentMiterLimit] Current MiterLimit.\n * @property {number} [lastStroke] Last stroke.\n * @property {import(\"../colorlike.js\").ColorLike} [fillStyle] FillStyle.\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle] StrokeStyle.\n * @property {CanvasLineCap} [lineCap] LineCap.\n * @property {Array<number>} lineDash LineDash.\n * @property {number} [lineDashOffset] LineDashOffset.\n * @property {CanvasLineJoin} [lineJoin] LineJoin.\n * @property {number} [lineWidth] LineWidth.\n * @property {number} [miterLimit] MiterLimit.\n */\n\n/**\n * @typedef {Object} StrokeState\n * @property {CanvasLineCap} lineCap LineCap.\n * @property {Array<number>} lineDash LineDash.\n * @property {number} lineDashOffset LineDashOffset.\n * @property {CanvasLineJoin} lineJoin LineJoin.\n * @property {number} lineWidth LineWidth.\n * @property {number} miterLimit MiterLimit.\n * @property {import(\"../colorlike.js\").ColorLike} strokeStyle StrokeStyle.\n */\n\n/**\n * @typedef {Object} TextState\n * @property {string} font Font.\n * @property {CanvasTextAlign} [textAlign] TextAlign.\n * @property {import(\"../style/Text.js\").TextJustify} [justify] Justify.\n * @property {CanvasTextBaseline} textBaseline TextBaseline.\n * @property {import(\"../style/Text.js\").TextPlacement} [placement] Placement.\n * @property {number} [maxAngle] MaxAngle.\n * @property {boolean} [overflow] Overflow.\n * @property {import(\"../style/Fill.js\").default} [backgroundFill] BackgroundFill.\n * @property {import(\"../style/Stroke.js\").default} [backgroundStroke] BackgroundStroke.\n * @property {import(\"../size.js\").Size} [scale] Scale.\n * @property {Array<number>} [padding] Padding.\n */\n\n/**\n * @typedef {Object} SerializableInstructions\n * @property {Array<*>} instructions The rendering instructions.\n * @property {Array<*>} hitDetectionInstructions The rendering hit detection instructions.\n * @property {Array<number>} coordinates The array of all coordinates.\n * @property {!Object<string, TextState>} [textStates] The text states (decluttering).\n * @property {!Object<string, FillState>} [fillStates] The fill states (decluttering).\n * @property {!Object<string, StrokeState>} [strokeStates] The stroke states (decluttering).\n */\n\n/**\n * @typedef {Object<number, import(\"./canvas/Executor.js\").ReplayImageOrLabelArgs>} DeclutterImageWithText\n */\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultFont = '10px sans-serif';\n\n/**\n * @const\n * @type {import(\"../colorlike.js\").ColorLike}\n */\nexport const defaultFillStyle = '#000';\n\n/**\n * @const\n * @type {CanvasLineCap}\n */\nexport const defaultLineCap = 'round';\n\n/**\n * @const\n * @type {Array<number>}\n */\nexport const defaultLineDash = [];\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultLineDashOffset = 0;\n\n/**\n * @const\n * @type {CanvasLineJoin}\n */\nexport const defaultLineJoin = 'round';\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultMiterLimit = 10;\n\n/**\n * @const\n * @type {import(\"../colorlike.js\").ColorLike}\n */\nexport const defaultStrokeStyle = '#000';\n\n/**\n * @const\n * @type {CanvasTextAlign}\n */\nexport const defaultTextAlign = 'center';\n\n/**\n * @const\n * @type {CanvasTextBaseline}\n */\nexport const defaultTextBaseline = 'middle';\n\n/**\n * @const\n * @type {Array<number>}\n */\nexport const defaultPadding = [0, 0, 0, 0];\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultLineWidth = 1;\n\n/**\n * @type {BaseObject}\n */\nexport const checkedFonts = new BaseObject();\n\n/**\n * @type {CanvasRenderingContext2D}\n */\nlet measureContext = null;\n\n/**\n * @type {string}\n */\nlet measureFont;\n\n/**\n * @type {!Object<string, number>}\n */\nexport const textHeights = {};\n\n/**\n * Clears the label cache when a font becomes available.\n * @param {string} fontSpec CSS font spec.\n */\nexport const registerFont = (function () {\n  const retries = 100;\n  const size = '32px ';\n  const referenceFonts = ['monospace', 'serif'];\n  const len = referenceFonts.length;\n  const text = 'wmytzilWMYTZIL@#/&?$%10\\uF013';\n  let interval, referenceWidth;\n\n  /**\n   * @param {string} fontStyle Css font-style\n   * @param {string} fontWeight Css font-weight\n   * @param {*} fontFamily Css font-family\n   * @return {boolean} Font with style and weight is available\n   */\n  function isAvailable(fontStyle, fontWeight, fontFamily) {\n    let available = true;\n    for (let i = 0; i < len; ++i) {\n      const referenceFont = referenceFonts[i];\n      referenceWidth = measureTextWidth(\n        fontStyle + ' ' + fontWeight + ' ' + size + referenceFont,\n        text\n      );\n      if (fontFamily != referenceFont) {\n        const width = measureTextWidth(\n          fontStyle +\n            ' ' +\n            fontWeight +\n            ' ' +\n            size +\n            fontFamily +\n            ',' +\n            referenceFont,\n          text\n        );\n        // If width and referenceWidth are the same, then the fallback was used\n        // instead of the font we wanted, so the font is not available.\n        available = available && width != referenceWidth;\n      }\n    }\n    if (available) {\n      return true;\n    }\n    return false;\n  }\n\n  function check() {\n    let done = true;\n    const fonts = checkedFonts.getKeys();\n    for (let i = 0, ii = fonts.length; i < ii; ++i) {\n      const font = fonts[i];\n      if (checkedFonts.get(font) < retries) {\n        if (isAvailable.apply(this, font.split('\\n'))) {\n          clear(textHeights);\n          // Make sure that loaded fonts are picked up by Safari\n          measureContext = null;\n          measureFont = undefined;\n          checkedFonts.set(font, retries);\n        } else {\n          checkedFonts.set(font, checkedFonts.get(font) + 1, true);\n          done = false;\n        }\n      }\n    }\n    if (done) {\n      clearInterval(interval);\n      interval = undefined;\n    }\n  }\n\n  return function (fontSpec) {\n    const font = getFontParameters(fontSpec);\n    if (!font) {\n      return;\n    }\n    const families = font.families;\n    for (let i = 0, ii = families.length; i < ii; ++i) {\n      const family = families[i];\n      const key = font.style + '\\n' + font.weight + '\\n' + family;\n      if (checkedFonts.get(key) === undefined) {\n        checkedFonts.set(key, retries, true);\n        if (!isAvailable(font.style, font.weight, family)) {\n          checkedFonts.set(key, 0, true);\n          if (interval === undefined) {\n            interval = setInterval(check, 32);\n          }\n        }\n      }\n    }\n  };\n})();\n\n/**\n * @param {string} font Font to use for measuring.\n * @return {import(\"../size.js\").Size} Measurement.\n */\nexport const measureTextHeight = (function () {\n  /**\n   * @type {HTMLDivElement}\n   */\n  let measureElement;\n  return function (fontSpec) {\n    let height = textHeights[fontSpec];\n    if (height == undefined) {\n      if (WORKER_OFFSCREEN_CANVAS) {\n        const font = getFontParameters(fontSpec);\n        const metrics = measureText(fontSpec, 'Žg');\n        const lineHeight = isNaN(Number(font.lineHeight))\n          ? 1.2\n          : Number(font.lineHeight);\n        height =\n          lineHeight *\n          (metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent);\n      } else {\n        if (!measureElement) {\n          measureElement = document.createElement('div');\n          measureElement.innerHTML = 'M';\n          measureElement.style.minHeight = '0';\n          measureElement.style.maxHeight = 'none';\n          measureElement.style.height = 'auto';\n          measureElement.style.padding = '0';\n          measureElement.style.border = 'none';\n          measureElement.style.position = 'absolute';\n          measureElement.style.display = 'block';\n          measureElement.style.left = '-99999px';\n        }\n        measureElement.style.font = fontSpec;\n        document.body.appendChild(measureElement);\n        height = measureElement.offsetHeight;\n        document.body.removeChild(measureElement);\n      }\n      textHeights[fontSpec] = height;\n    }\n    return height;\n  };\n})();\n\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {TextMetrics} Text metrics.\n */\nfunction measureText(font, text) {\n  if (!measureContext) {\n    measureContext = createCanvasContext2D(1, 1);\n  }\n  if (font != measureFont) {\n    measureContext.font = font;\n    measureFont = measureContext.font;\n  }\n  return measureContext.measureText(text);\n}\n\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {number} Width.\n */\nexport function measureTextWidth(font, text) {\n  return measureText(font, text).width;\n}\n\n/**\n * Measure text width using a cache.\n * @param {string} font The font.\n * @param {string} text The text to measure.\n * @param {Object<string, number>} cache A lookup of cached widths by text.\n * @return {number} The text width.\n */\nexport function measureAndCacheTextWidth(font, text, cache) {\n  if (text in cache) {\n    return cache[text];\n  }\n  const width = text\n    .split('\\n')\n    .reduce((prev, curr) => Math.max(prev, measureTextWidth(font, curr)), 0);\n  cache[text] = width;\n  return width;\n}\n\n/**\n * @param {TextState} baseStyle Base style.\n * @param {Array<string>} chunks Text chunks to measure.\n * @return {{width: number, height: number, widths: Array<number>, heights: Array<number>, lineWidths: Array<number>}}} Text metrics.\n */\nexport function getTextDimensions(baseStyle, chunks) {\n  const widths = [];\n  const heights = [];\n  const lineWidths = [];\n  let width = 0;\n  let lineWidth = 0;\n  let height = 0;\n  let lineHeight = 0;\n  for (let i = 0, ii = chunks.length; i <= ii; i += 2) {\n    const text = chunks[i];\n    if (text === '\\n' || i === ii) {\n      width = Math.max(width, lineWidth);\n      lineWidths.push(lineWidth);\n      lineWidth = 0;\n      height += lineHeight;\n      continue;\n    }\n    const font = chunks[i + 1] || baseStyle.font;\n    const currentWidth = measureTextWidth(font, text);\n    widths.push(currentWidth);\n    lineWidth += currentWidth;\n    const currentHeight = measureTextHeight(font);\n    heights.push(currentHeight);\n    lineHeight = Math.max(lineHeight, currentHeight);\n  }\n  return {width, height, widths, heights, lineWidths};\n}\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} offsetX X offset.\n * @param {number} offsetY Y offset.\n */\nexport function rotateAtOffset(context, rotation, offsetX, offsetY) {\n  if (rotation !== 0) {\n    context.translate(offsetX, offsetY);\n    context.rotate(rotation);\n    context.translate(-offsetX, -offsetY);\n  }\n}\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {import(\"../transform.js\").Transform|null} transform Transform.\n * @param {number} opacity Opacity.\n * @param {Label|HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} labelOrImage Label.\n * @param {number} originX Origin X.\n * @param {number} originY Origin Y.\n * @param {number} w Width.\n * @param {number} h Height.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {import(\"../size.js\").Size} scale Scale.\n */\nexport function drawImageOrLabel(\n  context,\n  transform,\n  opacity,\n  labelOrImage,\n  originX,\n  originY,\n  w,\n  h,\n  x,\n  y,\n  scale\n) {\n  context.save();\n\n  if (opacity !== 1) {\n    context.globalAlpha *= opacity;\n  }\n  if (transform) {\n    context.setTransform.apply(context, transform);\n  }\n\n  if (/** @type {*} */ (labelOrImage).contextInstructions) {\n    // label\n    context.translate(x, y);\n    context.scale(scale[0], scale[1]);\n    executeLabelInstructions(/** @type {Label} */ (labelOrImage), context);\n  } else if (scale[0] < 0 || scale[1] < 0) {\n    // flipped image\n    context.translate(x, y);\n    context.scale(scale[0], scale[1]);\n    context.drawImage(\n      /** @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} */ (\n        labelOrImage\n      ),\n      originX,\n      originY,\n      w,\n      h,\n      0,\n      0,\n      w,\n      h\n    );\n  } else {\n    // if image not flipped translate and scale can be avoided\n    context.drawImage(\n      /** @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} */ (\n        labelOrImage\n      ),\n      originX,\n      originY,\n      w,\n      h,\n      x,\n      y,\n      w * scale[0],\n      h * scale[1]\n    );\n  }\n\n  context.restore();\n}\n\n/**\n * @param {Label} label Label.\n * @param {CanvasRenderingContext2D} context Context.\n */\nfunction executeLabelInstructions(label, context) {\n  const contextInstructions = label.contextInstructions;\n  for (let i = 0, ii = contextInstructions.length; i < ii; i += 2) {\n    if (Array.isArray(contextInstructions[i + 1])) {\n      context[contextInstructions[i]].apply(\n        context,\n        contextInstructions[i + 1]\n      );\n    } else {\n      context[contextInstructions[i]] = contextInstructions[i + 1];\n    }\n  }\n}\n","/**\n * @module ol/renderer/Composite\n */\nimport MapRenderer from './Map.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport RenderEvent from '../render/Event.js';\nimport RenderEventType from '../render/EventType.js';\nimport {CLASS_UNSELECTABLE} from '../css.js';\nimport {checkedFonts} from '../render/canvas.js';\nimport {inView} from '../layer/Layer.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport {replaceChildren} from '../dom.js';\n\n/**\n * @classdesc\n * Canvas map renderer.\n * @api\n */\nclass CompositeMapRenderer extends MapRenderer {\n  /**\n   * @param {import(\"../Map.js\").default} map Map.\n   */\n  constructor(map) {\n    super(map);\n\n    /**\n     * @type {import(\"../events.js\").EventsKey}\n     */\n    this.fontChangeListenerKey_ = listen(\n      checkedFonts,\n      ObjectEventType.PROPERTYCHANGE,\n      map.redrawText.bind(map)\n    );\n\n    /**\n     * @private\n     * @type {HTMLDivElement}\n     */\n    this.element_ = document.createElement('div');\n    const style = this.element_.style;\n    style.position = 'absolute';\n    style.width = '100%';\n    style.height = '100%';\n    style.zIndex = '0';\n\n    this.element_.className = CLASS_UNSELECTABLE + ' ol-layers';\n\n    const container = map.getViewport();\n    container.insertBefore(this.element_, container.firstChild || null);\n\n    /**\n     * @private\n     * @type {Array<HTMLElement>}\n     */\n    this.children_ = [];\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = true;\n  }\n\n  /**\n   * @param {import(\"../render/EventType.js\").default} type Event type.\n   * @param {import(\"../Map.js\").FrameState} frameState Frame state.\n   */\n  dispatchRenderEvent(type, frameState) {\n    const map = this.getMap();\n    if (map.hasListener(type)) {\n      const event = new RenderEvent(type, undefined, frameState);\n      map.dispatchEvent(event);\n    }\n  }\n\n  disposeInternal() {\n    unlistenByKey(this.fontChangeListenerKey_);\n    this.element_.parentNode.removeChild(this.element_);\n    super.disposeInternal();\n  }\n\n  /**\n   * Render.\n   * @param {?import(\"../Map.js\").FrameState} frameState Frame state.\n   */\n  renderFrame(frameState) {\n    if (!frameState) {\n      if (this.renderedVisible_) {\n        this.element_.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n\n    this.calculateMatrices2D(frameState);\n    this.dispatchRenderEvent(RenderEventType.PRECOMPOSE, frameState);\n\n    const layerStatesArray = frameState.layerStatesArray.sort(function (a, b) {\n      return a.zIndex - b.zIndex;\n    });\n    const viewState = frameState.viewState;\n\n    this.children_.length = 0;\n    /**\n     * @type {Array<import(\"../layer/BaseVector.js\").default>}\n     */\n    const declutterLayers = [];\n    let previousElement = null;\n    for (let i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      const layerState = layerStatesArray[i];\n      frameState.layerIndex = i;\n\n      const layer = layerState.layer;\n      const sourceState = layer.getSourceState();\n      if (\n        !inView(layerState, viewState) ||\n        (sourceState != 'ready' && sourceState != 'undefined')\n      ) {\n        layer.unrender();\n        continue;\n      }\n\n      const element = layer.render(frameState, previousElement);\n      if (!element) {\n        continue;\n      }\n      if (element !== previousElement) {\n        this.children_.push(element);\n        previousElement = element;\n      }\n      if ('getDeclutter' in layer) {\n        declutterLayers.push(\n          /** @type {import(\"../layer/BaseVector.js\").default} */ (layer)\n        );\n      }\n    }\n    for (let i = declutterLayers.length - 1; i >= 0; --i) {\n      declutterLayers[i].renderDeclutter(frameState);\n    }\n\n    replaceChildren(this.element_, this.children_);\n\n    this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE, frameState);\n\n    if (!this.renderedVisible_) {\n      this.element_.style.display = '';\n      this.renderedVisible_ = true;\n    }\n\n    this.scheduleExpireIconCache(frameState);\n  }\n}\n\nexport default CompositeMapRenderer;\n","/**\n * @module ol/MapEvent\n */\nimport Event from './events/Event.js';\n\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link module:ol/Map~Map} for which events trigger a map event.\n */\nclass MapEvent extends Event {\n  /**\n   * @param {string} type Event type.\n   * @param {import(\"./Map.js\").default} map Map.\n   * @param {?import(\"./Map.js\").FrameState} [frameState] Frame state.\n   */\n  constructor(type, map, frameState) {\n    super(type);\n\n    /**\n     * The map where the event occurred.\n     * @type {import(\"./Map.js\").default}\n     * @api\n     */\n    this.map = map;\n\n    /**\n     * The frame state at the time of the event.\n     * @type {?import(\"./Map.js\").FrameState}\n     * @api\n     */\n    this.frameState = frameState !== undefined ? frameState : null;\n  }\n}\n\nexport default MapEvent;\n","/**\n * @module ol/MapBrowserEvent\n */\nimport MapEvent from './MapEvent.js';\n\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link module:ol/Map~Map} for which events trigger a map browser event.\n * @template {UIEvent} EVENT\n */\nclass MapBrowserEvent extends MapEvent {\n  /**\n   * @param {string} type Event type.\n   * @param {import(\"./Map.js\").default} map Map.\n   * @param {EVENT} originalEvent Original event.\n   * @param {boolean} [dragging] Is the map currently being dragged?\n   * @param {import(\"./Map.js\").FrameState} [frameState] Frame state.\n   * @param {Array<PointerEvent>} [activePointers] Active pointers.\n   */\n  constructor(type, map, originalEvent, dragging, frameState, activePointers) {\n    super(type, map, frameState);\n\n    /**\n     * The original browser event.\n     * @const\n     * @type {EVENT}\n     * @api\n     */\n    this.originalEvent = originalEvent;\n\n    /**\n     * The map pixel relative to the viewport corresponding to the original browser event.\n     * @type {?import(\"./pixel.js\").Pixel}\n     */\n    this.pixel_ = null;\n\n    /**\n     * The coordinate in the user projection corresponding to the original browser event.\n     * @type {?import(\"./coordinate.js\").Coordinate}\n     */\n    this.coordinate_ = null;\n\n    /**\n     * Indicates if the map is currently being dragged. Only set for\n     * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n     *\n     * @type {boolean}\n     * @api\n     */\n    this.dragging = dragging !== undefined ? dragging : false;\n\n    /**\n     * @type {Array<PointerEvent>|undefined}\n     */\n    this.activePointers = activePointers;\n  }\n\n  /**\n   * The map pixel relative to the viewport corresponding to the original event.\n   * @type {import(\"./pixel.js\").Pixel}\n   * @api\n   */\n  get pixel() {\n    if (!this.pixel_) {\n      this.pixel_ = this.map.getEventPixel(this.originalEvent);\n    }\n    return this.pixel_;\n  }\n  set pixel(pixel) {\n    this.pixel_ = pixel;\n  }\n\n  /**\n   * The coordinate corresponding to the original browser event.  This will be in the user\n   * projection if one is set.  Otherwise it will be in the view projection.\n   * @type {import(\"./coordinate.js\").Coordinate}\n   * @api\n   */\n  get coordinate() {\n    if (!this.coordinate_) {\n      this.coordinate_ = this.map.getCoordinateFromPixel(this.pixel);\n    }\n    return this.coordinate_;\n  }\n  set coordinate(coordinate) {\n    this.coordinate_ = coordinate;\n  }\n\n  /**\n   * Prevents the default browser action.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault.\n   * @api\n   */\n  preventDefault() {\n    super.preventDefault();\n    if ('preventDefault' in this.originalEvent) {\n      /** @type {UIEvent} */ (this.originalEvent).preventDefault();\n    }\n  }\n\n  /**\n   * Prevents further propagation of the current event.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation.\n   * @api\n   */\n  stopPropagation() {\n    super.stopPropagation();\n    if ('stopPropagation' in this.originalEvent) {\n      /** @type {UIEvent} */ (this.originalEvent).stopPropagation();\n    }\n  }\n}\n\nexport default MapBrowserEvent;\n","/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n  /**\n   * A true single click with no dragging and no double click. Note that this\n   * event is delayed by 250 ms to ensure that it is not a double click.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n   * @api\n   */\n  SINGLECLICK: 'singleclick',\n\n  /**\n   * A click with no dragging. A double click will fire two of this.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n   * @api\n   */\n  CLICK: EventType.CLICK,\n\n  /**\n   * A true double click, with no dragging.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n   * @api\n   */\n  DBLCLICK: EventType.DBLCLICK,\n\n  /**\n   * Triggered when a pointer is dragged.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n   * @api\n   */\n  POINTERDRAG: 'pointerdrag',\n\n  /**\n   * Triggered when a pointer is moved. Note that on touch devices this is\n   * triggered when the map is panned, so is not the same as mousemove.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n   * @api\n   */\n  POINTERMOVE: 'pointermove',\n\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel',\n};\n\n/***\n * @typedef {'singleclick'|'click'|'dblclick'|'pointerdrag'|'pointermove'} Types\n */\n","/**\n * @module ol/MapBrowserEventHandler\n */\n\nimport EventType from './events/EventType.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport PointerEventType from './pointer/EventType.js';\nimport Target from './events/Target.js';\nimport {PASSIVE_EVENT_LISTENERS} from './has.js';\nimport {VOID} from './functions.js';\nimport {listen, unlistenByKey} from './events.js';\n\nclass MapBrowserEventHandler extends Target {\n  /**\n   * @param {import(\"./Map.js\").default} map The map with the viewport to listen to events on.\n   * @param {number} [moveTolerance] The minimal distance the pointer must travel to trigger a move.\n   */\n  constructor(map, moveTolerance) {\n    super(map);\n\n    /**\n     * This is the element that we will listen to the real events on.\n     * @type {import(\"./Map.js\").default}\n     * @private\n     */\n    this.map_ = map;\n\n    /**\n     * @type {any}\n     * @private\n     */\n    this.clickTimeoutId_;\n\n    /**\n     * Emulate dblclick and singleclick. Will be true when only one pointer is active.\n     * @type {boolean}\n     */\n    this.emulateClicks_ = false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.dragging_ = false;\n\n    /**\n     * @type {!Array<import(\"./events.js\").EventsKey>}\n     * @private\n     */\n    this.dragListenerKeys_ = [];\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.moveTolerance_ = moveTolerance === undefined ? 1 : moveTolerance;\n\n    /**\n     * The most recent \"down\" type event (or null if none have occurred).\n     * Set on pointerdown.\n     * @type {PointerEvent|null}\n     * @private\n     */\n    this.down_ = null;\n\n    const element = this.map_.getViewport();\n\n    /**\n     * @type {Array<PointerEvent>}\n     * @private\n     */\n    this.activePointers_ = [];\n\n    /**\n     * @type {!Object<number, Event>}\n     * @private\n     */\n    this.trackedTouches_ = {};\n\n    this.element_ = element;\n\n    /**\n     * @type {?import(\"./events.js\").EventsKey}\n     * @private\n     */\n    this.pointerdownListenerKey_ = listen(\n      element,\n      PointerEventType.POINTERDOWN,\n      this.handlePointerDown_,\n      this\n    );\n\n    /**\n     * @type {PointerEvent}\n     * @private\n     */\n    this.originalPointerMoveEvent_;\n\n    /**\n     * @type {?import(\"./events.js\").EventsKey}\n     * @private\n     */\n    this.relayedListenerKey_ = listen(\n      element,\n      PointerEventType.POINTERMOVE,\n      this.relayMoveEvent_,\n      this\n    );\n\n    /**\n     * @private\n     */\n    this.boundHandleTouchMove_ = this.handleTouchMove_.bind(this);\n\n    this.element_.addEventListener(\n      EventType.TOUCHMOVE,\n      this.boundHandleTouchMove_,\n      PASSIVE_EVENT_LISTENERS ? {passive: false} : false\n    );\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  emulateClick_(pointerEvent) {\n    let newEvent = new MapBrowserEvent(\n      MapBrowserEventType.CLICK,\n      this.map_,\n      pointerEvent\n    );\n    this.dispatchEvent(newEvent);\n    if (this.clickTimeoutId_ !== undefined) {\n      // double-click\n      clearTimeout(this.clickTimeoutId_);\n      this.clickTimeoutId_ = undefined;\n      newEvent = new MapBrowserEvent(\n        MapBrowserEventType.DBLCLICK,\n        this.map_,\n        pointerEvent\n      );\n      this.dispatchEvent(newEvent);\n    } else {\n      // click\n      this.clickTimeoutId_ = setTimeout(\n        /** @this {MapBrowserEventHandler} */\n        function () {\n          this.clickTimeoutId_ = undefined;\n          const newEvent = new MapBrowserEvent(\n            MapBrowserEventType.SINGLECLICK,\n            this.map_,\n            pointerEvent\n          );\n          this.dispatchEvent(newEvent);\n        }.bind(this),\n        250\n      );\n    }\n  }\n\n  /**\n   * Keeps track on how many pointers are currently active.\n   *\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  updateActivePointers_(pointerEvent) {\n    const event = pointerEvent;\n    const id = event.pointerId;\n\n    if (\n      event.type == MapBrowserEventType.POINTERUP ||\n      event.type == MapBrowserEventType.POINTERCANCEL\n    ) {\n      delete this.trackedTouches_[id];\n      for (const pointerId in this.trackedTouches_) {\n        if (this.trackedTouches_[pointerId].target !== event.target) {\n          // Some platforms assign a new pointerId when the target changes.\n          // If this happens, delete one tracked pointer. If there is more\n          // than one tracked pointer for the old target, it will be cleared\n          // by subsequent POINTERUP events from other pointers.\n          delete this.trackedTouches_[pointerId];\n          break;\n        }\n      }\n    } else if (\n      event.type == MapBrowserEventType.POINTERDOWN ||\n      event.type == MapBrowserEventType.POINTERMOVE\n    ) {\n      this.trackedTouches_[id] = event;\n    }\n    this.activePointers_ = Object.values(this.trackedTouches_);\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerUp_(pointerEvent) {\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new MapBrowserEvent(\n      MapBrowserEventType.POINTERUP,\n      this.map_,\n      pointerEvent,\n      undefined,\n      undefined,\n      this.activePointers_\n    );\n    this.dispatchEvent(newEvent);\n\n    // We emulate click events on left mouse button click, touch contact, and pen\n    // contact. isMouseActionButton returns true in these cases (evt.button is set\n    // to 0).\n    // See http://www.w3.org/TR/pointerevents/#button-states\n    // We only fire click, singleclick, and doubleclick if nobody has called\n    // event.preventDefault().\n    if (\n      this.emulateClicks_ &&\n      !newEvent.defaultPrevented &&\n      !this.dragging_ &&\n      this.isMouseActionButton_(pointerEvent)\n    ) {\n      this.emulateClick_(this.down_);\n    }\n\n    if (this.activePointers_.length === 0) {\n      this.dragListenerKeys_.forEach(unlistenByKey);\n      this.dragListenerKeys_.length = 0;\n      this.dragging_ = false;\n      this.down_ = null;\n    }\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @return {boolean} If the left mouse button was pressed.\n   * @private\n   */\n  isMouseActionButton_(pointerEvent) {\n    return pointerEvent.button === 0;\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerDown_(pointerEvent) {\n    this.emulateClicks_ = this.activePointers_.length === 0;\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new MapBrowserEvent(\n      MapBrowserEventType.POINTERDOWN,\n      this.map_,\n      pointerEvent,\n      undefined,\n      undefined,\n      this.activePointers_\n    );\n    this.dispatchEvent(newEvent);\n\n    // Store a copy of the down event\n    this.down_ = /** @type {PointerEvent} */ ({});\n    for (const property in pointerEvent) {\n      const value = pointerEvent[property];\n      this.down_[property] = typeof value === 'function' ? VOID : value;\n    }\n\n    if (this.dragListenerKeys_.length === 0) {\n      const doc = this.map_.getOwnerDocument();\n      this.dragListenerKeys_.push(\n        listen(\n          doc,\n          MapBrowserEventType.POINTERMOVE,\n          this.handlePointerMove_,\n          this\n        ),\n        listen(doc, MapBrowserEventType.POINTERUP, this.handlePointerUp_, this),\n        /* Note that the listener for `pointercancel is set up on\n         * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n         * the `pointerup` and `pointermove` listeners.\n         *\n         * The reason for this is the following: `TouchSource.vacuumTouches_()`\n         * issues `pointercancel` events, when there was no `touchend` for a\n         * `touchstart`. Now, let's say a first `touchstart` is registered on\n         * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n         * But `documentPointerEventHandler_` doesn't know about the first\n         * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n         * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n         * only registered there.\n         */\n        listen(\n          this.element_,\n          MapBrowserEventType.POINTERCANCEL,\n          this.handlePointerUp_,\n          this\n        )\n      );\n      if (this.element_.getRootNode && this.element_.getRootNode() !== doc) {\n        this.dragListenerKeys_.push(\n          listen(\n            this.element_.getRootNode(),\n            MapBrowserEventType.POINTERUP,\n            this.handlePointerUp_,\n            this\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerMove_(pointerEvent) {\n    // Between pointerdown and pointerup, pointermove events are triggered.\n    // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n    // moved a significant distance.\n    if (this.isMoving_(pointerEvent)) {\n      this.updateActivePointers_(pointerEvent);\n      this.dragging_ = true;\n      const newEvent = new MapBrowserEvent(\n        MapBrowserEventType.POINTERDRAG,\n        this.map_,\n        pointerEvent,\n        this.dragging_,\n        undefined,\n        this.activePointers_\n      );\n      this.dispatchEvent(newEvent);\n    }\n  }\n\n  /**\n   * Wrap and relay a pointermove event.\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  relayMoveEvent_(pointerEvent) {\n    this.originalPointerMoveEvent_ = pointerEvent;\n    const dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n    this.dispatchEvent(\n      new MapBrowserEvent(\n        MapBrowserEventType.POINTERMOVE,\n        this.map_,\n        pointerEvent,\n        dragging\n      )\n    );\n  }\n\n  /**\n   * Flexible handling of a `touch-action: none` css equivalent: because calling\n   * `preventDefault()` on a `pointermove` event does not stop native page scrolling\n   * and zooming, we also listen for `touchmove` and call `preventDefault()` on it\n   * when an interaction (currently `DragPan` handles the event.\n   * @param {TouchEvent} event Event.\n   * @private\n   */\n  handleTouchMove_(event) {\n    // Due to https://github.com/mpizenberg/elm-pep/issues/2, `this.originalPointerMoveEvent_`\n    // may not be initialized yet when we get here on a platform without native pointer events.\n    const originalEvent = this.originalPointerMoveEvent_;\n    if (\n      (!originalEvent || originalEvent.defaultPrevented) &&\n      (typeof event.cancelable !== 'boolean' || event.cancelable === true)\n    ) {\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * @param {PointerEvent} pointerEvent Pointer\n   * event.\n   * @return {boolean} Is moving.\n   * @private\n   */\n  isMoving_(pointerEvent) {\n    return (\n      this.dragging_ ||\n      Math.abs(pointerEvent.clientX - this.down_.clientX) >\n        this.moveTolerance_ ||\n      Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_\n    );\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    if (this.relayedListenerKey_) {\n      unlistenByKey(this.relayedListenerKey_);\n      this.relayedListenerKey_ = null;\n    }\n    this.element_.removeEventListener(\n      EventType.TOUCHMOVE,\n      this.boundHandleTouchMove_\n    );\n\n    if (this.pointerdownListenerKey_) {\n      unlistenByKey(this.pointerdownListenerKey_);\n      this.pointerdownListenerKey_ = null;\n    }\n\n    this.dragListenerKeys_.forEach(unlistenByKey);\n    this.dragListenerKeys_.length = 0;\n\n    this.element_ = null;\n    super.disposeInternal();\n  }\n}\n\nexport default MapBrowserEventHandler;\n","/**\n * @module ol/pointer/EventType\n */\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n  POINTERMOVE: 'pointermove',\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel',\n};\n","/**\n * @module ol/MapProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  LAYERGROUP: 'layergroup',\n  SIZE: 'size',\n  TARGET: 'target',\n  VIEW: 'view',\n};\n","/**\n * @module ol/TileQueue\n */\nimport EventType from './events/EventType.js';\nimport PriorityQueue, {DROP} from './structs/PriorityQueue.js';\nimport TileState from './TileState.js';\n\n/**\n * @typedef {function(import(\"./Tile.js\").default, string, import(\"./coordinate.js\").Coordinate, number): number} PriorityFunction\n */\n\nclass TileQueue extends PriorityQueue {\n  /**\n   * @param {PriorityFunction} tilePriorityFunction Tile priority function.\n   * @param {function(): ?} tileChangeCallback Function called on each tile change event.\n   */\n  constructor(tilePriorityFunction, tileChangeCallback) {\n    super(\n      /**\n       * @param {Array} element Element.\n       * @return {number} Priority.\n       */\n      function (element) {\n        return tilePriorityFunction.apply(null, element);\n      },\n      /**\n       * @param {Array} element Element.\n       * @return {string} Key.\n       */\n      function (element) {\n        return /** @type {import(\"./Tile.js\").default} */ (element[0]).getKey();\n      }\n    );\n\n    /** @private */\n    this.boundHandleTileChange_ = this.handleTileChange.bind(this);\n\n    /**\n     * @private\n     * @type {function(): ?}\n     */\n    this.tileChangeCallback_ = tileChangeCallback;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tilesLoading_ = 0;\n\n    /**\n     * @private\n     * @type {!Object<string,boolean>}\n     */\n    this.tilesLoadingKeys_ = {};\n  }\n\n  /**\n   * @param {Array} element Element.\n   * @return {boolean} The element was added to the queue.\n   */\n  enqueue(element) {\n    const added = super.enqueue(element);\n    if (added) {\n      const tile = element[0];\n      tile.addEventListener(EventType.CHANGE, this.boundHandleTileChange_);\n    }\n    return added;\n  }\n\n  /**\n   * @return {number} Number of tiles loading.\n   */\n  getTilesLoading() {\n    return this.tilesLoading_;\n  }\n\n  /**\n   * @param {import(\"./events/Event.js\").default} event Event.\n   * @protected\n   */\n  handleTileChange(event) {\n    const tile = /** @type {import(\"./Tile.js\").default} */ (event.target);\n    const state = tile.getState();\n    if (\n      state === TileState.LOADED ||\n      state === TileState.ERROR ||\n      state === TileState.EMPTY\n    ) {\n      if (state !== TileState.ERROR) {\n        tile.removeEventListener(EventType.CHANGE, this.boundHandleTileChange_);\n      }\n      const tileKey = tile.getKey();\n      if (tileKey in this.tilesLoadingKeys_) {\n        delete this.tilesLoadingKeys_[tileKey];\n        --this.tilesLoading_;\n      }\n      this.tileChangeCallback_();\n    }\n  }\n\n  /**\n   * @param {number} maxTotalLoading Maximum number tiles to load simultaneously.\n   * @param {number} maxNewLoads Maximum number of new tiles to load.\n   */\n  loadMoreTiles(maxTotalLoading, maxNewLoads) {\n    let newLoads = 0;\n    let state, tile, tileKey;\n    while (\n      this.tilesLoading_ < maxTotalLoading &&\n      newLoads < maxNewLoads &&\n      this.getCount() > 0\n    ) {\n      tile = /** @type {import(\"./Tile.js\").default} */ (this.dequeue()[0]);\n      tileKey = tile.getKey();\n      state = tile.getState();\n      if (state === TileState.IDLE && !(tileKey in this.tilesLoadingKeys_)) {\n        this.tilesLoadingKeys_[tileKey] = true;\n        ++this.tilesLoading_;\n        ++newLoads;\n        tile.load();\n      }\n    }\n  }\n}\n\nexport default TileQueue;\n\n/**\n * @param {import('./Map.js').FrameState} frameState Frame state.\n * @param {import(\"./Tile.js\").default} tile Tile.\n * @param {string} tileSourceKey Tile source key.\n * @param {import(\"./coordinate.js\").Coordinate} tileCenter Tile center.\n * @param {number} tileResolution Tile resolution.\n * @return {number} Tile priority.\n */\nexport function getTilePriority(\n  frameState,\n  tile,\n  tileSourceKey,\n  tileCenter,\n  tileResolution\n) {\n  // Filter out tiles at higher zoom levels than the current zoom level, or that\n  // are outside the visible extent.\n  if (!frameState || !(tileSourceKey in frameState.wantedTiles)) {\n    return DROP;\n  }\n  if (!frameState.wantedTiles[tileSourceKey][tile.getKey()]) {\n    return DROP;\n  }\n  // Prioritize the highest zoom level tiles closest to the focus.\n  // Tiles at higher zoom levels are prioritized using Math.log(tileResolution).\n  // Within a zoom level, tiles are prioritized by the distance in pixels between\n  // the center of the tile and the center of the viewport.  The factor of 65536\n  // means that the prioritization should behave as desired for tiles up to\n  // 65536 * Math.log(2) = 45426 pixels from the focus.\n  const center = frameState.viewState.center;\n  const deltaX = tileCenter[0] - center[0];\n  const deltaY = tileCenter[1] - center[1];\n  return (\n    65536 * Math.log(tileResolution) +\n    Math.sqrt(deltaX * deltaX + deltaY * deltaY) / tileResolution\n  );\n}\n","/**\n * @module ol/structs/PriorityQueue\n */\nimport {assert} from '../asserts.js';\nimport {clear} from '../obj.js';\n\n/**\n * @type {number}\n */\nexport const DROP = Infinity;\n\n/**\n * @classdesc\n * Priority queue.\n *\n * The implementation is inspired from the Closure Library's Heap class and\n * Python's heapq module.\n *\n * See https://github.com/google/closure-library/blob/master/closure/goog/structs/heap.js\n * and https://hg.python.org/cpython/file/2.7/Lib/heapq.py.\n *\n * @template T\n */\nclass PriorityQueue {\n  /**\n   * @param {function(T): number} priorityFunction Priority function.\n   * @param {function(T): string} keyFunction Key function.\n   */\n  constructor(priorityFunction, keyFunction) {\n    /**\n     * @type {function(T): number}\n     * @private\n     */\n    this.priorityFunction_ = priorityFunction;\n\n    /**\n     * @type {function(T): string}\n     * @private\n     */\n    this.keyFunction_ = keyFunction;\n\n    /**\n     * @type {Array<T>}\n     * @private\n     */\n    this.elements_ = [];\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.priorities_ = [];\n\n    /**\n     * @type {!Object<string, boolean>}\n     * @private\n     */\n    this.queuedElements_ = {};\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  clear() {\n    this.elements_.length = 0;\n    this.priorities_.length = 0;\n    clear(this.queuedElements_);\n  }\n\n  /**\n   * Remove and return the highest-priority element. O(log N).\n   * @return {T} Element.\n   */\n  dequeue() {\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    const element = elements[0];\n    if (elements.length == 1) {\n      elements.length = 0;\n      priorities.length = 0;\n    } else {\n      elements[0] = elements.pop();\n      priorities[0] = priorities.pop();\n      this.siftUp_(0);\n    }\n    const elementKey = this.keyFunction_(element);\n    delete this.queuedElements_[elementKey];\n    return element;\n  }\n\n  /**\n   * Enqueue an element. O(log N).\n   * @param {T} element Element.\n   * @return {boolean} The element was added to the queue.\n   */\n  enqueue(element) {\n    assert(!(this.keyFunction_(element) in this.queuedElements_), 31); // Tried to enqueue an `element` that was already added to the queue\n    const priority = this.priorityFunction_(element);\n    if (priority != DROP) {\n      this.elements_.push(element);\n      this.priorities_.push(priority);\n      this.queuedElements_[this.keyFunction_(element)] = true;\n      this.siftDown_(0, this.elements_.length - 1);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @return {number} Count.\n   */\n  getCount() {\n    return this.elements_.length;\n  }\n\n  /**\n   * Gets the index of the left child of the node at the given index.\n   * @param {number} index The index of the node to get the left child for.\n   * @return {number} The index of the left child.\n   * @private\n   */\n  getLeftChildIndex_(index) {\n    return index * 2 + 1;\n  }\n\n  /**\n   * Gets the index of the right child of the node at the given index.\n   * @param {number} index The index of the node to get the right child for.\n   * @return {number} The index of the right child.\n   * @private\n   */\n  getRightChildIndex_(index) {\n    return index * 2 + 2;\n  }\n\n  /**\n   * Gets the index of the parent of the node at the given index.\n   * @param {number} index The index of the node to get the parent for.\n   * @return {number} The index of the parent.\n   * @private\n   */\n  getParentIndex_(index) {\n    return (index - 1) >> 1;\n  }\n\n  /**\n   * Make this a heap. O(N).\n   * @private\n   */\n  heapify_() {\n    let i;\n    for (i = (this.elements_.length >> 1) - 1; i >= 0; i--) {\n      this.siftUp_(i);\n    }\n  }\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return this.elements_.length === 0;\n  }\n\n  /**\n   * @param {string} key Key.\n   * @return {boolean} Is key queued.\n   */\n  isKeyQueued(key) {\n    return key in this.queuedElements_;\n  }\n\n  /**\n   * @param {T} element Element.\n   * @return {boolean} Is queued.\n   */\n  isQueued(element) {\n    return this.isKeyQueued(this.keyFunction_(element));\n  }\n\n  /**\n   * @param {number} index The index of the node to move down.\n   * @private\n   */\n  siftUp_(index) {\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    const count = elements.length;\n    const element = elements[index];\n    const priority = priorities[index];\n    const startIndex = index;\n\n    while (index < count >> 1) {\n      const lIndex = this.getLeftChildIndex_(index);\n      const rIndex = this.getRightChildIndex_(index);\n\n      const smallerChildIndex =\n        rIndex < count && priorities[rIndex] < priorities[lIndex]\n          ? rIndex\n          : lIndex;\n\n      elements[index] = elements[smallerChildIndex];\n      priorities[index] = priorities[smallerChildIndex];\n      index = smallerChildIndex;\n    }\n\n    elements[index] = element;\n    priorities[index] = priority;\n    this.siftDown_(startIndex, index);\n  }\n\n  /**\n   * @param {number} startIndex The index of the root.\n   * @param {number} index The index of the node to move up.\n   * @private\n   */\n  siftDown_(startIndex, index) {\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    const element = elements[index];\n    const priority = priorities[index];\n\n    while (index > startIndex) {\n      const parentIndex = this.getParentIndex_(index);\n      if (priorities[parentIndex] > priority) {\n        elements[index] = elements[parentIndex];\n        priorities[index] = priorities[parentIndex];\n        index = parentIndex;\n      } else {\n        break;\n      }\n    }\n    elements[index] = element;\n    priorities[index] = priority;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  reprioritize() {\n    const priorityFunction = this.priorityFunction_;\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    let index = 0;\n    const n = elements.length;\n    let element, i, priority;\n    for (i = 0; i < n; ++i) {\n      element = elements[i];\n      priority = priorityFunction(element);\n      if (priority == DROP) {\n        delete this.queuedElements_[this.keyFunction_(element)];\n      } else {\n        priorities[index] = priority;\n        elements[index++] = element;\n      }\n    }\n    elements.length = index;\n    priorities.length = index;\n    this.heapify_();\n  }\n}\n\nexport default PriorityQueue;\n","/**\n * @module ol/TileState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  /**\n   * Indicates that tile loading failed\n   * @type {number}\n   */\n  ERROR: 3,\n  EMPTY: 4,\n};\n","/**\n * @module ol/View\n */\nimport BaseObject from './Object.js';\nimport ViewHint from './ViewHint.js';\nimport ViewProperty from './ViewProperty.js';\nimport {DEFAULT_TILE_SIZE} from './tilegrid/common.js';\nimport {\n  METERS_PER_UNIT,\n  createProjection,\n  disableCoordinateWarning,\n  fromUserCoordinate,\n  fromUserExtent,\n  getUserProjection,\n  toUserCoordinate,\n  toUserExtent,\n} from './proj.js';\nimport {VOID} from './functions.js';\nimport {\n  add as addCoordinate,\n  equals as coordinatesEqual,\n  equals,\n  rotate as rotateCoordinate,\n} from './coordinate.js';\nimport {assert} from './asserts.js';\nimport {none as centerNone, createExtent} from './centerconstraint.js';\nimport {clamp, modulo} from './math.js';\nimport {\n  createMinMaxResolution,\n  createSnapToPower,\n  createSnapToResolutions,\n} from './resolutionconstraint.js';\nimport {\n  createSnapToN,\n  createSnapToZero,\n  disable,\n  none as rotationNone,\n} from './rotationconstraint.js';\nimport {easeOut, inAndOut} from './easing.js';\nimport {\n  getCenter,\n  getForViewAndSize,\n  getHeight,\n  getWidth,\n  isEmpty,\n} from './extent.js';\nimport {linearFindNearest} from './array.js';\nimport {fromExtent as polygonFromExtent} from './geom/Polygon.js';\n\n/**\n * An animation configuration\n *\n * @typedef {Object} Animation\n * @property {import(\"./coordinate.js\").Coordinate} [sourceCenter] Source center.\n * @property {import(\"./coordinate.js\").Coordinate} [targetCenter] Target center.\n * @property {number} [sourceResolution] Source resolution.\n * @property {number} [targetResolution] Target resolution.\n * @property {number} [sourceRotation] Source rotation.\n * @property {number} [targetRotation] Target rotation.\n * @property {import(\"./coordinate.js\").Coordinate} [anchor] Anchor.\n * @property {number} start Start.\n * @property {number} duration Duration.\n * @property {boolean} complete Complete.\n * @property {function(number):number} easing Easing.\n * @property {function(boolean):void} callback Callback.\n */\n\n/**\n * @typedef {Object} Constraints\n * @property {import(\"./centerconstraint.js\").Type} center Center.\n * @property {import(\"./resolutionconstraint.js\").Type} resolution Resolution.\n * @property {import(\"./rotationconstraint.js\").Type} rotation Rotation.\n */\n\n/**\n * @typedef {Object} FitOptions\n * @property {import(\"./size.js\").Size} [size] The size in pixels of the box to fit\n * the extent into. Default is the current size of the first map in the DOM that\n * uses this view, or `[100, 100]` if no such map is found.\n * @property {!Array<number>} [padding=[0, 0, 0, 0]] Padding (in pixels) to be\n * cleared inside the view. Values in the array are top, right, bottom and left\n * padding.\n * @property {boolean} [nearest=false] If the view `constrainResolution` option is `true`,\n * get the nearest extent instead of the closest that actually fits the view.\n * @property {number} [minResolution=0] Minimum resolution that we zoom to.\n * @property {number} [maxZoom] Maximum zoom level that we zoom to. If\n * `minResolution` is given, this property is ignored.\n * @property {number} [duration] The duration of the animation in milliseconds.\n * By default, there is no animation to the target extent.\n * @property {function(number):number} [easing] The easing function used during\n * the animation (defaults to {@link module:ol/easing.inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n * @property {function(boolean):void} [callback] Function called when the view is in\n * its final position. The callback will be called with `true` if the animation\n * series completed on its own or `false` if it was cancelled.\n */\n\n/**\n * @typedef {Object} ViewOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The initial center for\n * the view. If a user projection is not set, the coordinate system for the center is\n * specified with the `projection` option. Layer sources will not be fetched if this\n * is not set, but the center can be set later with {@link #setCenter}.\n * @property {boolean|number} [constrainRotation=true] Rotation constraint.\n * `false` means no constraint. `true` means no constraint, but snap to zero\n * near zero. A number constrains the rotation to that number of values. For\n * example, `4` will constrain the rotation to 0, 90, 180, and 270 degrees.\n * @property {boolean} [enableRotation=true] Enable rotation.\n * If `false`, a rotation constraint that always sets the rotation to zero is\n * used. The `constrainRotation` option has no effect if `enableRotation` is\n * `false`.\n * @property {import(\"./extent.js\").Extent} [extent] The extent that constrains the\n * view, in other words, nothing outside of this extent can be visible on the map.\n * @property {boolean} [constrainOnlyCenter=false] If true, the extent\n * constraint will only apply to the view center and not the whole extent.\n * @property {boolean} [smoothExtentConstraint=true] If true, the extent\n * constraint will be applied smoothly, i.e. allow the view to go slightly outside\n * of the given `extent`.\n * @property {number} [maxResolution] The maximum resolution used to determine\n * the resolution constraint. It is used together with `minResolution` (or\n * `maxZoom`) and `zoomFactor`. If unspecified it is calculated in such a way\n * that the projection's validity extent fits in a 256x256 px tile. If the\n * projection is Spherical Mercator (the default) then `maxResolution` defaults\n * to `40075016.68557849 / 256 = 156543.03392804097`.\n * @property {number} [minResolution] The minimum resolution used to determine\n * the resolution constraint.  It is used together with `maxResolution` (or\n * `minZoom`) and `zoomFactor`.  If unspecified it is calculated assuming 29\n * zoom levels (with a factor of 2). If the projection is Spherical Mercator\n * (the default) then `minResolution` defaults to\n * `40075016.68557849 / 256 / Math.pow(2, 28) = 0.0005831682455839253`.\n * @property {number} [maxZoom=28] The maximum zoom level used to determine the\n * resolution constraint. It is used together with `minZoom` (or\n * `maxResolution`) and `zoomFactor`.  Note that if `minResolution` is also\n * provided, it is given precedence over `maxZoom`.\n * @property {number} [minZoom=0] The minimum zoom level used to determine the\n * resolution constraint. It is used together with `maxZoom` (or\n * `minResolution`) and `zoomFactor`.  Note that if `maxResolution` is also\n * provided, it is given precedence over `minZoom`.\n * @property {boolean} [multiWorld=false] If `false` the view is constrained so\n * only one world is visible, and you cannot pan off the edge.  If `true` the map\n * may show multiple worlds at low zoom levels.  Only used if the `projection` is\n * global.  Note that if `extent` is also provided it is given precedence.\n * @property {boolean} [constrainResolution=false] If true, the view will always\n * animate to the closest zoom level after an interaction; false means\n * intermediary zoom levels are allowed.\n * @property {boolean} [smoothResolutionConstraint=true] If true, the resolution\n * min/max values will be applied smoothly, i. e. allow the view to exceed slightly\n * the given resolution or zoom bounds.\n * @property {boolean} [showFullExtent=false] Allow the view to be zoomed out to\n * show the full configured extent. By default, when a view is configured with an\n * extent, users will not be able to zoom out so the viewport exceeds the extent in\n * either dimension. This means the full extent may not be visible if the viewport\n * is taller or wider than the aspect ratio of the configured extent. If\n * showFullExtent is true, the user will be able to zoom out so that the viewport\n * exceeds the height or width of the configured extent, but not both, allowing the\n * full extent to be shown.\n * @property {import(\"./proj.js\").ProjectionLike} [projection='EPSG:3857'] The\n * projection. The default is Spherical Mercator.\n * @property {number} [resolution] The initial resolution for the view. The\n * units are `projection` units per pixel (e.g. meters per pixel). An\n * alternative to setting this is to set `zoom`. Layer sources will not be\n * fetched if neither this nor `zoom` are defined, but they can be set later\n * with {@link #setZoom} or {@link #setResolution}.\n * @property {Array<number>} [resolutions] Resolutions that determine the\n * zoom levels if specified. The index in the array corresponds to the zoom level,\n * therefore the resolution values have to be in descending order. It also constrains\n * the resolution by the minimum and maximum value. If set the `maxResolution`,\n * `minResolution`, `minZoom`, `maxZoom`, and `zoomFactor` options are ignored.\n * @property {number} [rotation=0] The initial rotation for the view in radians\n * (positive rotation clockwise, 0 means North).\n * @property {number} [zoom] Only used if `resolution` is not defined. Zoom\n * level used to calculate the initial resolution for the view.\n * @property {number} [zoomFactor=2] The zoom factor used to compute the\n * corresponding resolution.\n * @property {!Array<number>} [padding=[0, 0, 0, 0]] Padding (in css pixels).\n * If the map viewport is partially covered with other content (overlays) along\n * its edges, this setting allows to shift the center of the viewport away from\n * that content. The order of the values is top, right, bottom, left.\n */\n\n/**\n * @typedef {Object} AnimationOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The center of the view at the end of\n * the animation.\n * @property {number} [zoom] The zoom level of the view at the end of the\n * animation. This takes precedence over `resolution`.\n * @property {number} [resolution] The resolution of the view at the end\n * of the animation.  If `zoom` is also provided, this option will be ignored.\n * @property {number} [rotation] The rotation of the view at the end of\n * the animation.\n * @property {import(\"./coordinate.js\").Coordinate} [anchor] Optional anchor to remain fixed\n * during a rotation or resolution animation.\n * @property {number} [duration=1000] The duration of the animation in milliseconds.\n * @property {function(number):number} [easing] The easing function used\n * during the animation (defaults to {@link module:ol/easing.inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n */\n\n/**\n * @typedef {Object} State\n * @property {import(\"./coordinate.js\").Coordinate} center Center.\n * @property {import(\"./proj/Projection.js\").default} projection Projection.\n * @property {number} resolution Resolution.\n * @property {import(\"./coordinate.js\").Coordinate} [nextCenter] The next center during an animation series.\n * @property {number} [nextResolution] The next resolution during an animation series.\n * @property {number} [nextRotation] The next rotation during an animation series.\n * @property {number} rotation Rotation.\n * @property {number} zoom Zoom.\n */\n\n/**\n * Default min zoom level for the map view.\n * @type {number}\n */\nconst DEFAULT_MIN_ZOOM = 0;\n\n/**\n * @typedef {import(\"./ObjectEventType\").Types|'change:center'|'change:resolution'|'change:rotation'} ViewObjectEventTypes\n */\n\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<ViewObjectEventTypes, import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|ViewObjectEventTypes, Return>} ViewOnSignature\n */\n\n/**\n * @classdesc\n * A View object represents a simple 2D view of the map.\n *\n * This is the object to act upon to change the center, resolution,\n * and rotation of the map.\n *\n * A View has a `projection`. The projection determines the\n * coordinate system of the center, and its units determine the units of the\n * resolution (projection units per pixel). The default projection is\n * Web Mercator (EPSG:3857).\n *\n * ### The view states\n *\n * A View is determined by three states: `center`, `resolution`,\n * and `rotation`. Each state has a corresponding getter and setter, e.g.\n * `getCenter` and `setCenter` for the `center` state.\n *\n * The `zoom` state is actually not saved on the view: all computations\n * internally use the `resolution` state. Still, the `setZoom` and `getZoom`\n * methods are available, as well as `getResolutionForZoom` and\n * `getZoomForResolution` to switch from one system to the other.\n *\n * ### The constraints\n *\n * `setCenter`, `setResolution` and `setRotation` can be used to change the\n * states of the view, but any constraint defined in the constructor will\n * be applied along the way.\n *\n * A View object can have a *resolution constraint*, a *rotation constraint*\n * and a *center constraint*.\n *\n * The *resolution constraint* typically restricts min/max values and\n * snaps to specific resolutions. It is determined by the following\n * options: `resolutions`, `maxResolution`, `maxZoom` and `zoomFactor`.\n * If `resolutions` is set, the other three options are ignored. See\n * documentation for each option for more information. By default, the view\n * only has a min/max restriction and allow intermediary zoom levels when\n * pinch-zooming for example.\n *\n * The *rotation constraint* snaps to specific angles. It is determined\n * by the following options: `enableRotation` and `constrainRotation`.\n * By default rotation is allowed and its value is snapped to zero when approaching the\n * horizontal.\n *\n * The *center constraint* is determined by the `extent` option. By\n * default the view center is not constrained at all.\n *\n * ### Changing the view state\n *\n * It is important to note that `setZoom`, `setResolution`, `setCenter` and\n * `setRotation` are subject to the above mentioned constraints. As such, it\n * may sometimes not be possible to know in advance the resulting state of the\n * View. For example, calling `setResolution(10)` does not guarantee that\n * `getResolution()` will return `10`.\n *\n * A consequence of this is that, when applying a delta on the view state, one\n * should use `adjustCenter`, `adjustRotation`, `adjustZoom` and `adjustResolution`\n * rather than the corresponding setters. This will let view do its internal\n * computations. Besides, the `adjust*` methods also take an `anchor`\n * argument which allows specifying an origin for the transformation.\n *\n * ### Interacting with the view\n *\n * View constraints are usually only applied when the view is *at rest*, meaning that\n * no interaction or animation is ongoing. As such, if the user puts the view in a\n * state that is not equivalent to a constrained one (e.g. rotating the view when\n * the snap angle is 0), an animation will be triggered at the interaction end to\n * put back the view to a stable state;\n *\n * @api\n */\nclass View extends BaseObject {\n  /**\n   * @param {ViewOptions} [options] View options.\n   */\n  constructor(options) {\n    super();\n\n    /***\n     * @type {ViewOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {ViewOnSignature<import(\"./events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {ViewOnSignature<void>}\n     */\n    this.un;\n\n    options = Object.assign({}, options);\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.hints_ = [0, 0];\n\n    /**\n     * @private\n     * @type {Array<Array<Animation>>}\n     */\n    this.animations_ = [];\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.updateAnimationKey_;\n\n    /**\n     * @private\n     * @const\n     * @type {import(\"./proj/Projection.js\").default}\n     */\n    this.projection_ = createProjection(options.projection, 'EPSG:3857');\n\n    /**\n     * @private\n     * @type {import(\"./size.js\").Size}\n     */\n    this.viewportSize_ = [100, 100];\n\n    /**\n     * @private\n     * @type {import(\"./coordinate.js\").Coordinate|undefined}\n     */\n    this.targetCenter_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.targetResolution_;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.targetRotation_;\n\n    /**\n     * @private\n     * @type {import(\"./coordinate.js\").Coordinate}\n     */\n    this.nextCenter_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.nextResolution_;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.nextRotation_;\n\n    /**\n     * @private\n     * @type {import(\"./coordinate.js\").Coordinate|undefined}\n     */\n    this.cancelAnchor_ = undefined;\n\n    if (options.projection) {\n      disableCoordinateWarning();\n    }\n    if (options.center) {\n      options.center = fromUserCoordinate(options.center, this.projection_);\n    }\n    if (options.extent) {\n      options.extent = fromUserExtent(options.extent, this.projection_);\n    }\n\n    this.applyOptions_(options);\n  }\n\n  /**\n   * Set up the view with the given options.\n   * @param {ViewOptions} options View options.\n   */\n  applyOptions_(options) {\n    const properties = Object.assign({}, options);\n    for (const key in ViewProperty) {\n      delete properties[key];\n    }\n    this.setProperties(properties, true);\n\n    const resolutionConstraintInfo = createResolutionConstraint(options);\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxResolution_ = resolutionConstraintInfo.maxResolution;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minResolution_ = resolutionConstraintInfo.minResolution;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.zoomFactor_ = resolutionConstraintInfo.zoomFactor;\n\n    /**\n     * @private\n     * @type {Array<number>|undefined}\n     */\n    this.resolutions_ = options.resolutions;\n\n    /**\n     * @type {Array<number>|undefined}\n     * @private\n     */\n    this.padding_ = options.padding;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minZoom_ = resolutionConstraintInfo.minZoom;\n\n    const centerConstraint = createCenterConstraint(options);\n    const resolutionConstraint = resolutionConstraintInfo.constraint;\n    const rotationConstraint = createRotationConstraint(options);\n\n    /**\n     * @private\n     * @type {Constraints}\n     */\n    this.constraints_ = {\n      center: centerConstraint,\n      resolution: resolutionConstraint,\n      rotation: rotationConstraint,\n    };\n\n    this.setRotation(options.rotation !== undefined ? options.rotation : 0);\n    this.setCenterInternal(\n      options.center !== undefined ? options.center : null\n    );\n    if (options.resolution !== undefined) {\n      this.setResolution(options.resolution);\n    } else if (options.zoom !== undefined) {\n      this.setZoom(options.zoom);\n    }\n  }\n\n  /**\n   * Padding (in css pixels).\n   * If the map viewport is partially covered with other content (overlays) along\n   * its edges, this setting allows to shift the center of the viewport away from that\n   * content. The order of the values in the array is top, right, bottom, left.\n   * The default is no padding, which is equivalent to `[0, 0, 0, 0]`.\n   * @type {Array<number>|undefined}\n   * @api\n   */\n  get padding() {\n    return this.padding_;\n  }\n  set padding(padding) {\n    let oldPadding = this.padding_;\n    this.padding_ = padding;\n    const center = this.getCenter();\n    if (center) {\n      const newPadding = padding || [0, 0, 0, 0];\n      oldPadding = oldPadding || [0, 0, 0, 0];\n      const resolution = this.getResolution();\n      const offsetX =\n        (resolution / 2) *\n        (newPadding[3] - oldPadding[3] + oldPadding[1] - newPadding[1]);\n      const offsetY =\n        (resolution / 2) *\n        (newPadding[0] - oldPadding[0] + oldPadding[2] - newPadding[2]);\n      this.setCenterInternal([center[0] + offsetX, center[1] - offsetY]);\n    }\n  }\n\n  /**\n   * Get an updated version of the view options used to construct the view.  The\n   * current resolution (or zoom), center, and rotation are applied to any stored\n   * options.  The provided options can be used to apply new min/max zoom or\n   * resolution limits.\n   * @param {ViewOptions} newOptions New options to be applied.\n   * @return {ViewOptions} New options updated with the current view state.\n   */\n  getUpdatedOptions_(newOptions) {\n    const options = this.getProperties();\n\n    // preserve resolution (or zoom)\n    if (options.resolution !== undefined) {\n      options.resolution = this.getResolution();\n    } else {\n      options.zoom = this.getZoom();\n    }\n\n    // preserve center\n    options.center = this.getCenterInternal();\n\n    // preserve rotation\n    options.rotation = this.getRotation();\n\n    return Object.assign({}, options, newOptions);\n  }\n\n  /**\n   * Animate the view.  The view's center, zoom (or resolution), and rotation\n   * can be animated for smooth transitions between view states.  For example,\n   * to animate the view to a new zoom level:\n   *\n   *     view.animate({zoom: view.getZoom() + 1});\n   *\n   * By default, the animation lasts one second and uses in-and-out easing.  You\n   * can customize this behavior by including `duration` (in milliseconds) and\n   * `easing` options (see {@link module:ol/easing}).\n   *\n   * To chain together multiple animations, call the method with multiple\n   * animation objects.  For example, to first zoom and then pan:\n   *\n   *     view.animate({zoom: 10}, {center: [0, 0]});\n   *\n   * If you provide a function as the last argument to the animate method, it\n   * will get called at the end of an animation series.  The callback will be\n   * called with `true` if the animation series completed on its own or `false`\n   * if it was cancelled.\n   *\n   * Animations are cancelled by user interactions (e.g. dragging the map) or by\n   * calling `view.setCenter()`, `view.setResolution()`, or `view.setRotation()`\n   * (or another method that calls one of these).\n   *\n   * @param {...(AnimationOptions|function(boolean): void)} var_args Animation\n   *     options.  Multiple animations can be run in series by passing multiple\n   *     options objects.  To run multiple animations in parallel, call the method\n   *     multiple times.  An optional callback can be provided as a final\n   *     argument.  The callback will be called with a boolean indicating whether\n   *     the animation completed without being cancelled.\n   * @api\n   */\n  animate(var_args) {\n    if (this.isDef() && !this.getAnimating()) {\n      this.resolveConstraints(0);\n    }\n    const args = new Array(arguments.length);\n    for (let i = 0; i < args.length; ++i) {\n      let options = arguments[i];\n      if (options.center) {\n        options = Object.assign({}, options);\n        options.center = fromUserCoordinate(\n          options.center,\n          this.getProjection()\n        );\n      }\n      if (options.anchor) {\n        options = Object.assign({}, options);\n        options.anchor = fromUserCoordinate(\n          options.anchor,\n          this.getProjection()\n        );\n      }\n      args[i] = options;\n    }\n    this.animateInternal.apply(this, args);\n  }\n\n  /**\n   * @param {...(AnimationOptions|function(boolean): void)} var_args Animation options.\n   */\n  animateInternal(var_args) {\n    let animationCount = arguments.length;\n    let callback;\n    if (\n      animationCount > 1 &&\n      typeof arguments[animationCount - 1] === 'function'\n    ) {\n      callback = arguments[animationCount - 1];\n      --animationCount;\n    }\n\n    let i = 0;\n    for (; i < animationCount && !this.isDef(); ++i) {\n      // if view properties are not yet set, shortcut to the final state\n      const state = arguments[i];\n      if (state.center) {\n        this.setCenterInternal(state.center);\n      }\n      if (state.zoom !== undefined) {\n        this.setZoom(state.zoom);\n      } else if (state.resolution) {\n        this.setResolution(state.resolution);\n      }\n      if (state.rotation !== undefined) {\n        this.setRotation(state.rotation);\n      }\n    }\n    if (i === animationCount) {\n      if (callback) {\n        animationCallback(callback, true);\n      }\n      return;\n    }\n\n    let start = Date.now();\n    let center = this.targetCenter_.slice();\n    let resolution = this.targetResolution_;\n    let rotation = this.targetRotation_;\n    const series = [];\n    for (; i < animationCount; ++i) {\n      const options = /** @type {AnimationOptions} */ (arguments[i]);\n\n      const animation = {\n        start: start,\n        complete: false,\n        anchor: options.anchor,\n        duration: options.duration !== undefined ? options.duration : 1000,\n        easing: options.easing || inAndOut,\n        callback: callback,\n      };\n\n      if (options.center) {\n        animation.sourceCenter = center;\n        animation.targetCenter = options.center.slice();\n        center = animation.targetCenter;\n      }\n\n      if (options.zoom !== undefined) {\n        animation.sourceResolution = resolution;\n        animation.targetResolution = this.getResolutionForZoom(options.zoom);\n        resolution = animation.targetResolution;\n      } else if (options.resolution) {\n        animation.sourceResolution = resolution;\n        animation.targetResolution = options.resolution;\n        resolution = animation.targetResolution;\n      }\n\n      if (options.rotation !== undefined) {\n        animation.sourceRotation = rotation;\n        const delta =\n          modulo(options.rotation - rotation + Math.PI, 2 * Math.PI) - Math.PI;\n        animation.targetRotation = rotation + delta;\n        rotation = animation.targetRotation;\n      }\n\n      // check if animation is a no-op\n      if (isNoopAnimation(animation)) {\n        animation.complete = true;\n        // we still push it onto the series for callback handling\n      } else {\n        start += animation.duration;\n      }\n      series.push(animation);\n    }\n    this.animations_.push(series);\n    this.setHint(ViewHint.ANIMATING, 1);\n    this.updateAnimations_();\n  }\n\n  /**\n   * Determine if the view is being animated.\n   * @return {boolean} The view is being animated.\n   * @api\n   */\n  getAnimating() {\n    return this.hints_[ViewHint.ANIMATING] > 0;\n  }\n\n  /**\n   * Determine if the user is interacting with the view, such as panning or zooming.\n   * @return {boolean} The view is being interacted with.\n   * @api\n   */\n  getInteracting() {\n    return this.hints_[ViewHint.INTERACTING] > 0;\n  }\n\n  /**\n   * Cancel any ongoing animations.\n   * @api\n   */\n  cancelAnimations() {\n    this.setHint(ViewHint.ANIMATING, -this.hints_[ViewHint.ANIMATING]);\n    let anchor;\n    for (let i = 0, ii = this.animations_.length; i < ii; ++i) {\n      const series = this.animations_[i];\n      if (series[0].callback) {\n        animationCallback(series[0].callback, false);\n      }\n      if (!anchor) {\n        for (let j = 0, jj = series.length; j < jj; ++j) {\n          const animation = series[j];\n          if (!animation.complete) {\n            anchor = animation.anchor;\n            break;\n          }\n        }\n      }\n    }\n    this.animations_.length = 0;\n    this.cancelAnchor_ = anchor;\n    this.nextCenter_ = null;\n    this.nextResolution_ = NaN;\n    this.nextRotation_ = NaN;\n  }\n\n  /**\n   * Update all animations.\n   */\n  updateAnimations_() {\n    if (this.updateAnimationKey_ !== undefined) {\n      cancelAnimationFrame(this.updateAnimationKey_);\n      this.updateAnimationKey_ = undefined;\n    }\n    if (!this.getAnimating()) {\n      return;\n    }\n    const now = Date.now();\n    let more = false;\n    for (let i = this.animations_.length - 1; i >= 0; --i) {\n      const series = this.animations_[i];\n      let seriesComplete = true;\n      for (let j = 0, jj = series.length; j < jj; ++j) {\n        const animation = series[j];\n        if (animation.complete) {\n          continue;\n        }\n        const elapsed = now - animation.start;\n        let fraction =\n          animation.duration > 0 ? elapsed / animation.duration : 1;\n        if (fraction >= 1) {\n          animation.complete = true;\n          fraction = 1;\n        } else {\n          seriesComplete = false;\n        }\n        const progress = animation.easing(fraction);\n        if (animation.sourceCenter) {\n          const x0 = animation.sourceCenter[0];\n          const y0 = animation.sourceCenter[1];\n          const x1 = animation.targetCenter[0];\n          const y1 = animation.targetCenter[1];\n          this.nextCenter_ = animation.targetCenter;\n          const x = x0 + progress * (x1 - x0);\n          const y = y0 + progress * (y1 - y0);\n          this.targetCenter_ = [x, y];\n        }\n        if (animation.sourceResolution && animation.targetResolution) {\n          const resolution =\n            progress === 1\n              ? animation.targetResolution\n              : animation.sourceResolution +\n                progress *\n                  (animation.targetResolution - animation.sourceResolution);\n          if (animation.anchor) {\n            const size = this.getViewportSize_(this.getRotation());\n            const constrainedResolution = this.constraints_.resolution(\n              resolution,\n              0,\n              size,\n              true\n            );\n            this.targetCenter_ = this.calculateCenterZoom(\n              constrainedResolution,\n              animation.anchor\n            );\n          }\n          this.nextResolution_ = animation.targetResolution;\n          this.targetResolution_ = resolution;\n          this.applyTargetState_(true);\n        }\n        if (\n          animation.sourceRotation !== undefined &&\n          animation.targetRotation !== undefined\n        ) {\n          const rotation =\n            progress === 1\n              ? modulo(animation.targetRotation + Math.PI, 2 * Math.PI) -\n                Math.PI\n              : animation.sourceRotation +\n                progress *\n                  (animation.targetRotation - animation.sourceRotation);\n          if (animation.anchor) {\n            const constrainedRotation = this.constraints_.rotation(\n              rotation,\n              true\n            );\n            this.targetCenter_ = this.calculateCenterRotate(\n              constrainedRotation,\n              animation.anchor\n            );\n          }\n          this.nextRotation_ = animation.targetRotation;\n          this.targetRotation_ = rotation;\n        }\n        this.applyTargetState_(true);\n        more = true;\n        if (!animation.complete) {\n          break;\n        }\n      }\n      if (seriesComplete) {\n        this.animations_[i] = null;\n        this.setHint(ViewHint.ANIMATING, -1);\n        this.nextCenter_ = null;\n        this.nextResolution_ = NaN;\n        this.nextRotation_ = NaN;\n        const callback = series[0].callback;\n        if (callback) {\n          animationCallback(callback, true);\n        }\n      }\n    }\n    // prune completed series\n    this.animations_ = this.animations_.filter(Boolean);\n    if (more && this.updateAnimationKey_ === undefined) {\n      this.updateAnimationKey_ = requestAnimationFrame(\n        this.updateAnimations_.bind(this)\n      );\n    }\n  }\n\n  /**\n   * @param {number} rotation Target rotation.\n   * @param {import(\"./coordinate.js\").Coordinate} anchor Rotation anchor.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for rotation and anchor.\n   */\n  calculateCenterRotate(rotation, anchor) {\n    let center;\n    const currentCenter = this.getCenterInternal();\n    if (currentCenter !== undefined) {\n      center = [currentCenter[0] - anchor[0], currentCenter[1] - anchor[1]];\n      rotateCoordinate(center, rotation - this.getRotation());\n      addCoordinate(center, anchor);\n    }\n    return center;\n  }\n\n  /**\n   * @param {number} resolution Target resolution.\n   * @param {import(\"./coordinate.js\").Coordinate} anchor Zoom anchor.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for resolution and anchor.\n   */\n  calculateCenterZoom(resolution, anchor) {\n    let center;\n    const currentCenter = this.getCenterInternal();\n    const currentResolution = this.getResolution();\n    if (currentCenter !== undefined && currentResolution !== undefined) {\n      const x =\n        anchor[0] -\n        (resolution * (anchor[0] - currentCenter[0])) / currentResolution;\n      const y =\n        anchor[1] -\n        (resolution * (anchor[1] - currentCenter[1])) / currentResolution;\n      center = [x, y];\n    }\n    return center;\n  }\n\n  /**\n   * Returns the current viewport size.\n   * @private\n   * @param {number} [rotation] Take into account the rotation of the viewport when giving the size\n   * @return {import(\"./size.js\").Size} Viewport size or `[100, 100]` when no viewport is found.\n   */\n  getViewportSize_(rotation) {\n    const size = this.viewportSize_;\n    if (rotation) {\n      const w = size[0];\n      const h = size[1];\n      return [\n        Math.abs(w * Math.cos(rotation)) + Math.abs(h * Math.sin(rotation)),\n        Math.abs(w * Math.sin(rotation)) + Math.abs(h * Math.cos(rotation)),\n      ];\n    } else {\n      return size;\n    }\n  }\n\n  /**\n   * Stores the viewport size on the view. The viewport size is not read every time from the DOM\n   * to avoid performance hit and layout reflow.\n   * This should be done on map size change.\n   * Note: the constraints are not resolved during an animation to avoid stopping it\n   * @param {import(\"./size.js\").Size} [size] Viewport size; if undefined, [100, 100] is assumed\n   */\n  setViewportSize(size) {\n    this.viewportSize_ = Array.isArray(size) ? size.slice() : [100, 100];\n    if (!this.getAnimating()) {\n      this.resolveConstraints(0);\n    }\n  }\n\n  /**\n   * Get the view center.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} The center of the view.\n   * @observable\n   * @api\n   */\n  getCenter() {\n    const center = this.getCenterInternal();\n    if (!center) {\n      return center;\n    }\n    return toUserCoordinate(center, this.getProjection());\n  }\n\n  /**\n   * Get the view center without transforming to user projection.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} The center of the view.\n   */\n  getCenterInternal() {\n    return /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (\n      this.get(ViewProperty.CENTER)\n    );\n  }\n\n  /**\n   * @return {Constraints} Constraints.\n   */\n  getConstraints() {\n    return this.constraints_;\n  }\n\n  /**\n   * @return {boolean} Resolution constraint is set\n   */\n  getConstrainResolution() {\n    return this.get('constrainResolution');\n  }\n\n  /**\n   * @param {Array<number>} [hints] Destination array.\n   * @return {Array<number>} Hint.\n   */\n  getHints(hints) {\n    if (hints !== undefined) {\n      hints[0] = this.hints_[0];\n      hints[1] = this.hints_[1];\n      return hints;\n    } else {\n      return this.hints_.slice();\n    }\n  }\n\n  /**\n   * Calculate the extent for the current view state and the passed size.\n   * The size is the pixel dimensions of the box into which the calculated extent\n   * should fit. In most cases you want to get the extent of the entire map,\n   * that is `map.getSize()`.\n   * @param {import(\"./size.js\").Size} [size] Box pixel size. If not provided, the size\n   * of the map that uses this view will be used.\n   * @return {import(\"./extent.js\").Extent} Extent.\n   * @api\n   */\n  calculateExtent(size) {\n    const extent = this.calculateExtentInternal(size);\n    return toUserExtent(extent, this.getProjection());\n  }\n\n  /**\n   * @param {import(\"./size.js\").Size} [size] Box pixel size. If not provided,\n   * the map's last known viewport size will be used.\n   * @return {import(\"./extent.js\").Extent} Extent.\n   */\n  calculateExtentInternal(size) {\n    size = size || this.getViewportSizeMinusPadding_();\n    const center = /** @type {!import(\"./coordinate.js\").Coordinate} */ (\n      this.getCenterInternal()\n    );\n    assert(center, 1); // The view center is not defined\n    const resolution = /** @type {!number} */ (this.getResolution());\n    assert(resolution !== undefined, 2); // The view resolution is not defined\n    const rotation = /** @type {!number} */ (this.getRotation());\n    assert(rotation !== undefined, 3); // The view rotation is not defined\n\n    return getForViewAndSize(center, resolution, rotation, size);\n  }\n\n  /**\n   * Get the maximum resolution of the view.\n   * @return {number} The maximum resolution of the view.\n   * @api\n   */\n  getMaxResolution() {\n    return this.maxResolution_;\n  }\n\n  /**\n   * Get the minimum resolution of the view.\n   * @return {number} The minimum resolution of the view.\n   * @api\n   */\n  getMinResolution() {\n    return this.minResolution_;\n  }\n\n  /**\n   * Get the maximum zoom level for the view.\n   * @return {number} The maximum zoom level.\n   * @api\n   */\n  getMaxZoom() {\n    return /** @type {number} */ (\n      this.getZoomForResolution(this.minResolution_)\n    );\n  }\n\n  /**\n   * Set a new maximum zoom level for the view.\n   * @param {number} zoom The maximum zoom level.\n   * @api\n   */\n  setMaxZoom(zoom) {\n    this.applyOptions_(this.getUpdatedOptions_({maxZoom: zoom}));\n  }\n\n  /**\n   * Get the minimum zoom level for the view.\n   * @return {number} The minimum zoom level.\n   * @api\n   */\n  getMinZoom() {\n    return /** @type {number} */ (\n      this.getZoomForResolution(this.maxResolution_)\n    );\n  }\n\n  /**\n   * Set a new minimum zoom level for the view.\n   * @param {number} zoom The minimum zoom level.\n   * @api\n   */\n  setMinZoom(zoom) {\n    this.applyOptions_(this.getUpdatedOptions_({minZoom: zoom}));\n  }\n\n  /**\n   * Set whether the view should allow intermediary zoom levels.\n   * @param {boolean} enabled Whether the resolution is constrained.\n   * @api\n   */\n  setConstrainResolution(enabled) {\n    this.applyOptions_(this.getUpdatedOptions_({constrainResolution: enabled}));\n  }\n\n  /**\n   * Get the view projection.\n   * @return {import(\"./proj/Projection.js\").default} The projection of the view.\n   * @api\n   */\n  getProjection() {\n    return this.projection_;\n  }\n\n  /**\n   * Get the view resolution.\n   * @return {number|undefined} The resolution of the view.\n   * @observable\n   * @api\n   */\n  getResolution() {\n    return /** @type {number|undefined} */ (this.get(ViewProperty.RESOLUTION));\n  }\n\n  /**\n   * Get the resolutions for the view. This returns the array of resolutions\n   * passed to the constructor of the View, or undefined if none were given.\n   * @return {Array<number>|undefined} The resolutions of the view.\n   * @api\n   */\n  getResolutions() {\n    return this.resolutions_;\n  }\n\n  /**\n   * Get the resolution for a provided extent (in map units) and size (in pixels).\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {import(\"./size.js\").Size} [size] Box pixel size.\n   * @return {number} The resolution at which the provided extent will render at\n   *     the given size.\n   * @api\n   */\n  getResolutionForExtent(extent, size) {\n    return this.getResolutionForExtentInternal(\n      fromUserExtent(extent, this.getProjection()),\n      size\n    );\n  }\n\n  /**\n   * Get the resolution for a provided extent (in map units) and size (in pixels).\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {import(\"./size.js\").Size} [size] Box pixel size.\n   * @return {number} The resolution at which the provided extent will render at\n   *     the given size.\n   */\n  getResolutionForExtentInternal(extent, size) {\n    size = size || this.getViewportSizeMinusPadding_();\n    const xResolution = getWidth(extent) / size[0];\n    const yResolution = getHeight(extent) / size[1];\n    return Math.max(xResolution, yResolution);\n  }\n\n  /**\n   * Return a function that returns a value between 0 and 1 for a\n   * resolution. Exponential scaling is assumed.\n   * @param {number} [power] Power.\n   * @return {function(number): number} Resolution for value function.\n   */\n  getResolutionForValueFunction(power) {\n    power = power || 2;\n    const maxResolution = this.getConstrainedResolution(this.maxResolution_);\n    const minResolution = this.minResolution_;\n    const max = Math.log(maxResolution / minResolution) / Math.log(power);\n    return (\n      /**\n       * @param {number} value Value.\n       * @return {number} Resolution.\n       */\n      function (value) {\n        const resolution = maxResolution / Math.pow(power, value * max);\n        return resolution;\n      }\n    );\n  }\n\n  /**\n   * Get the view rotation.\n   * @return {number} The rotation of the view in radians.\n   * @observable\n   * @api\n   */\n  getRotation() {\n    return /** @type {number} */ (this.get(ViewProperty.ROTATION));\n  }\n\n  /**\n   * Return a function that returns a resolution for a value between\n   * 0 and 1. Exponential scaling is assumed.\n   * @param {number} [power] Power.\n   * @return {function(number): number} Value for resolution function.\n   */\n  getValueForResolutionFunction(power) {\n    const logPower = Math.log(power || 2);\n    const maxResolution = this.getConstrainedResolution(this.maxResolution_);\n    const minResolution = this.minResolution_;\n    const max = Math.log(maxResolution / minResolution) / logPower;\n    return (\n      /**\n       * @param {number} resolution Resolution.\n       * @return {number} Value.\n       */\n      function (resolution) {\n        const value = Math.log(maxResolution / resolution) / logPower / max;\n        return value;\n      }\n    );\n  }\n\n  /**\n   * Returns the size of the viewport minus padding.\n   * @private\n   * @param {number} [rotation] Take into account the rotation of the viewport when giving the size\n   * @return {import(\"./size.js\").Size} Viewport size reduced by the padding.\n   */\n  getViewportSizeMinusPadding_(rotation) {\n    let size = this.getViewportSize_(rotation);\n    const padding = this.padding_;\n    if (padding) {\n      size = [\n        size[0] - padding[1] - padding[3],\n        size[1] - padding[0] - padding[2],\n      ];\n    }\n    return size;\n  }\n\n  /**\n   * @return {State} View state.\n   */\n  getState() {\n    const projection = this.getProjection();\n    const resolution = this.getResolution();\n    const rotation = this.getRotation();\n    let center = /** @type {import(\"./coordinate.js\").Coordinate} */ (\n      this.getCenterInternal()\n    );\n    const padding = this.padding_;\n    if (padding) {\n      const reducedSize = this.getViewportSizeMinusPadding_();\n      center = calculateCenterOn(\n        center,\n        this.getViewportSize_(),\n        [reducedSize[0] / 2 + padding[3], reducedSize[1] / 2 + padding[0]],\n        resolution,\n        rotation\n      );\n    }\n    return {\n      center: center.slice(0),\n      projection: projection !== undefined ? projection : null,\n      resolution: resolution,\n      nextCenter: this.nextCenter_,\n      nextResolution: this.nextResolution_,\n      nextRotation: this.nextRotation_,\n      rotation: rotation,\n      zoom: this.getZoom(),\n    };\n  }\n\n  /**\n   * Get the current zoom level. This method may return non-integer zoom levels\n   * if the view does not constrain the resolution, or if an interaction or\n   * animation is underway.\n   * @return {number|undefined} Zoom.\n   * @api\n   */\n  getZoom() {\n    let zoom;\n    const resolution = this.getResolution();\n    if (resolution !== undefined) {\n      zoom = this.getZoomForResolution(resolution);\n    }\n    return zoom;\n  }\n\n  /**\n   * Get the zoom level for a resolution.\n   * @param {number} resolution The resolution.\n   * @return {number|undefined} The zoom level for the provided resolution.\n   * @api\n   */\n  getZoomForResolution(resolution) {\n    let offset = this.minZoom_ || 0;\n    let max, zoomFactor;\n    if (this.resolutions_) {\n      const nearest = linearFindNearest(this.resolutions_, resolution, 1);\n      offset = nearest;\n      max = this.resolutions_[nearest];\n      if (nearest == this.resolutions_.length - 1) {\n        zoomFactor = 2;\n      } else {\n        zoomFactor = max / this.resolutions_[nearest + 1];\n      }\n    } else {\n      max = this.maxResolution_;\n      zoomFactor = this.zoomFactor_;\n    }\n    return offset + Math.log(max / resolution) / Math.log(zoomFactor);\n  }\n\n  /**\n   * Get the resolution for a zoom level.\n   * @param {number} zoom Zoom level.\n   * @return {number} The view resolution for the provided zoom level.\n   * @api\n   */\n  getResolutionForZoom(zoom) {\n    if (this.resolutions_) {\n      if (this.resolutions_.length <= 1) {\n        return 0;\n      }\n      const baseLevel = clamp(\n        Math.floor(zoom),\n        0,\n        this.resolutions_.length - 2\n      );\n      const zoomFactor =\n        this.resolutions_[baseLevel] / this.resolutions_[baseLevel + 1];\n      return (\n        this.resolutions_[baseLevel] /\n        Math.pow(zoomFactor, clamp(zoom - baseLevel, 0, 1))\n      );\n    } else {\n      return (\n        this.maxResolution_ / Math.pow(this.zoomFactor_, zoom - this.minZoom_)\n      );\n    }\n  }\n\n  /**\n   * Fit the given geometry or extent based on the given map size and border.\n   * The size is pixel dimensions of the box to fit the extent into.\n   * In most cases you will want to use the map size, that is `map.getSize()`.\n   * Takes care of the map angle.\n   * @param {import(\"./geom/SimpleGeometry.js\").default|import(\"./extent.js\").Extent} geometryOrExtent The geometry or\n   *     extent to fit the view to.\n   * @param {FitOptions} [options] Options.\n   * @api\n   */\n  fit(geometryOrExtent, options) {\n    /** @type {import(\"./geom/SimpleGeometry.js\").default} */\n    let geometry;\n    assert(\n      Array.isArray(geometryOrExtent) ||\n        typeof (/** @type {?} */ (geometryOrExtent).getSimplifiedGeometry) ===\n          'function',\n      24\n    ); // Invalid extent or geometry provided as `geometry`\n    if (Array.isArray(geometryOrExtent)) {\n      assert(!isEmpty(geometryOrExtent), 25); // Cannot fit empty extent provided as `geometry`\n      const extent = fromUserExtent(geometryOrExtent, this.getProjection());\n      geometry = polygonFromExtent(extent);\n    } else if (geometryOrExtent.getType() === 'Circle') {\n      const extent = fromUserExtent(\n        geometryOrExtent.getExtent(),\n        this.getProjection()\n      );\n      geometry = polygonFromExtent(extent);\n      geometry.rotate(this.getRotation(), getCenter(extent));\n    } else {\n      const userProjection = getUserProjection();\n      if (userProjection) {\n        geometry = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (\n          geometryOrExtent\n            .clone()\n            .transform(userProjection, this.getProjection())\n        );\n      } else {\n        geometry = geometryOrExtent;\n      }\n    }\n\n    this.fitInternal(geometry, options);\n  }\n\n  /**\n   * Calculate rotated extent\n   * @param {import(\"./geom/SimpleGeometry.js\").default} geometry The geometry.\n   * @return {import(\"./extent\").Extent} The rotated extent for the geometry.\n   */\n  rotatedExtentForGeometry(geometry) {\n    const rotation = this.getRotation();\n    const cosAngle = Math.cos(rotation);\n    const sinAngle = Math.sin(-rotation);\n    const coords = geometry.getFlatCoordinates();\n    const stride = geometry.getStride();\n    let minRotX = +Infinity;\n    let minRotY = +Infinity;\n    let maxRotX = -Infinity;\n    let maxRotY = -Infinity;\n    for (let i = 0, ii = coords.length; i < ii; i += stride) {\n      const rotX = coords[i] * cosAngle - coords[i + 1] * sinAngle;\n      const rotY = coords[i] * sinAngle + coords[i + 1] * cosAngle;\n      minRotX = Math.min(minRotX, rotX);\n      minRotY = Math.min(minRotY, rotY);\n      maxRotX = Math.max(maxRotX, rotX);\n      maxRotY = Math.max(maxRotY, rotY);\n    }\n    return [minRotX, minRotY, maxRotX, maxRotY];\n  }\n\n  /**\n   * @param {import(\"./geom/SimpleGeometry.js\").default} geometry The geometry.\n   * @param {FitOptions} [options] Options.\n   */\n  fitInternal(geometry, options) {\n    options = options || {};\n    let size = options.size;\n    if (!size) {\n      size = this.getViewportSizeMinusPadding_();\n    }\n    const padding =\n      options.padding !== undefined ? options.padding : [0, 0, 0, 0];\n    const nearest = options.nearest !== undefined ? options.nearest : false;\n    let minResolution;\n    if (options.minResolution !== undefined) {\n      minResolution = options.minResolution;\n    } else if (options.maxZoom !== undefined) {\n      minResolution = this.getResolutionForZoom(options.maxZoom);\n    } else {\n      minResolution = 0;\n    }\n\n    const rotatedExtent = this.rotatedExtentForGeometry(geometry);\n\n    // calculate resolution\n    let resolution = this.getResolutionForExtentInternal(rotatedExtent, [\n      size[0] - padding[1] - padding[3],\n      size[1] - padding[0] - padding[2],\n    ]);\n    resolution = isNaN(resolution)\n      ? minResolution\n      : Math.max(resolution, minResolution);\n    resolution = this.getConstrainedResolution(resolution, nearest ? 0 : 1);\n\n    // calculate center\n    const rotation = this.getRotation();\n    const sinAngle = Math.sin(rotation);\n    const cosAngle = Math.cos(rotation);\n    const centerRot = getCenter(rotatedExtent);\n    centerRot[0] += ((padding[1] - padding[3]) / 2) * resolution;\n    centerRot[1] += ((padding[0] - padding[2]) / 2) * resolution;\n    const centerX = centerRot[0] * cosAngle - centerRot[1] * sinAngle;\n    const centerY = centerRot[1] * cosAngle + centerRot[0] * sinAngle;\n    const center = this.getConstrainedCenter([centerX, centerY], resolution);\n    const callback = options.callback ? options.callback : VOID;\n\n    if (options.duration !== undefined) {\n      this.animateInternal(\n        {\n          resolution: resolution,\n          center: center,\n          duration: options.duration,\n          easing: options.easing,\n        },\n        callback\n      );\n    } else {\n      this.targetResolution_ = resolution;\n      this.targetCenter_ = center;\n      this.applyTargetState_(false, true);\n      animationCallback(callback, true);\n    }\n  }\n\n  /**\n   * Center on coordinate and view position.\n   * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"./size.js\").Size} size Box pixel size.\n   * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n   * @api\n   */\n  centerOn(coordinate, size, position) {\n    this.centerOnInternal(\n      fromUserCoordinate(coordinate, this.getProjection()),\n      size,\n      position\n    );\n  }\n\n  /**\n   * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"./size.js\").Size} size Box pixel size.\n   * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n   */\n  centerOnInternal(coordinate, size, position) {\n    this.setCenterInternal(\n      calculateCenterOn(\n        coordinate,\n        size,\n        position,\n        this.getResolution(),\n        this.getRotation()\n      )\n    );\n  }\n\n  /**\n   * Calculates the shift between map and viewport center.\n   * @param {import(\"./coordinate.js\").Coordinate} center Center.\n   * @param {number} resolution Resolution.\n   * @param {number} rotation Rotation.\n   * @param {import(\"./size.js\").Size} size Size.\n   * @return {Array<number>|undefined} Center shift.\n   */\n  calculateCenterShift(center, resolution, rotation, size) {\n    let centerShift;\n    const padding = this.padding_;\n    if (padding && center) {\n      const reducedSize = this.getViewportSizeMinusPadding_(-rotation);\n      const shiftedCenter = calculateCenterOn(\n        center,\n        size,\n        [reducedSize[0] / 2 + padding[3], reducedSize[1] / 2 + padding[0]],\n        resolution,\n        rotation\n      );\n      centerShift = [\n        center[0] - shiftedCenter[0],\n        center[1] - shiftedCenter[1],\n      ];\n    }\n    return centerShift;\n  }\n\n  /**\n   * @return {boolean} Is defined.\n   */\n  isDef() {\n    return !!this.getCenterInternal() && this.getResolution() !== undefined;\n  }\n\n  /**\n   * Adds relative coordinates to the center of the view. Any extent constraint will apply.\n   * @param {import(\"./coordinate.js\").Coordinate} deltaCoordinates Relative value to add.\n   * @api\n   */\n  adjustCenter(deltaCoordinates) {\n    const center = toUserCoordinate(this.targetCenter_, this.getProjection());\n    this.setCenter([\n      center[0] + deltaCoordinates[0],\n      center[1] + deltaCoordinates[1],\n    ]);\n  }\n\n  /**\n   * Adds relative coordinates to the center of the view. Any extent constraint will apply.\n   * @param {import(\"./coordinate.js\").Coordinate} deltaCoordinates Relative value to add.\n   */\n  adjustCenterInternal(deltaCoordinates) {\n    const center = this.targetCenter_;\n    this.setCenterInternal([\n      center[0] + deltaCoordinates[0],\n      center[1] + deltaCoordinates[1],\n    ]);\n  }\n\n  /**\n   * Multiply the view resolution by a ratio, optionally using an anchor. Any resolution\n   * constraint will apply.\n   * @param {number} ratio The ratio to apply on the view resolution.\n   * @param {import(\"./coordinate.js\").Coordinate} [anchor] The origin of the transformation.\n   * @api\n   */\n  adjustResolution(ratio, anchor) {\n    anchor = anchor && fromUserCoordinate(anchor, this.getProjection());\n    this.adjustResolutionInternal(ratio, anchor);\n  }\n\n  /**\n   * Multiply the view resolution by a ratio, optionally using an anchor. Any resolution\n   * constraint will apply.\n   * @param {number} ratio The ratio to apply on the view resolution.\n   * @param {import(\"./coordinate.js\").Coordinate} [anchor] The origin of the transformation.\n   */\n  adjustResolutionInternal(ratio, anchor) {\n    const isMoving = this.getAnimating() || this.getInteracting();\n    const size = this.getViewportSize_(this.getRotation());\n    const newResolution = this.constraints_.resolution(\n      this.targetResolution_ * ratio,\n      0,\n      size,\n      isMoving\n    );\n\n    if (anchor) {\n      this.targetCenter_ = this.calculateCenterZoom(newResolution, anchor);\n    }\n\n    this.targetResolution_ *= ratio;\n    this.applyTargetState_();\n  }\n\n  /**\n   * Adds a value to the view zoom level, optionally using an anchor. Any resolution\n   * constraint will apply.\n   * @param {number} delta Relative value to add to the zoom level.\n   * @param {import(\"./coordinate.js\").Coordinate} [anchor] The origin of the transformation.\n   * @api\n   */\n  adjustZoom(delta, anchor) {\n    this.adjustResolution(Math.pow(this.zoomFactor_, -delta), anchor);\n  }\n\n  /**\n   * Adds a value to the view rotation, optionally using an anchor. Any rotation\n   * constraint will apply.\n   * @param {number} delta Relative value to add to the zoom rotation, in radians.\n   * @param {import(\"./coordinate.js\").Coordinate} [anchor] The rotation center.\n   * @api\n   */\n  adjustRotation(delta, anchor) {\n    if (anchor) {\n      anchor = fromUserCoordinate(anchor, this.getProjection());\n    }\n    this.adjustRotationInternal(delta, anchor);\n  }\n\n  /**\n   * @param {number} delta Relative value to add to the zoom rotation, in radians.\n   * @param {import(\"./coordinate.js\").Coordinate} [anchor] The rotation center.\n   */\n  adjustRotationInternal(delta, anchor) {\n    const isMoving = this.getAnimating() || this.getInteracting();\n    const newRotation = this.constraints_.rotation(\n      this.targetRotation_ + delta,\n      isMoving\n    );\n    if (anchor) {\n      this.targetCenter_ = this.calculateCenterRotate(newRotation, anchor);\n    }\n    this.targetRotation_ += delta;\n    this.applyTargetState_();\n  }\n\n  /**\n   * Set the center of the current view. Any extent constraint will apply.\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} center The center of the view.\n   * @observable\n   * @api\n   */\n  setCenter(center) {\n    this.setCenterInternal(\n      center ? fromUserCoordinate(center, this.getProjection()) : center\n    );\n  }\n\n  /**\n   * Set the center using the view projection (not the user projection).\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} center The center of the view.\n   */\n  setCenterInternal(center) {\n    this.targetCenter_ = center;\n    this.applyTargetState_();\n  }\n\n  /**\n   * @param {import(\"./ViewHint.js\").default} hint Hint.\n   * @param {number} delta Delta.\n   * @return {number} New value.\n   */\n  setHint(hint, delta) {\n    this.hints_[hint] += delta;\n    this.changed();\n    return this.hints_[hint];\n  }\n\n  /**\n   * Set the resolution for this view. Any resolution constraint will apply.\n   * @param {number|undefined} resolution The resolution of the view.\n   * @observable\n   * @api\n   */\n  setResolution(resolution) {\n    this.targetResolution_ = resolution;\n    this.applyTargetState_();\n  }\n\n  /**\n   * Set the rotation for this view. Any rotation constraint will apply.\n   * @param {number} rotation The rotation of the view in radians.\n   * @observable\n   * @api\n   */\n  setRotation(rotation) {\n    this.targetRotation_ = rotation;\n    this.applyTargetState_();\n  }\n\n  /**\n   * Zoom to a specific zoom level. Any resolution constrain will apply.\n   * @param {number} zoom Zoom level.\n   * @api\n   */\n  setZoom(zoom) {\n    this.setResolution(this.getResolutionForZoom(zoom));\n  }\n\n  /**\n   * Recompute rotation/resolution/center based on target values.\n   * Note: we have to compute rotation first, then resolution and center considering that\n   * parameters can influence one another in case a view extent constraint is present.\n   * @param {boolean} [doNotCancelAnims] Do not cancel animations.\n   * @param {boolean} [forceMoving] Apply constraints as if the view is moving.\n   * @private\n   */\n  applyTargetState_(doNotCancelAnims, forceMoving) {\n    const isMoving =\n      this.getAnimating() || this.getInteracting() || forceMoving;\n\n    // compute rotation\n    const newRotation = this.constraints_.rotation(\n      this.targetRotation_,\n      isMoving\n    );\n    const size = this.getViewportSize_(newRotation);\n    const newResolution = this.constraints_.resolution(\n      this.targetResolution_,\n      0,\n      size,\n      isMoving\n    );\n    const newCenter = this.constraints_.center(\n      this.targetCenter_,\n      newResolution,\n      size,\n      isMoving,\n      this.calculateCenterShift(\n        this.targetCenter_,\n        newResolution,\n        newRotation,\n        size\n      )\n    );\n\n    if (this.get(ViewProperty.ROTATION) !== newRotation) {\n      this.set(ViewProperty.ROTATION, newRotation);\n    }\n    if (this.get(ViewProperty.RESOLUTION) !== newResolution) {\n      this.set(ViewProperty.RESOLUTION, newResolution);\n      this.set('zoom', this.getZoom(), true);\n    }\n    if (\n      !newCenter ||\n      !this.get(ViewProperty.CENTER) ||\n      !equals(this.get(ViewProperty.CENTER), newCenter)\n    ) {\n      this.set(ViewProperty.CENTER, newCenter);\n    }\n\n    if (this.getAnimating() && !doNotCancelAnims) {\n      this.cancelAnimations();\n    }\n    this.cancelAnchor_ = undefined;\n  }\n\n  /**\n   * If any constraints need to be applied, an animation will be triggered.\n   * This is typically done on interaction end.\n   * Note: calling this with a duration of 0 will apply the constrained values straight away,\n   * without animation.\n   * @param {number} [duration] The animation duration in ms.\n   * @param {number} [resolutionDirection] Which direction to zoom.\n   * @param {import(\"./coordinate.js\").Coordinate} [anchor] The origin of the transformation.\n   */\n  resolveConstraints(duration, resolutionDirection, anchor) {\n    duration = duration !== undefined ? duration : 200;\n    const direction = resolutionDirection || 0;\n\n    const newRotation = this.constraints_.rotation(this.targetRotation_);\n    const size = this.getViewportSize_(newRotation);\n    const newResolution = this.constraints_.resolution(\n      this.targetResolution_,\n      direction,\n      size\n    );\n    const newCenter = this.constraints_.center(\n      this.targetCenter_,\n      newResolution,\n      size,\n      false,\n      this.calculateCenterShift(\n        this.targetCenter_,\n        newResolution,\n        newRotation,\n        size\n      )\n    );\n\n    if (duration === 0 && !this.cancelAnchor_) {\n      this.targetResolution_ = newResolution;\n      this.targetRotation_ = newRotation;\n      this.targetCenter_ = newCenter;\n      this.applyTargetState_();\n      return;\n    }\n\n    anchor = anchor || (duration === 0 ? this.cancelAnchor_ : undefined);\n    this.cancelAnchor_ = undefined;\n\n    if (\n      this.getResolution() !== newResolution ||\n      this.getRotation() !== newRotation ||\n      !this.getCenterInternal() ||\n      !equals(this.getCenterInternal(), newCenter)\n    ) {\n      if (this.getAnimating()) {\n        this.cancelAnimations();\n      }\n\n      this.animateInternal({\n        rotation: newRotation,\n        center: newCenter,\n        resolution: newResolution,\n        duration: duration,\n        easing: easeOut,\n        anchor: anchor,\n      });\n    }\n  }\n\n  /**\n   * Notify the View that an interaction has started.\n   * The view state will be resolved to a stable one if needed\n   * (depending on its constraints).\n   * @api\n   */\n  beginInteraction() {\n    this.resolveConstraints(0);\n\n    this.setHint(ViewHint.INTERACTING, 1);\n  }\n\n  /**\n   * Notify the View that an interaction has ended. The view state will be resolved\n   * to a stable one if needed (depending on its constraints).\n   * @param {number} [duration] Animation duration in ms.\n   * @param {number} [resolutionDirection] Which direction to zoom.\n   * @param {import(\"./coordinate.js\").Coordinate} [anchor] The origin of the transformation.\n   * @api\n   */\n  endInteraction(duration, resolutionDirection, anchor) {\n    anchor = anchor && fromUserCoordinate(anchor, this.getProjection());\n    this.endInteractionInternal(duration, resolutionDirection, anchor);\n  }\n\n  /**\n   * Notify the View that an interaction has ended. The view state will be resolved\n   * to a stable one if needed (depending on its constraints).\n   * @param {number} [duration] Animation duration in ms.\n   * @param {number} [resolutionDirection] Which direction to zoom.\n   * @param {import(\"./coordinate.js\").Coordinate} [anchor] The origin of the transformation.\n   */\n  endInteractionInternal(duration, resolutionDirection, anchor) {\n    this.setHint(ViewHint.INTERACTING, -1);\n\n    this.resolveConstraints(duration, resolutionDirection, anchor);\n  }\n\n  /**\n   * Get a valid position for the view center according to the current constraints.\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} targetCenter Target center position.\n   * @param {number} [targetResolution] Target resolution. If not supplied, the current one will be used.\n   * This is useful to guess a valid center position at a different zoom level.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Valid center position.\n   */\n  getConstrainedCenter(targetCenter, targetResolution) {\n    const size = this.getViewportSize_(this.getRotation());\n    return this.constraints_.center(\n      targetCenter,\n      targetResolution || this.getResolution(),\n      size\n    );\n  }\n\n  /**\n   * Get a valid zoom level according to the current view constraints.\n   * @param {number|undefined} targetZoom Target zoom.\n   * @param {number} [direction=0] Indicate which resolution should be used\n   * by a renderer if the view resolution does not match any resolution of the tile source.\n   * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n   * will be used. If -1, the nearest higher resolution will be used.\n   * @return {number|undefined} Valid zoom level.\n   */\n  getConstrainedZoom(targetZoom, direction) {\n    const targetRes = this.getResolutionForZoom(targetZoom);\n    return this.getZoomForResolution(\n      this.getConstrainedResolution(targetRes, direction)\n    );\n  }\n\n  /**\n   * Get a valid resolution according to the current view constraints.\n   * @param {number|undefined} targetResolution Target resolution.\n   * @param {number} [direction=0] Indicate which resolution should be used\n   * by a renderer if the view resolution does not match any resolution of the tile source.\n   * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n   * will be used. If -1, the nearest higher resolution will be used.\n   * @return {number|undefined} Valid resolution.\n   */\n  getConstrainedResolution(targetResolution, direction) {\n    direction = direction || 0;\n    const size = this.getViewportSize_(this.getRotation());\n\n    return this.constraints_.resolution(targetResolution, direction, size);\n  }\n}\n\n/**\n * @param {Function} callback Callback.\n * @param {*} returnValue Return value.\n */\nfunction animationCallback(callback, returnValue) {\n  setTimeout(function () {\n    callback(returnValue);\n  }, 0);\n}\n\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./centerconstraint.js\").Type} The constraint.\n */\nexport function createCenterConstraint(options) {\n  if (options.extent !== undefined) {\n    const smooth =\n      options.smoothExtentConstraint !== undefined\n        ? options.smoothExtentConstraint\n        : true;\n    return createExtent(options.extent, options.constrainOnlyCenter, smooth);\n  }\n\n  const projection = createProjection(options.projection, 'EPSG:3857');\n  if (options.multiWorld !== true && projection.isGlobal()) {\n    const extent = projection.getExtent().slice();\n    extent[0] = -Infinity;\n    extent[2] = Infinity;\n    return createExtent(extent, false, false);\n  }\n\n  return centerNone;\n}\n\n/**\n * @param {ViewOptions} options View options.\n * @return {{constraint: import(\"./resolutionconstraint.js\").Type, maxResolution: number,\n *     minResolution: number, minZoom: number, zoomFactor: number}} The constraint.\n */\nexport function createResolutionConstraint(options) {\n  let resolutionConstraint;\n  let maxResolution;\n  let minResolution;\n\n  // TODO: move these to be ol constants\n  // see https://github.com/openlayers/openlayers/issues/2076\n  const defaultMaxZoom = 28;\n  const defaultZoomFactor = 2;\n\n  let minZoom =\n    options.minZoom !== undefined ? options.minZoom : DEFAULT_MIN_ZOOM;\n\n  let maxZoom =\n    options.maxZoom !== undefined ? options.maxZoom : defaultMaxZoom;\n\n  const zoomFactor =\n    options.zoomFactor !== undefined ? options.zoomFactor : defaultZoomFactor;\n\n  const multiWorld =\n    options.multiWorld !== undefined ? options.multiWorld : false;\n\n  const smooth =\n    options.smoothResolutionConstraint !== undefined\n      ? options.smoothResolutionConstraint\n      : true;\n\n  const showFullExtent =\n    options.showFullExtent !== undefined ? options.showFullExtent : false;\n\n  const projection = createProjection(options.projection, 'EPSG:3857');\n  const projExtent = projection.getExtent();\n  let constrainOnlyCenter = options.constrainOnlyCenter;\n  let extent = options.extent;\n  if (!multiWorld && !extent && projection.isGlobal()) {\n    constrainOnlyCenter = false;\n    extent = projExtent;\n  }\n\n  if (options.resolutions !== undefined) {\n    const resolutions = options.resolutions;\n    maxResolution = resolutions[minZoom];\n    minResolution =\n      resolutions[maxZoom] !== undefined\n        ? resolutions[maxZoom]\n        : resolutions[resolutions.length - 1];\n\n    if (options.constrainResolution) {\n      resolutionConstraint = createSnapToResolutions(\n        resolutions,\n        smooth,\n        !constrainOnlyCenter && extent,\n        showFullExtent\n      );\n    } else {\n      resolutionConstraint = createMinMaxResolution(\n        maxResolution,\n        minResolution,\n        smooth,\n        !constrainOnlyCenter && extent,\n        showFullExtent\n      );\n    }\n  } else {\n    // calculate the default min and max resolution\n    const size = !projExtent\n      ? // use an extent that can fit the whole world if need be\n        (360 * METERS_PER_UNIT.degrees) / projection.getMetersPerUnit()\n      : Math.max(getWidth(projExtent), getHeight(projExtent));\n\n    const defaultMaxResolution =\n      size / DEFAULT_TILE_SIZE / Math.pow(defaultZoomFactor, DEFAULT_MIN_ZOOM);\n\n    const defaultMinResolution =\n      defaultMaxResolution /\n      Math.pow(defaultZoomFactor, defaultMaxZoom - DEFAULT_MIN_ZOOM);\n\n    // user provided maxResolution takes precedence\n    maxResolution = options.maxResolution;\n    if (maxResolution !== undefined) {\n      minZoom = 0;\n    } else {\n      maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom);\n    }\n\n    // user provided minResolution takes precedence\n    minResolution = options.minResolution;\n    if (minResolution === undefined) {\n      if (options.maxZoom !== undefined) {\n        if (options.maxResolution !== undefined) {\n          minResolution = maxResolution / Math.pow(zoomFactor, maxZoom);\n        } else {\n          minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom);\n        }\n      } else {\n        minResolution = defaultMinResolution;\n      }\n    }\n\n    // given discrete zoom levels, minResolution may be different than provided\n    maxZoom =\n      minZoom +\n      Math.floor(\n        Math.log(maxResolution / minResolution) / Math.log(zoomFactor)\n      );\n    minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom);\n\n    if (options.constrainResolution) {\n      resolutionConstraint = createSnapToPower(\n        zoomFactor,\n        maxResolution,\n        minResolution,\n        smooth,\n        !constrainOnlyCenter && extent,\n        showFullExtent\n      );\n    } else {\n      resolutionConstraint = createMinMaxResolution(\n        maxResolution,\n        minResolution,\n        smooth,\n        !constrainOnlyCenter && extent,\n        showFullExtent\n      );\n    }\n  }\n  return {\n    constraint: resolutionConstraint,\n    maxResolution: maxResolution,\n    minResolution: minResolution,\n    minZoom: minZoom,\n    zoomFactor: zoomFactor,\n  };\n}\n\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./rotationconstraint.js\").Type} Rotation constraint.\n */\nexport function createRotationConstraint(options) {\n  const enableRotation =\n    options.enableRotation !== undefined ? options.enableRotation : true;\n  if (enableRotation) {\n    const constrainRotation = options.constrainRotation;\n    if (constrainRotation === undefined || constrainRotation === true) {\n      return createSnapToZero();\n    } else if (constrainRotation === false) {\n      return rotationNone;\n    } else if (typeof constrainRotation === 'number') {\n      return createSnapToN(constrainRotation);\n    } else {\n      return rotationNone;\n    }\n  } else {\n    return disable;\n  }\n}\n\n/**\n * Determine if an animation involves no view change.\n * @param {Animation} animation The animation.\n * @return {boolean} The animation involves no view change.\n */\nexport function isNoopAnimation(animation) {\n  if (animation.sourceCenter && animation.targetCenter) {\n    if (!coordinatesEqual(animation.sourceCenter, animation.targetCenter)) {\n      return false;\n    }\n  }\n  if (animation.sourceResolution !== animation.targetResolution) {\n    return false;\n  }\n  if (animation.sourceRotation !== animation.targetRotation) {\n    return false;\n  }\n  return true;\n}\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {import(\"./size.js\").Size} size Box pixel size.\n * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @return {import(\"./coordinate.js\").Coordinate} Shifted center.\n */\nfunction calculateCenterOn(coordinate, size, position, resolution, rotation) {\n  // calculate rotated position\n  const cosAngle = Math.cos(-rotation);\n  let sinAngle = Math.sin(-rotation);\n  let rotX = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n  let rotY = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n  rotX += (size[0] / 2 - position[0]) * resolution;\n  rotY += (position[1] - size[1] / 2) * resolution;\n\n  // go back to original angle\n  sinAngle = -sinAngle; // go back to original rotation\n  const centerX = rotX * cosAngle - rotY * sinAngle;\n  const centerY = rotY * cosAngle + rotX * sinAngle;\n\n  return [centerX, centerY];\n}\n\nexport default View;\n","/**\n * @module ol/ViewHint\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  ANIMATING: 0,\n  INTERACTING: 1,\n};\n","/**\n * @module ol/ViewProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  CENTER: 'center',\n  RESOLUTION: 'resolution',\n  ROTATION: 'rotation',\n};\n","/**\n * @module ol/proj/Units\n */\n\n/**\n * @typedef {'radians' | 'degrees' | 'ft' | 'm' | 'pixels' | 'tile-pixels' | 'us-ft'} Units\n * Projection units.\n */\n\n/**\n * See http://duff.ess.washington.edu/data/raster/drg/docs/geotiff.txt\n * @type {Object<number, Units>}\n */\nconst unitByCode = {\n  '9001': 'm',\n  '9002': 'ft',\n  '9003': 'us-ft',\n  '9101': 'radians',\n  '9102': 'degrees',\n};\n\n/**\n * @param {number} code Unit code.\n * @return {Units} Units.\n */\nexport function fromCode(code) {\n  return unitByCode[code];\n}\n\n/**\n * @typedef {Object} MetersPerUnitLookup\n * @property {number} radians Radians\n * @property {number} degrees Degrees\n * @property {number} ft  Feet\n * @property {number} m Meters\n * @property {number} us-ft US feet\n */\n\n/**\n * Meters per unit lookup table.\n * @const\n * @type {MetersPerUnitLookup}\n * @api\n */\nexport const METERS_PER_UNIT = {\n  // use the radius of the Normal sphere\n  'radians': 6370997 / (2 * Math.PI),\n  'degrees': (2 * Math.PI * 6370997) / 360,\n  'ft': 0.3048,\n  'm': 1,\n  'us-ft': 1200 / 3937,\n};\n","/**\n * @module ol/proj/Projection\n */\nimport {METERS_PER_UNIT} from './Units.js';\n\n/**\n * @typedef {Object} Options\n * @property {string} code The SRS identifier code, e.g. `EPSG:4326`.\n * @property {import(\"./Units.js\").Units} [units] Units. Required unless a\n * proj4 projection is defined for `code`.\n * @property {import(\"../extent.js\").Extent} [extent] The validity extent for the SRS.\n * @property {string} [axisOrientation='enu'] The axis orientation as specified in Proj4.\n * @property {boolean} [global=false] Whether the projection is valid for the whole globe.\n * @property {number} [metersPerUnit] The meters per unit for the SRS.\n * If not provided, the `units` are used to get the meters per unit from the {@link METERS_PER_UNIT}\n * lookup table.\n * @property {import(\"../extent.js\").Extent} [worldExtent] The world extent for the SRS.\n * @property {function(number, import(\"../coordinate.js\").Coordinate):number} [getPointResolution]\n * Function to determine resolution at a point. The function is called with a\n * `number` view resolution and a {@link module:ol/coordinate~Coordinate} as arguments, and returns\n * the `number` resolution in projection units at the passed coordinate. If this is `undefined`,\n * the default {@link module:ol/proj.getPointResolution} function will be used.\n */\n\n/**\n * @classdesc\n * Projection definition class. One of these is created for each projection\n * supported in the application and stored in the {@link module:ol/proj} namespace.\n * You can use these in applications, but this is not required, as API params\n * and options use {@link module:ol/proj~ProjectionLike} which means the simple string\n * code will suffice.\n *\n * You can use {@link module:ol/proj.get} to retrieve the object for a particular\n * projection.\n *\n * The library includes definitions for `EPSG:4326` and `EPSG:3857`, together\n * with the following aliases:\n * * `EPSG:4326`: CRS:84, urn:ogc:def:crs:EPSG:6.6:4326,\n *     urn:ogc:def:crs:OGC:1.3:CRS84, urn:ogc:def:crs:OGC:2:84,\n *     http://www.opengis.net/gml/srs/epsg.xml#4326,\n *     urn:x-ogc:def:crs:EPSG:4326\n * * `EPSG:3857`: EPSG:102100, EPSG:102113, EPSG:900913,\n *     urn:ogc:def:crs:EPSG:6.18:3:3857,\n *     http://www.opengis.net/gml/srs/epsg.xml#3857\n *\n * If you use [proj4js](https://github.com/proj4js/proj4js), aliases can\n * be added using `proj4.defs()`. After all required projection definitions are\n * added, call the {@link module:ol/proj/proj4.register} function.\n *\n * @api\n */\nclass Projection {\n  /**\n   * @param {Options} options Projection options.\n   */\n  constructor(options) {\n    /**\n     * @private\n     * @type {string}\n     */\n    this.code_ = options.code;\n\n    /**\n     * Units of projected coordinates. When set to `TILE_PIXELS`, a\n     * `this.extent_` and `this.worldExtent_` must be configured properly for each\n     * tile.\n     * @private\n     * @type {import(\"./Units.js\").Units}\n     */\n    this.units_ = /** @type {import(\"./Units.js\").Units} */ (options.units);\n\n    /**\n     * Validity extent of the projection in projected coordinates. For projections\n     * with `TILE_PIXELS` units, this is the extent of the tile in\n     * tile pixel space.\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.extent_ = options.extent !== undefined ? options.extent : null;\n\n    /**\n     * Extent of the world in EPSG:4326. For projections with\n     * `TILE_PIXELS` units, this is the extent of the tile in\n     * projected coordinate space.\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.worldExtent_ =\n      options.worldExtent !== undefined ? options.worldExtent : null;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.axisOrientation_ =\n      options.axisOrientation !== undefined ? options.axisOrientation : 'enu';\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.global_ = options.global !== undefined ? options.global : false;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.canWrapX_ = !!(this.global_ && this.extent_);\n\n    /**\n     * @private\n     * @type {function(number, import(\"../coordinate.js\").Coordinate):number|undefined}\n     */\n    this.getPointResolutionFunc_ = options.getPointResolution;\n\n    /**\n     * @private\n     * @type {import(\"../tilegrid/TileGrid.js\").default}\n     */\n    this.defaultTileGrid_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.metersPerUnit_ = options.metersPerUnit;\n  }\n\n  /**\n   * @return {boolean} The projection is suitable for wrapping the x-axis\n   */\n  canWrapX() {\n    return this.canWrapX_;\n  }\n\n  /**\n   * Get the code for this projection, e.g. 'EPSG:4326'.\n   * @return {string} Code.\n   * @api\n   */\n  getCode() {\n    return this.code_;\n  }\n\n  /**\n   * Get the validity extent for this projection.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getExtent() {\n    return this.extent_;\n  }\n\n  /**\n   * Get the units of this projection.\n   * @return {import(\"./Units.js\").Units} Units.\n   * @api\n   */\n  getUnits() {\n    return this.units_;\n  }\n\n  /**\n   * Get the amount of meters per unit of this projection.  If the projection is\n   * not configured with `metersPerUnit` or a units identifier, the return is\n   * `undefined`.\n   * @return {number|undefined} Meters.\n   * @api\n   */\n  getMetersPerUnit() {\n    return this.metersPerUnit_ || METERS_PER_UNIT[this.units_];\n  }\n\n  /**\n   * Get the world extent for this projection.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getWorldExtent() {\n    return this.worldExtent_;\n  }\n\n  /**\n   * Get the axis orientation of this projection.\n   * Example values are:\n   * enu - the default easting, northing, elevation.\n   * neu - northing, easting, up - useful for \"lat/long\" geographic coordinates,\n   *     or south orientated transverse mercator.\n   * wnu - westing, northing, up - some planetary coordinate systems have\n   *     \"west positive\" coordinate systems\n   * @return {string} Axis orientation.\n   * @api\n   */\n  getAxisOrientation() {\n    return this.axisOrientation_;\n  }\n\n  /**\n   * Is this projection a global projection which spans the whole world?\n   * @return {boolean} Whether the projection is global.\n   * @api\n   */\n  isGlobal() {\n    return this.global_;\n  }\n\n  /**\n   * Set if the projection is a global projection which spans the whole world\n   * @param {boolean} global Whether the projection is global.\n   * @api\n   */\n  setGlobal(global) {\n    this.global_ = global;\n    this.canWrapX_ = !!(global && this.extent_);\n  }\n\n  /**\n   * @return {import(\"../tilegrid/TileGrid.js\").default} The default tile grid.\n   */\n  getDefaultTileGrid() {\n    return this.defaultTileGrid_;\n  }\n\n  /**\n   * @param {import(\"../tilegrid/TileGrid.js\").default} tileGrid The default tile grid.\n   */\n  setDefaultTileGrid(tileGrid) {\n    this.defaultTileGrid_ = tileGrid;\n  }\n\n  /**\n   * Set the validity extent for this projection.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @api\n   */\n  setExtent(extent) {\n    this.extent_ = extent;\n    this.canWrapX_ = !!(this.global_ && extent);\n  }\n\n  /**\n   * Set the world extent for this projection.\n   * @param {import(\"../extent.js\").Extent} worldExtent World extent\n   *     [minlon, minlat, maxlon, maxlat].\n   * @api\n   */\n  setWorldExtent(worldExtent) {\n    this.worldExtent_ = worldExtent;\n  }\n\n  /**\n   * Set the getPointResolution function (see {@link module:ol/proj.getPointResolution}\n   * for this projection.\n   * @param {function(number, import(\"../coordinate.js\").Coordinate):number} func Function\n   * @api\n   */\n  setGetPointResolution(func) {\n    this.getPointResolutionFunc_ = func;\n  }\n\n  /**\n   * Get the custom point resolution function for this projection (if set).\n   * @return {function(number, import(\"../coordinate.js\").Coordinate):number|undefined} The custom point\n   * resolution function (if set).\n   */\n  getPointResolutionFunc() {\n    return this.getPointResolutionFunc_;\n  }\n}\n\nexport default Projection;\n","/**\n * @module ol/proj/epsg3857\n */\nimport Projection from './Projection.js';\n\n/**\n * Radius of WGS84 sphere\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n/**\n * @const\n * @type {number}\n */\nexport const HALF_SIZE = Math.PI * RADIUS;\n\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const EXTENT = [-HALF_SIZE, -HALF_SIZE, HALF_SIZE, HALF_SIZE];\n\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const WORLD_EXTENT = [-180, -85, 180, 85];\n\n/**\n * Maximum safe value in y direction\n * @const\n * @type {number}\n */\nexport const MAX_SAFE_Y = RADIUS * Math.log(Math.tan(Math.PI / 2));\n\n/**\n * @classdesc\n * Projection object for web/spherical Mercator (EPSG:3857).\n */\nclass EPSG3857Projection extends Projection {\n  /**\n   * @param {string} code Code.\n   */\n  constructor(code) {\n    super({\n      code: code,\n      units: 'm',\n      extent: EXTENT,\n      global: true,\n      worldExtent: WORLD_EXTENT,\n      getPointResolution: function (resolution, point) {\n        return resolution / Math.cosh(point[1] / RADIUS);\n      },\n    });\n  }\n}\n\n/**\n * Projections equal to EPSG:3857.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport const PROJECTIONS = [\n  new EPSG3857Projection('EPSG:3857'),\n  new EPSG3857Projection('EPSG:102100'),\n  new EPSG3857Projection('EPSG:102113'),\n  new EPSG3857Projection('EPSG:900913'),\n  new EPSG3857Projection('http://www.opengis.net/def/crs/EPSG/0/3857'),\n  new EPSG3857Projection('http://www.opengis.net/gml/srs/epsg.xml#3857'),\n];\n\n/**\n * Transformation from EPSG:4326 to EPSG:3857.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>} [output] Output array of coordinate values.\n * @param {number} [dimension] Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function fromEPSG4326(input, output, dimension) {\n  const length = input.length;\n  dimension = dimension > 1 ? dimension : 2;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = (HALF_SIZE * input[i]) / 180;\n    let y = RADIUS * Math.log(Math.tan((Math.PI * (+input[i + 1] + 90)) / 360));\n    if (y > MAX_SAFE_Y) {\n      y = MAX_SAFE_Y;\n    } else if (y < -MAX_SAFE_Y) {\n      y = -MAX_SAFE_Y;\n    }\n    output[i + 1] = y;\n  }\n  return output;\n}\n\n/**\n * Transformation from EPSG:3857 to EPSG:4326.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>} [output] Output array of coordinate values.\n * @param {number} [dimension] Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function toEPSG4326(input, output, dimension) {\n  const length = input.length;\n  dimension = dimension > 1 ? dimension : 2;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = (180 * input[i]) / HALF_SIZE;\n    output[i + 1] =\n      (360 * Math.atan(Math.exp(input[i + 1] / RADIUS))) / Math.PI - 90;\n  }\n  return output;\n}\n","/**\n * @module ol/proj/epsg4326\n */\nimport Projection from './Projection.js';\n\n/**\n * Semi-major radius of the WGS84 ellipsoid.\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n/**\n * Extent of the EPSG:4326 projection which is the whole world.\n *\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const EXTENT = [-180, -90, 180, 90];\n\n/**\n * @const\n * @type {number}\n */\nexport const METERS_PER_UNIT = (Math.PI * RADIUS) / 180;\n\n/**\n * @classdesc\n * Projection object for WGS84 geographic coordinates (EPSG:4326).\n *\n * Note that OpenLayers does not strictly comply with the EPSG definition.\n * The EPSG registry defines 4326 as a CRS for Latitude,Longitude (y,x).\n * OpenLayers treats EPSG:4326 as a pseudo-projection, with x,y coordinates.\n */\nclass EPSG4326Projection extends Projection {\n  /**\n   * @param {string} code Code.\n   * @param {string} [axisOrientation] Axis orientation.\n   */\n  constructor(code, axisOrientation) {\n    super({\n      code: code,\n      units: 'degrees',\n      extent: EXTENT,\n      axisOrientation: axisOrientation,\n      global: true,\n      metersPerUnit: METERS_PER_UNIT,\n      worldExtent: EXTENT,\n    });\n  }\n}\n\n/**\n * Projections equal to EPSG:4326.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport const PROJECTIONS = [\n  new EPSG4326Projection('CRS:84'),\n  new EPSG4326Projection('EPSG:4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:1.3:CRS84'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:2:84'),\n  new EPSG4326Projection('http://www.opengis.net/def/crs/OGC/1.3/CRS84'),\n  new EPSG4326Projection('http://www.opengis.net/gml/srs/epsg.xml#4326', 'neu'),\n  new EPSG4326Projection('http://www.opengis.net/def/crs/EPSG/0/4326', 'neu'),\n];\n","/**\n * @module ol/proj/projections\n */\n\n/**\n * @type {Object<string, import(\"./Projection.js\").default>}\n */\nlet cache = {};\n\n/**\n * Clear the projections cache.\n */\nexport function clear() {\n  cache = {};\n}\n\n/**\n * Get a cached projection by code.\n * @param {string} code The code for the projection.\n * @return {import(\"./Projection.js\").default} The projection (if cached).\n */\nexport function get(code) {\n  return (\n    cache[code] ||\n    cache[code.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\\w+)$/, 'EPSG:$3')] ||\n    null\n  );\n}\n\n/**\n * Add a projection to the cache.\n * @param {string} code The projection code.\n * @param {import(\"./Projection.js\").default} projection The projection to cache.\n */\nexport function add(code, projection) {\n  cache[code] = projection;\n}\n","/**\n * @module ol/proj/transforms\n */\nimport {isEmpty} from '../obj.js';\n\n/**\n * @private\n * @type {!Object<string, Object<string, import(\"../proj.js\").TransformFunction>>}\n */\nlet transforms = {};\n\n/**\n * Clear the transform cache.\n */\nexport function clear() {\n  transforms = {};\n}\n\n/**\n * Registers a conversion function to convert coordinates from the source\n * projection to the destination projection.\n *\n * @param {import(\"./Projection.js\").default} source Source.\n * @param {import(\"./Projection.js\").default} destination Destination.\n * @param {import(\"../proj.js\").TransformFunction} transformFn Transform.\n */\nexport function add(source, destination, transformFn) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  if (!(sourceCode in transforms)) {\n    transforms[sourceCode] = {};\n  }\n  transforms[sourceCode][destinationCode] = transformFn;\n}\n\n/**\n * Unregisters the conversion function to convert coordinates from the source\n * projection to the destination projection.  This method is used to clean up\n * cached transforms during testing.\n *\n * @param {import(\"./Projection.js\").default} source Source projection.\n * @param {import(\"./Projection.js\").default} destination Destination projection.\n * @return {import(\"../proj.js\").TransformFunction} transformFn The unregistered transform.\n */\nexport function remove(source, destination) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  const transform = transforms[sourceCode][destinationCode];\n  delete transforms[sourceCode][destinationCode];\n  if (isEmpty(transforms[sourceCode])) {\n    delete transforms[sourceCode];\n  }\n  return transform;\n}\n\n/**\n * Get a transform given a source code and a destination code.\n * @param {string} sourceCode The code for the source projection.\n * @param {string} destinationCode The code for the destination projection.\n * @return {import(\"../proj.js\").TransformFunction|undefined} The transform function (if found).\n */\nexport function get(sourceCode, destinationCode) {\n  let transform;\n  if (sourceCode in transforms && destinationCode in transforms[sourceCode]) {\n    transform = transforms[sourceCode][destinationCode];\n  }\n  return transform;\n}\n","/**\n * @module ol/sphere\n */\nimport {toDegrees, toRadians} from './math.js';\n\n/**\n * Object literal with options for the {@link getLength} or {@link getArea}\n * functions.\n * @typedef {Object} SphereMetricOptions\n * @property {import(\"./proj.js\").ProjectionLike} [projection='EPSG:3857']\n * Projection of the  geometry.  By default, the geometry is assumed to be in\n * Web Mercator.\n * @property {number} [radius=6371008.8] Sphere radius.  By default, the\n * [mean Earth radius](https://en.wikipedia.org/wiki/Earth_radius#Mean_radius)\n * for the WGS84 ellipsoid is used.\n */\n\n/**\n * The mean Earth radius (1/3 * (2a + b)) for the WGS84 ellipsoid.\n * https://en.wikipedia.org/wiki/Earth_radius#Mean_radius\n * @type {number}\n */\nexport const DEFAULT_RADIUS = 6371008.8;\n\n/**\n * Get the great circle distance (in meters) between two geographic coordinates.\n * @param {Array} c1 Starting coordinate.\n * @param {Array} c2 Ending coordinate.\n * @param {number} [radius] The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {number} The great circle distance between the points (in meters).\n * @api\n */\nexport function getDistance(c1, c2, radius) {\n  radius = radius || DEFAULT_RADIUS;\n  const lat1 = toRadians(c1[1]);\n  const lat2 = toRadians(c2[1]);\n  const deltaLatBy2 = (lat2 - lat1) / 2;\n  const deltaLonBy2 = toRadians(c2[0] - c1[0]) / 2;\n  const a =\n    Math.sin(deltaLatBy2) * Math.sin(deltaLatBy2) +\n    Math.sin(deltaLonBy2) *\n      Math.sin(deltaLonBy2) *\n      Math.cos(lat1) *\n      Math.cos(lat2);\n  return 2 * radius * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n}\n\n/**\n * Get the cumulative great circle length of linestring coordinates (geographic).\n * @param {Array} coordinates Linestring coordinates.\n * @param {number} radius The sphere radius to use.\n * @return {number} The length (in meters).\n */\nfunction getLengthInternal(coordinates, radius) {\n  let length = 0;\n  for (let i = 0, ii = coordinates.length; i < ii - 1; ++i) {\n    length += getDistance(coordinates[i], coordinates[i + 1], radius);\n  }\n  return length;\n}\n\n/**\n * Get the spherical length of a geometry.  This length is the sum of the\n * great circle distances between coordinates.  For polygons, the length is\n * the sum of all rings.  For points, the length is zero.  For multi-part\n * geometries, the length is the sum of the length of each part.\n * @param {import(\"./geom/Geometry.js\").default} geometry A geometry.\n * @param {SphereMetricOptions} [options] Options for the\n * length calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n * You can change this by providing a `projection` option.\n * @return {number} The spherical length (in meters).\n * @api\n */\nexport function getLength(geometry, options) {\n  options = options || {};\n  const radius = options.radius || DEFAULT_RADIUS;\n  const projection = options.projection || 'EPSG:3857';\n  const type = geometry.getType();\n  if (type !== 'GeometryCollection') {\n    geometry = geometry.clone().transform(projection, 'EPSG:4326');\n  }\n  let length = 0;\n  let coordinates, coords, i, ii, j, jj;\n  switch (type) {\n    case 'Point':\n    case 'MultiPoint': {\n      break;\n    }\n    case 'LineString':\n    case 'LinearRing': {\n      coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (\n        geometry\n      ).getCoordinates();\n      length = getLengthInternal(coordinates, radius);\n      break;\n    }\n    case 'MultiLineString':\n    case 'Polygon': {\n      coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (\n        geometry\n      ).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        length += getLengthInternal(coordinates[i], radius);\n      }\n      break;\n    }\n    case 'MultiPolygon': {\n      coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (\n        geometry\n      ).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        coords = coordinates[i];\n        for (j = 0, jj = coords.length; j < jj; ++j) {\n          length += getLengthInternal(coords[j], radius);\n        }\n      }\n      break;\n    }\n    case 'GeometryCollection': {\n      const geometries =\n        /** @type {import(\"./geom/GeometryCollection.js\").default} */ (\n          geometry\n        ).getGeometries();\n      for (i = 0, ii = geometries.length; i < ii; ++i) {\n        length += getLength(geometries[i], options);\n      }\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return length;\n}\n\n/**\n * Returns the spherical area for a list of coordinates.\n *\n * [Reference](https://trs.jpl.nasa.gov/handle/2014/40409)\n * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n * Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n * Laboratory, Pasadena, CA, June 2007\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates List of coordinates of a linear\n * ring. If the ring is oriented clockwise, the area will be positive,\n * otherwise it will be negative.\n * @param {number} radius The sphere radius.\n * @return {number} Area (in square meters).\n */\nfunction getAreaInternal(coordinates, radius) {\n  let area = 0;\n  const len = coordinates.length;\n  let x1 = coordinates[len - 1][0];\n  let y1 = coordinates[len - 1][1];\n  for (let i = 0; i < len; i++) {\n    const x2 = coordinates[i][0];\n    const y2 = coordinates[i][1];\n    area +=\n      toRadians(x2 - x1) *\n      (2 + Math.sin(toRadians(y1)) + Math.sin(toRadians(y2)));\n    x1 = x2;\n    y1 = y2;\n  }\n  return (area * radius * radius) / 2.0;\n}\n\n/**\n * Get the spherical area of a geometry.  This is the area (in meters) assuming\n * that polygon edges are segments of great circles on a sphere.\n * @param {import(\"./geom/Geometry.js\").default} geometry A geometry.\n * @param {SphereMetricOptions} [options] Options for the area\n *     calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n *     You can change this by providing a `projection` option.\n * @return {number} The spherical area (in square meters).\n * @api\n */\nexport function getArea(geometry, options) {\n  options = options || {};\n  const radius = options.radius || DEFAULT_RADIUS;\n  const projection = options.projection || 'EPSG:3857';\n  const type = geometry.getType();\n  if (type !== 'GeometryCollection') {\n    geometry = geometry.clone().transform(projection, 'EPSG:4326');\n  }\n  let area = 0;\n  let coordinates, coords, i, ii, j, jj;\n  switch (type) {\n    case 'Point':\n    case 'MultiPoint':\n    case 'LineString':\n    case 'MultiLineString':\n    case 'LinearRing': {\n      break;\n    }\n    case 'Polygon': {\n      coordinates = /** @type {import(\"./geom/Polygon.js\").default} */ (\n        geometry\n      ).getCoordinates();\n      area = Math.abs(getAreaInternal(coordinates[0], radius));\n      for (i = 1, ii = coordinates.length; i < ii; ++i) {\n        area -= Math.abs(getAreaInternal(coordinates[i], radius));\n      }\n      break;\n    }\n    case 'MultiPolygon': {\n      coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (\n        geometry\n      ).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        coords = coordinates[i];\n        area += Math.abs(getAreaInternal(coords[0], radius));\n        for (j = 1, jj = coords.length; j < jj; ++j) {\n          area -= Math.abs(getAreaInternal(coords[j], radius));\n        }\n      }\n      break;\n    }\n    case 'GeometryCollection': {\n      const geometries =\n        /** @type {import(\"./geom/GeometryCollection.js\").default} */ (\n          geometry\n        ).getGeometries();\n      for (i = 0, ii = geometries.length; i < ii; ++i) {\n        area += getArea(geometries[i], options);\n      }\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return area;\n}\n\n/**\n * Returns the coordinate at the given distance and bearing from `c1`.\n *\n * @param {import(\"./coordinate.js\").Coordinate} c1 The origin point (`[lon, lat]` in degrees).\n * @param {number} distance The great-circle distance between the origin\n *     point and the target point.\n * @param {number} bearing The bearing (in radians).\n * @param {number} [radius] The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {import(\"./coordinate.js\").Coordinate} The target point.\n */\nexport function offset(c1, distance, bearing, radius) {\n  radius = radius || DEFAULT_RADIUS;\n  const lat1 = toRadians(c1[1]);\n  const lon1 = toRadians(c1[0]);\n  const dByR = distance / radius;\n  const lat = Math.asin(\n    Math.sin(lat1) * Math.cos(dByR) +\n      Math.cos(lat1) * Math.sin(dByR) * Math.cos(bearing)\n  );\n  const lon =\n    lon1 +\n    Math.atan2(\n      Math.sin(bearing) * Math.sin(dByR) * Math.cos(lat1),\n      Math.cos(dByR) - Math.sin(lat1) * Math.sin(lat)\n    );\n  return [toDegrees(lon), toDegrees(lat)];\n}\n","/**\n * @module ol/proj\n */\n\n/**\n * The ol/proj module stores:\n * * a list of {@link module:ol/proj/Projection~Projection}\n * objects, one for each projection supported by the application\n * * a list of transform functions needed to convert coordinates in one projection\n * into another.\n *\n * The static functions are the methods used to maintain these.\n * Each transform function can handle not only simple coordinate pairs, but also\n * large arrays of coordinates such as vector geometries.\n *\n * When loaded, the library adds projection objects for EPSG:4326 (WGS84\n * geographic coordinates) and EPSG:3857 (Web or Spherical Mercator, as used\n * for example by Bing Maps or OpenStreetMap), together with the relevant\n * transform functions.\n *\n * Additional transforms may be added by using the http://proj4js.org/\n * library (version 2.2 or later). You can use the full build supplied by\n * Proj4js, or create a custom build to support those projections you need; see\n * the Proj4js website for how to do this. You also need the Proj4js definitions\n * for the required projections. These definitions can be obtained from\n * https://epsg.io/, and are a JS function, so can be loaded in a script\n * tag (as in the examples) or pasted into your application.\n *\n * After all required projection definitions are added to proj4's registry (by\n * using `proj4.defs()`), simply call `register(proj4)` from the `ol/proj/proj4`\n * package. Existing transforms are not changed by this function. See\n * examples/wms-image-custom-proj for an example of this.\n *\n * Additional projection definitions can be registered with `proj4.defs()` any\n * time. Just make sure to call `register(proj4)` again; for example, with user-supplied data where you don't\n * know in advance what projections are needed, you can initially load minimal\n * support and then load whichever are requested.\n *\n * Note that Proj4js does not support projection extents. If you want to add\n * one for creating default tile grids, you can add it after the Projection\n * object has been created with `setExtent`, for example,\n * `get('EPSG:1234').setExtent(extent)`.\n *\n * In addition to Proj4js support, any transform functions can be added with\n * {@link module:ol/proj.addCoordinateTransforms}. To use this, you must first create\n * a {@link module:ol/proj/Projection~Projection} object for the new projection and add it with\n * {@link module:ol/proj.addProjection}. You can then add the forward and inverse\n * functions with {@link module:ol/proj.addCoordinateTransforms}. See\n * examples/wms-custom-proj for an example of this.\n *\n * Note that if no transforms are needed and you only need to define the\n * projection, just add a {@link module:ol/proj/Projection~Projection} with\n * {@link module:ol/proj.addProjection}. See examples/wms-no-proj for an example of\n * this.\n */\nimport Projection from './proj/Projection.js';\nimport {\n  PROJECTIONS as EPSG3857_PROJECTIONS,\n  fromEPSG4326,\n  toEPSG4326,\n} from './proj/epsg3857.js';\nimport {PROJECTIONS as EPSG4326_PROJECTIONS} from './proj/epsg4326.js';\nimport {METERS_PER_UNIT} from './proj/Units.js';\nimport {\n  add as addProj,\n  clear as clearProj,\n  get as getProj,\n} from './proj/projections.js';\nimport {\n  add as addTransformFunc,\n  clear as clearTransformFuncs,\n  get as getTransformFunc,\n} from './proj/transforms.js';\nimport {applyTransform, getWidth} from './extent.js';\nimport {clamp, modulo} from './math.js';\nimport {equals, getWorldsAway} from './coordinate.js';\nimport {getDistance} from './sphere.js';\n\n/**\n * A projection as {@link module:ol/proj/Projection~Projection}, SRS identifier\n * string or undefined.\n * @typedef {Projection|string|undefined} ProjectionLike\n * @api\n */\n\n/**\n * A transform function accepts an array of input coordinate values, an optional\n * output array, and an optional dimension (default should be 2).  The function\n * transforms the input coordinate values, populates the output array, and\n * returns the output array.\n *\n * @typedef {function(Array<number>, Array<number>=, number=): Array<number>} TransformFunction\n * @api\n */\n\nexport {METERS_PER_UNIT};\n\nexport {Projection};\n\nlet showCoordinateWarning = true;\n\n/**\n * @param {boolean} [disable = true] Disable console info about `useGeographic()`\n */\nexport function disableCoordinateWarning(disable) {\n  const hide = disable === undefined ? true : disable;\n  showCoordinateWarning = !hide;\n}\n\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>} [output] Output array of coordinate values.\n * @param {number} [dimension] Dimension.\n * @return {Array<number>} Output coordinate array (new array, same coordinate\n *     values).\n */\nexport function cloneTransform(input, output, dimension) {\n  if (output !== undefined) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      output[i] = input[i];\n    }\n    output = output;\n  } else {\n    output = input.slice();\n  }\n  return output;\n}\n\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>} [output] Output array of coordinate values.\n * @param {number} [dimension] Dimension.\n * @return {Array<number>} Input coordinate array (same array as input).\n */\nexport function identityTransform(input, output, dimension) {\n  if (output !== undefined && input !== output) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      output[i] = input[i];\n    }\n    input = output;\n  }\n  return input;\n}\n\n/**\n * Add a Projection object to the list of supported projections that can be\n * looked up by their code.\n *\n * @param {Projection} projection Projection instance.\n * @api\n */\nexport function addProjection(projection) {\n  addProj(projection.getCode(), projection);\n  addTransformFunc(projection, projection, cloneTransform);\n}\n\n/**\n * @param {Array<Projection>} projections Projections.\n */\nexport function addProjections(projections) {\n  projections.forEach(addProjection);\n}\n\n/**\n * Fetches a Projection object for the code specified.\n *\n * @param {ProjectionLike} projectionLike Either a code string which is\n *     a combination of authority and identifier such as \"EPSG:4326\", or an\n *     existing projection object, or undefined.\n * @return {Projection|null} Projection object, or null if not in list.\n * @api\n */\nexport function get(projectionLike) {\n  return typeof projectionLike === 'string'\n    ? getProj(/** @type {string} */ (projectionLike))\n    : /** @type {Projection} */ (projectionLike) || null;\n}\n\n/**\n * Get the resolution of the point in degrees or distance units.\n * For projections with degrees as the unit this will simply return the\n * provided resolution. For other projections the point resolution is\n * by default estimated by transforming the `point` pixel to EPSG:4326,\n * measuring its width and height on the normal sphere,\n * and taking the average of the width and height.\n * A custom function can be provided for a specific projection, either\n * by setting the `getPointResolution` option in the\n * {@link module:ol/proj/Projection~Projection} constructor or by using\n * {@link module:ol/proj/Projection~Projection#setGetPointResolution} to change an existing\n * projection object.\n * @param {ProjectionLike} projection The projection.\n * @param {number} resolution Nominal resolution in projection units.\n * @param {import(\"./coordinate.js\").Coordinate} point Point to find adjusted resolution at.\n * @param {import(\"./proj/Units.js\").Units} [units] Units to get the point resolution in.\n * Default is the projection's units.\n * @return {number} Point resolution.\n * @api\n */\nexport function getPointResolution(projection, resolution, point, units) {\n  projection = get(projection);\n  let pointResolution;\n  const getter = projection.getPointResolutionFunc();\n  if (getter) {\n    pointResolution = getter(resolution, point);\n    if (units && units !== projection.getUnits()) {\n      const metersPerUnit = projection.getMetersPerUnit();\n      if (metersPerUnit) {\n        pointResolution =\n          (pointResolution * metersPerUnit) / METERS_PER_UNIT[units];\n      }\n    }\n  } else {\n    const projUnits = projection.getUnits();\n    if ((projUnits == 'degrees' && !units) || units == 'degrees') {\n      pointResolution = resolution;\n    } else {\n      // Estimate point resolution by transforming the center pixel to EPSG:4326,\n      // measuring its width and height on the normal sphere, and taking the\n      // average of the width and height.\n      const toEPSG4326 = getTransformFromProjections(\n        projection,\n        get('EPSG:4326')\n      );\n      if (toEPSG4326 === identityTransform && projUnits !== 'degrees') {\n        // no transform is available\n        pointResolution = resolution * projection.getMetersPerUnit();\n      } else {\n        let vertices = [\n          point[0] - resolution / 2,\n          point[1],\n          point[0] + resolution / 2,\n          point[1],\n          point[0],\n          point[1] - resolution / 2,\n          point[0],\n          point[1] + resolution / 2,\n        ];\n        vertices = toEPSG4326(vertices, vertices, 2);\n        const width = getDistance(vertices.slice(0, 2), vertices.slice(2, 4));\n        const height = getDistance(vertices.slice(4, 6), vertices.slice(6, 8));\n        pointResolution = (width + height) / 2;\n      }\n      const metersPerUnit = units\n        ? METERS_PER_UNIT[units]\n        : projection.getMetersPerUnit();\n      if (metersPerUnit !== undefined) {\n        pointResolution /= metersPerUnit;\n      }\n    }\n  }\n  return pointResolution;\n}\n\n/**\n * Registers transformation functions that don't alter coordinates. Those allow\n * to transform between projections with equal meaning.\n *\n * @param {Array<Projection>} projections Projections.\n * @api\n */\nexport function addEquivalentProjections(projections) {\n  addProjections(projections);\n  projections.forEach(function (source) {\n    projections.forEach(function (destination) {\n      if (source !== destination) {\n        addTransformFunc(source, destination, cloneTransform);\n      }\n    });\n  });\n}\n\n/**\n * Registers transformation functions to convert coordinates in any projection\n * in projection1 to any projection in projection2.\n *\n * @param {Array<Projection>} projections1 Projections with equal\n *     meaning.\n * @param {Array<Projection>} projections2 Projections with equal\n *     meaning.\n * @param {TransformFunction} forwardTransform Transformation from any\n *   projection in projection1 to any projection in projection2.\n * @param {TransformFunction} inverseTransform Transform from any projection\n *   in projection2 to any projection in projection1..\n */\nexport function addEquivalentTransforms(\n  projections1,\n  projections2,\n  forwardTransform,\n  inverseTransform\n) {\n  projections1.forEach(function (projection1) {\n    projections2.forEach(function (projection2) {\n      addTransformFunc(projection1, projection2, forwardTransform);\n      addTransformFunc(projection2, projection1, inverseTransform);\n    });\n  });\n}\n\n/**\n * Clear all cached projections and transforms.\n */\nexport function clearAllProjections() {\n  clearProj();\n  clearTransformFuncs();\n}\n\n/**\n * @param {Projection|string|undefined} projection Projection.\n * @param {string} defaultCode Default code.\n * @return {Projection} Projection.\n */\nexport function createProjection(projection, defaultCode) {\n  if (!projection) {\n    return get(defaultCode);\n  } else if (typeof projection === 'string') {\n    return get(projection);\n  } else {\n    return /** @type {Projection} */ (projection);\n  }\n}\n\n/**\n * Creates a {@link module:ol/proj~TransformFunction} from a simple 2D coordinate transform\n * function.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} coordTransform Coordinate\n *     transform.\n * @return {TransformFunction} Transform function.\n */\nexport function createTransformFromCoordinateTransform(coordTransform) {\n  return (\n    /**\n     * @param {Array<number>} input Input.\n     * @param {Array<number>} [output] Output.\n     * @param {number} [dimension] Dimension.\n     * @return {Array<number>} Output.\n     */\n    function (input, output, dimension) {\n      const length = input.length;\n      dimension = dimension !== undefined ? dimension : 2;\n      output = output !== undefined ? output : new Array(length);\n      for (let i = 0; i < length; i += dimension) {\n        const point = coordTransform(input.slice(i, i + dimension));\n        const pointLength = point.length;\n        for (let j = 0, jj = dimension; j < jj; ++j) {\n          output[i + j] = j >= pointLength ? input[i + j] : point[j];\n        }\n      }\n      return output;\n    }\n  );\n}\n\n/**\n * Registers coordinate transform functions to convert coordinates between the\n * source projection and the destination projection.\n * The forward and inverse functions convert coordinate pairs; this function\n * converts these into the functions used internally which also handle\n * extents and coordinate arrays.\n *\n * @param {ProjectionLike} source Source projection.\n * @param {ProjectionLike} destination Destination projection.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} forward The forward transform\n *     function (that is, from the source projection to the destination\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} inverse The inverse transform\n *     function (that is, from the destination projection to the source\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}. If the transform function can only\n *     transform less dimensions than the input coordinate, it is supposeed to return a coordinate\n *     with only the length it can transform. The other dimensions will be taken unchanged from the\n *     source.\n * @api\n */\nexport function addCoordinateTransforms(source, destination, forward, inverse) {\n  const sourceProj = get(source);\n  const destProj = get(destination);\n  addTransformFunc(\n    sourceProj,\n    destProj,\n    createTransformFromCoordinateTransform(forward)\n  );\n  addTransformFunc(\n    destProj,\n    sourceProj,\n    createTransformFromCoordinateTransform(inverse)\n  );\n}\n\n/**\n * Transforms a coordinate from longitude/latitude to a different projection.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate as longitude and latitude, i.e.\n *     an array with longitude as 1st and latitude as 2nd element.\n * @param {ProjectionLike} [projection] Target projection. The\n *     default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate projected to the target projection.\n * @api\n */\nexport function fromLonLat(coordinate, projection) {\n  disableCoordinateWarning();\n  return transform(\n    coordinate,\n    'EPSG:4326',\n    projection !== undefined ? projection : 'EPSG:3857'\n  );\n}\n\n/**\n * Transforms a coordinate to longitude/latitude.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Projected coordinate.\n * @param {ProjectionLike} [projection] Projection of the coordinate.\n *     The default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate as longitude and latitude, i.e. an array\n *     with longitude as 1st and latitude as 2nd element.\n * @api\n */\nexport function toLonLat(coordinate, projection) {\n  const lonLat = transform(\n    coordinate,\n    projection !== undefined ? projection : 'EPSG:3857',\n    'EPSG:4326'\n  );\n  const lon = lonLat[0];\n  if (lon < -180 || lon > 180) {\n    lonLat[0] = modulo(lon + 180, 360) - 180;\n  }\n  return lonLat;\n}\n\n/**\n * Checks if two projections are the same, that is every coordinate in one\n * projection does represent the same geographic point as the same coordinate in\n * the other projection.\n *\n * @param {Projection} projection1 Projection 1.\n * @param {Projection} projection2 Projection 2.\n * @return {boolean} Equivalent.\n * @api\n */\nexport function equivalent(projection1, projection2) {\n  if (projection1 === projection2) {\n    return true;\n  }\n  const equalUnits = projection1.getUnits() === projection2.getUnits();\n  if (projection1.getCode() === projection2.getCode()) {\n    return equalUnits;\n  } else {\n    const transformFunc = getTransformFromProjections(projection1, projection2);\n    return transformFunc === cloneTransform && equalUnits;\n  }\n}\n\n/**\n * Searches in the list of transform functions for the function for converting\n * coordinates from the source projection to the destination projection.\n *\n * @param {Projection} sourceProjection Source Projection object.\n * @param {Projection} destinationProjection Destination Projection\n *     object.\n * @return {TransformFunction} Transform function.\n */\nexport function getTransformFromProjections(\n  sourceProjection,\n  destinationProjection\n) {\n  const sourceCode = sourceProjection.getCode();\n  const destinationCode = destinationProjection.getCode();\n  let transformFunc = getTransformFunc(sourceCode, destinationCode);\n  if (!transformFunc) {\n    transformFunc = identityTransform;\n  }\n  return transformFunc;\n}\n\n/**\n * Given the projection-like objects, searches for a transformation\n * function to convert a coordinates array from the source projection to the\n * destination projection.\n *\n * @param {ProjectionLike} source Source.\n * @param {ProjectionLike} destination Destination.\n * @return {TransformFunction} Transform function.\n * @api\n */\nexport function getTransform(source, destination) {\n  const sourceProjection = get(source);\n  const destinationProjection = get(destination);\n  return getTransformFromProjections(sourceProjection, destinationProjection);\n}\n\n/**\n * Transforms a coordinate from source projection to destination projection.\n * This returns a new coordinate (and does not modify the original).\n *\n * See {@link module:ol/proj.transformExtent} for extent transformation.\n * See the transform method of {@link module:ol/geom/Geometry~Geometry} and its\n * subclasses for geometry transforms.\n *\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n * @api\n */\nexport function transform(coordinate, source, destination) {\n  const transformFunc = getTransform(source, destination);\n  return transformFunc(coordinate, undefined, coordinate.length);\n}\n\n/**\n * Transforms an extent from source projection to destination projection.  This\n * returns a new extent (and does not modify the original).\n *\n * @param {import(\"./extent.js\").Extent} extent The extent to transform.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @param {number} [stops] Number of stops per side used for the transform.\n * By default only the corners are used.\n * @return {import(\"./extent.js\").Extent} The transformed extent.\n * @api\n */\nexport function transformExtent(extent, source, destination, stops) {\n  const transformFunc = getTransform(source, destination);\n  return applyTransform(extent, transformFunc, undefined, stops);\n}\n\n/**\n * Transforms the given point to the destination projection.\n *\n * @param {import(\"./coordinate.js\").Coordinate} point Point.\n * @param {Projection} sourceProjection Source projection.\n * @param {Projection} destinationProjection Destination projection.\n * @return {import(\"./coordinate.js\").Coordinate} Point.\n */\nexport function transformWithProjections(\n  point,\n  sourceProjection,\n  destinationProjection\n) {\n  const transformFunc = getTransformFromProjections(\n    sourceProjection,\n    destinationProjection\n  );\n  return transformFunc(point);\n}\n\n/**\n * @type {Projection|null}\n */\nlet userProjection = null;\n\n/**\n * Set the projection for coordinates supplied from and returned by API methods.\n * This includes all API methods except for those interacting with tile grids.\n * @param {ProjectionLike} projection The user projection.\n * @api\n */\nexport function setUserProjection(projection) {\n  userProjection = get(projection);\n}\n\n/**\n * Clear the user projection if set.\n * @api\n */\nexport function clearUserProjection() {\n  userProjection = null;\n}\n\n/**\n * Get the projection for coordinates supplied from and returned by API methods.\n * Note that this method is not yet a part of the stable API.  Support for user\n * projections is not yet complete and should be considered experimental.\n * @return {Projection|null} The user projection (or null if not set).\n * @api\n */\nexport function getUserProjection() {\n  return userProjection;\n}\n\n/**\n * Use geographic coordinates (WGS-84 datum) in API methods.  This includes all API\n * methods except for those interacting with tile grids.\n * @api\n */\nexport function useGeographic() {\n  setUserProjection('EPSG:4326');\n}\n\n/**\n * Return a coordinate transformed into the user projection.  If no user projection\n * is set, the original coordinate is returned.\n * @param {Array<number>} coordinate Input coordinate.\n * @param {ProjectionLike} sourceProjection The input coordinate projection.\n * @return {Array<number>} The input coordinate in the user projection.\n */\nexport function toUserCoordinate(coordinate, sourceProjection) {\n  if (!userProjection) {\n    return coordinate;\n  }\n  return transform(coordinate, sourceProjection, userProjection);\n}\n\n/**\n * Return a coordinate transformed from the user projection.  If no user projection\n * is set, the original coordinate is returned.\n * @param {Array<number>} coordinate Input coordinate.\n * @param {ProjectionLike} destProjection The destination projection.\n * @return {Array<number>} The input coordinate transformed.\n */\nexport function fromUserCoordinate(coordinate, destProjection) {\n  if (!userProjection) {\n    if (\n      showCoordinateWarning &&\n      !equals(coordinate, [0, 0]) &&\n      coordinate[0] >= -180 &&\n      coordinate[0] <= 180 &&\n      coordinate[1] >= -90 &&\n      coordinate[1] <= 90\n    ) {\n      showCoordinateWarning = false;\n      // eslint-disable-next-line no-console\n      console.warn(\n        'Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.'\n      );\n    }\n    return coordinate;\n  }\n  return transform(coordinate, userProjection, destProjection);\n}\n\n/**\n * Return an extent transformed into the user projection.  If no user projection\n * is set, the original extent is returned.\n * @param {import(\"./extent.js\").Extent} extent Input extent.\n * @param {ProjectionLike} sourceProjection The input extent projection.\n * @return {import(\"./extent.js\").Extent} The input extent in the user projection.\n */\nexport function toUserExtent(extent, sourceProjection) {\n  if (!userProjection) {\n    return extent;\n  }\n  return transformExtent(extent, sourceProjection, userProjection);\n}\n\n/**\n * Return an extent transformed from the user projection.  If no user projection\n * is set, the original extent is returned.\n * @param {import(\"./extent.js\").Extent} extent Input extent.\n * @param {ProjectionLike} destProjection The destination projection.\n * @return {import(\"./extent.js\").Extent} The input extent transformed.\n */\nexport function fromUserExtent(extent, destProjection) {\n  if (!userProjection) {\n    return extent;\n  }\n  return transformExtent(extent, userProjection, destProjection);\n}\n\n/**\n * Return the resolution in user projection units per pixel. If no user projection\n * is set, or source or user projection are missing units, the original resolution\n * is returned.\n * @param {number} resolution Resolution in input projection units per pixel.\n * @param {ProjectionLike} sourceProjection The input projection.\n * @return {number} Resolution in user projection units per pixel.\n */\nexport function toUserResolution(resolution, sourceProjection) {\n  if (!userProjection) {\n    return resolution;\n  }\n  const sourceUnits = get(sourceProjection).getUnits();\n  const userUnits = userProjection.getUnits();\n  return sourceUnits && userUnits\n    ? (resolution * METERS_PER_UNIT[sourceUnits]) / METERS_PER_UNIT[userUnits]\n    : resolution;\n}\n\n/**\n * Return the resolution in user projection units per pixel. If no user projection\n * is set, or source or user projection are missing units, the original resolution\n * is returned.\n * @param {number} resolution Resolution in user projection units per pixel.\n * @param {ProjectionLike} destProjection The destination projection.\n * @return {number} Resolution in destination projection units per pixel.\n */\nexport function fromUserResolution(resolution, destProjection) {\n  if (!userProjection) {\n    return resolution;\n  }\n  const sourceUnits = get(destProjection).getUnits();\n  const userUnits = userProjection.getUnits();\n  return sourceUnits && userUnits\n    ? (resolution * METERS_PER_UNIT[userUnits]) / METERS_PER_UNIT[sourceUnits]\n    : resolution;\n}\n\n/**\n * Creates a safe coordinate transform function from a coordinate transform function.\n * \"Safe\" means that it can handle wrapping of x-coordinates for global projections,\n * and that coordinates exceeding the source projection validity extent's range will be\n * clamped to the validity range.\n * @param {Projection} sourceProj Source projection.\n * @param {Projection} destProj Destination projection.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} transform Transform function (source to destiation).\n * @return {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} Safe transform function (source to destiation).\n */\nexport function createSafeCoordinateTransform(sourceProj, destProj, transform) {\n  return function (coord) {\n    let transformed, worldsAway;\n    if (sourceProj.canWrapX()) {\n      const sourceExtent = sourceProj.getExtent();\n      const sourceExtentWidth = getWidth(sourceExtent);\n      coord = coord.slice(0);\n      worldsAway = getWorldsAway(coord, sourceProj, sourceExtentWidth);\n      if (worldsAway) {\n        // Move x to the real world\n        coord[0] = coord[0] - worldsAway * sourceExtentWidth;\n      }\n      coord[0] = clamp(coord[0], sourceExtent[0], sourceExtent[2]);\n      coord[1] = clamp(coord[1], sourceExtent[1], sourceExtent[3]);\n      transformed = transform(coord);\n    } else {\n      transformed = transform(coord);\n    }\n    if (worldsAway && destProj.canWrapX()) {\n      // Move transformed coordinate back to the offset world\n      transformed[0] += worldsAway * getWidth(destProj.getExtent());\n    }\n    return transformed;\n  };\n}\n\n/**\n * Add transforms to and from EPSG:4326 and EPSG:3857.  This function is called\n * by when this module is executed and should only need to be called again after\n * `clearAllProjections()` is called (e.g. in tests).\n */\nexport function addCommon() {\n  // Add transformations that don't alter coordinates to convert within set of\n  // projections with equal meaning.\n  addEquivalentProjections(EPSG3857_PROJECTIONS);\n  addEquivalentProjections(EPSG4326_PROJECTIONS);\n  // Add transformations to convert EPSG:4326 like coordinates to EPSG:3857 like\n  // coordinates and back.\n  addEquivalentTransforms(\n    EPSG4326_PROJECTIONS,\n    EPSG3857_PROJECTIONS,\n    fromEPSG4326,\n    toEPSG4326\n  );\n}\n\naddCommon();\n","/**\n * @module ol/centerconstraint\n */\nimport {clamp} from './math.js';\n\n/**\n * @typedef {function((import(\"./coordinate.js\").Coordinate|undefined), number, import(\"./size.js\").Size, boolean=, Array<number>=): (import(\"./coordinate.js\").Coordinate|undefined)} Type\n */\n\n/**\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {boolean} onlyCenter If true, the constraint will only apply to the view center.\n * @param {boolean} smooth If true, the view will be able to go slightly out of the given extent\n * (only during interaction and animation).\n * @return {Type} The constraint.\n */\nexport function createExtent(extent, onlyCenter, smooth) {\n  return (\n    /**\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} center Center.\n     * @param {number|undefined} resolution Resolution.\n     * @param {import(\"./size.js\").Size} size Viewport size; unused if `onlyCenter` was specified.\n     * @param {boolean} [isMoving] True if an interaction or animation is in progress.\n     * @param {Array<number>} [centerShift] Shift between map center and viewport center.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n     */\n    function (center, resolution, size, isMoving, centerShift) {\n      if (!center) {\n        return undefined;\n      }\n      if (!resolution && !onlyCenter) {\n        return center;\n      }\n      const viewWidth = onlyCenter ? 0 : size[0] * resolution;\n      const viewHeight = onlyCenter ? 0 : size[1] * resolution;\n      const shiftX = centerShift ? centerShift[0] : 0;\n      const shiftY = centerShift ? centerShift[1] : 0;\n      let minX = extent[0] + viewWidth / 2 + shiftX;\n      let maxX = extent[2] - viewWidth / 2 + shiftX;\n      let minY = extent[1] + viewHeight / 2 + shiftY;\n      let maxY = extent[3] - viewHeight / 2 + shiftY;\n\n      // note: when zooming out of bounds, min and max values for x and y may\n      // end up inverted (min > max); this has to be accounted for\n      if (minX > maxX) {\n        minX = (maxX + minX) / 2;\n        maxX = minX;\n      }\n      if (minY > maxY) {\n        minY = (maxY + minY) / 2;\n        maxY = minY;\n      }\n\n      let x = clamp(center[0], minX, maxX);\n      let y = clamp(center[1], minY, maxY);\n\n      // during an interaction, allow some overscroll\n      if (isMoving && smooth && resolution) {\n        const ratio = 30 * resolution;\n        x +=\n          -ratio * Math.log(1 + Math.max(0, minX - center[0]) / ratio) +\n          ratio * Math.log(1 + Math.max(0, center[0] - maxX) / ratio);\n        y +=\n          -ratio * Math.log(1 + Math.max(0, minY - center[1]) / ratio) +\n          ratio * Math.log(1 + Math.max(0, center[1] - maxY) / ratio);\n      }\n\n      return [x, y];\n    }\n  );\n}\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} [center] Center.\n * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n */\nexport function none(center) {\n  return center;\n}\n","/**\n * @module ol/resolutionconstraint\n */\nimport {clamp} from './math.js';\nimport {getHeight, getWidth} from './extent.js';\nimport {linearFindNearest} from './array.js';\n\n/**\n * @typedef {function((number|undefined), number, import(\"./size.js\").Size, boolean=): (number|undefined)} Type\n */\n\n/**\n * Returns a modified resolution taking into account the viewport size and maximum\n * allowed extent.\n * @param {number} resolution Resolution\n * @param {import(\"./extent.js\").Extent} maxExtent Maximum allowed extent.\n * @param {import(\"./size.js\").Size} viewportSize Viewport size.\n * @param {boolean} showFullExtent Whether to show the full extent.\n * @return {number} Capped resolution.\n */\nfunction getViewportClampedResolution(\n  resolution,\n  maxExtent,\n  viewportSize,\n  showFullExtent\n) {\n  const xResolution = getWidth(maxExtent) / viewportSize[0];\n  const yResolution = getHeight(maxExtent) / viewportSize[1];\n\n  if (showFullExtent) {\n    return Math.min(resolution, Math.max(xResolution, yResolution));\n  }\n  return Math.min(resolution, Math.min(xResolution, yResolution));\n}\n\n/**\n * Returns a modified resolution to be between maxResolution and minResolution while\n * still allowing the value to be slightly out of bounds.\n * Note: the computation is based on the logarithm function (ln):\n *  - at 1, ln(x) is 0\n *  - above 1, ln(x) keeps increasing but at a much slower pace than x\n * The final result is clamped to prevent getting too far away from bounds.\n * @param {number} resolution Resolution.\n * @param {number} maxResolution Max resolution.\n * @param {number} minResolution Min resolution.\n * @return {number} Smoothed resolution.\n */\nfunction getSmoothClampedResolution(resolution, maxResolution, minResolution) {\n  let result = Math.min(resolution, maxResolution);\n  const ratio = 50;\n\n  result *=\n    Math.log(1 + ratio * Math.max(0, resolution / maxResolution - 1)) / ratio +\n    1;\n  if (minResolution) {\n    result = Math.max(result, minResolution);\n    result /=\n      Math.log(1 + ratio * Math.max(0, minResolution / resolution - 1)) /\n        ratio +\n      1;\n  }\n  return clamp(result, minResolution / 2, maxResolution * 2);\n}\n\n/**\n * @param {Array<number>} resolutions Resolutions.\n * @param {boolean} [smooth] If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent} [maxExtent] Maximum allowed extent.\n * @param {boolean} [showFullExtent] If true, allows us to show the full extent. Default: false.\n * @return {Type} Zoom function.\n */\nexport function createSnapToResolutions(\n  resolutions,\n  smooth,\n  maxExtent,\n  showFullExtent\n) {\n  smooth = smooth !== undefined ? smooth : true;\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean} [isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function (resolution, direction, size, isMoving) {\n      if (resolution !== undefined) {\n        const maxResolution = resolutions[0];\n        const minResolution = resolutions[resolutions.length - 1];\n        const cappedMaxRes = maxExtent\n          ? getViewportClampedResolution(\n              maxResolution,\n              maxExtent,\n              size,\n              showFullExtent\n            )\n          : maxResolution;\n\n        // during interacting or animating, allow intermediary values\n        if (isMoving) {\n          if (!smooth) {\n            return clamp(resolution, minResolution, cappedMaxRes);\n          }\n          return getSmoothClampedResolution(\n            resolution,\n            cappedMaxRes,\n            minResolution\n          );\n        }\n\n        const capped = Math.min(cappedMaxRes, resolution);\n        const z = Math.floor(linearFindNearest(resolutions, capped, direction));\n        if (resolutions[z] > cappedMaxRes && z < resolutions.length - 1) {\n          return resolutions[z + 1];\n        }\n        return resolutions[z];\n      } else {\n        return undefined;\n      }\n    }\n  );\n}\n\n/**\n * @param {number} power Power.\n * @param {number} maxResolution Maximum resolution.\n * @param {number} [minResolution] Minimum resolution.\n * @param {boolean} [smooth] If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent} [maxExtent] Maximum allowed extent.\n * @param {boolean} [showFullExtent] If true, allows us to show the full extent. Default: false.\n * @return {Type} Zoom function.\n */\nexport function createSnapToPower(\n  power,\n  maxResolution,\n  minResolution,\n  smooth,\n  maxExtent,\n  showFullExtent\n) {\n  smooth = smooth !== undefined ? smooth : true;\n  minResolution = minResolution !== undefined ? minResolution : 0;\n\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean} [isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function (resolution, direction, size, isMoving) {\n      if (resolution !== undefined) {\n        const cappedMaxRes = maxExtent\n          ? getViewportClampedResolution(\n              maxResolution,\n              maxExtent,\n              size,\n              showFullExtent\n            )\n          : maxResolution;\n\n        // during interacting or animating, allow intermediary values\n        if (isMoving) {\n          if (!smooth) {\n            return clamp(resolution, minResolution, cappedMaxRes);\n          }\n          return getSmoothClampedResolution(\n            resolution,\n            cappedMaxRes,\n            minResolution\n          );\n        }\n\n        const tolerance = 1e-9;\n        const minZoomLevel = Math.ceil(\n          Math.log(maxResolution / cappedMaxRes) / Math.log(power) - tolerance\n        );\n        const offset = -direction * (0.5 - tolerance) + 0.5;\n        const capped = Math.min(cappedMaxRes, resolution);\n        const cappedZoomLevel = Math.floor(\n          Math.log(maxResolution / capped) / Math.log(power) + offset\n        );\n        const zoomLevel = Math.max(minZoomLevel, cappedZoomLevel);\n        const newResolution = maxResolution / Math.pow(power, zoomLevel);\n        return clamp(newResolution, minResolution, cappedMaxRes);\n      } else {\n        return undefined;\n      }\n    }\n  );\n}\n\n/**\n * @param {number} maxResolution Max resolution.\n * @param {number} minResolution Min resolution.\n * @param {boolean} [smooth] If true, the view will be able to slightly exceed resolution limits. Default: true.\n * @param {import(\"./extent.js\").Extent} [maxExtent] Maximum allowed extent.\n * @param {boolean} [showFullExtent] If true, allows us to show the full extent. Default: false.\n * @return {Type} Zoom function.\n */\nexport function createMinMaxResolution(\n  maxResolution,\n  minResolution,\n  smooth,\n  maxExtent,\n  showFullExtent\n) {\n  smooth = smooth !== undefined ? smooth : true;\n\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} direction Direction.\n     * @param {import(\"./size.js\").Size} size Viewport size.\n     * @param {boolean} [isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Resolution.\n     */\n    function (resolution, direction, size, isMoving) {\n      if (resolution !== undefined) {\n        const cappedMaxRes = maxExtent\n          ? getViewportClampedResolution(\n              maxResolution,\n              maxExtent,\n              size,\n              showFullExtent\n            )\n          : maxResolution;\n\n        if (!smooth || !isMoving) {\n          return clamp(resolution, minResolution, cappedMaxRes);\n        }\n        return getSmoothClampedResolution(\n          resolution,\n          cappedMaxRes,\n          minResolution\n        );\n      } else {\n        return undefined;\n      }\n    }\n  );\n}\n","/**\n * @module ol/rotationconstraint\n */\nimport {toRadians} from './math.js';\n\n/**\n * @typedef {function((number|undefined), boolean=): (number|undefined)} Type\n */\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @return {number|undefined} Rotation.\n */\nexport function disable(rotation) {\n  if (rotation !== undefined) {\n    return 0;\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @return {number|undefined} Rotation.\n */\nexport function none(rotation) {\n  if (rotation !== undefined) {\n    return rotation;\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * @param {number} n N.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToN(n) {\n  const theta = (2 * Math.PI) / n;\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {boolean} [isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Rotation.\n     */\n    function (rotation, isMoving) {\n      if (isMoving) {\n        return rotation;\n      }\n\n      if (rotation !== undefined) {\n        rotation = Math.floor(rotation / theta + 0.5) * theta;\n        return rotation;\n      } else {\n        return undefined;\n      }\n    }\n  );\n}\n\n/**\n * @param {number} [tolerance] Tolerance.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToZero(tolerance) {\n  tolerance = tolerance || toRadians(5);\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {boolean} [isMoving] True if an interaction or animation is in progress.\n     * @return {number|undefined} Rotation.\n     */\n    function (rotation, isMoving) {\n      if (isMoving) {\n        return rotation;\n      }\n\n      if (rotation !== undefined) {\n        if (Math.abs(rotation) <= tolerance) {\n          return 0;\n        } else {\n          return rotation;\n        }\n      } else {\n        return undefined;\n      }\n    }\n  );\n}\n","/**\n * @module ol/easing\n */\n\n/**\n * Start slow and speed up.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeIn(t) {\n  return Math.pow(t, 3);\n}\n\n/**\n * Start fast and slow down.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeOut(t) {\n  return 1 - easeIn(1 - t);\n}\n\n/**\n * Start slow, speed up, and then slow down again.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function inAndOut(t) {\n  return 3 * t * t - 2 * t * t * t;\n}\n\n/**\n * Maintain a constant speed over time.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function linear(t) {\n  return t;\n}\n\n/**\n * Start slow, speed up, and at the very end slow down again.  This has the\n * same general behavior as {@link module:ol/easing.inAndOut}, but the final\n * slowdown is delayed.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function upAndDown(t) {\n  if (t < 0.5) {\n    return inAndOut(2 * t);\n  } else {\n    return 1 - inAndOut(2 * (t - 0.5));\n  }\n}\n","/**\n * @module ol/geom/Geometry\n */\nimport BaseObject from '../Object.js';\nimport {abstract} from '../util.js';\nimport {\n  compose as composeTransform,\n  create as createTransform,\n} from '../transform.js';\nimport {\n  createEmpty,\n  createOrUpdateEmpty,\n  getHeight,\n  returnOrUpdate,\n} from '../extent.js';\nimport {get as getProjection, getTransform} from '../proj.js';\nimport {memoizeOne} from '../functions.js';\nimport {transform2D} from './flat/transform.js';\n\n/**\n * @typedef {'XY' | 'XYZ' | 'XYM' | 'XYZM'} GeometryLayout\n * The coordinate layout for geometries, indicating whether a 3rd or 4th z ('Z')\n * or measure ('M') coordinate is available.\n */\n\n/**\n * @typedef {'Point' | 'LineString' | 'LinearRing' | 'Polygon' | 'MultiPoint' | 'MultiLineString' | 'MultiPolygon' | 'GeometryCollection' | 'Circle'} Type\n * The geometry type.  One of `'Point'`, `'LineString'`, `'LinearRing'`,\n * `'Polygon'`, `'MultiPoint'`, `'MultiLineString'`, `'MultiPolygon'`,\n * `'GeometryCollection'`, or `'Circle'`.\n */\n\n/**\n * @type {import(\"../transform.js\").Transform}\n */\nconst tmpTransform = createTransform();\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for vector geometries.\n *\n * To get notified of changes to the geometry, register a listener for the\n * generic `change` event on your geometry instance.\n *\n * @abstract\n * @api\n */\nclass Geometry extends BaseObject {\n  constructor() {\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.extent_ = createEmpty();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.extentRevision_ = -1;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.simplifiedGeometryRevision = 0;\n\n    /**\n     * Get a transformed and simplified version of the geometry.\n     * @abstract\n     * @param {number} revision The geometry revision.\n     * @param {number} squaredTolerance Squared tolerance.\n     * @param {import(\"../proj.js\").TransformFunction} [transform] Optional transform function.\n     * @return {Geometry} Simplified geometry.\n     */\n    this.simplifyTransformedInternal = memoizeOne(function (\n      revision,\n      squaredTolerance,\n      transform\n    ) {\n      if (!transform) {\n        return this.getSimplifiedGeometry(squaredTolerance);\n      }\n      const clone = this.clone();\n      clone.applyTransform(transform);\n      return clone.getSimplifiedGeometry(squaredTolerance);\n    });\n  }\n\n  /**\n   * Get a transformed and simplified version of the geometry.\n   * @abstract\n   * @param {number} squaredTolerance Squared tolerance.\n   * @param {import(\"../proj.js\").TransformFunction} [transform] Optional transform function.\n   * @return {Geometry} Simplified geometry.\n   */\n  simplifyTransformed(squaredTolerance, transform) {\n    return this.simplifyTransformedInternal(\n      this.getRevision(),\n      squaredTolerance,\n      transform\n    );\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @abstract\n   * @return {!Geometry} Clone.\n   */\n  clone() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    return abstract();\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @return {boolean} Contains (x, y).\n   */\n  containsXY(x, y) {\n    const coord = this.getClosestPoint([x, y]);\n    return coord[0] === x && coord[1] === y;\n  }\n\n  /**\n   * Return the closest point of the geometry to the passed point as\n   * {@link module:ol/coordinate~Coordinate coordinate}.\n   * @param {import(\"../coordinate.js\").Coordinate} point Point.\n   * @param {import(\"../coordinate.js\").Coordinate} [closestPoint] Closest point.\n   * @return {import(\"../coordinate.js\").Coordinate} Closest point.\n   * @api\n   */\n  getClosestPoint(point, closestPoint) {\n    closestPoint = closestPoint ? closestPoint : [NaN, NaN];\n    this.closestPointXY(point[0], point[1], closestPoint, Infinity);\n    return closestPoint;\n  }\n\n  /**\n   * Returns true if this geometry includes the specified coordinate. If the\n   * coordinate is on the boundary of the geometry, returns false.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @return {boolean} Contains coordinate.\n   * @api\n   */\n  intersectsCoordinate(coordinate) {\n    return this.containsXY(coordinate[0], coordinate[1]);\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @protected\n   * @return {import(\"../extent.js\").Extent} extent Extent.\n   */\n  computeExtent(extent) {\n    return abstract();\n  }\n\n  /**\n   * Get the extent of the geometry.\n   * @param {import(\"../extent.js\").Extent} [extent] Extent.\n   * @return {import(\"../extent.js\").Extent} extent Extent.\n   * @api\n   */\n  getExtent(extent) {\n    if (this.extentRevision_ != this.getRevision()) {\n      const extent = this.computeExtent(this.extent_);\n      if (isNaN(extent[0]) || isNaN(extent[1])) {\n        createOrUpdateEmpty(extent);\n      }\n      this.extentRevision_ = this.getRevision();\n    }\n    return returnOrUpdate(this.extent_, extent);\n  }\n\n  /**\n   * Rotate the geometry around a given coordinate. This modifies the geometry\n   * coordinates in place.\n   * @abstract\n   * @param {number} angle Rotation angle in radians.\n   * @param {import(\"../coordinate.js\").Coordinate} anchor The rotation center.\n   * @api\n   */\n  rotate(angle, anchor) {\n    abstract();\n  }\n\n  /**\n   * Scale the geometry (with an optional origin).  This modifies the geometry\n   * coordinates in place.\n   * @abstract\n   * @param {number} sx The scaling factor in the x-direction.\n   * @param {number} [sy] The scaling factor in the y-direction (defaults to sx).\n   * @param {import(\"../coordinate.js\").Coordinate} [anchor] The scale origin (defaults to the center\n   *     of the geometry extent).\n   * @api\n   */\n  scale(sx, sy, anchor) {\n    abstract();\n  }\n\n  /**\n   * Create a simplified version of this geometry.  For linestrings, this uses\n   * the [Douglas Peucker](https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm)\n   * algorithm.  For polygons, a quantization-based\n   * simplification is used to preserve topology.\n   * @param {number} tolerance The tolerance distance for simplification.\n   * @return {Geometry} A new, simplified version of the original geometry.\n   * @api\n   */\n  simplify(tolerance) {\n    return this.getSimplifiedGeometry(tolerance * tolerance);\n  }\n\n  /**\n   * Create a simplified version of this geometry using the Douglas Peucker\n   * algorithm.\n   * See https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm.\n   * @abstract\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {Geometry} Simplified geometry.\n   */\n  getSimplifiedGeometry(squaredTolerance) {\n    return abstract();\n  }\n\n  /**\n   * Get the type of this geometry.\n   * @abstract\n   * @return {Type} Geometry type.\n   */\n  getType() {\n    return abstract();\n  }\n\n  /**\n   * Apply a transform function to the coordinates of the geometry.\n   * The geometry is modified in place.\n   * If you do not want the geometry modified in place, first `clone()` it and\n   * then use this function on the clone.\n   * @abstract\n   * @param {import(\"../proj.js\").TransformFunction} transformFn Transform function.\n   * Called with a flat array of geometry coordinates.\n   */\n  applyTransform(transformFn) {\n    abstract();\n  }\n\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @abstract\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   */\n  intersectsExtent(extent) {\n    return abstract();\n  }\n\n  /**\n   * Translate the geometry.  This modifies the geometry coordinates in place.  If\n   * instead you want a new geometry, first `clone()` this geometry.\n   * @abstract\n   * @param {number} deltaX Delta X.\n   * @param {number} deltaY Delta Y.\n   * @api\n   */\n  translate(deltaX, deltaY) {\n    abstract();\n  }\n\n  /**\n   * Transform each coordinate of the geometry from one coordinate reference\n   * system to another. The geometry is modified in place.\n   * For example, a line will be transformed to a line and a circle to a circle.\n   * If you do not want the geometry modified in place, first `clone()` it and\n   * then use this function on the clone.\n   *\n   * @param {import(\"../proj.js\").ProjectionLike} source The current projection.  Can be a\n   *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n   * @param {import(\"../proj.js\").ProjectionLike} destination The desired projection.  Can be a\n   *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n   * @return {Geometry} This geometry.  Note that original geometry is\n   *     modified in place.\n   * @api\n   */\n  transform(source, destination) {\n    /** @type {import(\"../proj/Projection.js\").default} */\n    const sourceProj = getProjection(source);\n    const transformFn =\n      sourceProj.getUnits() == 'tile-pixels'\n        ? function (inCoordinates, outCoordinates, stride) {\n            const pixelExtent = sourceProj.getExtent();\n            const projectedExtent = sourceProj.getWorldExtent();\n            const scale = getHeight(projectedExtent) / getHeight(pixelExtent);\n            composeTransform(\n              tmpTransform,\n              projectedExtent[0],\n              projectedExtent[3],\n              scale,\n              -scale,\n              0,\n              0,\n              0\n            );\n            transform2D(\n              inCoordinates,\n              0,\n              inCoordinates.length,\n              stride,\n              tmpTransform,\n              outCoordinates\n            );\n            return getTransform(sourceProj, destination)(\n              inCoordinates,\n              outCoordinates,\n              stride\n            );\n          }\n        : getTransform(sourceProj, destination);\n    this.applyTransform(transformFn);\n    return this;\n  }\n}\n\nexport default Geometry;\n","/**\n * @module ol/geom/flat/transform\n */\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../transform.js\").Transform} transform Transform.\n * @param {Array<number>} [dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function transform2D(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  transform,\n  dest\n) {\n  dest = dest ? dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const x = flatCoordinates[j];\n    const y = flatCoordinates[j + 1];\n    dest[i++] = transform[0] * x + transform[2] * y + transform[4];\n    dest[i++] = transform[1] * x + transform[3] * y + transform[5];\n  }\n  if (dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} angle Angle.\n * @param {Array<number>} anchor Rotation anchor point.\n * @param {Array<number>} [dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function rotate(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  angle,\n  anchor,\n  dest\n) {\n  dest = dest ? dest : [];\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + deltaX * cos - deltaY * sin;\n    dest[i++] = anchorY + deltaX * sin + deltaY * cos;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n/**\n * Scale the coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} sx Scale factor in the x-direction.\n * @param {number} sy Scale factor in the y-direction.\n * @param {Array<number>} anchor Scale anchor point.\n * @param {Array<number>} [dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function scale(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  sx,\n  sy,\n  anchor,\n  dest\n) {\n  dest = dest ? dest : [];\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + sx * deltaX;\n    dest[i++] = anchorY + sy * deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n * @param {Array<number>} [dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function translate(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  deltaX,\n  deltaY,\n  dest\n) {\n  dest = dest ? dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    dest[i++] = flatCoordinates[j] + deltaX;\n    dest[i++] = flatCoordinates[j + 1] + deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n","/**\n * @module ol/geom/SimpleGeometry\n */\nimport Geometry from './Geometry.js';\nimport {abstract} from '../util.js';\nimport {createOrUpdateFromFlatCoordinates, getCenter} from '../extent.js';\nimport {rotate, scale, transform2D, translate} from './flat/transform.js';\n\n/**\n * @classdesc\n * Abstract base class; only used for creating subclasses; do not instantiate\n * in apps, as cannot be rendered.\n *\n * @abstract\n * @api\n */\nclass SimpleGeometry extends Geometry {\n  constructor() {\n    super();\n\n    /**\n     * @protected\n     * @type {import(\"./Geometry.js\").GeometryLayout}\n     */\n    this.layout = 'XY';\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.stride = 2;\n\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n    this.flatCoordinates = null;\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @protected\n   * @return {import(\"../extent.js\").Extent} extent Extent.\n   */\n  computeExtent(extent) {\n    return createOrUpdateFromFlatCoordinates(\n      this.flatCoordinates,\n      0,\n      this.flatCoordinates.length,\n      this.stride,\n      extent\n    );\n  }\n\n  /**\n   * @abstract\n   * @return {Array<*> | null} Coordinates.\n   */\n  getCoordinates() {\n    return abstract();\n  }\n\n  /**\n   * Return the first coordinate of the geometry.\n   * @return {import(\"../coordinate.js\").Coordinate} First coordinate.\n   * @api\n   */\n  getFirstCoordinate() {\n    return this.flatCoordinates.slice(0, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Flat coordinates.\n   */\n  getFlatCoordinates() {\n    return this.flatCoordinates;\n  }\n\n  /**\n   * Return the last coordinate of the geometry.\n   * @return {import(\"../coordinate.js\").Coordinate} Last point.\n   * @api\n   */\n  getLastCoordinate() {\n    return this.flatCoordinates.slice(\n      this.flatCoordinates.length - this.stride\n    );\n  }\n\n  /**\n   * Return the {@link import(\"./Geometry.js\").GeometryLayout layout} of the geometry.\n   * @return {import(\"./Geometry.js\").GeometryLayout} Layout.\n   * @api\n   */\n  getLayout() {\n    return this.layout;\n  }\n\n  /**\n   * Create a simplified version of this geometry using the Douglas Peucker algorithm.\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {SimpleGeometry} Simplified geometry.\n   */\n  getSimplifiedGeometry(squaredTolerance) {\n    if (this.simplifiedGeometryRevision !== this.getRevision()) {\n      this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n      this.simplifiedGeometryRevision = this.getRevision();\n    }\n    // If squaredTolerance is negative or if we know that simplification will not\n    // have any effect then just return this.\n    if (\n      squaredTolerance < 0 ||\n      (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n        squaredTolerance <= this.simplifiedGeometryMaxMinSquaredTolerance)\n    ) {\n      return this;\n    }\n\n    const simplifiedGeometry =\n      this.getSimplifiedGeometryInternal(squaredTolerance);\n    const simplifiedFlatCoordinates = simplifiedGeometry.getFlatCoordinates();\n    if (simplifiedFlatCoordinates.length < this.flatCoordinates.length) {\n      return simplifiedGeometry;\n    } else {\n      // Simplification did not actually remove any coordinates.  We now know\n      // that any calls to getSimplifiedGeometry with a squaredTolerance less\n      // than or equal to the current squaredTolerance will also not have any\n      // effect.  This allows us to short circuit simplification (saving CPU\n      // cycles) and prevents the cache of simplified geometries from filling\n      // up with useless identical copies of this geometry (saving memory).\n      this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n      return this;\n    }\n  }\n\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {SimpleGeometry} Simplified geometry.\n   * @protected\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    return this;\n  }\n\n  /**\n   * @return {number} Stride.\n   */\n  getStride() {\n    return this.stride;\n  }\n\n  /**\n   * @param {import(\"./Geometry.js\").GeometryLayout} layout Layout.\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   */\n  setFlatCoordinates(layout, flatCoordinates) {\n    this.stride = getStrideForLayout(layout);\n    this.layout = layout;\n    this.flatCoordinates = flatCoordinates;\n  }\n\n  /**\n   * @abstract\n   * @param {!Array<*>} coordinates Coordinates.\n   * @param {import(\"./Geometry.js\").GeometryLayout} [layout] Layout.\n   */\n  setCoordinates(coordinates, layout) {\n    abstract();\n  }\n\n  /**\n   * @param {import(\"./Geometry.js\").GeometryLayout|undefined} layout Layout.\n   * @param {Array<*>} coordinates Coordinates.\n   * @param {number} nesting Nesting.\n   * @protected\n   */\n  setLayout(layout, coordinates, nesting) {\n    /** @type {number} */\n    let stride;\n    if (layout) {\n      stride = getStrideForLayout(layout);\n    } else {\n      for (let i = 0; i < nesting; ++i) {\n        if (coordinates.length === 0) {\n          this.layout = 'XY';\n          this.stride = 2;\n          return;\n        } else {\n          coordinates = /** @type {Array} */ (coordinates[0]);\n        }\n      }\n      stride = coordinates.length;\n      layout = getLayoutForStride(stride);\n    }\n    this.layout = layout;\n    this.stride = stride;\n  }\n\n  /**\n   * Apply a transform function to the coordinates of the geometry.\n   * The geometry is modified in place.\n   * If you do not want the geometry modified in place, first `clone()` it and\n   * then use this function on the clone.\n   * @param {import(\"../proj.js\").TransformFunction} transformFn Transform function.\n   * Called with a flat array of geometry coordinates.\n   * @api\n   */\n  applyTransform(transformFn) {\n    if (this.flatCoordinates) {\n      transformFn(this.flatCoordinates, this.flatCoordinates, this.stride);\n      this.changed();\n    }\n  }\n\n  /**\n   * Rotate the geometry around a given coordinate. This modifies the geometry\n   * coordinates in place.\n   * @param {number} angle Rotation angle in counter-clockwise radians.\n   * @param {import(\"../coordinate.js\").Coordinate} anchor The rotation center.\n   * @api\n   */\n  rotate(angle, anchor) {\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      rotate(\n        flatCoordinates,\n        0,\n        flatCoordinates.length,\n        stride,\n        angle,\n        anchor,\n        flatCoordinates\n      );\n      this.changed();\n    }\n  }\n\n  /**\n   * Scale the geometry (with an optional origin).  This modifies the geometry\n   * coordinates in place.\n   * @param {number} sx The scaling factor in the x-direction.\n   * @param {number} [sy] The scaling factor in the y-direction (defaults to sx).\n   * @param {import(\"../coordinate.js\").Coordinate} [anchor] The scale origin (defaults to the center\n   *     of the geometry extent).\n   * @api\n   */\n  scale(sx, sy, anchor) {\n    if (sy === undefined) {\n      sy = sx;\n    }\n    if (!anchor) {\n      anchor = getCenter(this.getExtent());\n    }\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      scale(\n        flatCoordinates,\n        0,\n        flatCoordinates.length,\n        stride,\n        sx,\n        sy,\n        anchor,\n        flatCoordinates\n      );\n      this.changed();\n    }\n  }\n\n  /**\n   * Translate the geometry.  This modifies the geometry coordinates in place.  If\n   * instead you want a new geometry, first `clone()` this geometry.\n   * @param {number} deltaX Delta X.\n   * @param {number} deltaY Delta Y.\n   * @api\n   */\n  translate(deltaX, deltaY) {\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      translate(\n        flatCoordinates,\n        0,\n        flatCoordinates.length,\n        stride,\n        deltaX,\n        deltaY,\n        flatCoordinates\n      );\n      this.changed();\n    }\n  }\n}\n\n/**\n * @param {number} stride Stride.\n * @return {import(\"./Geometry.js\").GeometryLayout} layout Layout.\n */\nfunction getLayoutForStride(stride) {\n  let layout;\n  if (stride == 2) {\n    layout = 'XY';\n  } else if (stride == 3) {\n    layout = 'XYZ';\n  } else if (stride == 4) {\n    layout = 'XYZM';\n  }\n  return /** @type {import(\"./Geometry.js\").GeometryLayout} */ (layout);\n}\n\n/**\n * @param {import(\"./Geometry.js\").GeometryLayout} layout Layout.\n * @return {number} Stride.\n */\nexport function getStrideForLayout(layout) {\n  let stride;\n  if (layout == 'XY') {\n    stride = 2;\n  } else if (layout == 'XYZ' || layout == 'XYM') {\n    stride = 3;\n  } else if (layout == 'XYZM') {\n    stride = 4;\n  }\n  return /** @type {number} */ (stride);\n}\n\n/**\n * @param {SimpleGeometry} simpleGeometry Simple geometry.\n * @param {import(\"../transform.js\").Transform} transform Transform.\n * @param {Array<number>} [dest] Destination.\n * @return {Array<number>} Transformed flat coordinates.\n */\nexport function transformGeom2D(simpleGeometry, transform, dest) {\n  const flatCoordinates = simpleGeometry.getFlatCoordinates();\n  if (!flatCoordinates) {\n    return null;\n  } else {\n    const stride = simpleGeometry.getStride();\n    return transform2D(\n      flatCoordinates,\n      0,\n      flatCoordinates.length,\n      stride,\n      transform,\n      dest\n    );\n  }\n}\n\nexport default SimpleGeometry;\n","/**\n * @module ol/geom/flat/closest\n */\nimport {lerp, squaredDistance as squaredDx} from '../../math.js';\n\n/**\n * Returns the point on the 2D line segment flatCoordinates[offset1] to\n * flatCoordinates[offset2] that is closest to the point (x, y).  Extra\n * dimensions are linearly interpolated.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset1 Offset 1.\n * @param {number} offset2 Offset 2.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n */\nfunction assignClosest(\n  flatCoordinates,\n  offset1,\n  offset2,\n  stride,\n  x,\n  y,\n  closestPoint\n) {\n  const x1 = flatCoordinates[offset1];\n  const y1 = flatCoordinates[offset1 + 1];\n  const dx = flatCoordinates[offset2] - x1;\n  const dy = flatCoordinates[offset2 + 1] - y1;\n  let offset;\n  if (dx === 0 && dy === 0) {\n    offset = offset1;\n  } else {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      offset = offset2;\n    } else if (t > 0) {\n      for (let i = 0; i < stride; ++i) {\n        closestPoint[i] = lerp(\n          flatCoordinates[offset1 + i],\n          flatCoordinates[offset2 + i],\n          t\n        );\n      }\n      closestPoint.length = stride;\n      return;\n    } else {\n      offset = offset1;\n    }\n  }\n  for (let i = 0; i < stride; ++i) {\n    closestPoint[i] = flatCoordinates[offset + i];\n  }\n  closestPoint.length = stride;\n}\n\n/**\n * Return the squared of the largest distance between any pair of consecutive\n * coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function maxSquaredDelta(flatCoordinates, offset, end, stride, max) {\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  for (offset += stride; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    const squaredDelta = squaredDx(x1, y1, x2, y2);\n    if (squaredDelta > max) {\n      max = squaredDelta;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  return max;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function arrayMaxSquaredDelta(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  max\n) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    max = maxSquaredDelta(flatCoordinates, offset, end, stride, max);\n    offset = end;\n  }\n  return max;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function multiArrayMaxSquaredDelta(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  max\n) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    max = arrayMaxSquaredDelta(flatCoordinates, offset, ends, stride, max);\n    offset = ends[ends.length - 1];\n  }\n  return max;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>} [tmpPoint] Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestPoint(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  maxDelta,\n  isRing,\n  x,\n  y,\n  closestPoint,\n  minSquaredDistance,\n  tmpPoint\n) {\n  if (offset == end) {\n    return minSquaredDistance;\n  }\n  let i, squaredDistance;\n  if (maxDelta === 0) {\n    // All points are identical, so just test the first point.\n    squaredDistance = squaredDx(\n      x,\n      y,\n      flatCoordinates[offset],\n      flatCoordinates[offset + 1]\n    );\n    if (squaredDistance < minSquaredDistance) {\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = flatCoordinates[offset + i];\n      }\n      closestPoint.length = stride;\n      return squaredDistance;\n    } else {\n      return minSquaredDistance;\n    }\n  }\n  tmpPoint = tmpPoint ? tmpPoint : [NaN, NaN];\n  let index = offset + stride;\n  while (index < end) {\n    assignClosest(\n      flatCoordinates,\n      index - stride,\n      index,\n      stride,\n      x,\n      y,\n      tmpPoint\n    );\n    squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = tmpPoint[i];\n      }\n      closestPoint.length = stride;\n      index += stride;\n    } else {\n      // Skip ahead multiple points, because we know that all the skipped\n      // points cannot be any closer than the closest point we have found so\n      // far.  We know this because we know how close the current point is, how\n      // close the closest point we have found so far is, and the maximum\n      // distance between consecutive points.  For example, if we're currently\n      // at distance 10, the best we've found so far is 3, and that the maximum\n      // distance between consecutive points is 2, then we'll need to skip at\n      // least (10 - 3) / 2 == 3 (rounded down) points to have any chance of\n      // finding a closer point.  We use Math.max(..., 1) to ensure that we\n      // always advance at least one point, to avoid an infinite loop.\n      index +=\n        stride *\n        Math.max(\n          ((Math.sqrt(squaredDistance) - Math.sqrt(minSquaredDistance)) /\n            maxDelta) |\n            0,\n          1\n        );\n    }\n  }\n  if (isRing) {\n    // Check the closing segment.\n    assignClosest(\n      flatCoordinates,\n      end - stride,\n      offset,\n      stride,\n      x,\n      y,\n      tmpPoint\n    );\n    squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = tmpPoint[i];\n      }\n      closestPoint.length = stride;\n    }\n  }\n  return minSquaredDistance;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>} [tmpPoint] Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestArrayPoint(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  maxDelta,\n  isRing,\n  x,\n  y,\n  closestPoint,\n  minSquaredDistance,\n  tmpPoint\n) {\n  tmpPoint = tmpPoint ? tmpPoint : [NaN, NaN];\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    minSquaredDistance = assignClosestPoint(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      maxDelta,\n      isRing,\n      x,\n      y,\n      closestPoint,\n      minSquaredDistance,\n      tmpPoint\n    );\n    offset = end;\n  }\n  return minSquaredDistance;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>} [tmpPoint] Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestMultiArrayPoint(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  maxDelta,\n  isRing,\n  x,\n  y,\n  closestPoint,\n  minSquaredDistance,\n  tmpPoint\n) {\n  tmpPoint = tmpPoint ? tmpPoint : [NaN, NaN];\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    minSquaredDistance = assignClosestArrayPoint(\n      flatCoordinates,\n      offset,\n      ends,\n      stride,\n      maxDelta,\n      isRing,\n      x,\n      y,\n      closestPoint,\n      minSquaredDistance,\n      tmpPoint\n    );\n    offset = ends[ends.length - 1];\n  }\n  return minSquaredDistance;\n}\n","/**\n * @module ol/geom/flat/deflate\n */\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinate(flatCoordinates, offset, coordinate, stride) {\n  for (let i = 0, ii = coordinate.length; i < ii; ++i) {\n    flatCoordinates[offset++] = coordinate[i];\n  }\n  return offset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<import(\"../../coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinates(\n  flatCoordinates,\n  offset,\n  coordinates,\n  stride\n) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    const coordinate = coordinates[i];\n    for (let j = 0; j < stride; ++j) {\n      flatCoordinates[offset++] = coordinate[j];\n    }\n  }\n  return offset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<import(\"../../coordinate.js\").Coordinate>>} coordinatess Coordinatess.\n * @param {number} stride Stride.\n * @param {Array<number>} [ends] Ends.\n * @return {Array<number>} Ends.\n */\nexport function deflateCoordinatesArray(\n  flatCoordinates,\n  offset,\n  coordinatess,\n  stride,\n  ends\n) {\n  ends = ends ? ends : [];\n  let i = 0;\n  for (let j = 0, jj = coordinatess.length; j < jj; ++j) {\n    const end = deflateCoordinates(\n      flatCoordinates,\n      offset,\n      coordinatess[j],\n      stride\n    );\n    ends[i++] = end;\n    offset = end;\n  }\n  ends.length = i;\n  return ends;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} coordinatesss Coordinatesss.\n * @param {number} stride Stride.\n * @param {Array<Array<number>>} [endss] Endss.\n * @return {Array<Array<number>>} Endss.\n */\nexport function deflateMultiCoordinatesArray(\n  flatCoordinates,\n  offset,\n  coordinatesss,\n  stride,\n  endss\n) {\n  endss = endss ? endss : [];\n  let i = 0;\n  for (let j = 0, jj = coordinatesss.length; j < jj; ++j) {\n    const ends = deflateCoordinatesArray(\n      flatCoordinates,\n      offset,\n      coordinatesss[j],\n      stride,\n      endss[i]\n    );\n    if (ends.length === 0) {\n      ends[0] = offset;\n    }\n    endss[i++] = ends;\n    offset = ends[ends.length - 1];\n  }\n  endss.length = i;\n  return endss;\n}\n","/**\n * @module ol/geom/flat/simplify\n */\n// Based on simplify-js https://github.com/mourner/simplify-js\n// Copyright (c) 2012, Vladimir Agafonkin\n// All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//\n//    1. Redistributions of source code must retain the above copyright notice,\n//       this list of conditions and the following disclaimer.\n//\n//    2. Redistributions in binary form must reproduce the above copyright\n//       notice, this list of conditions and the following disclaimer in the\n//       documentation and/or other materials provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n// POSSIBILITY OF SUCH DAMAGE.\n\nimport {squaredDistance, squaredSegmentDistance} from '../../math.js';\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {boolean} highQuality Highest quality.\n * @param {Array<number>} [simplifiedFlatCoordinates] Simplified flat\n *     coordinates.\n * @return {Array<number>} Simplified line string.\n */\nexport function simplifyLineString(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  squaredTolerance,\n  highQuality,\n  simplifiedFlatCoordinates\n) {\n  simplifiedFlatCoordinates =\n    simplifiedFlatCoordinates !== undefined ? simplifiedFlatCoordinates : [];\n  if (!highQuality) {\n    end = radialDistance(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      squaredTolerance,\n      simplifiedFlatCoordinates,\n      0\n    );\n    flatCoordinates = simplifiedFlatCoordinates;\n    offset = 0;\n    stride = 2;\n  }\n  simplifiedFlatCoordinates.length = douglasPeucker(\n    flatCoordinates,\n    offset,\n    end,\n    stride,\n    squaredTolerance,\n    simplifiedFlatCoordinates,\n    0\n  );\n  return simplifiedFlatCoordinates;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function douglasPeucker(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  squaredTolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset\n) {\n  const n = (end - offset) / stride;\n  if (n < 3) {\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] = flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n        flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  /** @type {Array<number>} */\n  const markers = new Array(n);\n  markers[0] = 1;\n  markers[n - 1] = 1;\n  /** @type {Array<number>} */\n  const stack = [offset, end - stride];\n  let index = 0;\n  while (stack.length > 0) {\n    const last = stack.pop();\n    const first = stack.pop();\n    let maxSquaredDistance = 0;\n    const x1 = flatCoordinates[first];\n    const y1 = flatCoordinates[first + 1];\n    const x2 = flatCoordinates[last];\n    const y2 = flatCoordinates[last + 1];\n    for (let i = first + stride; i < last; i += stride) {\n      const x = flatCoordinates[i];\n      const y = flatCoordinates[i + 1];\n      const squaredDistance = squaredSegmentDistance(x, y, x1, y1, x2, y2);\n      if (squaredDistance > maxSquaredDistance) {\n        index = i;\n        maxSquaredDistance = squaredDistance;\n      }\n    }\n    if (maxSquaredDistance > squaredTolerance) {\n      markers[(index - offset) / stride] = 1;\n      if (first + stride < index) {\n        stack.push(first, index);\n      }\n      if (index + stride < last) {\n        stack.push(index, last);\n      }\n    }\n  }\n  for (let i = 0; i < n; ++i) {\n    if (markers[i]) {\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n        flatCoordinates[offset + i * stride];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n        flatCoordinates[offset + i * stride + 1];\n    }\n  }\n  return simplifiedOffset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerArray(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  squaredTolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset,\n  simplifiedEnds\n) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    simplifiedOffset = douglasPeucker(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      squaredTolerance,\n      simplifiedFlatCoordinates,\n      simplifiedOffset\n    );\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerMultiArray(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  squaredTolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset,\n  simplifiedEndss\n) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    const simplifiedEnds = [];\n    simplifiedOffset = douglasPeuckerArray(\n      flatCoordinates,\n      offset,\n      ends,\n      stride,\n      squaredTolerance,\n      simplifiedFlatCoordinates,\n      simplifiedOffset,\n      simplifiedEnds\n    );\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function radialDistance(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  squaredTolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset\n) {\n  if (end <= offset + stride) {\n    // zero or one point, no simplification possible, so copy and return\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] = flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n        flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  // copy first point\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  let x2 = x1;\n  let y2 = y1;\n  for (offset += stride; offset < end; offset += stride) {\n    x2 = flatCoordinates[offset];\n    y2 = flatCoordinates[offset + 1];\n    if (squaredDistance(x1, y1, x2, y2) > squaredTolerance) {\n      // copy point at offset\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  if (x2 != x1 || y2 != y1) {\n    // copy last point\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  }\n  return simplifiedOffset;\n}\n\n/**\n * @param {number} value Value.\n * @param {number} tolerance Tolerance.\n * @return {number} Rounded value.\n */\nexport function snap(value, tolerance) {\n  return tolerance * Math.round(value / tolerance);\n}\n\n/**\n * Simplifies a line string using an algorithm designed by Tim Schaub.\n * Coordinates are snapped to the nearest value in a virtual grid and\n * consecutive duplicate coordinates are discarded.  This effectively preserves\n * topology as the simplification of any subsection of a line string is\n * independent of the rest of the line string.  This means that, for examples,\n * the common edge between two polygons will be simplified to the same line\n * string independently in both polygons.  This implementation uses a single\n * pass over the coordinates and eliminates intermediate collinear points.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function quantize(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  tolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset\n) {\n  // do nothing if the line is empty\n  if (offset == end) {\n    return simplifiedOffset;\n  }\n  // snap the first coordinate (P1)\n  let x1 = snap(flatCoordinates[offset], tolerance);\n  let y1 = snap(flatCoordinates[offset + 1], tolerance);\n  offset += stride;\n  // add the first coordinate to the output\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  // find the next coordinate that does not snap to the same value as the first\n  // coordinate (P2)\n  let x2, y2;\n  do {\n    x2 = snap(flatCoordinates[offset], tolerance);\n    y2 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    if (offset == end) {\n      // all coordinates snap to the same value, the line collapses to a point\n      // push the last snapped value anyway to ensure that the output contains\n      // at least two points\n      // FIXME should we really return at least two points anyway?\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      return simplifiedOffset;\n    }\n  } while (x2 == x1 && y2 == y1);\n  while (offset < end) {\n    // snap the next coordinate (P3)\n    const x3 = snap(flatCoordinates[offset], tolerance);\n    const y3 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    // skip P3 if it is equal to P2\n    if (x3 == x2 && y3 == y2) {\n      continue;\n    }\n    // calculate the delta between P1 and P2\n    const dx1 = x2 - x1;\n    const dy1 = y2 - y1;\n    // calculate the delta between P3 and P1\n    const dx2 = x3 - x1;\n    const dy2 = y3 - y1;\n    // if P1, P2, and P3 are colinear and P3 is further from P1 than P2 is from\n    // P1 in the same direction then P2 is on the straight line between P1 and\n    // P3\n    if (\n      dx1 * dy2 == dy1 * dx2 &&\n      ((dx1 < 0 && dx2 < dx1) || dx1 == dx2 || (dx1 > 0 && dx2 > dx1)) &&\n      ((dy1 < 0 && dy2 < dy1) || dy1 == dy2 || (dy1 > 0 && dy2 > dy1))\n    ) {\n      // discard P2 and set P2 = P3\n      x2 = x3;\n      y2 = y3;\n      continue;\n    }\n    // either P1, P2, and P3 are not colinear, or they are colinear but P3 is\n    // between P3 and P1 or on the opposite half of the line to P2.  add P2,\n    // and continue with P1 = P2 and P2 = P3\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n    x1 = x2;\n    y1 = y2;\n    x2 = x3;\n    y2 = y3;\n  }\n  // add the last point (P2)\n  simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  return simplifiedOffset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function quantizeArray(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  tolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset,\n  simplifiedEnds\n) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    simplifiedOffset = quantize(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      tolerance,\n      simplifiedFlatCoordinates,\n      simplifiedOffset\n    );\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function quantizeMultiArray(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  tolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset,\n  simplifiedEndss\n) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    const simplifiedEnds = [];\n    simplifiedOffset = quantizeArray(\n      flatCoordinates,\n      offset,\n      ends,\n      stride,\n      tolerance,\n      simplifiedFlatCoordinates,\n      simplifiedOffset,\n      simplifiedEnds\n    );\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n}\n","/**\n * @module ol/geom/flat/inflate\n */\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Array<import(\"../../coordinate.js\").Coordinate>} [coordinates] Coordinates.\n * @return {Array<import(\"../../coordinate.js\").Coordinate>} Coordinates.\n */\nexport function inflateCoordinates(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  coordinates\n) {\n  coordinates = coordinates !== undefined ? coordinates : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    coordinates[i++] = flatCoordinates.slice(j, j + stride);\n  }\n  coordinates.length = i;\n  return coordinates;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<Array<import(\"../../coordinate.js\").Coordinate>>} [coordinatess] Coordinatess.\n * @return {Array<Array<import(\"../../coordinate.js\").Coordinate>>} Coordinatess.\n */\nexport function inflateCoordinatesArray(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  coordinatess\n) {\n  coordinatess = coordinatess !== undefined ? coordinatess : [];\n  let i = 0;\n  for (let j = 0, jj = ends.length; j < jj; ++j) {\n    const end = ends[j];\n    coordinatess[i++] = inflateCoordinates(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      coordinatess[i]\n    );\n    offset = end;\n  }\n  coordinatess.length = i;\n  return coordinatess;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} [coordinatesss]\n *     Coordinatesss.\n * @return {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} Coordinatesss.\n */\nexport function inflateMultiCoordinatesArray(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  coordinatesss\n) {\n  coordinatesss = coordinatesss !== undefined ? coordinatesss : [];\n  let i = 0;\n  for (let j = 0, jj = endss.length; j < jj; ++j) {\n    const ends = endss[j];\n    coordinatesss[i++] =\n      ends.length === 1 && ends[0] === offset\n        ? []\n        : inflateCoordinatesArray(\n            flatCoordinates,\n            offset,\n            ends,\n            stride,\n            coordinatesss[i]\n          );\n    offset = ends[ends.length - 1];\n  }\n  coordinatesss.length = i;\n  return coordinatesss;\n}\n","/**\n * @module ol/geom/flat/area\n */\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRing(flatCoordinates, offset, end, stride) {\n  let twiceArea = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    twiceArea += y1 * x2 - x1 * y2;\n    x1 = x2;\n    y1 = y2;\n  }\n  return twiceArea / 2;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRings(flatCoordinates, offset, ends, stride) {\n  let area = 0;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    area += linearRing(flatCoordinates, offset, end, stride);\n    offset = end;\n  }\n  return area;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n  let area = 0;\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    area += linearRings(flatCoordinates, offset, ends, stride);\n    offset = ends[ends.length - 1];\n  }\n  return area;\n}\n","/**\n * @module ol/geom/LinearRing\n */\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {assignClosestPoint, maxSquaredDelta} from './flat/closest.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport {deflateCoordinates} from './flat/deflate.js';\nimport {douglasPeucker} from './flat/simplify.js';\nimport {inflateCoordinates} from './flat/inflate.js';\nimport {linearRing as linearRingArea} from './flat/area.js';\n\n/**\n * @classdesc\n * Linear ring geometry. Only used as part of polygon; cannot be rendered\n * on its own.\n *\n * @api\n */\nclass LinearRing extends SimpleGeometry {\n  /**\n   * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `layout` are also accepted.\n   * @param {import(\"./Geometry.js\").GeometryLayout} [layout] Layout.\n   */\n  constructor(coordinates, layout) {\n    super();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    if (layout !== undefined && !Array.isArray(coordinates[0])) {\n      this.setFlatCoordinates(\n        layout,\n        /** @type {Array<number>} */ (coordinates)\n      );\n    } else {\n      this.setCoordinates(\n        /** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (\n          coordinates\n        ),\n        layout\n      );\n    }\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!LinearRing} Clone.\n   * @api\n   */\n  clone() {\n    return new LinearRing(this.flatCoordinates.slice(), this.layout);\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(\n        maxSquaredDelta(\n          this.flatCoordinates,\n          0,\n          this.flatCoordinates.length,\n          this.stride,\n          0\n        )\n      );\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestPoint(\n      this.flatCoordinates,\n      0,\n      this.flatCoordinates.length,\n      this.stride,\n      this.maxDelta_,\n      true,\n      x,\n      y,\n      closestPoint,\n      minSquaredDistance\n    );\n  }\n\n  /**\n   * Return the area of the linear ring on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n  getArea() {\n    return linearRingArea(\n      this.flatCoordinates,\n      0,\n      this.flatCoordinates.length,\n      this.stride\n    );\n  }\n\n  /**\n   * Return the coordinates of the linear ring.\n   * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinates(\n      this.flatCoordinates,\n      0,\n      this.flatCoordinates.length,\n      this.stride\n    );\n  }\n\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {LinearRing} Simplified LinearRing.\n   * @protected\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    simplifiedFlatCoordinates.length = douglasPeucker(\n      this.flatCoordinates,\n      0,\n      this.flatCoordinates.length,\n      this.stride,\n      squaredTolerance,\n      simplifiedFlatCoordinates,\n      0\n    );\n    return new LinearRing(simplifiedFlatCoordinates, 'XY');\n  }\n\n  /**\n   * Get the type of this geometry.\n   * @return {import(\"./Geometry.js\").Type} Geometry type.\n   * @api\n   */\n  getType() {\n    return 'LinearRing';\n  }\n\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   * @api\n   */\n  intersectsExtent(extent) {\n    return false;\n  }\n\n  /**\n   * Set the coordinates of the linear ring.\n   * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n   * @param {import(\"./Geometry.js\").GeometryLayout} [layout] Layout.\n   * @api\n   */\n  setCoordinates(coordinates, layout) {\n    this.setLayout(layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinates(\n      this.flatCoordinates,\n      0,\n      coordinates,\n      this.stride\n    );\n    this.changed();\n  }\n}\n\nexport default LinearRing;\n","/**\n * @module ol/geom/Point\n */\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {containsXY, createOrUpdateFromCoordinate} from '../extent.js';\nimport {deflateCoordinate} from './flat/deflate.js';\nimport {squaredDistance as squaredDx} from '../math.js';\n\n/**\n * @classdesc\n * Point geometry.\n *\n * @api\n */\nclass Point extends SimpleGeometry {\n  /**\n   * @param {import(\"../coordinate.js\").Coordinate} coordinates Coordinates.\n   * @param {import(\"./Geometry.js\").GeometryLayout} [layout] Layout.\n   */\n  constructor(coordinates, layout) {\n    super();\n    this.setCoordinates(coordinates, layout);\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!Point} Clone.\n   * @api\n   */\n  clone() {\n    const point = new Point(this.flatCoordinates.slice(), this.layout);\n    point.applyProperties(this);\n    return point;\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    const flatCoordinates = this.flatCoordinates;\n    const squaredDistance = squaredDx(\n      x,\n      y,\n      flatCoordinates[0],\n      flatCoordinates[1]\n    );\n    if (squaredDistance < minSquaredDistance) {\n      const stride = this.stride;\n      for (let i = 0; i < stride; ++i) {\n        closestPoint[i] = flatCoordinates[i];\n      }\n      closestPoint.length = stride;\n      return squaredDistance;\n    } else {\n      return minSquaredDistance;\n    }\n  }\n\n  /**\n   * Return the coordinate of the point.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinates.\n   * @api\n   */\n  getCoordinates() {\n    return !this.flatCoordinates ? [] : this.flatCoordinates.slice();\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @protected\n   * @return {import(\"../extent.js\").Extent} extent Extent.\n   */\n  computeExtent(extent) {\n    return createOrUpdateFromCoordinate(this.flatCoordinates, extent);\n  }\n\n  /**\n   * Get the type of this geometry.\n   * @return {import(\"./Geometry.js\").Type} Geometry type.\n   * @api\n   */\n  getType() {\n    return 'Point';\n  }\n\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   * @api\n   */\n  intersectsExtent(extent) {\n    return containsXY(extent, this.flatCoordinates[0], this.flatCoordinates[1]);\n  }\n\n  /**\n   * @param {!Array<*>} coordinates Coordinates.\n   * @param {import(\"./Geometry.js\").GeometryLayout} [layout] Layout.\n   * @api\n   */\n  setCoordinates(coordinates, layout) {\n    this.setLayout(layout, coordinates, 0);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinate(\n      this.flatCoordinates,\n      0,\n      coordinates,\n      this.stride\n    );\n    this.changed();\n  }\n}\n\nexport default Point;\n","/**\n * @module ol/geom/flat/contains\n */\nimport {forEachCorner} from '../../extent.js';\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} Contains extent.\n */\nexport function linearRingContainsExtent(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  extent\n) {\n  const outside = forEachCorner(\n    extent,\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @return {boolean} Contains (x, y).\n     */\n    function (coordinate) {\n      return !linearRingContainsXY(\n        flatCoordinates,\n        offset,\n        end,\n        stride,\n        coordinate[0],\n        coordinate[1]\n      );\n    }\n  );\n  return !outside;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingContainsXY(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  x,\n  y\n) {\n  // https://geomalgorithms.com/a03-_inclusion.html\n  // Copyright 2000 softSurfer, 2012 Dan Sunday\n  // This code may be freely used and modified for any purpose\n  // providing that this copyright notice is included with it.\n  // SoftSurfer makes no warranty for this code, and cannot be held\n  // liable for any real or imagined damage resulting from its use.\n  // Users of this code must verify correctness for their application.\n  let wn = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    if (y1 <= y) {\n      if (y2 > y && (x2 - x1) * (y - y1) - (x - x1) * (y2 - y1) > 0) {\n        wn++;\n      }\n    } else if (y2 <= y && (x2 - x1) * (y - y1) - (x - x1) * (y2 - y1) < 0) {\n      wn--;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  return wn !== 0;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingsContainsXY(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  x,\n  y\n) {\n  if (ends.length === 0) {\n    return false;\n  }\n  if (!linearRingContainsXY(flatCoordinates, offset, ends[0], stride, x, y)) {\n    return false;\n  }\n  for (let i = 1, ii = ends.length; i < ii; ++i) {\n    if (\n      linearRingContainsXY(flatCoordinates, ends[i - 1], ends[i], stride, x, y)\n    ) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingssContainsXY(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  x,\n  y\n) {\n  if (endss.length === 0) {\n    return false;\n  }\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n      return true;\n    }\n    offset = ends[ends.length - 1];\n  }\n  return false;\n}\n","/**\n * @module ol/geom/flat/interiorpoint\n */\nimport {linearRingsContainsXY} from './contains.js';\nimport {numberSafeCompareFunction} from '../../array.js';\n\n/**\n * Calculates a point that is likely to lie in the interior of the linear rings.\n * Inspired by JTS's com.vividsolutions.jts.geom.Geometry#getInteriorPoint.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @param {number} flatCentersOffset Flat center offset.\n * @param {Array<number>} [dest] Destination.\n * @return {Array<number>} Destination point as XYM coordinate, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointOfArray(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  flatCenters,\n  flatCentersOffset,\n  dest\n) {\n  let i, ii, x, x1, x2, y1, y2;\n  const y = flatCenters[flatCentersOffset + 1];\n  /** @type {Array<number>} */\n  const intersections = [];\n  // Calculate intersections with the horizontal line\n  for (let r = 0, rr = ends.length; r < rr; ++r) {\n    const end = ends[r];\n    x1 = flatCoordinates[end - stride];\n    y1 = flatCoordinates[end - stride + 1];\n    for (i = offset; i < end; i += stride) {\n      x2 = flatCoordinates[i];\n      y2 = flatCoordinates[i + 1];\n      if ((y <= y1 && y2 <= y) || (y1 <= y && y <= y2)) {\n        x = ((y - y1) / (y2 - y1)) * (x2 - x1) + x1;\n        intersections.push(x);\n      }\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  // Find the longest segment of the horizontal line that has its center point\n  // inside the linear ring.\n  let pointX = NaN;\n  let maxSegmentLength = -Infinity;\n  intersections.sort(numberSafeCompareFunction);\n  x1 = intersections[0];\n  for (i = 1, ii = intersections.length; i < ii; ++i) {\n    x2 = intersections[i];\n    const segmentLength = Math.abs(x2 - x1);\n    if (segmentLength > maxSegmentLength) {\n      x = (x1 + x2) / 2;\n      if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n        pointX = x;\n        maxSegmentLength = segmentLength;\n      }\n    }\n    x1 = x2;\n  }\n  if (isNaN(pointX)) {\n    // There is no horizontal line that has its center point inside the linear\n    // ring.  Use the center of the the linear ring's extent.\n    pointX = flatCenters[flatCentersOffset];\n  }\n  if (dest) {\n    dest.push(pointX, y, maxSegmentLength);\n    return dest;\n  } else {\n    return [pointX, y, maxSegmentLength];\n  }\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @return {Array<number>} Interior points as XYM coordinates, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointsOfMultiArray(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  flatCenters\n) {\n  let interiorPoints = [];\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    interiorPoints = getInteriorPointOfArray(\n      flatCoordinates,\n      offset,\n      ends,\n      stride,\n      flatCenters,\n      2 * i,\n      interiorPoints\n    );\n    offset = ends[ends.length - 1];\n  }\n  return interiorPoints;\n}\n","/**\n * @module ol/geom/flat/intersectsextent\n */\nimport {\n  containsExtent,\n  createEmpty,\n  extendFlatCoordinates,\n  intersects,\n  intersectsSegment,\n} from '../../extent.js';\nimport {forEach as forEachSegment} from './segments.js';\nimport {linearRingContainsExtent, linearRingContainsXY} from './contains.js';\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineString(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  extent\n) {\n  const coordinatesExtent = extendFlatCoordinates(\n    createEmpty(),\n    flatCoordinates,\n    offset,\n    end,\n    stride\n  );\n  if (!intersects(extent, coordinatesExtent)) {\n    return false;\n  }\n  if (containsExtent(extent, coordinatesExtent)) {\n    return true;\n  }\n  if (coordinatesExtent[0] >= extent[0] && coordinatesExtent[2] <= extent[2]) {\n    return true;\n  }\n  if (coordinatesExtent[1] >= extent[1] && coordinatesExtent[3] <= extent[3]) {\n    return true;\n  }\n  return forEachSegment(\n    flatCoordinates,\n    offset,\n    end,\n    stride,\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} point1 Start point.\n     * @param {import(\"../../coordinate.js\").Coordinate} point2 End point.\n     * @return {boolean} `true` if the segment and the extent intersect,\n     *     `false` otherwise.\n     */\n    function (point1, point2) {\n      return intersectsSegment(extent, point1, point2);\n    }\n  );\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineStringArray(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  extent\n) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    if (\n      intersectsLineString(flatCoordinates, offset, ends[i], stride, extent)\n    ) {\n      return true;\n    }\n    offset = ends[i];\n  }\n  return false;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRing(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  extent\n) {\n  if (intersectsLineString(flatCoordinates, offset, end, stride, extent)) {\n    return true;\n  }\n  if (\n    linearRingContainsXY(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      extent[0],\n      extent[1]\n    )\n  ) {\n    return true;\n  }\n  if (\n    linearRingContainsXY(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      extent[0],\n      extent[3]\n    )\n  ) {\n    return true;\n  }\n  if (\n    linearRingContainsXY(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      extent[2],\n      extent[1]\n    )\n  ) {\n    return true;\n  }\n  if (\n    linearRingContainsXY(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      extent[2],\n      extent[3]\n    )\n  ) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingArray(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  extent\n) {\n  if (!intersectsLinearRing(flatCoordinates, offset, ends[0], stride, extent)) {\n    return false;\n  }\n  if (ends.length === 1) {\n    return true;\n  }\n  for (let i = 1, ii = ends.length; i < ii; ++i) {\n    if (\n      linearRingContainsExtent(\n        flatCoordinates,\n        ends[i - 1],\n        ends[i],\n        stride,\n        extent\n      )\n    ) {\n      if (\n        !intersectsLineString(\n          flatCoordinates,\n          ends[i - 1],\n          ends[i],\n          stride,\n          extent\n        )\n      ) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingMultiArray(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  extent\n) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (\n      intersectsLinearRingArray(flatCoordinates, offset, ends, stride, extent)\n    ) {\n      return true;\n    }\n    offset = ends[ends.length - 1];\n  }\n  return false;\n}\n","/**\n * @module ol/geom/flat/segments\n */\n\n/**\n * This function calls `callback` for each segment of the flat coordinates\n * array. If the callback returns a truthy value the function returns that\n * value immediately. Otherwise the function returns `false`.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {function(import(\"../../coordinate.js\").Coordinate, import(\"../../coordinate.js\").Coordinate): T} callback Function\n *     called for each segment.\n * @return {T|boolean} Value.\n * @template T\n */\nexport function forEach(flatCoordinates, offset, end, stride, callback) {\n  let ret;\n  offset += stride;\n  for (; offset < end; offset += stride) {\n    ret = callback(\n      flatCoordinates.slice(offset - stride, offset),\n      flatCoordinates.slice(offset, offset + stride)\n    );\n    if (ret) {\n      return ret;\n    }\n  }\n  return false;\n}\n","/**\n * @module ol/geom/flat/reverse\n */\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n */\nexport function coordinates(flatCoordinates, offset, end, stride) {\n  while (offset < end - stride) {\n    for (let i = 0; i < stride; ++i) {\n      const tmp = flatCoordinates[offset + i];\n      flatCoordinates[offset + i] = flatCoordinates[end - stride + i];\n      flatCoordinates[end - stride + i] = tmp;\n    }\n    offset += stride;\n    end -= stride;\n  }\n}\n","/**\n * @module ol/geom/flat/orient\n */\nimport {coordinates as reverseCoordinates} from './reverse.js';\n\n/**\n * Is the linear ring oriented clockwise in a coordinate system with a bottom-left\n * coordinate origin? For a coordinate system with a top-left coordinate origin,\n * the ring's orientation is clockwise when this function returns false.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {boolean} Is clockwise.\n */\nexport function linearRingIsClockwise(flatCoordinates, offset, end, stride) {\n  // https://stackoverflow.com/q/1165647/clockwise-method#1165943\n  // https://github.com/OSGeo/gdal/blob/master/gdal/ogr/ogrlinearring.cpp\n  let edge = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    edge += (x2 - x1) * (y2 + y1);\n    x1 = x2;\n    y1 = y2;\n  }\n  return edge === 0 ? undefined : edge > 0;\n}\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean} [right] Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingsAreOriented(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  right\n) {\n  right = right !== undefined ? right : false;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const isClockwise = linearRingIsClockwise(\n      flatCoordinates,\n      offset,\n      end,\n      stride\n    );\n    if (i === 0) {\n      if ((right && isClockwise) || (!right && !isClockwise)) {\n        return false;\n      }\n    } else {\n      if ((right && !isClockwise) || (!right && isClockwise)) {\n        return false;\n      }\n    }\n    offset = end;\n  }\n  return true;\n}\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean} [right] Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingssAreOriented(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  right\n) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (!linearRingsAreOriented(flatCoordinates, offset, ends, stride, right)) {\n      return false;\n    }\n    if (ends.length) {\n      offset = ends[ends.length - 1];\n    }\n  }\n  return true;\n}\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {boolean} [right] Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRings(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  right\n) {\n  right = right !== undefined ? right : false;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const isClockwise = linearRingIsClockwise(\n      flatCoordinates,\n      offset,\n      end,\n      stride\n    );\n    const reverse =\n      i === 0\n        ? (right && isClockwise) || (!right && !isClockwise)\n        : (right && !isClockwise) || (!right && isClockwise);\n    if (reverse) {\n      reverseCoordinates(flatCoordinates, offset, end, stride);\n    }\n    offset = end;\n  }\n  return offset;\n}\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean} [right] Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRingsArray(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  right\n) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    offset = orientLinearRings(\n      flatCoordinates,\n      offset,\n      endss[i],\n      stride,\n      right\n    );\n  }\n  return offset;\n}\n\n/**\n * Return a two-dimensional endss\n * @param {Array<number>} flatCoordinates Flat coordinates\n * @param {Array<number>} ends Linear ring end indexes\n * @return {Array<Array<number>>} Two dimensional endss array that can\n * be used to contruct a MultiPolygon\n */\nexport function inflateEnds(flatCoordinates, ends) {\n  const endss = [];\n  let offset = 0;\n  let prevEndIndex = 0;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    // classifies an array of rings into polygons with outer rings and holes\n    if (!linearRingIsClockwise(flatCoordinates, offset, end, 2)) {\n      endss.push(ends.slice(prevEndIndex, i + 1));\n    } else {\n      if (endss.length === 0) {\n        continue;\n      }\n      endss[endss.length - 1].push(ends[prevEndIndex]);\n    }\n    prevEndIndex = i + 1;\n    offset = end;\n  }\n  return endss;\n}\n","/**\n * @module ol/geom/Polygon\n */\nimport LinearRing from './LinearRing.js';\nimport Point from './Point.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {arrayMaxSquaredDelta, assignClosestArrayPoint} from './flat/closest.js';\nimport {closestSquaredDistanceXY, getCenter} from '../extent.js';\nimport {deflateCoordinatesArray} from './flat/deflate.js';\nimport {extend} from '../array.js';\nimport {getInteriorPointOfArray} from './flat/interiorpoint.js';\nimport {inflateCoordinatesArray} from './flat/inflate.js';\nimport {intersectsLinearRingArray} from './flat/intersectsextent.js';\nimport {linearRingsAreOriented, orientLinearRings} from './flat/orient.js';\nimport {linearRings as linearRingsArea} from './flat/area.js';\nimport {linearRingsContainsXY} from './flat/contains.js';\nimport {modulo} from '../math.js';\nimport {quantizeArray} from './flat/simplify.js';\nimport {offset as sphereOffset} from '../sphere.js';\n\n/**\n * @classdesc\n * Polygon geometry.\n *\n * @api\n */\nclass Polygon extends SimpleGeometry {\n  /**\n   * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>|!Array<number>} coordinates\n   *     Array of linear rings that define the polygon. The first linear ring of the\n   *     array defines the outer-boundary or surface of the polygon. Each subsequent\n   *     linear ring defines a hole in the surface of the polygon. A linear ring is\n   *     an array of vertices' coordinates where the first coordinate and the last are\n   *     equivalent. (For internal use, flat coordinates in combination with\n   *     `layout` and `ends` are also accepted.)\n   * @param {import(\"./Geometry.js\").GeometryLayout} [layout] Layout.\n   * @param {Array<number>} [ends] Ends (for internal use with flat coordinates).\n   */\n  constructor(coordinates, layout, ends) {\n    super();\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.ends_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.flatInteriorPointRevision_ = -1;\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.flatInteriorPoint_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.orientedRevision_ = -1;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.orientedFlatCoordinates_ = null;\n\n    if (layout !== undefined && ends) {\n      this.setFlatCoordinates(\n        layout,\n        /** @type {Array<number>} */ (coordinates)\n      );\n      this.ends_ = ends;\n    } else {\n      this.setCoordinates(\n        /** @type {Array<Array<import(\"../coordinate.js\").Coordinate>>} */ (\n          coordinates\n        ),\n        layout\n      );\n    }\n  }\n\n  /**\n   * Append the passed linear ring to this polygon.\n   * @param {LinearRing} linearRing Linear ring.\n   * @api\n   */\n  appendLinearRing(linearRing) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = linearRing.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, linearRing.getFlatCoordinates());\n    }\n    this.ends_.push(this.flatCoordinates.length);\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!Polygon} Clone.\n   * @api\n   */\n  clone() {\n    const polygon = new Polygon(\n      this.flatCoordinates.slice(),\n      this.layout,\n      this.ends_.slice()\n    );\n    polygon.applyProperties(this);\n    return polygon;\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(\n        arrayMaxSquaredDelta(\n          this.flatCoordinates,\n          0,\n          this.ends_,\n          this.stride,\n          0\n        )\n      );\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestArrayPoint(\n      this.flatCoordinates,\n      0,\n      this.ends_,\n      this.stride,\n      this.maxDelta_,\n      true,\n      x,\n      y,\n      closestPoint,\n      minSquaredDistance\n    );\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @return {boolean} Contains (x, y).\n   */\n  containsXY(x, y) {\n    return linearRingsContainsXY(\n      this.getOrientedFlatCoordinates(),\n      0,\n      this.ends_,\n      this.stride,\n      x,\n      y\n    );\n  }\n\n  /**\n   * Return the area of the polygon on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n  getArea() {\n    return linearRingsArea(\n      this.getOrientedFlatCoordinates(),\n      0,\n      this.ends_,\n      this.stride\n    );\n  }\n\n  /**\n   * Get the coordinate array for this geometry.  This array has the structure\n   * of a GeoJSON coordinate array for polygons.\n   *\n   * @param {boolean} [right] Orient coordinates according to the right-hand\n   *     rule (counter-clockwise for exterior and clockwise for interior rings).\n   *     If `false`, coordinates will be oriented according to the left-hand rule\n   *     (clockwise for exterior and counter-clockwise for interior rings).\n   *     By default, coordinate orientation will depend on how the geometry was\n   *     constructed.\n   * @return {Array<Array<import(\"../coordinate.js\").Coordinate>>} Coordinates.\n   * @api\n   */\n  getCoordinates(right) {\n    let flatCoordinates;\n    if (right !== undefined) {\n      flatCoordinates = this.getOrientedFlatCoordinates().slice();\n      orientLinearRings(flatCoordinates, 0, this.ends_, this.stride, right);\n    } else {\n      flatCoordinates = this.flatCoordinates;\n    }\n\n    return inflateCoordinatesArray(flatCoordinates, 0, this.ends_, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Ends.\n   */\n  getEnds() {\n    return this.ends_;\n  }\n\n  /**\n   * @return {Array<number>} Interior point.\n   */\n  getFlatInteriorPoint() {\n    if (this.flatInteriorPointRevision_ != this.getRevision()) {\n      const flatCenter = getCenter(this.getExtent());\n      this.flatInteriorPoint_ = getInteriorPointOfArray(\n        this.getOrientedFlatCoordinates(),\n        0,\n        this.ends_,\n        this.stride,\n        flatCenter,\n        0\n      );\n      this.flatInteriorPointRevision_ = this.getRevision();\n    }\n    return this.flatInteriorPoint_;\n  }\n\n  /**\n   * Return an interior point of the polygon.\n   * @return {Point} Interior point as XYM coordinate, where M is the\n   * length of the horizontal intersection that the point belongs to.\n   * @api\n   */\n  getInteriorPoint() {\n    return new Point(this.getFlatInteriorPoint(), 'XYM');\n  }\n\n  /**\n   * Return the number of rings of the polygon,  this includes the exterior\n   * ring and any interior rings.\n   *\n   * @return {number} Number of rings.\n   * @api\n   */\n  getLinearRingCount() {\n    return this.ends_.length;\n  }\n\n  /**\n   * Return the Nth linear ring of the polygon geometry. Return `null` if the\n   * given index is out of range.\n   * The exterior linear ring is available at index `0` and the interior rings\n   * at index `1` and beyond.\n   *\n   * @param {number} index Index.\n   * @return {LinearRing|null} Linear ring.\n   * @api\n   */\n  getLinearRing(index) {\n    if (index < 0 || this.ends_.length <= index) {\n      return null;\n    }\n    return new LinearRing(\n      this.flatCoordinates.slice(\n        index === 0 ? 0 : this.ends_[index - 1],\n        this.ends_[index]\n      ),\n      this.layout\n    );\n  }\n\n  /**\n   * Return the linear rings of the polygon.\n   * @return {Array<LinearRing>} Linear rings.\n   * @api\n   */\n  getLinearRings() {\n    const layout = this.layout;\n    const flatCoordinates = this.flatCoordinates;\n    const ends = this.ends_;\n    const linearRings = [];\n    let offset = 0;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const linearRing = new LinearRing(\n        flatCoordinates.slice(offset, end),\n        layout\n      );\n      linearRings.push(linearRing);\n      offset = end;\n    }\n    return linearRings;\n  }\n\n  /**\n   * @return {Array<number>} Oriented flat coordinates.\n   */\n  getOrientedFlatCoordinates() {\n    if (this.orientedRevision_ != this.getRevision()) {\n      const flatCoordinates = this.flatCoordinates;\n      if (linearRingsAreOriented(flatCoordinates, 0, this.ends_, this.stride)) {\n        this.orientedFlatCoordinates_ = flatCoordinates;\n      } else {\n        this.orientedFlatCoordinates_ = flatCoordinates.slice();\n        this.orientedFlatCoordinates_.length = orientLinearRings(\n          this.orientedFlatCoordinates_,\n          0,\n          this.ends_,\n          this.stride\n        );\n      }\n      this.orientedRevision_ = this.getRevision();\n    }\n    return this.orientedFlatCoordinates_;\n  }\n\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {Polygon} Simplified Polygon.\n   * @protected\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    const simplifiedEnds = [];\n    simplifiedFlatCoordinates.length = quantizeArray(\n      this.flatCoordinates,\n      0,\n      this.ends_,\n      this.stride,\n      Math.sqrt(squaredTolerance),\n      simplifiedFlatCoordinates,\n      0,\n      simplifiedEnds\n    );\n    return new Polygon(simplifiedFlatCoordinates, 'XY', simplifiedEnds);\n  }\n\n  /**\n   * Get the type of this geometry.\n   * @return {import(\"./Geometry.js\").Type} Geometry type.\n   * @api\n   */\n  getType() {\n    return 'Polygon';\n  }\n\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLinearRingArray(\n      this.getOrientedFlatCoordinates(),\n      0,\n      this.ends_,\n      this.stride,\n      extent\n    );\n  }\n\n  /**\n   * Set the coordinates of the polygon.\n   * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>} coordinates Coordinates.\n   * @param {import(\"./Geometry.js\").GeometryLayout} [layout] Layout.\n   * @api\n   */\n  setCoordinates(coordinates, layout) {\n    this.setLayout(layout, coordinates, 2);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const ends = deflateCoordinatesArray(\n      this.flatCoordinates,\n      0,\n      coordinates,\n      this.stride,\n      this.ends_\n    );\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  }\n}\n\nexport default Polygon;\n\n/**\n * Create an approximation of a circle on the surface of a sphere.\n * @param {import(\"../coordinate.js\").Coordinate} center Center (`[lon, lat]` in degrees).\n * @param {number} radius The great-circle distance from the center to\n *     the polygon vertices in meters.\n * @param {number} [n] Optional number of vertices for the resulting\n *     polygon. Default is `32`.\n * @param {number} [sphereRadius] Optional radius for the sphere (defaults to\n *     the Earth's mean radius using the WGS84 ellipsoid).\n * @return {Polygon} The \"circular\" polygon.\n * @api\n */\nexport function circular(center, radius, n, sphereRadius) {\n  n = n ? n : 32;\n  /** @type {Array<number>} */\n  const flatCoordinates = [];\n  for (let i = 0; i < n; ++i) {\n    extend(\n      flatCoordinates,\n      sphereOffset(center, radius, (2 * Math.PI * i) / n, sphereRadius)\n    );\n  }\n  flatCoordinates.push(flatCoordinates[0], flatCoordinates[1]);\n  return new Polygon(flatCoordinates, 'XY', [flatCoordinates.length]);\n}\n\n/**\n * Create a polygon from an extent. The layout used is `XY`.\n * @param {import(\"../extent.js\").Extent} extent The extent.\n * @return {Polygon} The polygon.\n * @api\n */\nexport function fromExtent(extent) {\n  const minX = extent[0];\n  const minY = extent[1];\n  const maxX = extent[2];\n  const maxY = extent[3];\n  const flatCoordinates = [\n    minX,\n    minY,\n    minX,\n    maxY,\n    maxX,\n    maxY,\n    maxX,\n    minY,\n    minX,\n    minY,\n  ];\n  return new Polygon(flatCoordinates, 'XY', [flatCoordinates.length]);\n}\n\n/**\n * Create a regular polygon from a circle.\n * @param {import(\"./Circle.js\").default} circle Circle geometry.\n * @param {number} [sides] Number of sides of the polygon. Default is 32.\n * @param {number} [angle] Start angle for the first vertex of the polygon in\n *     counter-clockwise radians. 0 means East. Default is 0.\n * @return {Polygon} Polygon geometry.\n * @api\n */\nexport function fromCircle(circle, sides, angle) {\n  sides = sides ? sides : 32;\n  const stride = circle.getStride();\n  const layout = circle.getLayout();\n  const center = circle.getCenter();\n  const arrayLength = stride * (sides + 1);\n  const flatCoordinates = new Array(arrayLength);\n  for (let i = 0; i < arrayLength; i += stride) {\n    flatCoordinates[i] = 0;\n    flatCoordinates[i + 1] = 0;\n    for (let j = 2; j < stride; j++) {\n      flatCoordinates[i + j] = center[j];\n    }\n  }\n  const ends = [flatCoordinates.length];\n  const polygon = new Polygon(flatCoordinates, layout, ends);\n  makeRegular(polygon, center, circle.getRadius(), angle);\n  return polygon;\n}\n\n/**\n * Modify the coordinates of a polygon to make it a regular polygon.\n * @param {Polygon} polygon Polygon geometry.\n * @param {import(\"../coordinate.js\").Coordinate} center Center of the regular polygon.\n * @param {number} radius Radius of the regular polygon.\n * @param {number} [angle] Start angle for the first vertex of the polygon in\n *     counter-clockwise radians. 0 means East. Default is 0.\n */\nexport function makeRegular(polygon, center, radius, angle) {\n  const flatCoordinates = polygon.getFlatCoordinates();\n  const stride = polygon.getStride();\n  const sides = flatCoordinates.length / stride - 1;\n  const startAngle = angle ? angle : 0;\n  for (let i = 0; i <= sides; ++i) {\n    const offset = i * stride;\n    const angle = startAngle + (modulo(i, sides) * 2 * Math.PI) / sides;\n    flatCoordinates[offset] = center[0] + radius * Math.cos(angle);\n    flatCoordinates[offset + 1] = center[1] + radius * Math.sin(angle);\n  }\n  polygon.changed();\n}\n","/**\n * @module ol/tilegrid/common\n */\n\n/**\n * Default maximum zoom for default tile grids.\n * @type {number}\n */\nexport const DEFAULT_MAX_ZOOM = 42;\n\n/**\n * Default tile size.\n * @type {number}\n */\nexport const DEFAULT_TILE_SIZE = 256;\n","/**\n * @module ol/control/Attribution\n */\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport {CLASS_COLLAPSED, CLASS_CONTROL, CLASS_UNSELECTABLE} from '../css.js';\nimport {equals} from '../array.js';\nimport {inView} from '../layer/Layer.js';\nimport {removeChildren, replaceNode} from '../dom.js';\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-attribution'] CSS class name.\n * @property {HTMLElement|string} [target] Specify a target if you\n * want the control to be rendered outside of the map's\n * viewport.\n * @property {boolean} [collapsible] Specify if attributions can\n * be collapsed. If not specified, sources control this behavior with their\n * `attributionsCollapsible` setting.\n * @property {boolean} [collapsed=true] Specify if attributions should\n * be collapsed at startup.\n * @property {string} [tipLabel='Attributions'] Text label to use for the button tip.\n * @property {string|HTMLElement} [label='i'] Text label to use for the\n * collapsed attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [expandClassName=className + '-expand'] CSS class name for the\n * collapsed attributions button.\n * @property {string|HTMLElement} [collapseLabel='›'] Text label to use\n * for the expanded attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [collapseClassName=className + '-collapse'] CSS class name for the\n * expanded attributions button.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n */\n\n/**\n * @classdesc\n * Control to show all the attributions associated with the layer sources\n * in the map. This control is one of the default controls included in maps.\n * By default it will show in the bottom right portion of the map, but this can\n * be changed by using a css selector for `.ol-attribution`.\n *\n * @api\n */\nclass Attribution extends Control {\n  /**\n   * @param {Options} [options] Attribution options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super({\n      element: document.createElement('div'),\n      render: options.render,\n      target: options.target,\n    });\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.ulElement_ = document.createElement('ul');\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.collapsed_ =\n      options.collapsed !== undefined ? options.collapsed : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.userCollapsed_ = this.collapsed_;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overrideCollapsible_ = options.collapsible !== undefined;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.collapsible_ =\n      options.collapsible !== undefined ? options.collapsible : true;\n\n    if (!this.collapsible_) {\n      this.collapsed_ = false;\n    }\n\n    const className =\n      options.className !== undefined ? options.className : 'ol-attribution';\n\n    const tipLabel =\n      options.tipLabel !== undefined ? options.tipLabel : 'Attributions';\n\n    const expandClassName =\n      options.expandClassName !== undefined\n        ? options.expandClassName\n        : className + '-expand';\n\n    const collapseLabel =\n      options.collapseLabel !== undefined ? options.collapseLabel : '\\u203A';\n\n    const collapseClassName =\n      options.collapseClassName !== undefined\n        ? options.collapseClassName\n        : className + '-collapse';\n\n    if (typeof collapseLabel === 'string') {\n      /**\n       * @private\n       * @type {HTMLElement}\n       */\n      this.collapseLabel_ = document.createElement('span');\n      this.collapseLabel_.textContent = collapseLabel;\n      this.collapseLabel_.className = collapseClassName;\n    } else {\n      this.collapseLabel_ = collapseLabel;\n    }\n\n    const label = options.label !== undefined ? options.label : 'i';\n\n    if (typeof label === 'string') {\n      /**\n       * @private\n       * @type {HTMLElement}\n       */\n      this.label_ = document.createElement('span');\n      this.label_.textContent = label;\n      this.label_.className = expandClassName;\n    } else {\n      this.label_ = label;\n    }\n\n    const activeLabel =\n      this.collapsible_ && !this.collapsed_ ? this.collapseLabel_ : this.label_;\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.toggleButton_ = document.createElement('button');\n    this.toggleButton_.setAttribute('type', 'button');\n    this.toggleButton_.setAttribute('aria-expanded', String(!this.collapsed_));\n    this.toggleButton_.title = tipLabel;\n    this.toggleButton_.appendChild(activeLabel);\n\n    this.toggleButton_.addEventListener(\n      EventType.CLICK,\n      this.handleClick_.bind(this),\n      false\n    );\n\n    const cssClasses =\n      className +\n      ' ' +\n      CLASS_UNSELECTABLE +\n      ' ' +\n      CLASS_CONTROL +\n      (this.collapsed_ && this.collapsible_ ? ' ' + CLASS_COLLAPSED : '') +\n      (this.collapsible_ ? '' : ' ol-uncollapsible');\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(this.toggleButton_);\n    element.appendChild(this.ulElement_);\n\n    /**\n     * A list of currently rendered resolutions.\n     * @type {Array<string>}\n     * @private\n     */\n    this.renderedAttributions_ = [];\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = true;\n  }\n\n  /**\n   * Collect a list of visible attributions and set the collapsible state.\n   * @param {import(\"../Map.js\").FrameState} frameState Frame state.\n   * @return {Array<string>} Attributions.\n   * @private\n   */\n  collectSourceAttributions_(frameState) {\n    /**\n     * Used to determine if an attribution already exists.\n     * @type {!Object<string, boolean>}\n     */\n    const lookup = {};\n\n    /**\n     * A list of visible attributions.\n     * @type {Array<string>}\n     */\n    const visibleAttributions = [];\n\n    let collapsible = true;\n    const layerStatesArray = frameState.layerStatesArray;\n    for (let i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      const layerState = layerStatesArray[i];\n      if (!inView(layerState, frameState.viewState)) {\n        continue;\n      }\n\n      const source = /** @type {import(\"../layer/Layer.js\").default} */ (\n        layerState.layer\n      ).getSource();\n      if (!source) {\n        continue;\n      }\n\n      const attributionGetter = source.getAttributions();\n      if (!attributionGetter) {\n        continue;\n      }\n\n      const attributions = attributionGetter(frameState);\n      if (!attributions) {\n        continue;\n      }\n\n      collapsible =\n        collapsible && source.getAttributionsCollapsible() !== false;\n\n      if (Array.isArray(attributions)) {\n        for (let j = 0, jj = attributions.length; j < jj; ++j) {\n          if (!(attributions[j] in lookup)) {\n            visibleAttributions.push(attributions[j]);\n            lookup[attributions[j]] = true;\n          }\n        }\n      } else {\n        if (!(attributions in lookup)) {\n          visibleAttributions.push(attributions);\n          lookup[attributions] = true;\n        }\n      }\n    }\n    if (!this.overrideCollapsible_) {\n      this.setCollapsible(collapsible);\n    }\n    return visibleAttributions;\n  }\n\n  /**\n   * @private\n   * @param {?import(\"../Map.js\").FrameState} frameState Frame state.\n   */\n  updateElement_(frameState) {\n    if (!frameState) {\n      if (this.renderedVisible_) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n\n    const attributions = this.collectSourceAttributions_(frameState);\n\n    const visible = attributions.length > 0;\n    if (this.renderedVisible_ != visible) {\n      this.element.style.display = visible ? '' : 'none';\n      this.renderedVisible_ = visible;\n    }\n\n    if (equals(attributions, this.renderedAttributions_)) {\n      return;\n    }\n\n    removeChildren(this.ulElement_);\n\n    // append the attributions\n    for (let i = 0, ii = attributions.length; i < ii; ++i) {\n      const element = document.createElement('li');\n      element.innerHTML = attributions[i];\n      this.ulElement_.appendChild(element);\n    }\n\n    this.renderedAttributions_ = attributions;\n  }\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(event) {\n    event.preventDefault();\n    this.handleToggle_();\n    this.userCollapsed_ = this.collapsed_;\n  }\n\n  /**\n   * @private\n   */\n  handleToggle_() {\n    this.element.classList.toggle(CLASS_COLLAPSED);\n    if (this.collapsed_) {\n      replaceNode(this.collapseLabel_, this.label_);\n    } else {\n      replaceNode(this.label_, this.collapseLabel_);\n    }\n    this.collapsed_ = !this.collapsed_;\n    this.toggleButton_.setAttribute('aria-expanded', String(!this.collapsed_));\n  }\n\n  /**\n   * Return `true` if the attribution is collapsible, `false` otherwise.\n   * @return {boolean} True if the widget is collapsible.\n   * @api\n   */\n  getCollapsible() {\n    return this.collapsible_;\n  }\n\n  /**\n   * Set whether the attribution should be collapsible.\n   * @param {boolean} collapsible True if the widget is collapsible.\n   * @api\n   */\n  setCollapsible(collapsible) {\n    if (this.collapsible_ === collapsible) {\n      return;\n    }\n    this.collapsible_ = collapsible;\n    this.element.classList.toggle('ol-uncollapsible');\n    if (this.userCollapsed_) {\n      this.handleToggle_();\n    }\n  }\n\n  /**\n   * Collapse or expand the attribution according to the passed parameter. Will\n   * not do anything if the attribution isn't collapsible or if the current\n   * collapsed state is already the one requested.\n   * @param {boolean} collapsed True if the widget is collapsed.\n   * @api\n   */\n  setCollapsed(collapsed) {\n    this.userCollapsed_ = collapsed;\n    if (!this.collapsible_ || this.collapsed_ === collapsed) {\n      return;\n    }\n    this.handleToggle_();\n  }\n\n  /**\n   * Return `true` when the attribution is currently collapsed or `false`\n   * otherwise.\n   * @return {boolean} True if the widget is collapsed.\n   * @api\n   */\n  getCollapsed() {\n    return this.collapsed_;\n  }\n\n  /**\n   * Update the attribution element.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @override\n   */\n  render(mapEvent) {\n    this.updateElement_(mapEvent.frameState);\n  }\n}\n\nexport default Attribution;\n","/**\n * @module ol/control/Rotate\n */\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport {CLASS_CONTROL, CLASS_HIDDEN, CLASS_UNSELECTABLE} from '../css.js';\nimport {easeOut} from '../easing.js';\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-rotate'] CSS class name.\n * @property {string|HTMLElement} [label='⇧'] Text label to use for the rotate button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [tipLabel='Reset rotation'] Text label to use for the rotate tip.\n * @property {string} [compassClassName='ol-compass'] CSS class name for the compass.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {boolean} [autoHide=true] Hide the control when rotation is 0.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control should\n * be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {function():void} [resetNorth] Function called when the control is clicked.\n * This will override the default `resetNorth`.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n/**\n * @classdesc\n * A button control to reset rotation to 0.\n * To style this control use css selector `.ol-rotate`. A `.ol-hidden` css\n * selector is added to the button when the rotation is 0.\n *\n * @api\n */\nclass Rotate extends Control {\n  /**\n   * @param {Options} [options] Rotate options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super({\n      element: document.createElement('div'),\n      render: options.render,\n      target: options.target,\n    });\n\n    const className =\n      options.className !== undefined ? options.className : 'ol-rotate';\n\n    const label = options.label !== undefined ? options.label : '\\u21E7';\n\n    const compassClassName =\n      options.compassClassName !== undefined\n        ? options.compassClassName\n        : 'ol-compass';\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n    this.label_ = null;\n\n    if (typeof label === 'string') {\n      this.label_ = document.createElement('span');\n      this.label_.className = compassClassName;\n      this.label_.textContent = label;\n    } else {\n      this.label_ = label;\n      this.label_.classList.add(compassClassName);\n    }\n\n    const tipLabel = options.tipLabel ? options.tipLabel : 'Reset rotation';\n\n    const button = document.createElement('button');\n    button.className = className + '-reset';\n    button.setAttribute('type', 'button');\n    button.title = tipLabel;\n    button.appendChild(this.label_);\n\n    button.addEventListener(\n      EventType.CLICK,\n      this.handleClick_.bind(this),\n      false\n    );\n\n    const cssClasses =\n      className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(button);\n\n    this.callResetNorth_ = options.resetNorth ? options.resetNorth : undefined;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.autoHide_ = options.autoHide !== undefined ? options.autoHide : true;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation_ = undefined;\n\n    if (this.autoHide_) {\n      this.element.classList.add(CLASS_HIDDEN);\n    }\n  }\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(event) {\n    event.preventDefault();\n    if (this.callResetNorth_ !== undefined) {\n      this.callResetNorth_();\n    } else {\n      this.resetNorth_();\n    }\n  }\n\n  /**\n   * @private\n   */\n  resetNorth_() {\n    const map = this.getMap();\n    const view = map.getView();\n    if (!view) {\n      // the map does not have a view, so we can't act\n      // upon it\n      return;\n    }\n    const rotation = view.getRotation();\n    if (rotation !== undefined) {\n      if (this.duration_ > 0 && rotation % (2 * Math.PI) !== 0) {\n        view.animate({\n          rotation: 0,\n          duration: this.duration_,\n          easing: easeOut,\n        });\n      } else {\n        view.setRotation(0);\n      }\n    }\n  }\n\n  /**\n   * Update the rotate control element.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @override\n   */\n  render(mapEvent) {\n    const frameState = mapEvent.frameState;\n    if (!frameState) {\n      return;\n    }\n    const rotation = frameState.viewState.rotation;\n    if (rotation != this.rotation_) {\n      const transform = 'rotate(' + rotation + 'rad)';\n      if (this.autoHide_) {\n        const contains = this.element.classList.contains(CLASS_HIDDEN);\n        if (!contains && rotation === 0) {\n          this.element.classList.add(CLASS_HIDDEN);\n        } else if (contains && rotation !== 0) {\n          this.element.classList.remove(CLASS_HIDDEN);\n        }\n      }\n      this.label_.style.transform = transform;\n    }\n    this.rotation_ = rotation;\n  }\n}\n\nexport default Rotate;\n","/**\n * @module ol/control/Zoom\n */\nimport Control from './Control.js';\nimport EventType from '../events/EventType.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE} from '../css.js';\nimport {easeOut} from '../easing.js';\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {string} [className='ol-zoom'] CSS class name.\n * @property {string} [zoomInClassName=className + '-in'] CSS class name for the zoom-in button.\n * @property {string} [zoomOutClassName=className + '-out'] CSS class name for the zoom-out button.\n * @property {string|HTMLElement} [zoomInLabel='+'] Text label to use for the zoom-in\n * button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|HTMLElement} [zoomOutLabel='–'] Text label to use for the zoom-out button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [zoomInTipLabel='Zoom in'] Text label to use for the button tip.\n * @property {string} [zoomOutTipLabel='Zoom out'] Text label to use for the button tip.\n * @property {number} [delta=1] The zoom delta applied on each click.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n/**\n * @classdesc\n * A control with 2 buttons, one for zoom in and one for zoom out.\n * This control is one of the default controls of a map. To style this control\n * use css selectors `.ol-zoom-in` and `.ol-zoom-out`.\n *\n * @api\n */\nclass Zoom extends Control {\n  /**\n   * @param {Options} [options] Zoom options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super({\n      element: document.createElement('div'),\n      target: options.target,\n    });\n\n    const className =\n      options.className !== undefined ? options.className : 'ol-zoom';\n\n    const delta = options.delta !== undefined ? options.delta : 1;\n\n    const zoomInClassName =\n      options.zoomInClassName !== undefined\n        ? options.zoomInClassName\n        : className + '-in';\n\n    const zoomOutClassName =\n      options.zoomOutClassName !== undefined\n        ? options.zoomOutClassName\n        : className + '-out';\n\n    const zoomInLabel =\n      options.zoomInLabel !== undefined ? options.zoomInLabel : '+';\n    const zoomOutLabel =\n      options.zoomOutLabel !== undefined ? options.zoomOutLabel : '\\u2013';\n\n    const zoomInTipLabel =\n      options.zoomInTipLabel !== undefined ? options.zoomInTipLabel : 'Zoom in';\n    const zoomOutTipLabel =\n      options.zoomOutTipLabel !== undefined\n        ? options.zoomOutTipLabel\n        : 'Zoom out';\n\n    const inElement = document.createElement('button');\n    inElement.className = zoomInClassName;\n    inElement.setAttribute('type', 'button');\n    inElement.title = zoomInTipLabel;\n    inElement.appendChild(\n      typeof zoomInLabel === 'string'\n        ? document.createTextNode(zoomInLabel)\n        : zoomInLabel\n    );\n\n    inElement.addEventListener(\n      EventType.CLICK,\n      this.handleClick_.bind(this, delta),\n      false\n    );\n\n    const outElement = document.createElement('button');\n    outElement.className = zoomOutClassName;\n    outElement.setAttribute('type', 'button');\n    outElement.title = zoomOutTipLabel;\n    outElement.appendChild(\n      typeof zoomOutLabel === 'string'\n        ? document.createTextNode(zoomOutLabel)\n        : zoomOutLabel\n    );\n\n    outElement.addEventListener(\n      EventType.CLICK,\n      this.handleClick_.bind(this, -delta),\n      false\n    );\n\n    const cssClasses =\n      className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(inElement);\n    element.appendChild(outElement);\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n  }\n\n  /**\n   * @param {number} delta Zoom delta.\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(delta, event) {\n    event.preventDefault();\n    this.zoomByDelta_(delta);\n  }\n\n  /**\n   * @param {number} delta Zoom delta.\n   * @private\n   */\n  zoomByDelta_(delta) {\n    const map = this.getMap();\n    const view = map.getView();\n    if (!view) {\n      // the map does not have a view, so we can't act\n      // upon it\n      return;\n    }\n    const currentZoom = view.getZoom();\n    if (currentZoom !== undefined) {\n      const newZoom = view.getConstrainedZoom(currentZoom + delta);\n      if (this.duration_ > 0) {\n        if (view.getAnimating()) {\n          view.cancelAnimations();\n        }\n        view.animate({\n          zoom: newZoom,\n          duration: this.duration_,\n          easing: easeOut,\n        });\n      } else {\n        view.setZoom(newZoom);\n      }\n    }\n  }\n}\n\nexport default Zoom;\n","/**\n * @module ol/control/defaults\n */\nimport Attribution from './Attribution.js';\nimport Collection from '../Collection.js';\nimport Rotate from './Rotate.js';\nimport Zoom from './Zoom.js';\n\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [attribution=true] Include\n * {@link module:ol/control/Attribution~Attribution}.\n * @property {import(\"./Attribution.js\").Options} [attributionOptions]\n * Options for {@link module:ol/control/Attribution~Attribution}.\n * @property {boolean} [rotate=true] Include\n * {@link module:ol/control/Rotate~Rotate}.\n * @property {import(\"./Rotate.js\").Options} [rotateOptions] Options\n * for {@link module:ol/control/Rotate~Rotate}.\n * @property {boolean} [zoom] Include {@link module:ol/control/Zoom~Zoom}.\n * @property {import(\"./Zoom.js\").Options} [zoomOptions] Options for\n * {@link module:ol/control/Zoom~Zoom}.\n */\n\n/**\n * Set of controls included in maps by default. Unless configured otherwise,\n * this returns a collection containing an instance of each of the following\n * controls:\n * * {@link module:ol/control/Zoom~Zoom}\n * * {@link module:ol/control/Rotate~Rotate}\n * * {@link module:ol/control/Attribution~Attribution}\n *\n * @param {DefaultsOptions} [options] Options for the default controls.\n * @return {Collection<import(\"./Control.js\").default>} A collection of controls\n * to be used with the {@link module:ol/Map~Map} constructor's `controls` option.\n * @api\n */\nexport function defaults(options) {\n  options = options ? options : {};\n\n  /** @type {Collection<import(\"./Control.js\").default>} */\n  const controls = new Collection();\n\n  const zoomControl = options.zoom !== undefined ? options.zoom : true;\n  if (zoomControl) {\n    controls.push(new Zoom(options.zoomOptions));\n  }\n\n  const rotateControl = options.rotate !== undefined ? options.rotate : true;\n  if (rotateControl) {\n    controls.push(new Rotate(options.rotateOptions));\n  }\n\n  const attributionControl =\n    options.attribution !== undefined ? options.attribution : true;\n  if (attributionControl) {\n    controls.push(new Attribution(options.attributionOptions));\n  }\n\n  return controls;\n}\n","/**\n * @module ol/interaction/defaults\n */\nimport Collection from '../Collection.js';\nimport DoubleClickZoom from './DoubleClickZoom.js';\nimport DragPan from './DragPan.js';\nimport DragRotate from './DragRotate.js';\nimport DragZoom from './DragZoom.js';\nimport KeyboardPan from './KeyboardPan.js';\nimport KeyboardZoom from './KeyboardZoom.js';\nimport Kinetic from '../Kinetic.js';\nimport MouseWheelZoom from './MouseWheelZoom.js';\nimport PinchRotate from './PinchRotate.js';\nimport PinchZoom from './PinchZoom.js';\n\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [altShiftDragRotate=true] Whether Alt-Shift-drag rotate is\n * desired.\n * @property {boolean} [onFocusOnly=false] Interact only when the map has the\n * focus. This affects the `MouseWheelZoom` and `DragPan` interactions and is\n * useful when page scroll is desired for maps that do not have the browser's\n * focus.\n * @property {boolean} [doubleClickZoom=true] Whether double click zoom is\n * desired.\n * @property {boolean} [keyboard=true] Whether keyboard interaction is desired.\n * @property {boolean} [mouseWheelZoom=true] Whether mousewheel zoom is desired.\n * @property {boolean} [shiftDragZoom=true] Whether Shift-drag zoom is desired.\n * @property {boolean} [dragPan=true] Whether drag pan is desired.\n * @property {boolean} [pinchRotate=true] Whether pinch rotate is desired.\n * @property {boolean} [pinchZoom=true] Whether pinch zoom is desired.\n * @property {number} [zoomDelta] Zoom level delta when using keyboard or double click zoom.\n * @property {number} [zoomDuration] Duration of the zoom animation in\n * milliseconds.\n */\n\n/**\n * Set of interactions included in maps by default. Specific interactions can be\n * excluded by setting the appropriate option to false in the constructor\n * options, but the order of the interactions is fixed.  If you want to specify\n * a different order for interactions, you will need to create your own\n * {@link module:ol/interaction/Interaction~Interaction} instances and insert\n * them into a {@link module:ol/Collection~Collection} in the order you want\n * before creating your {@link module:ol/Map~Map} instance. Changing the order can\n * be of interest if the event propagation needs to be stopped at a point.\n * The default set of interactions, in sequence, is:\n * * {@link module:ol/interaction/DragRotate~DragRotate}\n * * {@link module:ol/interaction/DoubleClickZoom~DoubleClickZoom}\n * * {@link module:ol/interaction/DragPan~DragPan}\n * * {@link module:ol/interaction/PinchRotate~PinchRotate}\n * * {@link module:ol/interaction/PinchZoom~PinchZoom}\n * * {@link module:ol/interaction/KeyboardPan~KeyboardPan}\n * * {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}\n * * {@link module:ol/interaction/MouseWheelZoom~MouseWheelZoom}\n * * {@link module:ol/interaction/DragZoom~DragZoom}\n *\n * @param {DefaultsOptions} [options] Defaults options.\n * @return {Collection<import(\"./Interaction.js\").default>}\n * A collection of interactions to be used with the {@link module:ol/Map~Map}\n * constructor's `interactions` option.\n * @api\n */\nexport function defaults(options) {\n  options = options ? options : {};\n\n  /** @type {Collection<import(\"./Interaction.js\").default>} */\n  const interactions = new Collection();\n\n  const kinetic = new Kinetic(-0.005, 0.05, 100);\n\n  const altShiftDragRotate =\n    options.altShiftDragRotate !== undefined\n      ? options.altShiftDragRotate\n      : true;\n  if (altShiftDragRotate) {\n    interactions.push(new DragRotate());\n  }\n\n  const doubleClickZoom =\n    options.doubleClickZoom !== undefined ? options.doubleClickZoom : true;\n  if (doubleClickZoom) {\n    interactions.push(\n      new DoubleClickZoom({\n        delta: options.zoomDelta,\n        duration: options.zoomDuration,\n      })\n    );\n  }\n\n  const dragPan = options.dragPan !== undefined ? options.dragPan : true;\n  if (dragPan) {\n    interactions.push(\n      new DragPan({\n        onFocusOnly: options.onFocusOnly,\n        kinetic: kinetic,\n      })\n    );\n  }\n\n  const pinchRotate =\n    options.pinchRotate !== undefined ? options.pinchRotate : true;\n  if (pinchRotate) {\n    interactions.push(new PinchRotate());\n  }\n\n  const pinchZoom = options.pinchZoom !== undefined ? options.pinchZoom : true;\n  if (pinchZoom) {\n    interactions.push(\n      new PinchZoom({\n        duration: options.zoomDuration,\n      })\n    );\n  }\n\n  const keyboard = options.keyboard !== undefined ? options.keyboard : true;\n  if (keyboard) {\n    interactions.push(new KeyboardPan());\n    interactions.push(\n      new KeyboardZoom({\n        delta: options.zoomDelta,\n        duration: options.zoomDuration,\n      })\n    );\n  }\n\n  const mouseWheelZoom =\n    options.mouseWheelZoom !== undefined ? options.mouseWheelZoom : true;\n  if (mouseWheelZoom) {\n    interactions.push(\n      new MouseWheelZoom({\n        onFocusOnly: options.onFocusOnly,\n        duration: options.zoomDuration,\n      })\n    );\n  }\n\n  const shiftDragZoom =\n    options.shiftDragZoom !== undefined ? options.shiftDragZoom : true;\n  if (shiftDragZoom) {\n    interactions.push(\n      new DragZoom({\n        duration: options.zoomDuration,\n      })\n    );\n  }\n\n  return interactions;\n}\n","/**\n * @module ol/interaction/Interaction\n */\nimport BaseObject from '../Object.js';\nimport InteractionProperty from './Property.js';\nimport {easeOut, linear} from '../easing.js';\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active', Return>} InteractionOnSignature\n */\n\n/**\n * Object literal with config options for interactions.\n * @typedef {Object} InteractionOptions\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} handleEvent\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. If the function returns a falsy value, propagation of\n * the event to other interactions in the map's interactions chain will be\n * prevented (this includes functions with no explicit return). The interactions\n * are traversed in reverse order of the interactions collection of the map.\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * User actions that change the state of the map. Some are similar to controls,\n * but are not associated with a DOM element.\n * For example, {@link module:ol/interaction/KeyboardZoom~KeyboardZoom} is\n * functionally the same as {@link module:ol/control/Zoom~Zoom}, but triggered\n * by a keyboard event not a button element event.\n * Although interactions do not have a DOM element, some of them do render\n * vectors and so are visible on the screen.\n * @api\n */\nclass Interaction extends BaseObject {\n  /**\n   * @param {InteractionOptions} [options] Options.\n   */\n  constructor(options) {\n    super();\n\n    /***\n     * @type {InteractionOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {InteractionOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {InteractionOnSignature<void>}\n     */\n    this.un;\n\n    if (options && options.handleEvent) {\n      this.handleEvent = options.handleEvent;\n    }\n\n    /**\n     * @private\n     * @type {import(\"../Map.js\").default|null}\n     */\n    this.map_ = null;\n\n    this.setActive(true);\n  }\n\n  /**\n   * Return whether the interaction is currently active.\n   * @return {boolean} `true` if the interaction is active, `false` otherwise.\n   * @observable\n   * @api\n   */\n  getActive() {\n    return /** @type {boolean} */ (this.get(InteractionProperty.ACTIVE));\n  }\n\n  /**\n   * Get the map associated with this interaction.\n   * @return {import(\"../Map.js\").default|null} Map.\n   * @api\n   */\n  getMap() {\n    return this.map_;\n  }\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent~MapBrowserEvent map browser event}.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n   * @return {boolean} `false` to stop event propagation.\n   * @api\n   */\n  handleEvent(mapBrowserEvent) {\n    return true;\n  }\n\n  /**\n   * Activate or deactivate the interaction.\n   * @param {boolean} active Active.\n   * @observable\n   * @api\n   */\n  setActive(active) {\n    this.set(InteractionProperty.ACTIVE, active);\n  }\n\n  /**\n   * Remove the interaction from its current map and attach it to the new map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../Map.js\").default|null} map Map.\n   */\n  setMap(map) {\n    this.map_ = map;\n  }\n}\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {import(\"../coordinate.js\").Coordinate} delta Delta.\n * @param {number} [duration] Duration.\n */\nexport function pan(view, delta, duration) {\n  const currentCenter = view.getCenterInternal();\n  if (currentCenter) {\n    const center = [currentCenter[0] + delta[0], currentCenter[1] + delta[1]];\n    view.animateInternal({\n      duration: duration !== undefined ? duration : 250,\n      easing: linear,\n      center: view.getConstrainedCenter(center),\n    });\n  }\n}\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number} delta Delta from previous zoom level.\n * @param {import(\"../coordinate.js\").Coordinate} [anchor] Anchor coordinate in the user projection.\n * @param {number} [duration] Duration.\n */\nexport function zoomByDelta(view, delta, anchor, duration) {\n  const currentZoom = view.getZoom();\n\n  if (currentZoom === undefined) {\n    return;\n  }\n\n  const newZoom = view.getConstrainedZoom(currentZoom + delta);\n  const newResolution = view.getResolutionForZoom(newZoom);\n\n  if (view.getAnimating()) {\n    view.cancelAnimations();\n  }\n  view.animate({\n    resolution: newResolution,\n    anchor: anchor,\n    duration: duration !== undefined ? duration : 250,\n    easing: easeOut,\n  });\n}\n\nexport default Interaction;\n","/**\n * @module ol/interaction/Property\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  ACTIVE: 'active',\n};\n","/**\n * @module ol/interaction/DoubleClickZoom\n */\nimport Interaction, {zoomByDelta} from './Interaction.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [delta=1] The zoom delta applied on each double click.\n */\n\n/**\n * @classdesc\n * Allows the user to zoom by double-clicking on the map.\n * @api\n */\nclass DoubleClickZoom extends Interaction {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    super();\n\n    options = options ? options : {};\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delta_ = options.delta ? options.delta : 1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n  }\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent~MapBrowserEvent map browser event} (if it was a\n   * doubleclick) and eventually zooms the map.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n   * @return {boolean} `false` to stop event propagation.\n   */\n  handleEvent(mapBrowserEvent) {\n    let stopEvent = false;\n    if (mapBrowserEvent.type == MapBrowserEventType.DBLCLICK) {\n      const browserEvent = /** @type {MouseEvent} */ (\n        mapBrowserEvent.originalEvent\n      );\n      const map = mapBrowserEvent.map;\n      const anchor = mapBrowserEvent.coordinate;\n      const delta = browserEvent.shiftKey ? -this.delta_ : this.delta_;\n      const view = map.getView();\n      zoomByDelta(view, delta, anchor, this.duration_);\n      browserEvent.preventDefault();\n      stopEvent = true;\n    }\n    return !stopEvent;\n  }\n}\n\nexport default DoubleClickZoom;\n","/**\n * @module ol/interaction/Pointer\n */\nimport Interaction from './Interaction.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\n\n/**\n * @typedef {Object} Options\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} [handleDownEvent]\n * Function handling \"down\" events. If the function returns `true` then a drag\n * sequence is started.\n * @property {function(import(\"../MapBrowserEvent.js\").default):void} [handleDragEvent]\n * Function handling \"drag\" events. This function is called on \"move\" events\n * during a drag sequence.\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} [handleEvent]\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. The function may return `false` to prevent the\n * propagation of the event to other interactions in the map's interactions\n * chain.\n * @property {function(import(\"../MapBrowserEvent.js\").default):void} [handleMoveEvent]\n * Function handling \"move\" events. This function is called on \"move\" events.\n * This functions is also called during a drag sequence, so during a drag\n * sequence both the `handleDragEvent` function and this function are called.\n * If `handleDownEvent` is defined and it returns true this function will not\n * be called during a drag sequence.\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} [handleUpEvent]\n *  Function handling \"up\" events. If the function returns `false` then the\n * current drag sequence is stopped.\n * @property {function(boolean):boolean} [stopDown]\n * Should the down event be propagated to other interactions, or should be\n * stopped?\n */\n\n/**\n * @classdesc\n * Base class that calls user-defined functions on `down`, `move` and `up`\n * events. This class also manages \"drag sequences\".\n *\n * When the `handleDownEvent` user function returns `true` a drag sequence is\n * started. During a drag sequence the `handleDragEvent` user function is\n * called on `move` events. The drag sequence ends when the `handleUpEvent`\n * user function is called and returns `false`.\n * @api\n */\nclass PointerInteraction extends Interaction {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super(\n      /** @type {import(\"./Interaction.js\").InteractionOptions} */ (options)\n    );\n\n    if (options.handleDownEvent) {\n      this.handleDownEvent = options.handleDownEvent;\n    }\n\n    if (options.handleDragEvent) {\n      this.handleDragEvent = options.handleDragEvent;\n    }\n\n    if (options.handleMoveEvent) {\n      this.handleMoveEvent = options.handleMoveEvent;\n    }\n\n    if (options.handleUpEvent) {\n      this.handleUpEvent = options.handleUpEvent;\n    }\n\n    if (options.stopDown) {\n      this.stopDown = options.stopDown;\n    }\n\n    /**\n     * @type {boolean}\n     * @protected\n     */\n    this.handlingDownUpSequence = false;\n\n    /**\n     * @type {Array<PointerEvent>}\n     * @protected\n     */\n    this.targetPointers = [];\n  }\n\n  /**\n   * Returns the current number of pointers involved in the interaction,\n   * e.g. `2` when two fingers are used.\n   * @return {number} The number of pointers.\n   * @api\n   */\n  getPointerCount() {\n    return this.targetPointers.length;\n  }\n\n  /**\n   * Handle pointer down events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   * @protected\n   */\n  handleDownEvent(mapBrowserEvent) {\n    return false;\n  }\n\n  /**\n   * Handle pointer drag events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @protected\n   */\n  handleDragEvent(mapBrowserEvent) {}\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent~MapBrowserEvent map browser event} and may call into\n   * other functions, if event sequences like e.g. 'drag' or 'down-up' etc. are\n   * detected.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n   * @return {boolean} `false` to stop event propagation.\n   * @api\n   */\n  handleEvent(mapBrowserEvent) {\n    if (!mapBrowserEvent.originalEvent) {\n      return true;\n    }\n\n    let stopEvent = false;\n    this.updateTrackedPointers_(mapBrowserEvent);\n    if (this.handlingDownUpSequence) {\n      if (mapBrowserEvent.type == MapBrowserEventType.POINTERDRAG) {\n        this.handleDragEvent(mapBrowserEvent);\n        // prevent page scrolling during dragging\n        mapBrowserEvent.originalEvent.preventDefault();\n      } else if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n        const handledUp = this.handleUpEvent(mapBrowserEvent);\n        this.handlingDownUpSequence =\n          handledUp && this.targetPointers.length > 0;\n      }\n    } else {\n      if (mapBrowserEvent.type == MapBrowserEventType.POINTERDOWN) {\n        const handled = this.handleDownEvent(mapBrowserEvent);\n        this.handlingDownUpSequence = handled;\n        stopEvent = this.stopDown(handled);\n      } else if (mapBrowserEvent.type == MapBrowserEventType.POINTERMOVE) {\n        this.handleMoveEvent(mapBrowserEvent);\n      }\n    }\n    return !stopEvent;\n  }\n\n  /**\n   * Handle pointer move events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @protected\n   */\n  handleMoveEvent(mapBrowserEvent) {}\n\n  /**\n   * Handle pointer up events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   * @protected\n   */\n  handleUpEvent(mapBrowserEvent) {\n    return false;\n  }\n\n  /**\n   * This function is used to determine if \"down\" events should be propagated\n   * to other interactions or should be stopped.\n   * @param {boolean} handled Was the event handled by the interaction?\n   * @return {boolean} Should the `down` event be stopped?\n   */\n  stopDown(handled) {\n    return handled;\n  }\n\n  /**\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @private\n   */\n  updateTrackedPointers_(mapBrowserEvent) {\n    if (mapBrowserEvent.activePointers) {\n      this.targetPointers = mapBrowserEvent.activePointers;\n    }\n  }\n}\n\n/**\n * @param {Array<PointerEvent>} pointerEvents List of events.\n * @return {import(\"../pixel.js\").Pixel} Centroid pixel.\n */\nexport function centroid(pointerEvents) {\n  const length = pointerEvents.length;\n  let clientX = 0;\n  let clientY = 0;\n  for (let i = 0; i < length; i++) {\n    clientX += pointerEvents[i].clientX;\n    clientY += pointerEvents[i].clientY;\n  }\n  return [clientX / length, clientY / length];\n}\n\nexport default PointerInteraction;\n","/**\n * @module ol/events/condition\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport {FALSE, TRUE} from '../functions.js';\nimport {MAC, WEBKIT} from '../has.js';\nimport {assert} from '../asserts.js';\n\n/**\n * A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * `{boolean}`. If the condition is met, true should be returned.\n *\n * @typedef {function(this: ?, import(\"../MapBrowserEvent.js\").default): boolean} Condition\n */\n\n/**\n * Creates a condition function that passes when all provided conditions pass.\n * @param {...Condition} var_args Conditions to check.\n * @return {Condition} Condition function.\n */\nexport function all(var_args) {\n  const conditions = arguments;\n  /**\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   * @return {boolean} All conditions passed.\n   */\n  return function (event) {\n    let pass = true;\n    for (let i = 0, ii = conditions.length; i < ii; ++i) {\n      pass = pass && conditions[i](event);\n      if (!pass) {\n        break;\n      }\n    }\n    return pass;\n  };\n}\n\n/**\n * Return `true` if only the alt-key is pressed, `false` otherwise (e.g. when\n * additionally the shift-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt key is pressed.\n * @api\n */\nexport const altKeyOnly = function (mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (\n    mapBrowserEvent.originalEvent\n  );\n  return (\n    originalEvent.altKey &&\n    !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n    !originalEvent.shiftKey\n  );\n};\n\n/**\n * Return `true` if only the alt-key and shift-key is pressed, `false` otherwise\n * (e.g. when additionally the platform-modifier-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt and shift keys are pressed.\n * @api\n */\nexport const altShiftKeysOnly = function (mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (\n    mapBrowserEvent.originalEvent\n  );\n  return (\n    originalEvent.altKey &&\n    !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n    originalEvent.shiftKey\n  );\n};\n\n/**\n * Return `true` if the map has the focus. This condition requires a map target\n * element with a `tabindex` attribute, e.g. `<div id=\"map\" tabindex=\"1\">`.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} event Map browser event.\n * @return {boolean} The map has the focus.\n * @api\n */\nexport const focus = function (event) {\n  const targetElement = event.map.getTargetElement();\n  const activeElement = event.map.getOwnerDocument().activeElement;\n  return targetElement.contains(activeElement);\n};\n\n/**\n * Return `true` if the map has the focus or no 'tabindex' attribute set.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} event Map browser event.\n * @return {boolean} The map container has the focus or no 'tabindex' attribute.\n */\nexport const focusWithTabindex = function (event) {\n  return event.map.getTargetElement().hasAttribute('tabindex')\n    ? focus(event)\n    : true;\n};\n\n/**\n * Return always true.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True.\n * @api\n */\nexport const always = TRUE;\n\n/**\n * Return `true` if the event is a `click` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `click` event.\n * @api\n */\nexport const click = function (mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.CLICK;\n};\n\n/**\n * Return `true` if the event has an \"action\"-producing mouse button.\n *\n * By definition, this includes left-click on windows/linux, and left-click\n * without the ctrl key on Macs.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} The result.\n */\nexport const mouseActionButton = function (mapBrowserEvent) {\n  const originalEvent = /** @type {MouseEvent} */ (\n    mapBrowserEvent.originalEvent\n  );\n  return originalEvent.button == 0 && !(WEBKIT && MAC && originalEvent.ctrlKey);\n};\n\n/**\n * Return always false.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} False.\n * @api\n */\nexport const never = FALSE;\n\n/**\n * Return `true` if the browser event is a `pointermove` event, `false`\n * otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the browser event is a `pointermove` event.\n * @api\n */\nexport const pointerMove = function (mapBrowserEvent) {\n  return mapBrowserEvent.type == 'pointermove';\n};\n\n/**\n * Return `true` if the event is a map `singleclick` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `singleclick` event.\n * @api\n */\nexport const singleClick = function (mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.SINGLECLICK;\n};\n\n/**\n * Return `true` if the event is a map `dblclick` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `dblclick` event.\n * @api\n */\nexport const doubleClick = function (mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.DBLCLICK;\n};\n\n/**\n * Return `true` if no modifier key (alt-, shift- or platform-modifier-key) is\n * pressed.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True only if there no modifier keys are pressed.\n * @api\n */\nexport const noModifierKeys = function (mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (\n    mapBrowserEvent.originalEvent\n  );\n  return (\n    !originalEvent.altKey &&\n    !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n    !originalEvent.shiftKey\n  );\n};\n\n/**\n * Return `true` if only the platform-modifier-key (the meta-key on Mac,\n * ctrl-key otherwise) is pressed, `false` otherwise (e.g. when additionally\n * the shift-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the platform modifier key is pressed.\n * @api\n */\nexport const platformModifierKeyOnly = function (mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (\n    mapBrowserEvent.originalEvent\n  );\n  return (\n    !originalEvent.altKey &&\n    (MAC ? originalEvent.metaKey : originalEvent.ctrlKey) &&\n    !originalEvent.shiftKey\n  );\n};\n\n/**\n * Return `true` if only the shift-key is pressed, `false` otherwise (e.g. when\n * additionally the alt-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the shift key is pressed.\n * @api\n */\nexport const shiftKeyOnly = function (mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (\n    mapBrowserEvent.originalEvent\n  );\n  return (\n    !originalEvent.altKey &&\n    !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n    originalEvent.shiftKey\n  );\n};\n\n/**\n * Return `true` if the target element is not editable, i.e. not an `input`,\n * `select`, or `textarea` element and no `contenteditable` attribute is\n * set or inherited, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True only if the target element is not editable.\n * @api\n */\nexport const targetNotEditable = function (mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (\n    mapBrowserEvent.originalEvent\n  );\n  const tagName = /** @type {Element} */ (originalEvent.target).tagName;\n  return (\n    tagName !== 'INPUT' &&\n    tagName !== 'SELECT' &&\n    tagName !== 'TEXTAREA' &&\n    // `isContentEditable` is only available on `HTMLElement`, but it may also be a\n    // different type like `SVGElement`.\n    // @ts-ignore\n    !originalEvent.target.isContentEditable\n  );\n};\n\n/**\n * Return `true` if the event originates from a mouse device.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a mouse device.\n * @api\n */\nexport const mouseOnly = function (mapBrowserEvent) {\n  const pointerEvent = /** @type {import(\"../MapBrowserEvent\").default} */ (\n    mapBrowserEvent\n  ).originalEvent;\n  assert(pointerEvent !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n  // see https://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n  return pointerEvent.pointerType == 'mouse';\n};\n\n/**\n * Return `true` if the event originates from a touchable device.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a touchable device.\n * @api\n */\nexport const touchOnly = function (mapBrowserEvent) {\n  const pointerEvt = /** @type {import(\"../MapBrowserEvent\").default} */ (\n    mapBrowserEvent\n  ).originalEvent;\n  assert(pointerEvt !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n  // see https://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n  return pointerEvt.pointerType === 'touch';\n};\n\n/**\n * Return `true` if the event originates from a digital pen.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a digital pen.\n * @api\n */\nexport const penOnly = function (mapBrowserEvent) {\n  const pointerEvt = /** @type {import(\"../MapBrowserEvent\").default} */ (\n    mapBrowserEvent\n  ).originalEvent;\n  assert(pointerEvt !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n  // see https://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n  return pointerEvt.pointerType === 'pen';\n};\n\n/**\n * Return `true` if the event originates from a primary pointer in\n * contact with the surface or if the left mouse button is pressed.\n * See https://www.w3.org/TR/pointerevents/#button-states.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a primary pointer.\n * @api\n */\nexport const primaryAction = function (mapBrowserEvent) {\n  const pointerEvent = /** @type {import(\"../MapBrowserEvent\").default} */ (\n    mapBrowserEvent\n  ).originalEvent;\n  assert(pointerEvent !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n  return pointerEvent.isPrimary && pointerEvent.button === 0;\n};\n","/**\n * @module ol/interaction/DragPan\n */\nimport PointerInteraction, {\n  centroid as centroidFromPointers,\n} from './Pointer.js';\nimport {FALSE} from '../functions.js';\nimport {\n  all,\n  focusWithTabindex,\n  noModifierKeys,\n  primaryAction,\n} from '../events/condition.js';\nimport {easeOut} from '../easing.js';\nimport {\n  rotate as rotateCoordinate,\n  scale as scaleCoordinate,\n} from '../coordinate.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition.noModifierKeys} and {@link module:ol/events/condition.primaryAction}.\n * @property {boolean} [onFocusOnly=false] When the map's target has a `tabindex` attribute set,\n * the interaction will only handle events when the map has the focus.\n * @property {import(\"../Kinetic.js\").default} [kinetic] Kinetic inertia to apply to the pan.\n */\n\n/**\n * @classdesc\n * Allows the user to pan the map by dragging the map.\n * @api\n */\nclass DragPan extends PointerInteraction {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    super({\n      stopDown: FALSE,\n    });\n\n    options = options ? options : {};\n\n    /**\n     * @private\n     * @type {import(\"../Kinetic.js\").default|undefined}\n     */\n    this.kinetic_ = options.kinetic;\n\n    /**\n     * @type {import(\"../pixel.js\").Pixel}\n     */\n    this.lastCentroid = null;\n\n    /**\n     * @type {number}\n     */\n    this.lastPointersCount_;\n\n    /**\n     * @type {boolean}\n     */\n    this.panning_ = false;\n\n    const condition = options.condition\n      ? options.condition\n      : all(noModifierKeys, primaryAction);\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.onFocusOnly\n      ? all(focusWithTabindex, condition)\n      : condition;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.noKinetic_ = false;\n  }\n\n  /**\n   * Handle pointer drag events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   */\n  handleDragEvent(mapBrowserEvent) {\n    if (!this.panning_) {\n      this.panning_ = true;\n      this.getMap().getView().beginInteraction();\n    }\n    const targetPointers = this.targetPointers;\n    const centroid = centroidFromPointers(targetPointers);\n    if (targetPointers.length == this.lastPointersCount_) {\n      if (this.kinetic_) {\n        this.kinetic_.update(centroid[0], centroid[1]);\n      }\n      if (this.lastCentroid) {\n        const delta = [\n          this.lastCentroid[0] - centroid[0],\n          centroid[1] - this.lastCentroid[1],\n        ];\n        const map = mapBrowserEvent.map;\n        const view = map.getView();\n        scaleCoordinate(delta, view.getResolution());\n        rotateCoordinate(delta, view.getRotation());\n        view.adjustCenterInternal(delta);\n      }\n    } else if (this.kinetic_) {\n      // reset so we don't overestimate the kinetic energy after\n      // after one finger down, tiny drag, second finger down\n      this.kinetic_.begin();\n    }\n    this.lastCentroid = centroid;\n    this.lastPointersCount_ = targetPointers.length;\n    mapBrowserEvent.originalEvent.preventDefault();\n  }\n\n  /**\n   * Handle pointer up events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   */\n  handleUpEvent(mapBrowserEvent) {\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    if (this.targetPointers.length === 0) {\n      if (!this.noKinetic_ && this.kinetic_ && this.kinetic_.end()) {\n        const distance = this.kinetic_.getDistance();\n        const angle = this.kinetic_.getAngle();\n        const center = view.getCenterInternal();\n        const centerpx = map.getPixelFromCoordinateInternal(center);\n        const dest = map.getCoordinateFromPixelInternal([\n          centerpx[0] - distance * Math.cos(angle),\n          centerpx[1] - distance * Math.sin(angle),\n        ]);\n        view.animateInternal({\n          center: view.getConstrainedCenter(dest),\n          duration: 500,\n          easing: easeOut,\n        });\n      }\n      if (this.panning_) {\n        this.panning_ = false;\n        view.endInteraction();\n      }\n      return false;\n    } else {\n      if (this.kinetic_) {\n        // reset so we don't overestimate the kinetic energy after\n        // after one finger up, tiny drag, second finger up\n        this.kinetic_.begin();\n      }\n      this.lastCentroid = null;\n      return true;\n    }\n  }\n\n  /**\n   * Handle pointer down events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (this.targetPointers.length > 0 && this.condition_(mapBrowserEvent)) {\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      this.lastCentroid = null;\n      // stop any current animation\n      if (view.getAnimating()) {\n        view.cancelAnimations();\n      }\n      if (this.kinetic_) {\n        this.kinetic_.begin();\n      }\n      // No kinetic as soon as more than one pointer on the screen is\n      // detected. This is to prevent nasty pans after pinch.\n      this.noKinetic_ = this.targetPointers.length > 1;\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default DragPan;\n","/**\n * @module ol/interaction/DragRotate\n */\nimport PointerInteraction from './Pointer.js';\nimport {FALSE} from '../functions.js';\nimport {\n  altShiftKeysOnly,\n  mouseActionButton,\n  mouseOnly,\n} from '../events/condition.js';\nimport {disable} from '../rotationconstraint.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an\n * {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition.altShiftKeysOnly}.\n * @property {number} [duration=250] Animation duration in milliseconds.\n */\n\n/**\n * @classdesc\n * Allows the user to rotate the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the alt and shift keys are held down.\n *\n * This interaction is only supported for mouse devices.\n * @api\n */\nclass DragRotate extends PointerInteraction {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super({\n      stopDown: FALSE,\n    });\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : altShiftKeysOnly;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastAngle_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n  }\n\n  /**\n   * Handle pointer drag events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   */\n  handleDragEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return;\n    }\n\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    if (view.getConstraints().rotation === disable) {\n      return;\n    }\n    const size = map.getSize();\n    const offset = mapBrowserEvent.pixel;\n    const theta = Math.atan2(size[1] / 2 - offset[1], offset[0] - size[0] / 2);\n    if (this.lastAngle_ !== undefined) {\n      const delta = theta - this.lastAngle_;\n      view.adjustRotationInternal(-delta);\n    }\n    this.lastAngle_ = theta;\n  }\n\n  /**\n   * Handle pointer up events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   */\n  handleUpEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return true;\n    }\n\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    view.endInteraction(this.duration_);\n    return false;\n  }\n\n  /**\n   * Handle pointer down events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return false;\n    }\n\n    if (\n      mouseActionButton(mapBrowserEvent) &&\n      this.condition_(mapBrowserEvent)\n    ) {\n      const map = mapBrowserEvent.map;\n      map.getView().beginInteraction();\n      this.lastAngle_ = undefined;\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default DragRotate;\n","/**\n * @module ol/interaction/DragBox\n */\n// FIXME draw drag box\nimport Event from '../events/Event.js';\nimport PointerInteraction from './Pointer.js';\nimport RenderBox from '../render/Box.js';\nimport {mouseActionButton} from '../events/condition.js';\n\n/**\n * A function that takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s and returns a `{boolean}`. If the condition is met,\n * true should be returned.\n * @typedef {function(this: ?, import(\"../MapBrowserEvent.js\").default, import(\"../pixel.js\").Pixel, import(\"../pixel.js\").Pixel):boolean} EndCondition\n */\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragbox'] CSS class name for styling the box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link ol/events/condition~mouseActionButton}.\n * @property {number} [minArea=64] The minimum area of the box in pixel, this value is used by the default\n * `boxEndCondition` function.\n * @property {EndCondition} [boxEndCondition] A function that takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s to indicate whether a `boxend` event should be fired.\n * Default is `true` if the area of the box is bigger than the `minArea` option.\n * @property {function(this:DragBox, import(\"../MapBrowserEvent.js\").default):void} [onBoxEnd] Code to execute just\n * before `boxend` is fired.\n */\n\n/**\n * @enum {string}\n */\nconst DragBoxEventType = {\n  /**\n   * Triggered upon drag box start.\n   * @event DragBoxEvent#boxstart\n   * @api\n   */\n  BOXSTART: 'boxstart',\n\n  /**\n   * Triggered on drag when box is active.\n   * @event DragBoxEvent#boxdrag\n   * @api\n   */\n  BOXDRAG: 'boxdrag',\n\n  /**\n   * Triggered upon drag box end.\n   * @event DragBoxEvent#boxend\n   * @api\n   */\n  BOXEND: 'boxend',\n\n  /**\n   * Triggered upon drag box canceled.\n   * @event DragBoxEvent#boxcancel\n   * @api\n   */\n  BOXCANCEL: 'boxcancel',\n};\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/DragBox~DragBox} instances are instances of\n * this type.\n */\nexport class DragBoxEvent extends Event {\n  /**\n   * @param {string} type The event type.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate The event coordinate.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Originating event.\n   */\n  constructor(type, coordinate, mapBrowserEvent) {\n    super(type);\n\n    /**\n     * The coordinate of the drag event.\n     * @const\n     * @type {import(\"../coordinate.js\").Coordinate}\n     * @api\n     */\n    this.coordinate = coordinate;\n\n    /**\n     * @const\n     * @type {import(\"../MapBrowserEvent.js\").default}\n     * @api\n     */\n    this.mapBrowserEvent = mapBrowserEvent;\n  }\n}\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<'boxcancel'|'boxdrag'|'boxend'|'boxstart', DragBoxEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active'|'boxcancel'|'boxdrag'|'boxend', Return>} DragBoxOnSignature\n */\n\n/**\n * @classdesc\n * Allows the user to draw a vector box by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the shift or other key is held down. This is used, for example,\n * for zooming to a specific area of the map\n * (see {@link module:ol/interaction/DragZoom~DragZoom} and\n * {@link module:ol/interaction/DragRotateAndZoom~DragRotateAndZoom}).\n *\n * @fires DragBoxEvent\n * @api\n */\nclass DragBox extends PointerInteraction {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    super();\n\n    /***\n     * @type {DragBoxOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {DragBoxOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {DragBoxOnSignature<void>}\n     */\n    this.un;\n\n    options = options ? options : {};\n\n    /**\n     * @type {import(\"../render/Box.js\").default}\n     * @private\n     */\n    this.box_ = new RenderBox(options.className || 'ol-dragbox');\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.minArea_ = options.minArea !== undefined ? options.minArea : 64;\n\n    if (options.onBoxEnd) {\n      this.onBoxEnd = options.onBoxEnd;\n    }\n\n    /**\n     * @type {import(\"../pixel.js\").Pixel}\n     * @private\n     */\n    this.startPixel_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : mouseActionButton;\n\n    /**\n     * @private\n     * @type {EndCondition}\n     */\n    this.boxEndCondition_ = options.boxEndCondition\n      ? options.boxEndCondition\n      : this.defaultBoxEndCondition;\n  }\n\n  /**\n   * The default condition for determining whether the boxend event\n   * should fire.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent The originating MapBrowserEvent\n   *     leading to the box end.\n   * @param {import(\"../pixel.js\").Pixel} startPixel The starting pixel of the box.\n   * @param {import(\"../pixel.js\").Pixel} endPixel The end pixel of the box.\n   * @return {boolean} Whether or not the boxend condition should be fired.\n   */\n  defaultBoxEndCondition(mapBrowserEvent, startPixel, endPixel) {\n    const width = endPixel[0] - startPixel[0];\n    const height = endPixel[1] - startPixel[1];\n    return width * width + height * height >= this.minArea_;\n  }\n\n  /**\n   * Returns geometry of last drawn box.\n   * @return {import(\"../geom/Polygon.js\").default} Geometry.\n   * @api\n   */\n  getGeometry() {\n    return this.box_.getGeometry();\n  }\n\n  /**\n   * Handle pointer drag events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   */\n  handleDragEvent(mapBrowserEvent) {\n    this.box_.setPixels(this.startPixel_, mapBrowserEvent.pixel);\n\n    this.dispatchEvent(\n      new DragBoxEvent(\n        DragBoxEventType.BOXDRAG,\n        mapBrowserEvent.coordinate,\n        mapBrowserEvent\n      )\n    );\n  }\n\n  /**\n   * Handle pointer up events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   */\n  handleUpEvent(mapBrowserEvent) {\n    this.box_.setMap(null);\n\n    const completeBox = this.boxEndCondition_(\n      mapBrowserEvent,\n      this.startPixel_,\n      mapBrowserEvent.pixel\n    );\n    if (completeBox) {\n      this.onBoxEnd(mapBrowserEvent);\n    }\n    this.dispatchEvent(\n      new DragBoxEvent(\n        completeBox ? DragBoxEventType.BOXEND : DragBoxEventType.BOXCANCEL,\n        mapBrowserEvent.coordinate,\n        mapBrowserEvent\n      )\n    );\n    return false;\n  }\n\n  /**\n   * Handle pointer down events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (this.condition_(mapBrowserEvent)) {\n      this.startPixel_ = mapBrowserEvent.pixel;\n      this.box_.setMap(mapBrowserEvent.map);\n      this.box_.setPixels(this.startPixel_, this.startPixel_);\n      this.dispatchEvent(\n        new DragBoxEvent(\n          DragBoxEventType.BOXSTART,\n          mapBrowserEvent.coordinate,\n          mapBrowserEvent\n        )\n      );\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Function to execute just before `onboxend` is fired\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   */\n  onBoxEnd(event) {}\n}\n\nexport default DragBox;\n","/**\n * @module ol/render/Box\n */\n\nimport Disposable from '../Disposable.js';\nimport Polygon from '../geom/Polygon.js';\n\nclass RenderBox extends Disposable {\n  /**\n   * @param {string} className CSS class name.\n   */\n  constructor(className) {\n    super();\n\n    /**\n     * @type {import(\"../geom/Polygon.js\").default}\n     * @private\n     */\n    this.geometry_ = null;\n\n    /**\n     * @type {HTMLDivElement}\n     * @private\n     */\n    this.element_ = document.createElement('div');\n    this.element_.style.position = 'absolute';\n    this.element_.style.pointerEvents = 'auto';\n    this.element_.className = 'ol-box ' + className;\n\n    /**\n     * @private\n     * @type {import(\"../Map.js\").default|null}\n     */\n    this.map_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../pixel.js\").Pixel}\n     */\n    this.startPixel_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../pixel.js\").Pixel}\n     */\n    this.endPixel_ = null;\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    this.setMap(null);\n  }\n\n  /**\n   * @private\n   */\n  render_() {\n    const startPixel = this.startPixel_;\n    const endPixel = this.endPixel_;\n    const px = 'px';\n    const style = this.element_.style;\n    style.left = Math.min(startPixel[0], endPixel[0]) + px;\n    style.top = Math.min(startPixel[1], endPixel[1]) + px;\n    style.width = Math.abs(endPixel[0] - startPixel[0]) + px;\n    style.height = Math.abs(endPixel[1] - startPixel[1]) + px;\n  }\n\n  /**\n   * @param {import(\"../Map.js\").default|null} map Map.\n   */\n  setMap(map) {\n    if (this.map_) {\n      this.map_.getOverlayContainer().removeChild(this.element_);\n      const style = this.element_.style;\n      style.left = 'inherit';\n      style.top = 'inherit';\n      style.width = 'inherit';\n      style.height = 'inherit';\n    }\n    this.map_ = map;\n    if (this.map_) {\n      this.map_.getOverlayContainer().appendChild(this.element_);\n    }\n  }\n\n  /**\n   * @param {import(\"../pixel.js\").Pixel} startPixel Start pixel.\n   * @param {import(\"../pixel.js\").Pixel} endPixel End pixel.\n   */\n  setPixels(startPixel, endPixel) {\n    this.startPixel_ = startPixel;\n    this.endPixel_ = endPixel;\n    this.createOrUpdateGeometry();\n    this.render_();\n  }\n\n  /**\n   * Creates or updates the cached geometry.\n   */\n  createOrUpdateGeometry() {\n    const startPixel = this.startPixel_;\n    const endPixel = this.endPixel_;\n    const pixels = [\n      startPixel,\n      [startPixel[0], endPixel[1]],\n      endPixel,\n      [endPixel[0], startPixel[1]],\n    ];\n    const coordinates = pixels.map(\n      this.map_.getCoordinateFromPixelInternal,\n      this.map_\n    );\n    // close the polygon\n    coordinates[4] = coordinates[0].slice();\n    if (!this.geometry_) {\n      this.geometry_ = new Polygon([coordinates]);\n    } else {\n      this.geometry_.setCoordinates([coordinates]);\n    }\n  }\n\n  /**\n   * @return {import(\"../geom/Polygon.js\").default} Geometry.\n   */\n  getGeometry() {\n    return this.geometry_;\n  }\n}\n\nexport default RenderBox;\n","/**\n * @module ol/interaction/DragZoom\n */\nimport DragBox from './DragBox.js';\nimport {easeOut} from '../easing.js';\nimport {shiftKeyOnly} from '../events/condition.js';\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragzoom'] CSS class name for styling the\n * box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition.shiftKeyOnly}.\n * @property {number} [duration=200] Animation duration in milliseconds.\n * @property {boolean} [out=false] Use interaction for zooming out.\n * @property {number} [minArea=64] The minimum area of the box in pixel, this value is used by the parent default\n * `boxEndCondition` function.\n */\n\n/**\n * @classdesc\n * Allows the user to zoom the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when a key, shift by default, is held down.\n *\n * To change the style of the box, use CSS and the `.ol-dragzoom` selector, or\n * your custom one configured with `className`.\n * @api\n */\nclass DragZoom extends DragBox {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    const condition = options.condition ? options.condition : shiftKeyOnly;\n\n    super({\n      condition: condition,\n      className: options.className || 'ol-dragzoom',\n      minArea: options.minArea,\n    });\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 200;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.out_ = options.out !== undefined ? options.out : false;\n  }\n\n  /**\n   * Function to execute just before `onboxend` is fired\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   */\n  onBoxEnd(event) {\n    const map = this.getMap();\n    const view = /** @type {!import(\"../View.js\").default} */ (map.getView());\n    let geometry = this.getGeometry();\n\n    if (this.out_) {\n      const rotatedExtent = view.rotatedExtentForGeometry(geometry);\n      const resolution = view.getResolutionForExtentInternal(rotatedExtent);\n      const factor = view.getResolution() / resolution;\n      geometry = geometry.clone();\n      geometry.scale(factor * factor);\n    }\n\n    view.fitInternal(geometry, {\n      duration: this.duration_,\n      easing: easeOut,\n    });\n  }\n}\n\nexport default DragZoom;\n","/**\n * @module ol/events/KeyCode\n */\n\n/**\n * @enum {number}\n * @const\n */\nexport default {\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n};\n","/**\n * @module ol/interaction/KeyboardPan\n */\nimport EventType from '../events/EventType.js';\nimport Interaction, {pan} from './Interaction.js';\nimport KeyCode from '../events/KeyCode.js';\nimport {noModifierKeys, targetNotEditable} from '../events/condition.js';\nimport {rotate as rotateCoordinate} from '../coordinate.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition.noModifierKeys} and\n * {@link module:ol/events/condition.targetNotEditable}.\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {number} [pixelDelta=128] The amount of pixels to pan on each key\n * press.\n */\n\n/**\n * @classdesc\n * Allows the user to pan the map using keyboard arrows.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}.\n * @api\n */\nclass KeyboardPan extends Interaction {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    super();\n\n    options = options || {};\n\n    /**\n     * @private\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Browser event.\n     * @return {boolean} Combined condition result.\n     */\n    this.defaultCondition_ = function (mapBrowserEvent) {\n      return (\n        noModifierKeys(mapBrowserEvent) && targetNotEditable(mapBrowserEvent)\n      );\n    };\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ =\n      options.condition !== undefined\n        ? options.condition\n        : this.defaultCondition_;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 100;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelDelta_ =\n      options.pixelDelta !== undefined ? options.pixelDelta : 128;\n  }\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent~MapBrowserEvent map browser event} if it was a\n   * `KeyEvent`, and decides the direction to pan to (if an arrow key was\n   * pressed).\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n   * @return {boolean} `false` to stop event propagation.\n   * @this {KeyboardPan}\n   */\n  handleEvent(mapBrowserEvent) {\n    let stopEvent = false;\n    if (mapBrowserEvent.type == EventType.KEYDOWN) {\n      const keyEvent = /** @type {KeyboardEvent} */ (\n        mapBrowserEvent.originalEvent\n      );\n      const keyCode = keyEvent.keyCode;\n      if (\n        this.condition_(mapBrowserEvent) &&\n        (keyCode == KeyCode.DOWN ||\n          keyCode == KeyCode.LEFT ||\n          keyCode == KeyCode.RIGHT ||\n          keyCode == KeyCode.UP)\n      ) {\n        const map = mapBrowserEvent.map;\n        const view = map.getView();\n        const mapUnitsDelta = view.getResolution() * this.pixelDelta_;\n        let deltaX = 0,\n          deltaY = 0;\n        if (keyCode == KeyCode.DOWN) {\n          deltaY = -mapUnitsDelta;\n        } else if (keyCode == KeyCode.LEFT) {\n          deltaX = -mapUnitsDelta;\n        } else if (keyCode == KeyCode.RIGHT) {\n          deltaX = mapUnitsDelta;\n        } else {\n          deltaY = mapUnitsDelta;\n        }\n        const delta = [deltaX, deltaY];\n        rotateCoordinate(delta, view.getRotation());\n        pan(view, delta, this.duration_);\n        keyEvent.preventDefault();\n        stopEvent = true;\n      }\n    }\n    return !stopEvent;\n  }\n}\n\nexport default KeyboardPan;\n","/**\n * @module ol/interaction/KeyboardZoom\n */\nimport EventType from '../events/EventType.js';\nimport Interaction, {zoomByDelta} from './Interaction.js';\nimport {targetNotEditable} from '../events/condition.js';\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition.targetNotEditable}.\n * @property {number} [delta=1] The zoom level delta on each key press.\n */\n\n/**\n * @classdesc\n * Allows the user to zoom the map using keyboard + and -.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardPan~KeyboardPan}.\n * @api\n */\nclass KeyboardZoom extends Interaction {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    super();\n\n    options = options ? options : {};\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : targetNotEditable;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delta_ = options.delta ? options.delta : 1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 100;\n  }\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent~MapBrowserEvent map browser event} if it was a\n   * `KeyEvent`, and decides whether to zoom in or out (depending on whether the\n   * key pressed was '+' or '-').\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n   * @return {boolean} `false` to stop event propagation.\n   * @this {KeyboardZoom}\n   */\n  handleEvent(mapBrowserEvent) {\n    let stopEvent = false;\n    if (\n      mapBrowserEvent.type == EventType.KEYDOWN ||\n      mapBrowserEvent.type == EventType.KEYPRESS\n    ) {\n      const keyEvent = /** @type {KeyboardEvent} */ (\n        mapBrowserEvent.originalEvent\n      );\n      const charCode = keyEvent.charCode;\n      if (\n        this.condition_(mapBrowserEvent) &&\n        (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))\n      ) {\n        const map = mapBrowserEvent.map;\n        const delta =\n          charCode == '+'.charCodeAt(0) ? this.delta_ : -this.delta_;\n        const view = map.getView();\n        zoomByDelta(view, delta, undefined, this.duration_);\n        keyEvent.preventDefault();\n        stopEvent = true;\n      }\n    }\n    return !stopEvent;\n  }\n}\n\nexport default KeyboardZoom;\n","/**\n * @module ol/Kinetic\n */\n\n/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @api\n */\nclass Kinetic {\n  /**\n   * @param {number} decay Rate of decay (must be negative).\n   * @param {number} minVelocity Minimum velocity (pixels/millisecond).\n   * @param {number} delay Delay to consider to calculate the kinetic\n   *     initial values (milliseconds).\n   */\n  constructor(decay, minVelocity, delay) {\n    /**\n     * @private\n     * @type {number}\n     */\n    this.decay_ = decay;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minVelocity_ = minVelocity;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delay_ = delay;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.points_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.angle_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.initialVelocity_ = 0;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  begin() {\n    this.points_.length = 0;\n    this.angle_ = 0;\n    this.initialVelocity_ = 0;\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   */\n  update(x, y) {\n    this.points_.push(x, y, Date.now());\n  }\n\n  /**\n   * @return {boolean} Whether we should do kinetic animation.\n   */\n  end() {\n    if (this.points_.length < 6) {\n      // at least 2 points are required (i.e. there must be at least 6 elements\n      // in the array)\n      return false;\n    }\n    const delay = Date.now() - this.delay_;\n    const lastIndex = this.points_.length - 3;\n    if (this.points_[lastIndex + 2] < delay) {\n      // the last tracked point is too old, which means that the user stopped\n      // panning before releasing the map\n      return false;\n    }\n\n    // get the first point which still falls into the delay time\n    let firstIndex = lastIndex - 3;\n    while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n      firstIndex -= 3;\n    }\n\n    const duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n    // we don't want a duration of 0 (divide by zero)\n    // we also make sure the user panned for a duration of at least one frame\n    // (1/60s) to compute sane displacement values\n    if (duration < 1000 / 60) {\n      return false;\n    }\n\n    const dx = this.points_[lastIndex] - this.points_[firstIndex];\n    const dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n    this.angle_ = Math.atan2(dy, dx);\n    this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n    return this.initialVelocity_ > this.minVelocity_;\n  }\n\n  /**\n   * @return {number} Total distance travelled (pixels).\n   */\n  getDistance() {\n    return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n  }\n\n  /**\n   * @return {number} Angle of the kinetic panning animation (radians).\n   */\n  getAngle() {\n    return this.angle_;\n  }\n}\n\nexport default Kinetic;\n","/**\n * @module ol/interaction/MouseWheelZoom\n */\nimport EventType from '../events/EventType.js';\nimport Interaction, {zoomByDelta} from './Interaction.js';\nimport {DEVICE_PIXEL_RATIO, FIREFOX} from '../has.js';\nimport {all, always, focusWithTabindex} from '../events/condition.js';\nimport {clamp} from '../math.js';\n\n/**\n * @typedef {'trackpad' | 'wheel'} Mode\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition.always}.\n * @property {boolean} [onFocusOnly=false] When the map's target has a `tabindex` attribute set,\n * the interaction will only handle events when the map has the focus.\n * @property {number} [maxDelta=1] Maximum mouse wheel delta.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [timeout=80] Mouse wheel timeout duration in milliseconds.\n * @property {boolean} [useAnchor=true] Enable zooming using the mouse's\n * location as the anchor. When set to `false`, zooming in and out will zoom to\n * the center of the screen instead of zooming on the mouse's location.\n * @property {boolean} [constrainResolution=false] If true, the mouse wheel zoom\n * event will always animate to the closest zoom level after an interaction;\n * false means intermediary zoom levels are allowed.\n */\n\n/**\n * @classdesc\n * Allows the user to zoom the map by scrolling the mouse wheel.\n * @api\n */\nclass MouseWheelZoom extends Interaction {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super(\n      /** @type {import(\"./Interaction.js\").InteractionOptions} */ (options)\n    );\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.totalDelta_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.lastDelta_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = options.maxDelta !== undefined ? options.maxDelta : 1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.timeout_ = options.timeout !== undefined ? options.timeout : 80;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.useAnchor_ =\n      options.useAnchor !== undefined ? options.useAnchor : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.constrainResolution_ =\n      options.constrainResolution !== undefined\n        ? options.constrainResolution\n        : false;\n\n    const condition = options.condition ? options.condition : always;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.onFocusOnly\n      ? all(focusWithTabindex, condition)\n      : condition;\n\n    /**\n     * @private\n     * @type {?import(\"../coordinate.js\").Coordinate}\n     */\n    this.lastAnchor_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.startTime_ = undefined;\n\n    /**\n     * @private\n     * @type {?}\n     */\n    this.timeoutId_;\n\n    /**\n     * @private\n     * @type {Mode|undefined}\n     */\n    this.mode_ = undefined;\n\n    /**\n     * Trackpad events separated by this delay will be considered separate\n     * interactions.\n     * @type {number}\n     */\n    this.trackpadEventGap_ = 400;\n\n    /**\n     * @type {?}\n     */\n    this.trackpadTimeoutId_;\n\n    /**\n     * The number of delta values per zoom level\n     * @private\n     * @type {number}\n     */\n    this.deltaPerZoom_ = 300;\n  }\n\n  /**\n   * @private\n   */\n  endInteraction_() {\n    this.trackpadTimeoutId_ = undefined;\n    const map = this.getMap();\n    if (!map) {\n      return;\n    }\n    const view = map.getView();\n    view.endInteraction(\n      undefined,\n      this.lastDelta_ ? (this.lastDelta_ > 0 ? 1 : -1) : 0,\n      this.lastAnchor_\n    );\n  }\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent~MapBrowserEvent map browser event} (if it was a mousewheel-event) and eventually\n   * zooms the map.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n   * @return {boolean} `false` to stop event propagation.\n   */\n  handleEvent(mapBrowserEvent) {\n    if (!this.condition_(mapBrowserEvent)) {\n      return true;\n    }\n    const type = mapBrowserEvent.type;\n    if (type !== EventType.WHEEL) {\n      return true;\n    }\n\n    const map = mapBrowserEvent.map;\n    const wheelEvent = /** @type {WheelEvent} */ (\n      mapBrowserEvent.originalEvent\n    );\n    wheelEvent.preventDefault();\n\n    if (this.useAnchor_) {\n      this.lastAnchor_ = mapBrowserEvent.coordinate;\n    }\n\n    // Delta normalisation inspired by\n    // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n    let delta;\n    if (mapBrowserEvent.type == EventType.WHEEL) {\n      delta = wheelEvent.deltaY;\n      if (FIREFOX && wheelEvent.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n        delta /= DEVICE_PIXEL_RATIO;\n      }\n      if (wheelEvent.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n        delta *= 40;\n      }\n    }\n\n    if (delta === 0) {\n      return false;\n    } else {\n      this.lastDelta_ = delta;\n    }\n\n    const now = Date.now();\n\n    if (this.startTime_ === undefined) {\n      this.startTime_ = now;\n    }\n\n    if (!this.mode_ || now - this.startTime_ > this.trackpadEventGap_) {\n      this.mode_ = Math.abs(delta) < 4 ? 'trackpad' : 'wheel';\n    }\n\n    const view = map.getView();\n    if (\n      this.mode_ === 'trackpad' &&\n      !(view.getConstrainResolution() || this.constrainResolution_)\n    ) {\n      if (this.trackpadTimeoutId_) {\n        clearTimeout(this.trackpadTimeoutId_);\n      } else {\n        if (view.getAnimating()) {\n          view.cancelAnimations();\n        }\n        view.beginInteraction();\n      }\n      this.trackpadTimeoutId_ = setTimeout(\n        this.endInteraction_.bind(this),\n        this.timeout_\n      );\n      view.adjustZoom(-delta / this.deltaPerZoom_, this.lastAnchor_);\n      this.startTime_ = now;\n      return false;\n    }\n\n    this.totalDelta_ += delta;\n\n    const timeLeft = Math.max(this.timeout_ - (now - this.startTime_), 0);\n\n    clearTimeout(this.timeoutId_);\n    this.timeoutId_ = setTimeout(\n      this.handleWheelZoom_.bind(this, map),\n      timeLeft\n    );\n\n    return false;\n  }\n\n  /**\n   * @private\n   * @param {import(\"../Map.js\").default} map Map.\n   */\n  handleWheelZoom_(map) {\n    const view = map.getView();\n    if (view.getAnimating()) {\n      view.cancelAnimations();\n    }\n    let delta =\n      -clamp(\n        this.totalDelta_,\n        -this.maxDelta_ * this.deltaPerZoom_,\n        this.maxDelta_ * this.deltaPerZoom_\n      ) / this.deltaPerZoom_;\n    if (view.getConstrainResolution() || this.constrainResolution_) {\n      // view has a zoom constraint, zoom by 1\n      delta = delta ? (delta > 0 ? 1 : -1) : 0;\n    }\n    zoomByDelta(view, delta, this.lastAnchor_, this.duration_);\n\n    this.mode_ = undefined;\n    this.totalDelta_ = 0;\n    this.lastAnchor_ = null;\n    this.startTime_ = undefined;\n    this.timeoutId_ = undefined;\n  }\n\n  /**\n   * Enable or disable using the mouse's location as an anchor when zooming\n   * @param {boolean} useAnchor true to zoom to the mouse's location, false\n   * to zoom to the center of the map\n   * @api\n   */\n  setMouseAnchor(useAnchor) {\n    this.useAnchor_ = useAnchor;\n    if (!useAnchor) {\n      this.lastAnchor_ = null;\n    }\n  }\n}\n\nexport default MouseWheelZoom;\n","/**\n * @module ol/interaction/PinchRotate\n */\nimport PointerInteraction, {\n  centroid as centroidFromPointers,\n} from './Pointer.js';\nimport {FALSE} from '../functions.js';\nimport {disable} from '../rotationconstraint.js';\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] The duration of the animation in\n * milliseconds.\n * @property {number} [threshold=0.3] Minimal angle in radians to start a rotation.\n */\n\n/**\n * @classdesc\n * Allows the user to rotate the map by twisting with two fingers\n * on a touch screen.\n * @api\n */\nclass PinchRotate extends PointerInteraction {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    const pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (\n      options\n    );\n\n    if (!pointerOptions.stopDown) {\n      pointerOptions.stopDown = FALSE;\n    }\n\n    super(pointerOptions);\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.anchor_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastAngle_ = undefined;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.rotating_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.rotationDelta_ = 0.0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.threshold_ = options.threshold !== undefined ? options.threshold : 0.3;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n  }\n\n  /**\n   * Handle pointer drag events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   */\n  handleDragEvent(mapBrowserEvent) {\n    let rotationDelta = 0.0;\n\n    const touch0 = this.targetPointers[0];\n    const touch1 = this.targetPointers[1];\n\n    // angle between touches\n    const angle = Math.atan2(\n      touch1.clientY - touch0.clientY,\n      touch1.clientX - touch0.clientX\n    );\n\n    if (this.lastAngle_ !== undefined) {\n      const delta = angle - this.lastAngle_;\n      this.rotationDelta_ += delta;\n      if (!this.rotating_ && Math.abs(this.rotationDelta_) > this.threshold_) {\n        this.rotating_ = true;\n      }\n      rotationDelta = delta;\n    }\n    this.lastAngle_ = angle;\n\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    if (view.getConstraints().rotation === disable) {\n      return;\n    }\n\n    // rotate anchor point.\n    // FIXME: should be the intersection point between the lines:\n    //     touch0,touch1 and previousTouch0,previousTouch1\n    const viewportPosition = map.getViewport().getBoundingClientRect();\n    const centroid = centroidFromPointers(this.targetPointers);\n    centroid[0] -= viewportPosition.left;\n    centroid[1] -= viewportPosition.top;\n    this.anchor_ = map.getCoordinateFromPixelInternal(centroid);\n\n    // rotate\n    if (this.rotating_) {\n      map.render();\n      view.adjustRotationInternal(rotationDelta, this.anchor_);\n    }\n  }\n\n  /**\n   * Handle pointer up events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   */\n  handleUpEvent(mapBrowserEvent) {\n    if (this.targetPointers.length < 2) {\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      view.endInteraction(this.duration_);\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  /**\n   * Handle pointer down events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (this.targetPointers.length >= 2) {\n      const map = mapBrowserEvent.map;\n      this.anchor_ = null;\n      this.lastAngle_ = undefined;\n      this.rotating_ = false;\n      this.rotationDelta_ = 0.0;\n      if (!this.handlingDownUpSequence) {\n        map.getView().beginInteraction();\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default PinchRotate;\n","/**\n * @module ol/interaction/PinchZoom\n */\nimport PointerInteraction, {\n  centroid as centroidFromPointers,\n} from './Pointer.js';\nimport {FALSE} from '../functions.js';\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=400] Animation duration in milliseconds.\n */\n\n/**\n * @classdesc\n * Allows the user to zoom the map by pinching with two fingers\n * on a touch screen.\n * @api\n */\nclass PinchZoom extends PointerInteraction {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    const pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (\n      options\n    );\n\n    if (!pointerOptions.stopDown) {\n      pointerOptions.stopDown = FALSE;\n    }\n\n    super(pointerOptions);\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.anchor_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 400;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastDistance_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.lastScaleDelta_ = 1;\n  }\n\n  /**\n   * Handle pointer drag events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   */\n  handleDragEvent(mapBrowserEvent) {\n    let scaleDelta = 1.0;\n\n    const touch0 = this.targetPointers[0];\n    const touch1 = this.targetPointers[1];\n    const dx = touch0.clientX - touch1.clientX;\n    const dy = touch0.clientY - touch1.clientY;\n\n    // distance between touches\n    const distance = Math.sqrt(dx * dx + dy * dy);\n\n    if (this.lastDistance_ !== undefined) {\n      scaleDelta = this.lastDistance_ / distance;\n    }\n    this.lastDistance_ = distance;\n\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n\n    if (scaleDelta != 1.0) {\n      this.lastScaleDelta_ = scaleDelta;\n    }\n\n    // scale anchor point.\n    const viewportPosition = map.getViewport().getBoundingClientRect();\n    const centroid = centroidFromPointers(this.targetPointers);\n    centroid[0] -= viewportPosition.left;\n    centroid[1] -= viewportPosition.top;\n    this.anchor_ = map.getCoordinateFromPixelInternal(centroid);\n\n    // scale, bypass the resolution constraint\n    map.render();\n    view.adjustResolutionInternal(scaleDelta, this.anchor_);\n  }\n\n  /**\n   * Handle pointer up events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   */\n  handleUpEvent(mapBrowserEvent) {\n    if (this.targetPointers.length < 2) {\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      const direction = this.lastScaleDelta_ > 1 ? 1 : -1;\n      view.endInteraction(this.duration_, direction);\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  /**\n   * Handle pointer down events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (this.targetPointers.length >= 2) {\n      const map = mapBrowserEvent.map;\n      this.anchor_ = null;\n      this.lastDistance_ = undefined;\n      this.lastScaleDelta_ = 1;\n      if (!this.handlingDownUpSequence) {\n        map.getView().beginInteraction();\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default PinchZoom;\n","/**\n * @module ol/size\n */\n\n/**\n * An array of numbers representing a size: `[width, height]`.\n * @typedef {Array<number>} Size\n * @api\n */\n\n/**\n * Returns a buffered size.\n * @param {Size} size Size.\n * @param {number} num The amount by which to buffer.\n * @param {Size} [dest] Optional reusable size array.\n * @return {Size} The buffered size.\n */\nexport function buffer(size, num, dest) {\n  if (dest === undefined) {\n    dest = [0, 0];\n  }\n  dest[0] = size[0] + 2 * num;\n  dest[1] = size[1] + 2 * num;\n  return dest;\n}\n\n/**\n * Determines if a size has a positive area.\n * @param {Size} size The size to test.\n * @return {boolean} The size has a positive area.\n */\nexport function hasArea(size) {\n  return size[0] > 0 && size[1] > 0;\n}\n\n/**\n * Returns a size scaled by a ratio. The result will be an array of integers.\n * @param {Size} size Size.\n * @param {number} ratio Ratio.\n * @param {Size} [dest] Optional reusable size array.\n * @return {Size} The scaled size.\n */\nexport function scale(size, ratio, dest) {\n  if (dest === undefined) {\n    dest = [0, 0];\n  }\n  dest[0] = (size[0] * ratio + 0.5) | 0;\n  dest[1] = (size[1] * ratio + 0.5) | 0;\n  return dest;\n}\n\n/**\n * Returns an `Size` array for the passed in number (meaning: square) or\n * `Size` array.\n * (meaning: non-square),\n * @param {number|Size} size Width and height.\n * @param {Size} [dest] Optional reusable size array.\n * @return {Size} Size.\n * @api\n */\nexport function toSize(size, dest) {\n  if (Array.isArray(size)) {\n    return size;\n  } else {\n    if (dest === undefined) {\n      dest = [size, size];\n    } else {\n      dest[0] = size;\n      dest[1] = size;\n    }\n    return dest;\n  }\n}\n","/**\n * @module ol/source/TileImage\n */\nimport EventType from '../events/EventType.js';\nimport ImageTile from '../ImageTile.js';\nimport ReprojTile from '../reproj/Tile.js';\nimport TileCache from '../TileCache.js';\nimport TileState from '../TileState.js';\nimport UrlTile from './UrlTile.js';\nimport {equivalent, get as getProjection} from '../proj.js';\nimport {getKey, getKeyZXY} from '../tilecoord.js';\nimport {getForProjection as getTileGridForProjection} from '../tilegrid.js';\nimport {getUid} from '../util.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize] Initial tile cache size. Will auto-grow to hold at least the number of tiles in the viewport.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * linear interpolation is used when resampling.  Set to false to use the nearest neighbor instead.\n * @property {boolean} [opaque=false] Whether the layer is opaque.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"./Source.js\").State} [state] Source state.\n * @property {typeof import(\"../ImageTile.js\").default} [tileClass] Class used to instantiate image tiles.\n * Default is {@link module:ol/ImageTile~ImageTile}.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service. For example, if the tile\n * service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction] Optional function to get tile URL given a tile coordinate and the projection.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`, may be\n * used instead of defining each one separately in the `urls` option.\n * @property {Array<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX] Whether to wrap the world horizontally. The default, is to\n * request out-of-bounds tiles from the server. When set to `false`, only one\n * world will be rendered. When set to `true`, tiles will be requested for one\n * world only, but they will be wrapped horizontally to render multiple worlds.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {string} [key] Optional tile key for proper cache fetching\n * @property {number|import(\"../array.js\").NearestDirectionFunction} [zDirection=0]\n * Choose whether to use tiles with a higher or lower zoom level when between integer\n * zoom levels. See {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution}.\n */\n\n/**\n * @classdesc\n * Base class for sources providing images divided into a tile grid.\n *\n * @fires import(\"./Tile.js\").TileSourceEvent\n * @api\n */\nclass TileImage extends UrlTile {\n  /**\n   * @param {!Options} options Image tile options.\n   */\n  constructor(options) {\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      opaque: options.opaque,\n      projection: options.projection,\n      state: options.state,\n      tileGrid: options.tileGrid,\n      tileLoadFunction: options.tileLoadFunction\n        ? options.tileLoadFunction\n        : defaultTileLoadFunction,\n      tilePixelRatio: options.tilePixelRatio,\n      tileUrlFunction: options.tileUrlFunction,\n      url: options.url,\n      urls: options.urls,\n      wrapX: options.wrapX,\n      transition: options.transition,\n      interpolate:\n        options.interpolate !== undefined ? options.interpolate : true,\n      key: options.key,\n      attributionsCollapsible: options.attributionsCollapsible,\n      zDirection: options.zDirection,\n    });\n\n    /**\n     * @protected\n     * @type {?string}\n     */\n    this.crossOrigin =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @protected\n     * @type {typeof ImageTile}\n     */\n    this.tileClass =\n      options.tileClass !== undefined ? options.tileClass : ImageTile;\n\n    /**\n     * @protected\n     * @type {!Object<string, TileCache>}\n     */\n    this.tileCacheForProjection = {};\n\n    /**\n     * @protected\n     * @type {!Object<string, import(\"../tilegrid/TileGrid.js\").default>}\n     */\n    this.tileGridForProjection = {};\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.reprojectionErrorThreshold_ = options.reprojectionErrorThreshold;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderReprojectionEdges_ = false;\n  }\n\n  /**\n   * @return {boolean} Can expire cache.\n   */\n  canExpireCache() {\n    if (this.tileCache.canExpireCache()) {\n      return true;\n    } else {\n      for (const key in this.tileCacheForProjection) {\n        if (this.tileCacheForProjection[key].canExpireCache()) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {!Object<string, boolean>} usedTiles Used tiles.\n   */\n  expireCache(projection, usedTiles) {\n    const usedTileCache = this.getTileCacheForProjection(projection);\n\n    this.tileCache.expireCache(\n      this.tileCache == usedTileCache ? usedTiles : {}\n    );\n    for (const id in this.tileCacheForProjection) {\n      const tileCache = this.tileCacheForProjection[id];\n      tileCache.expireCache(tileCache == usedTileCache ? usedTiles : {});\n    }\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {number} Gutter.\n   */\n  getGutterForProjection(projection) {\n    if (\n      this.getProjection() &&\n      projection &&\n      !equivalent(this.getProjection(), projection)\n    ) {\n      return 0;\n    } else {\n      return this.getGutter();\n    }\n  }\n\n  /**\n   * @return {number} Gutter.\n   */\n  getGutter() {\n    return 0;\n  }\n\n  /**\n   * Return the key to be used for all tiles in the source.\n   * @return {string} The key for all tiles.\n   */\n  getKey() {\n    let key = super.getKey();\n    if (!this.getInterpolate()) {\n      key += ':disable-interpolation';\n    }\n    return key;\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {boolean} Opaque.\n   */\n  getOpaque(projection) {\n    if (\n      this.getProjection() &&\n      projection &&\n      !equivalent(this.getProjection(), projection)\n    ) {\n      return false;\n    } else {\n      return super.getOpaque(projection);\n    }\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {!import(\"../tilegrid/TileGrid.js\").default} Tile grid.\n   */\n  getTileGridForProjection(projection) {\n    const thisProj = this.getProjection();\n    if (this.tileGrid && (!thisProj || equivalent(thisProj, projection))) {\n      return this.tileGrid;\n    } else {\n      const projKey = getUid(projection);\n      if (!(projKey in this.tileGridForProjection)) {\n        this.tileGridForProjection[projKey] =\n          getTileGridForProjection(projection);\n      }\n      return this.tileGridForProjection[projKey];\n    }\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../TileCache.js\").default} Tile cache.\n   */\n  getTileCacheForProjection(projection) {\n    const thisProj = this.getProjection();\n    if (!thisProj || equivalent(thisProj, projection)) {\n      return this.tileCache;\n    } else {\n      const projKey = getUid(projection);\n      if (!(projKey in this.tileCacheForProjection)) {\n        this.tileCacheForProjection[projKey] = new TileCache(\n          this.tileCache.highWaterMark\n        );\n      }\n      return this.tileCacheForProjection[projKey];\n    }\n  }\n\n  /**\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {string} key The key set on the tile.\n   * @return {!ImageTile} Tile.\n   * @private\n   */\n  createTile_(z, x, y, pixelRatio, projection, key) {\n    const tileCoord = [z, x, y];\n    const urlTileCoord = this.getTileCoordForTileUrlFunction(\n      tileCoord,\n      projection\n    );\n    const tileUrl = urlTileCoord\n      ? this.tileUrlFunction(urlTileCoord, pixelRatio, projection)\n      : undefined;\n    const tile = new this.tileClass(\n      tileCoord,\n      tileUrl !== undefined ? TileState.IDLE : TileState.EMPTY,\n      tileUrl !== undefined ? tileUrl : '',\n      this.crossOrigin,\n      this.tileLoadFunction,\n      this.tileOptions\n    );\n    tile.key = key;\n    tile.addEventListener(EventType.CHANGE, this.handleTileChange.bind(this));\n    return tile;\n  }\n\n  /**\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {!(ImageTile|ReprojTile)} Tile.\n   */\n  getTile(z, x, y, pixelRatio, projection) {\n    const sourceProjection = this.getProjection();\n    if (\n      !sourceProjection ||\n      !projection ||\n      equivalent(sourceProjection, projection)\n    ) {\n      return this.getTileInternal(\n        z,\n        x,\n        y,\n        pixelRatio,\n        sourceProjection || projection\n      );\n    } else {\n      const cache = this.getTileCacheForProjection(projection);\n      const tileCoord = [z, x, y];\n      let tile;\n      const tileCoordKey = getKey(tileCoord);\n      if (cache.containsKey(tileCoordKey)) {\n        tile = cache.get(tileCoordKey);\n      }\n      const key = this.getKey();\n      if (tile && tile.key == key) {\n        return tile;\n      } else {\n        const sourceTileGrid = this.getTileGridForProjection(sourceProjection);\n        const targetTileGrid = this.getTileGridForProjection(projection);\n        const wrappedTileCoord = this.getTileCoordForTileUrlFunction(\n          tileCoord,\n          projection\n        );\n        const newTile = new ReprojTile(\n          sourceProjection,\n          sourceTileGrid,\n          projection,\n          targetTileGrid,\n          tileCoord,\n          wrappedTileCoord,\n          this.getTilePixelRatio(pixelRatio),\n          this.getGutter(),\n          function (z, x, y, pixelRatio) {\n            return this.getTileInternal(z, x, y, pixelRatio, sourceProjection);\n          }.bind(this),\n          this.reprojectionErrorThreshold_,\n          this.renderReprojectionEdges_,\n          this.getInterpolate()\n        );\n        newTile.key = key;\n\n        if (tile) {\n          newTile.interimTile = tile;\n          newTile.refreshInterimChain();\n          cache.replace(tileCoordKey, newTile);\n        } else {\n          cache.set(tileCoordKey, newTile);\n        }\n        return newTile;\n      }\n    }\n  }\n\n  /**\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {!import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {!(ImageTile|ReprojTile)} Tile.\n   * @protected\n   */\n  getTileInternal(z, x, y, pixelRatio, projection) {\n    let tile = null;\n    const tileCoordKey = getKeyZXY(z, x, y);\n    const key = this.getKey();\n    if (!this.tileCache.containsKey(tileCoordKey)) {\n      tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n      this.tileCache.set(tileCoordKey, tile);\n    } else {\n      tile = this.tileCache.get(tileCoordKey);\n      if (tile.key != key) {\n        // The source's params changed. If the tile has an interim tile and if we\n        // can use it then we use it. Otherwise we create a new tile.  In both\n        // cases we attempt to assign an interim tile to the new tile.\n        const interimTile = tile;\n        tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n\n        //make the new tile the head of the list,\n        if (interimTile.getState() == TileState.IDLE) {\n          //the old tile hasn't begun loading yet, and is now outdated, so we can simply discard it\n          tile.interimTile = interimTile.interimTile;\n        } else {\n          tile.interimTile = interimTile;\n        }\n        tile.refreshInterimChain();\n        this.tileCache.replace(tileCoordKey, tile);\n      }\n    }\n    return tile;\n  }\n\n  /**\n   * Sets whether to render reprojection edges or not (usually for debugging).\n   * @param {boolean} render Render the edges.\n   * @api\n   */\n  setRenderReprojectionEdges(render) {\n    if (this.renderReprojectionEdges_ == render) {\n      return;\n    }\n    this.renderReprojectionEdges_ = render;\n    for (const id in this.tileCacheForProjection) {\n      this.tileCacheForProjection[id].clear();\n    }\n    this.changed();\n  }\n\n  /**\n   * Sets the tile grid to use when reprojecting the tiles to the given\n   * projection instead of the default tile grid for the projection.\n   *\n   * This can be useful when the default tile grid cannot be created\n   * (e.g. projection has no extent defined) or\n   * for optimization reasons (custom tile size, resolutions, ...).\n   *\n   * @param {import(\"../proj.js\").ProjectionLike} projection Projection.\n   * @param {import(\"../tilegrid/TileGrid.js\").default} tilegrid Tile grid to use for the projection.\n   * @api\n   */\n  setTileGridForProjection(projection, tilegrid) {\n    const proj = getProjection(projection);\n    if (proj) {\n      const projKey = getUid(proj);\n      if (!(projKey in this.tileGridForProjection)) {\n        this.tileGridForProjection[projKey] = tilegrid;\n      }\n    }\n  }\n\n  clear() {\n    super.clear();\n    for (const id in this.tileCacheForProjection) {\n      this.tileCacheForProjection[id].clear();\n    }\n  }\n}\n\n/**\n * @param {ImageTile} imageTile Image tile.\n * @param {string} src Source.\n */\nfunction defaultTileLoadFunction(imageTile, src) {\n  /** @type {HTMLImageElement|HTMLVideoElement} */ (imageTile.getImage()).src =\n    src;\n}\n\nexport default TileImage;\n","/**\n * @module ol/Tile\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport TileState from './TileState.js';\nimport {abstract} from './util.js';\nimport {easeIn} from './easing.js';\n\n/**\n * A function that takes an {@link module:ol/Tile~Tile} for the tile and a\n * `{string}` for the url as arguments. The default is\n * ```js\n * source.setTileLoadFunction(function(tile, src) {\n *   tile.getImage().src = src;\n * });\n * ```\n * For more fine grained control, the load function can use fetch or XMLHttpRequest and involve\n * error handling:\n *\n * ```js\n * import TileState from 'ol/TileState';\n *\n * source.setTileLoadFunction(function(tile, src) {\n *   const xhr = new XMLHttpRequest();\n *   xhr.responseType = 'blob';\n *   xhr.addEventListener('loadend', function (evt) {\n *     const data = this.response;\n *     if (data !== undefined) {\n *       tile.getImage().src = URL.createObjectURL(data);\n *     } else {\n *       tile.setState(TileState.ERROR);\n *     }\n *   });\n *   xhr.addEventListener('error', function () {\n *     tile.setState(TileState.ERROR);\n *   });\n *   xhr.open('GET', src);\n *   xhr.send();\n * });\n * ```\n *\n * @typedef {function(Tile, string): void} LoadFunction\n * @api\n */\n\n/**\n * {@link module:ol/source/Tile~TileSource} sources use a function of this type to get\n * the url that provides a tile for a given tile coordinate.\n *\n * This function takes an {@link module:ol/tilecoord~TileCoord} for the tile\n * coordinate, a `{number}` representing the pixel ratio and a\n * {@link module:ol/proj/Projection~Projection} for the projection  as arguments\n * and returns a `{string}` representing the tile URL, or undefined if no tile\n * should be requested for the passed tile coordinate.\n *\n * @typedef {function(import(\"./tilecoord.js\").TileCoord, number,\n *           import(\"./proj/Projection.js\").default): (string|undefined)} UrlFunction\n * @api\n */\n\n/**\n * @typedef {Object} Options\n * @property {number} [transition=250] A duration for tile opacity\n * transitions in milliseconds. A duration of 0 disables the opacity transition.\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\n * the nearest neighbor is used when resampling.\n * @api\n */\n\n/**\n * @classdesc\n * Base class for tiles.\n *\n * @abstract\n */\nclass Tile extends EventTarget {\n  /**\n   * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"./TileState.js\").default} state State.\n   * @param {Options} [options] Tile options.\n   */\n  constructor(tileCoord, state, options) {\n    super();\n\n    options = options ? options : {};\n\n    /**\n     * @type {import(\"./tilecoord.js\").TileCoord}\n     */\n    this.tileCoord = tileCoord;\n\n    /**\n     * @protected\n     * @type {import(\"./TileState.js\").default}\n     */\n    this.state = state;\n\n    /**\n     * An \"interim\" tile for this tile. The interim tile may be used while this\n     * one is loading, for \"smooth\" transitions when changing params/dimensions\n     * on the source.\n     * @type {Tile}\n     */\n    this.interimTile = null;\n\n    /**\n     * A key assigned to the tile. This is used by the tile source to determine\n     * if this tile can effectively be used, or if a new tile should be created\n     * and this one be used as an interim tile for this new tile.\n     * @type {string}\n     */\n    this.key = '';\n\n    /**\n     * The duration for the opacity transition.\n     * @type {number}\n     */\n    this.transition_ =\n      options.transition === undefined ? 250 : options.transition;\n\n    /**\n     * Lookup of start times for rendering transitions.  If the start time is\n     * equal to -1, the transition is complete.\n     * @type {Object<string, number>}\n     */\n    this.transitionStarts_ = {};\n\n    /**\n     * @type {boolean}\n     */\n    this.interpolate = !!options.interpolate;\n  }\n\n  /**\n   * @protected\n   */\n  changed() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * Called by the tile cache when the tile is removed from the cache due to expiry\n   */\n  release() {\n    if (this.state === TileState.ERROR) {\n      // to remove the `change` listener on this tile in `ol/TileQueue#handleTileChange`\n      this.setState(TileState.EMPTY);\n    }\n  }\n\n  /**\n   * @return {string} Key.\n   */\n  getKey() {\n    return this.key + '/' + this.tileCoord;\n  }\n\n  /**\n   * Get the interim tile most suitable for rendering using the chain of interim\n   * tiles. This corresponds to the  most recent tile that has been loaded, if no\n   * such tile exists, the original tile is returned.\n   * @return {!Tile} Best tile for rendering.\n   */\n  getInterimTile() {\n    if (!this.interimTile) {\n      //empty chain\n      return this;\n    }\n    let tile = this.interimTile;\n\n    // find the first loaded tile and return it. Since the chain is sorted in\n    // decreasing order of creation time, there is no need to search the remainder\n    // of the list (all those tiles correspond to older requests and will be\n    // cleaned up by refreshInterimChain)\n    do {\n      if (tile.getState() == TileState.LOADED) {\n        // Show tile immediately instead of fading it in after loading, because\n        // the interim tile is in place already\n        this.transition_ = 0;\n        return tile;\n      }\n      tile = tile.interimTile;\n    } while (tile);\n\n    // we can not find a better tile\n    return this;\n  }\n\n  /**\n   * Goes through the chain of interim tiles and discards sections of the chain\n   * that are no longer relevant.\n   */\n  refreshInterimChain() {\n    if (!this.interimTile) {\n      return;\n    }\n\n    let tile = this.interimTile;\n\n    /**\n     * @type {Tile}\n     */\n    let prev = this;\n\n    do {\n      if (tile.getState() == TileState.LOADED) {\n        //we have a loaded tile, we can discard the rest of the list\n        //we would could abort any LOADING tile request\n        //older than this tile (i.e. any LOADING tile following this entry in the chain)\n        tile.interimTile = null;\n        break;\n      } else if (tile.getState() == TileState.LOADING) {\n        //keep this LOADING tile any loaded tiles later in the chain are\n        //older than this tile, so we're still interested in the request\n        prev = tile;\n      } else if (tile.getState() == TileState.IDLE) {\n        //the head of the list is the most current tile, we don't need\n        //to start any other requests for this chain\n        prev.interimTile = tile.interimTile;\n      } else {\n        prev = tile;\n      }\n      tile = prev.interimTile;\n    } while (tile);\n  }\n\n  /**\n   * Get the tile coordinate for this tile.\n   * @return {import(\"./tilecoord.js\").TileCoord} The tile coordinate.\n   * @api\n   */\n  getTileCoord() {\n    return this.tileCoord;\n  }\n\n  /**\n   * @return {import(\"./TileState.js\").default} State.\n   */\n  getState() {\n    return this.state;\n  }\n\n  /**\n   * Sets the state of this tile. If you write your own {@link module:ol/Tile~LoadFunction tileLoadFunction} ,\n   * it is important to set the state correctly to {@link module:ol/TileState~ERROR}\n   * when the tile cannot be loaded. Otherwise the tile cannot be removed from\n   * the tile queue and will block other requests.\n   * @param {import(\"./TileState.js\").default} state State.\n   * @api\n   */\n  setState(state) {\n    if (this.state !== TileState.ERROR && this.state > state) {\n      throw new Error('Tile load sequence violation');\n    }\n    this.state = state;\n    this.changed();\n  }\n\n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   * @abstract\n   * @api\n   */\n  load() {\n    abstract();\n  }\n\n  /**\n   * Get the alpha value for rendering.\n   * @param {string} id An id for the renderer.\n   * @param {number} time The render frame time.\n   * @return {number} A number between 0 and 1.\n   */\n  getAlpha(id, time) {\n    if (!this.transition_) {\n      return 1;\n    }\n\n    let start = this.transitionStarts_[id];\n    if (!start) {\n      start = time;\n      this.transitionStarts_[id] = start;\n    } else if (start === -1) {\n      return 1;\n    }\n\n    const delta = time - start + 1000 / 60; // avoid rendering at 0\n    if (delta >= this.transition_) {\n      return 1;\n    }\n    return easeIn(delta / this.transition_);\n  }\n\n  /**\n   * Determine if a tile is in an alpha transition.  A tile is considered in\n   * transition if tile.getAlpha() has not yet been called or has been called\n   * and returned 1.\n   * @param {string} id An id for the renderer.\n   * @return {boolean} The tile is in transition.\n   */\n  inTransition(id) {\n    if (!this.transition_) {\n      return false;\n    }\n    return this.transitionStarts_[id] !== -1;\n  }\n\n  /**\n   * Mark a transition as complete.\n   * @param {string} id An id for the renderer.\n   */\n  endTransition(id) {\n    if (this.transition_) {\n      this.transitionStarts_[id] = -1;\n    }\n  }\n}\n\nexport default Tile;\n","/**\n * @module ol/Image\n */\nimport EventType from './events/EventType.js';\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport {IMAGE_DECODE} from './has.js';\nimport {getHeight} from './extent.js';\nimport {listenOnce, unlistenByKey} from './events.js';\n\n/**\n * A function that takes an {@link module:ol/Image~ImageWrapper} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~ImageWrapper#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(ImageWrapper, string): void} LoadFunction\n * @api\n */\n\nclass ImageWrapper extends ImageBase {\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number|undefined} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {string} src Image source URI.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {LoadFunction} imageLoadFunction Image load function.\n   */\n  constructor(\n    extent,\n    resolution,\n    pixelRatio,\n    src,\n    crossOrigin,\n    imageLoadFunction\n  ) {\n    super(extent, resolution, pixelRatio, ImageState.IDLE);\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement}\n     */\n    this.image_ = new Image();\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {?function():void}\n     */\n    this.unlisten_ = null;\n\n    /**\n     * @protected\n     * @type {import(\"./ImageState.js\").default}\n     */\n    this.state = ImageState.IDLE;\n\n    /**\n     * @private\n     * @type {LoadFunction}\n     */\n    this.imageLoadFunction_ = imageLoadFunction;\n  }\n\n  /**\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  handleImageError_() {\n    this.state = ImageState.ERROR;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  handleImageLoad_() {\n    if (this.resolution === undefined) {\n      this.resolution = getHeight(this.extent) / this.image_.height;\n    }\n    this.state = ImageState.LOADED;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   * @api\n   */\n  load() {\n    if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n      this.state = ImageState.LOADING;\n      this.changed();\n      this.imageLoadFunction_(this, this.src_);\n      this.unlisten_ = listenImage(\n        this.image_,\n        this.handleImageLoad_.bind(this),\n        this.handleImageError_.bind(this)\n      );\n    }\n  }\n\n  /**\n   * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n   */\n  setImage(image) {\n    this.image_ = image;\n    this.resolution = getHeight(this.extent) / this.image_.height;\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    if (this.unlisten_) {\n      this.unlisten_();\n      this.unlisten_ = null;\n    }\n  }\n}\n\n/**\n * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image element.\n * @param {function():any} loadHandler Load callback function.\n * @param {function():any} errorHandler Error callback function.\n * @return {function():void} Callback to stop listening.\n */\nexport function listenImage(image, loadHandler, errorHandler) {\n  const img = /** @type {HTMLImageElement} */ (image);\n  let listening = true;\n  let decoding = false;\n  let loaded = false;\n\n  const listenerKeys = [\n    listenOnce(img, EventType.LOAD, function () {\n      loaded = true;\n      if (!decoding) {\n        loadHandler();\n      }\n    }),\n  ];\n\n  if (img.src && IMAGE_DECODE) {\n    decoding = true;\n    img\n      .decode()\n      .then(function () {\n        if (listening) {\n          loadHandler();\n        }\n      })\n      .catch(function (error) {\n        if (listening) {\n          if (loaded) {\n            loadHandler();\n          } else {\n            errorHandler();\n          }\n        }\n      });\n  } else {\n    listenerKeys.push(listenOnce(img, EventType.ERROR, errorHandler));\n  }\n\n  return function unlisten() {\n    listening = false;\n    listenerKeys.forEach(unlistenByKey);\n  };\n}\n\nexport default ImageWrapper;\n","/**\n * @module ol/ImageBase\n */\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\nimport {abstract} from './util.js';\n\n/**\n * @abstract\n */\nclass ImageBase extends EventTarget {\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number|undefined} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"./ImageState.js\").default} state State.\n   */\n  constructor(extent, resolution, pixelRatio, state) {\n    super();\n\n    /**\n     * @protected\n     * @type {import(\"./extent.js\").Extent}\n     */\n    this.extent = extent;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @protected\n     * @type {number|undefined}\n     */\n    this.resolution = resolution;\n\n    /**\n     * @protected\n     * @type {import(\"./ImageState.js\").default}\n     */\n    this.state = state;\n  }\n\n  /**\n   * @protected\n   */\n  changed() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @return {import(\"./extent.js\").Extent} Extent.\n   */\n  getExtent() {\n    return this.extent;\n  }\n\n  /**\n   * @abstract\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   */\n  getImage() {\n    return abstract();\n  }\n\n  /**\n   * @return {number} PixelRatio.\n   */\n  getPixelRatio() {\n    return this.pixelRatio_;\n  }\n\n  /**\n   * @return {number} Resolution.\n   */\n  getResolution() {\n    return /** @type {number} */ (this.resolution);\n  }\n\n  /**\n   * @return {import(\"./ImageState.js\").default} State.\n   */\n  getState() {\n    return this.state;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * @abstract\n   */\n  load() {\n    abstract();\n  }\n}\n\nexport default ImageBase;\n","/**\n * @module ol/ImageState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3,\n  EMPTY: 4,\n};\n","/**\n * @module ol/ImageTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport {createCanvasContext2D} from './dom.js';\nimport {listenImage} from './Image.js';\n\nclass ImageTile extends Tile {\n  /**\n   * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"./TileState.js\").default} state State.\n   * @param {string} src Image source URI.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"./Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n   * @param {import(\"./Tile.js\").Options} [options] Tile options.\n   */\n  constructor(tileCoord, state, src, crossOrigin, tileLoadFunction, options) {\n    super(tileCoord, state, options);\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ = crossOrigin;\n\n    /**\n     * Image URI\n     *\n     * @private\n     * @type {string}\n     */\n    this.src_ = src;\n\n    this.key = src;\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.image_ = new Image();\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {?function():void}\n     */\n    this.unlisten_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./Tile.js\").LoadFunction}\n     */\n    this.tileLoadFunction_ = tileLoadFunction;\n  }\n\n  /**\n   * Get the HTML image element for this tile (may be a Canvas, Image, or Video).\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * Sets an HTML image element for this tile (may be a Canvas or preloaded Image).\n   * @param {HTMLCanvasElement|HTMLImageElement} element Element.\n   */\n  setImage(element) {\n    this.image_ = element;\n    this.state = TileState.LOADED;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  handleImageError_() {\n    this.state = TileState.ERROR;\n    this.unlistenImage_();\n    this.image_ = getBlankImage();\n    this.changed();\n  }\n\n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  handleImageLoad_() {\n    const image = /** @type {HTMLImageElement} */ (this.image_);\n    if (image.naturalWidth && image.naturalHeight) {\n      this.state = TileState.LOADED;\n    } else {\n      this.state = TileState.EMPTY;\n    }\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   *\n   * To retry loading tiles on failed requests, use a custom `tileLoadFunction`\n   * that checks for error status codes and reloads only when the status code is\n   * 408, 429, 500, 502, 503 and 504, and only when not too many retries have been\n   * made already:\n   *\n   * ```js\n   * const retryCodes = [408, 429, 500, 502, 503, 504];\n   * const retries = {};\n   * source.setTileLoadFunction((tile, src) => {\n   *   const image = tile.getImage();\n   *   fetch(src)\n   *     .then((response) => {\n   *       if (retryCodes.includes(response.status)) {\n   *         retries[src] = (retries[src] || 0) + 1;\n   *         if (retries[src] <= 3) {\n   *           setTimeout(() => tile.load(), retries[src] * 1000);\n   *         }\n   *         return Promise.reject();\n   *       }\n   *       return response.blob();\n   *     })\n   *     .then((blob) => {\n   *       const imageUrl = URL.createObjectURL(blob);\n   *       image.src = imageUrl;\n   *       setTimeout(() => URL.revokeObjectURL(imageUrl), 5000);\n   *     })\n   *     .catch(() => tile.setState(3)); // error\n   * });\n   * ```\n   *\n   * @api\n   */\n  load() {\n    if (this.state == TileState.ERROR) {\n      this.state = TileState.IDLE;\n      this.image_ = new Image();\n      if (this.crossOrigin_ !== null) {\n        this.image_.crossOrigin = this.crossOrigin_;\n      }\n    }\n    if (this.state == TileState.IDLE) {\n      this.state = TileState.LOADING;\n      this.changed();\n      this.tileLoadFunction_(this, this.src_);\n      this.unlisten_ = listenImage(\n        this.image_,\n        this.handleImageLoad_.bind(this),\n        this.handleImageError_.bind(this)\n      );\n    }\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    if (this.unlisten_) {\n      this.unlisten_();\n      this.unlisten_ = null;\n    }\n  }\n}\n\n/**\n * Get a 1-pixel blank image.\n * @return {HTMLCanvasElement} Blank image.\n */\nfunction getBlankImage() {\n  const ctx = createCanvasContext2D(1, 1);\n  ctx.fillStyle = 'rgba(0,0,0,0)';\n  ctx.fillRect(0, 0, 1, 1);\n  return ctx.canvas;\n}\n\nexport default ImageTile;\n","/**\n * @module ol/reproj/Triangulation\n */\nimport {\n  boundingExtent,\n  createEmpty,\n  extendCoordinate,\n  getArea,\n  getBottomLeft,\n  getBottomRight,\n  getTopLeft,\n  getTopRight,\n  getWidth,\n  intersects,\n} from '../extent.js';\nimport {getTransform} from '../proj.js';\nimport {modulo} from '../math.js';\n\n/**\n * Single triangle; consists of 3 source points and 3 target points.\n * @typedef {Object} Triangle\n * @property {Array<import(\"../coordinate.js\").Coordinate>} source Source.\n * @property {Array<import(\"../coordinate.js\").Coordinate>} target Target.\n */\n\n/**\n * Maximum number of subdivision steps during raster reprojection triangulation.\n * Prevents high memory usage and large number of proj4 calls (for certain\n * transformations and areas). At most `2*(2^this)` triangles are created for\n * each triangulated extent (tile/image).\n * @type {number}\n */\nconst MAX_SUBDIVISION = 10;\n\n/**\n * Maximum allowed size of triangle relative to world width. When transforming\n * corners of world extent between certain projections, the resulting\n * triangulation seems to have zero error and no subdivision is performed. If\n * the triangle width is more than this (relative to world width; 0-1),\n * subdivison is forced (up to `MAX_SUBDIVISION`). Default is `0.25`.\n * @type {number}\n */\nconst MAX_TRIANGLE_WIDTH = 0.25;\n\n/**\n * @classdesc\n * Class containing triangulation of the given target extent.\n * Used for determining source data and the reprojection itself.\n */\nclass Triangulation {\n  /**\n   * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection.\n   * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n   * @param {import(\"../extent.js\").Extent} targetExtent Target extent to triangulate.\n   * @param {import(\"../extent.js\").Extent} maxSourceExtent Maximal source extent that can be used.\n   * @param {number} errorThreshold Acceptable error (in source units).\n   * @param {?number} destinationResolution The (optional) resolution of the destination.\n   */\n  constructor(\n    sourceProj,\n    targetProj,\n    targetExtent,\n    maxSourceExtent,\n    errorThreshold,\n    destinationResolution\n  ) {\n    /**\n     * @type {import(\"../proj/Projection.js\").default}\n     * @private\n     */\n    this.sourceProj_ = sourceProj;\n\n    /**\n     * @type {import(\"../proj/Projection.js\").default}\n     * @private\n     */\n    this.targetProj_ = targetProj;\n\n    /** @type {!Object<string, import(\"../coordinate.js\").Coordinate>} */\n    let transformInvCache = {};\n    const transformInv = getTransform(this.targetProj_, this.sourceProj_);\n\n    /**\n     * @param {import(\"../coordinate.js\").Coordinate} c A coordinate.\n     * @return {import(\"../coordinate.js\").Coordinate} Transformed coordinate.\n     * @private\n     */\n    this.transformInv_ = function (c) {\n      const key = c[0] + '/' + c[1];\n      if (!transformInvCache[key]) {\n        transformInvCache[key] = transformInv(c);\n      }\n      return transformInvCache[key];\n    };\n\n    /**\n     * @type {import(\"../extent.js\").Extent}\n     * @private\n     */\n    this.maxSourceExtent_ = maxSourceExtent;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.errorThresholdSquared_ = errorThreshold * errorThreshold;\n\n    /**\n     * @type {Array<Triangle>}\n     * @private\n     */\n    this.triangles_ = [];\n\n    /**\n     * Indicates that the triangulation crosses edge of the source projection.\n     * @type {boolean}\n     * @private\n     */\n    this.wrapsXInSource_ = false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.canWrapXInSource_ =\n      this.sourceProj_.canWrapX() &&\n      !!maxSourceExtent &&\n      !!this.sourceProj_.getExtent() &&\n      getWidth(maxSourceExtent) == getWidth(this.sourceProj_.getExtent());\n\n    /**\n     * @type {?number}\n     * @private\n     */\n    this.sourceWorldWidth_ = this.sourceProj_.getExtent()\n      ? getWidth(this.sourceProj_.getExtent())\n      : null;\n\n    /**\n     * @type {?number}\n     * @private\n     */\n    this.targetWorldWidth_ = this.targetProj_.getExtent()\n      ? getWidth(this.targetProj_.getExtent())\n      : null;\n\n    const destinationTopLeft = getTopLeft(targetExtent);\n    const destinationTopRight = getTopRight(targetExtent);\n    const destinationBottomRight = getBottomRight(targetExtent);\n    const destinationBottomLeft = getBottomLeft(targetExtent);\n    const sourceTopLeft = this.transformInv_(destinationTopLeft);\n    const sourceTopRight = this.transformInv_(destinationTopRight);\n    const sourceBottomRight = this.transformInv_(destinationBottomRight);\n    const sourceBottomLeft = this.transformInv_(destinationBottomLeft);\n\n    /*\n     * The maxSubdivision controls how many splittings of the target area can\n     * be done. The idea here is to do a linear mapping of the target areas\n     * but the actual overal reprojection (can be) extremely non-linear. The\n     * default value of MAX_SUBDIVISION was chosen based on mapping a 256x256\n     * tile size. However this function is also called to remap canvas rendered\n     * layers which can be much larger. This calculation increases the maxSubdivision\n     * value by the right factor so that each 256x256 pixel area has\n     * MAX_SUBDIVISION divisions.\n     */\n    const maxSubdivision =\n      MAX_SUBDIVISION +\n      (destinationResolution\n        ? Math.max(\n            0,\n            Math.ceil(\n              Math.log2(\n                getArea(targetExtent) /\n                  (destinationResolution * destinationResolution * 256 * 256)\n              )\n            )\n          )\n        : 0);\n\n    this.addQuad_(\n      destinationTopLeft,\n      destinationTopRight,\n      destinationBottomRight,\n      destinationBottomLeft,\n      sourceTopLeft,\n      sourceTopRight,\n      sourceBottomRight,\n      sourceBottomLeft,\n      maxSubdivision\n    );\n\n    if (this.wrapsXInSource_) {\n      let leftBound = Infinity;\n      this.triangles_.forEach(function (triangle, i, arr) {\n        leftBound = Math.min(\n          leftBound,\n          triangle.source[0][0],\n          triangle.source[1][0],\n          triangle.source[2][0]\n        );\n      });\n\n      // Shift triangles to be as close to `leftBound` as possible\n      // (if the distance is more than `worldWidth / 2` it can be closer.\n      this.triangles_.forEach(\n        function (triangle) {\n          if (\n            Math.max(\n              triangle.source[0][0],\n              triangle.source[1][0],\n              triangle.source[2][0]\n            ) -\n              leftBound >\n            this.sourceWorldWidth_ / 2\n          ) {\n            const newTriangle = [\n              [triangle.source[0][0], triangle.source[0][1]],\n              [triangle.source[1][0], triangle.source[1][1]],\n              [triangle.source[2][0], triangle.source[2][1]],\n            ];\n            if (newTriangle[0][0] - leftBound > this.sourceWorldWidth_ / 2) {\n              newTriangle[0][0] -= this.sourceWorldWidth_;\n            }\n            if (newTriangle[1][0] - leftBound > this.sourceWorldWidth_ / 2) {\n              newTriangle[1][0] -= this.sourceWorldWidth_;\n            }\n            if (newTriangle[2][0] - leftBound > this.sourceWorldWidth_ / 2) {\n              newTriangle[2][0] -= this.sourceWorldWidth_;\n            }\n\n            // Rarely (if the extent contains both the dateline and prime meridian)\n            // the shift can in turn break some triangles.\n            // Detect this here and don't shift in such cases.\n            const minX = Math.min(\n              newTriangle[0][0],\n              newTriangle[1][0],\n              newTriangle[2][0]\n            );\n            const maxX = Math.max(\n              newTriangle[0][0],\n              newTriangle[1][0],\n              newTriangle[2][0]\n            );\n            if (maxX - minX < this.sourceWorldWidth_ / 2) {\n              triangle.source = newTriangle;\n            }\n          }\n        }.bind(this)\n      );\n    }\n\n    transformInvCache = {};\n  }\n\n  /**\n   * Adds triangle to the triangulation.\n   * @param {import(\"../coordinate.js\").Coordinate} a The target a coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} b The target b coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} c The target c coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} aSrc The source a coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} bSrc The source b coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} cSrc The source c coordinate.\n   * @private\n   */\n  addTriangle_(a, b, c, aSrc, bSrc, cSrc) {\n    this.triangles_.push({\n      source: [aSrc, bSrc, cSrc],\n      target: [a, b, c],\n    });\n  }\n\n  /**\n   * Adds quad (points in clock-wise order) to the triangulation\n   * (and reprojects the vertices) if valid.\n   * Performs quad subdivision if needed to increase precision.\n   *\n   * @param {import(\"../coordinate.js\").Coordinate} a The target a coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} b The target b coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} c The target c coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} d The target d coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} aSrc The source a coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} bSrc The source b coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} cSrc The source c coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} dSrc The source d coordinate.\n   * @param {number} maxSubdivision Maximal allowed subdivision of the quad.\n   * @private\n   */\n  addQuad_(a, b, c, d, aSrc, bSrc, cSrc, dSrc, maxSubdivision) {\n    const sourceQuadExtent = boundingExtent([aSrc, bSrc, cSrc, dSrc]);\n    const sourceCoverageX = this.sourceWorldWidth_\n      ? getWidth(sourceQuadExtent) / this.sourceWorldWidth_\n      : null;\n    const sourceWorldWidth = /** @type {number} */ (this.sourceWorldWidth_);\n\n    // when the quad is wrapped in the source projection\n    // it covers most of the projection extent, but not fully\n    const wrapsX =\n      this.sourceProj_.canWrapX() &&\n      sourceCoverageX > 0.5 &&\n      sourceCoverageX < 1;\n\n    let needsSubdivision = false;\n\n    if (maxSubdivision > 0) {\n      if (this.targetProj_.isGlobal() && this.targetWorldWidth_) {\n        const targetQuadExtent = boundingExtent([a, b, c, d]);\n        const targetCoverageX =\n          getWidth(targetQuadExtent) / this.targetWorldWidth_;\n        needsSubdivision =\n          targetCoverageX > MAX_TRIANGLE_WIDTH || needsSubdivision;\n      }\n      if (!wrapsX && this.sourceProj_.isGlobal() && sourceCoverageX) {\n        needsSubdivision =\n          sourceCoverageX > MAX_TRIANGLE_WIDTH || needsSubdivision;\n      }\n    }\n\n    if (!needsSubdivision && this.maxSourceExtent_) {\n      if (\n        isFinite(sourceQuadExtent[0]) &&\n        isFinite(sourceQuadExtent[1]) &&\n        isFinite(sourceQuadExtent[2]) &&\n        isFinite(sourceQuadExtent[3])\n      ) {\n        if (!intersects(sourceQuadExtent, this.maxSourceExtent_)) {\n          // whole quad outside source projection extent -> ignore\n          return;\n        }\n      }\n    }\n\n    let isNotFinite = 0;\n\n    if (!needsSubdivision) {\n      if (\n        !isFinite(aSrc[0]) ||\n        !isFinite(aSrc[1]) ||\n        !isFinite(bSrc[0]) ||\n        !isFinite(bSrc[1]) ||\n        !isFinite(cSrc[0]) ||\n        !isFinite(cSrc[1]) ||\n        !isFinite(dSrc[0]) ||\n        !isFinite(dSrc[1])\n      ) {\n        if (maxSubdivision > 0) {\n          needsSubdivision = true;\n        } else {\n          // It might be the case that only 1 of the points is infinite. In this case\n          // we can draw a single triangle with the other three points\n          isNotFinite =\n            (!isFinite(aSrc[0]) || !isFinite(aSrc[1]) ? 8 : 0) +\n            (!isFinite(bSrc[0]) || !isFinite(bSrc[1]) ? 4 : 0) +\n            (!isFinite(cSrc[0]) || !isFinite(cSrc[1]) ? 2 : 0) +\n            (!isFinite(dSrc[0]) || !isFinite(dSrc[1]) ? 1 : 0);\n          if (\n            isNotFinite != 1 &&\n            isNotFinite != 2 &&\n            isNotFinite != 4 &&\n            isNotFinite != 8\n          ) {\n            return;\n          }\n        }\n      }\n    }\n\n    if (maxSubdivision > 0) {\n      if (!needsSubdivision) {\n        const center = [(a[0] + c[0]) / 2, (a[1] + c[1]) / 2];\n        const centerSrc = this.transformInv_(center);\n\n        let dx;\n        if (wrapsX) {\n          const centerSrcEstimX =\n            (modulo(aSrc[0], sourceWorldWidth) +\n              modulo(cSrc[0], sourceWorldWidth)) /\n            2;\n          dx = centerSrcEstimX - modulo(centerSrc[0], sourceWorldWidth);\n        } else {\n          dx = (aSrc[0] + cSrc[0]) / 2 - centerSrc[0];\n        }\n        const dy = (aSrc[1] + cSrc[1]) / 2 - centerSrc[1];\n        const centerSrcErrorSquared = dx * dx + dy * dy;\n        needsSubdivision = centerSrcErrorSquared > this.errorThresholdSquared_;\n      }\n      if (needsSubdivision) {\n        if (Math.abs(a[0] - c[0]) <= Math.abs(a[1] - c[1])) {\n          // split horizontally (top & bottom)\n          const bc = [(b[0] + c[0]) / 2, (b[1] + c[1]) / 2];\n          const bcSrc = this.transformInv_(bc);\n          const da = [(d[0] + a[0]) / 2, (d[1] + a[1]) / 2];\n          const daSrc = this.transformInv_(da);\n\n          this.addQuad_(\n            a,\n            b,\n            bc,\n            da,\n            aSrc,\n            bSrc,\n            bcSrc,\n            daSrc,\n            maxSubdivision - 1\n          );\n          this.addQuad_(\n            da,\n            bc,\n            c,\n            d,\n            daSrc,\n            bcSrc,\n            cSrc,\n            dSrc,\n            maxSubdivision - 1\n          );\n        } else {\n          // split vertically (left & right)\n          const ab = [(a[0] + b[0]) / 2, (a[1] + b[1]) / 2];\n          const abSrc = this.transformInv_(ab);\n          const cd = [(c[0] + d[0]) / 2, (c[1] + d[1]) / 2];\n          const cdSrc = this.transformInv_(cd);\n\n          this.addQuad_(\n            a,\n            ab,\n            cd,\n            d,\n            aSrc,\n            abSrc,\n            cdSrc,\n            dSrc,\n            maxSubdivision - 1\n          );\n          this.addQuad_(\n            ab,\n            b,\n            c,\n            cd,\n            abSrc,\n            bSrc,\n            cSrc,\n            cdSrc,\n            maxSubdivision - 1\n          );\n        }\n        return;\n      }\n    }\n\n    if (wrapsX) {\n      if (!this.canWrapXInSource_) {\n        return;\n      }\n      this.wrapsXInSource_ = true;\n    }\n\n    // Exactly zero or one of *Src is not finite\n    // The triangles must have the diagonal line as the first side\n    // This is to allow easy code in reproj.s to make it straight for broken\n    // browsers that can't handle diagonal clipping\n    if ((isNotFinite & 0xb) == 0) {\n      this.addTriangle_(a, c, d, aSrc, cSrc, dSrc);\n    }\n    if ((isNotFinite & 0xe) == 0) {\n      this.addTriangle_(a, c, b, aSrc, cSrc, bSrc);\n    }\n    if (isNotFinite) {\n      // Try the other two triangles\n      if ((isNotFinite & 0xd) == 0) {\n        this.addTriangle_(b, d, a, bSrc, dSrc, aSrc);\n      }\n      if ((isNotFinite & 0x7) == 0) {\n        this.addTriangle_(b, d, c, bSrc, dSrc, cSrc);\n      }\n    }\n  }\n\n  /**\n   * Calculates extent of the `source` coordinates from all the triangles.\n   *\n   * @return {import(\"../extent.js\").Extent} Calculated extent.\n   */\n  calculateSourceExtent() {\n    const extent = createEmpty();\n\n    this.triangles_.forEach(function (triangle, i, arr) {\n      const src = triangle.source;\n      extendCoordinate(extent, src[0]);\n      extendCoordinate(extent, src[1]);\n      extendCoordinate(extent, src[2]);\n    });\n\n    return extent;\n  }\n\n  /**\n   * @return {Array<Triangle>} Array of the calculated triangles.\n   */\n  getTriangles() {\n    return this.triangles_;\n  }\n}\n\nexport default Triangulation;\n","/**\n * @module ol/reproj\n */\nimport {\n  containsCoordinate,\n  createEmpty,\n  extend,\n  forEachCorner,\n  getCenter,\n  getHeight,\n  getTopLeft,\n  getWidth,\n} from './extent.js';\nimport {createCanvasContext2D} from './dom.js';\nimport {getPointResolution, transform} from './proj.js';\nimport {solveLinearSystem} from './math.js';\n\nlet brokenDiagonalRendering_;\n\n/**\n * @type {Array<HTMLCanvasElement>}\n */\nexport const canvasPool = [];\n\n/**\n * This draws a small triangle into a canvas by setting the triangle as the clip region\n * and then drawing a (too large) rectangle\n *\n * @param {CanvasRenderingContext2D} ctx The context in which to draw the triangle\n * @param {number} u1 The x-coordinate of the second point. The first point is 0,0.\n * @param {number} v1 The y-coordinate of the second point.\n * @param {number} u2 The x-coordinate of the third point.\n * @param {number} v2 The y-coordinate of the third point.\n */\nfunction drawTestTriangle(ctx, u1, v1, u2, v2) {\n  ctx.beginPath();\n  ctx.moveTo(0, 0);\n  ctx.lineTo(u1, v1);\n  ctx.lineTo(u2, v2);\n  ctx.closePath();\n  ctx.save();\n  ctx.clip();\n  ctx.fillRect(0, 0, Math.max(u1, u2) + 1, Math.max(v1, v2));\n  ctx.restore();\n}\n\n/**\n * Given the data from getImageData, see if the right values appear at the provided offset.\n * Returns true if either the color or transparency is off\n *\n * @param {Uint8ClampedArray} data The data returned from getImageData\n * @param {number} offset The pixel offset from the start of data.\n * @return {boolean} true if the diagonal rendering is broken\n */\nfunction verifyBrokenDiagonalRendering(data, offset) {\n  // the values ought to be close to the rgba(210, 0, 0, 0.75)\n  return (\n    Math.abs(data[offset * 4] - 210) > 2 ||\n    Math.abs(data[offset * 4 + 3] - 0.75 * 255) > 2\n  );\n}\n\n/**\n * Determines if the current browser configuration can render triangular clip regions correctly.\n * This value is cached so the function is only expensive the first time called.\n * Firefox on Windows (as of now) does not if HWA is enabled. See https://bugzilla.mozilla.org/show_bug.cgi?id=1606976\n * Chrome works, and everything seems to work on OSX and Android. This function caches the\n * result. I suppose that it is conceivably possible that a browser might flip modes while the app is\n * running, but lets hope not.\n *\n * @return {boolean} true if the Diagonal Rendering is broken.\n */\nfunction isBrokenDiagonalRendering() {\n  if (brokenDiagonalRendering_ === undefined) {\n    const ctx = document.createElement('canvas').getContext('2d');\n    ctx.globalCompositeOperation = 'lighter';\n    ctx.fillStyle = 'rgba(210, 0, 0, 0.75)';\n    drawTestTriangle(ctx, 4, 5, 4, 0);\n    drawTestTriangle(ctx, 4, 5, 0, 5);\n    const data = ctx.getImageData(0, 0, 3, 3).data;\n    brokenDiagonalRendering_ =\n      verifyBrokenDiagonalRendering(data, 0) ||\n      verifyBrokenDiagonalRendering(data, 4) ||\n      verifyBrokenDiagonalRendering(data, 8);\n  }\n\n  return brokenDiagonalRendering_;\n}\n\n/**\n * Calculates ideal resolution to use from the source in order to achieve\n * pixel mapping as close as possible to 1:1 during reprojection.\n * The resolution is calculated regardless of what resolutions\n * are actually available in the dataset (TileGrid, Image, ...).\n *\n * @param {import(\"./proj/Projection.js\").default} sourceProj Source projection.\n * @param {import(\"./proj/Projection.js\").default} targetProj Target projection.\n * @param {import(\"./coordinate.js\").Coordinate} targetCenter Target center.\n * @param {number} targetResolution Target resolution.\n * @return {number} The best resolution to use. Can be +-Infinity, NaN or 0.\n */\nexport function calculateSourceResolution(\n  sourceProj,\n  targetProj,\n  targetCenter,\n  targetResolution\n) {\n  const sourceCenter = transform(targetCenter, targetProj, sourceProj);\n\n  // calculate the ideal resolution of the source data\n  let sourceResolution = getPointResolution(\n    targetProj,\n    targetResolution,\n    targetCenter\n  );\n\n  const targetMetersPerUnit = targetProj.getMetersPerUnit();\n  if (targetMetersPerUnit !== undefined) {\n    sourceResolution *= targetMetersPerUnit;\n  }\n  const sourceMetersPerUnit = sourceProj.getMetersPerUnit();\n  if (sourceMetersPerUnit !== undefined) {\n    sourceResolution /= sourceMetersPerUnit;\n  }\n\n  // Based on the projection properties, the point resolution at the specified\n  // coordinates may be slightly different. We need to reverse-compensate this\n  // in order to achieve optimal results.\n\n  const sourceExtent = sourceProj.getExtent();\n  if (!sourceExtent || containsCoordinate(sourceExtent, sourceCenter)) {\n    const compensationFactor =\n      getPointResolution(sourceProj, sourceResolution, sourceCenter) /\n      sourceResolution;\n    if (isFinite(compensationFactor) && compensationFactor > 0) {\n      sourceResolution /= compensationFactor;\n    }\n  }\n\n  return sourceResolution;\n}\n\n/**\n * Calculates ideal resolution to use from the source in order to achieve\n * pixel mapping as close as possible to 1:1 during reprojection.\n * The resolution is calculated regardless of what resolutions\n * are actually available in the dataset (TileGrid, Image, ...).\n *\n * @param {import(\"./proj/Projection.js\").default} sourceProj Source projection.\n * @param {import(\"./proj/Projection.js\").default} targetProj Target projection.\n * @param {import(\"./extent.js\").Extent} targetExtent Target extent\n * @param {number} targetResolution Target resolution.\n * @return {number} The best resolution to use. Can be +-Infinity, NaN or 0.\n */\nexport function calculateSourceExtentResolution(\n  sourceProj,\n  targetProj,\n  targetExtent,\n  targetResolution\n) {\n  const targetCenter = getCenter(targetExtent);\n  let sourceResolution = calculateSourceResolution(\n    sourceProj,\n    targetProj,\n    targetCenter,\n    targetResolution\n  );\n\n  if (!isFinite(sourceResolution) || sourceResolution <= 0) {\n    forEachCorner(targetExtent, function (corner) {\n      sourceResolution = calculateSourceResolution(\n        sourceProj,\n        targetProj,\n        corner,\n        targetResolution\n      );\n      return isFinite(sourceResolution) && sourceResolution > 0;\n    });\n  }\n\n  return sourceResolution;\n}\n\n/**\n * @typedef {Object} ImageExtent\n * @property {import(\"./extent.js\").Extent} extent Extent.\n * @property {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n */\n\n/**\n * Renders the source data into new canvas based on the triangulation.\n *\n * @param {number} width Width of the canvas.\n * @param {number} height Height of the canvas.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} sourceResolution Source resolution.\n * @param {import(\"./extent.js\").Extent} sourceExtent Extent of the data source.\n * @param {number} targetResolution Target resolution.\n * @param {import(\"./extent.js\").Extent} targetExtent Target extent.\n * @param {import(\"./reproj/Triangulation.js\").default} triangulation Calculated triangulation.\n * @param {Array<ImageExtent>} sources Array of sources.\n * @param {number} gutter Gutter of the sources.\n * @param {boolean} [renderEdges] Render reprojection edges.\n * @param {boolean} [interpolate] Use linear interpolation when resampling.\n * @return {HTMLCanvasElement} Canvas with reprojected data.\n */\nexport function render(\n  width,\n  height,\n  pixelRatio,\n  sourceResolution,\n  sourceExtent,\n  targetResolution,\n  targetExtent,\n  triangulation,\n  sources,\n  gutter,\n  renderEdges,\n  interpolate\n) {\n  const context = createCanvasContext2D(\n    Math.round(pixelRatio * width),\n    Math.round(pixelRatio * height),\n    canvasPool\n  );\n\n  if (!interpolate) {\n    context.imageSmoothingEnabled = false;\n  }\n\n  if (sources.length === 0) {\n    return context.canvas;\n  }\n\n  context.scale(pixelRatio, pixelRatio);\n\n  function pixelRound(value) {\n    return Math.round(value * pixelRatio) / pixelRatio;\n  }\n\n  context.globalCompositeOperation = 'lighter';\n\n  const sourceDataExtent = createEmpty();\n  sources.forEach(function (src, i, arr) {\n    extend(sourceDataExtent, src.extent);\n  });\n\n  const canvasWidthInUnits = getWidth(sourceDataExtent);\n  const canvasHeightInUnits = getHeight(sourceDataExtent);\n  const stitchContext = createCanvasContext2D(\n    Math.round((pixelRatio * canvasWidthInUnits) / sourceResolution),\n    Math.round((pixelRatio * canvasHeightInUnits) / sourceResolution)\n  );\n\n  if (!interpolate) {\n    stitchContext.imageSmoothingEnabled = false;\n  }\n\n  const stitchScale = pixelRatio / sourceResolution;\n\n  sources.forEach(function (src, i, arr) {\n    const xPos = src.extent[0] - sourceDataExtent[0];\n    const yPos = -(src.extent[3] - sourceDataExtent[3]);\n    const srcWidth = getWidth(src.extent);\n    const srcHeight = getHeight(src.extent);\n\n    // This test should never fail -- but it does. Need to find a fix the upstream condition\n    if (src.image.width > 0 && src.image.height > 0) {\n      stitchContext.drawImage(\n        src.image,\n        gutter,\n        gutter,\n        src.image.width - 2 * gutter,\n        src.image.height - 2 * gutter,\n        xPos * stitchScale,\n        yPos * stitchScale,\n        srcWidth * stitchScale,\n        srcHeight * stitchScale\n      );\n    }\n  });\n\n  const targetTopLeft = getTopLeft(targetExtent);\n\n  triangulation.getTriangles().forEach(function (triangle, i, arr) {\n    /* Calculate affine transform (src -> dst)\n     * Resulting matrix can be used to transform coordinate\n     * from `sourceProjection` to destination pixels.\n     *\n     * To optimize number of context calls and increase numerical stability,\n     * we also do the following operations:\n     * trans(-topLeftExtentCorner), scale(1 / targetResolution), scale(1, -1)\n     * here before solving the linear system so [ui, vi] are pixel coordinates.\n     *\n     * Src points: xi, yi\n     * Dst points: ui, vi\n     * Affine coefficients: aij\n     *\n     * | x0 y0 1  0  0 0 |   |a00|   |u0|\n     * | x1 y1 1  0  0 0 |   |a01|   |u1|\n     * | x2 y2 1  0  0 0 | x |a02| = |u2|\n     * |  0  0 0 x0 y0 1 |   |a10|   |v0|\n     * |  0  0 0 x1 y1 1 |   |a11|   |v1|\n     * |  0  0 0 x2 y2 1 |   |a12|   |v2|\n     */\n    const source = triangle.source;\n    const target = triangle.target;\n    let x0 = source[0][0],\n      y0 = source[0][1];\n    let x1 = source[1][0],\n      y1 = source[1][1];\n    let x2 = source[2][0],\n      y2 = source[2][1];\n    // Make sure that everything is on pixel boundaries\n    const u0 = pixelRound((target[0][0] - targetTopLeft[0]) / targetResolution);\n    const v0 = pixelRound(\n      -(target[0][1] - targetTopLeft[1]) / targetResolution\n    );\n    const u1 = pixelRound((target[1][0] - targetTopLeft[0]) / targetResolution);\n    const v1 = pixelRound(\n      -(target[1][1] - targetTopLeft[1]) / targetResolution\n    );\n    const u2 = pixelRound((target[2][0] - targetTopLeft[0]) / targetResolution);\n    const v2 = pixelRound(\n      -(target[2][1] - targetTopLeft[1]) / targetResolution\n    );\n\n    // Shift all the source points to improve numerical stability\n    // of all the subsequent calculations. The [x0, y0] is used here.\n    // This is also used to simplify the linear system.\n    const sourceNumericalShiftX = x0;\n    const sourceNumericalShiftY = y0;\n    x0 = 0;\n    y0 = 0;\n    x1 -= sourceNumericalShiftX;\n    y1 -= sourceNumericalShiftY;\n    x2 -= sourceNumericalShiftX;\n    y2 -= sourceNumericalShiftY;\n\n    const augmentedMatrix = [\n      [x1, y1, 0, 0, u1 - u0],\n      [x2, y2, 0, 0, u2 - u0],\n      [0, 0, x1, y1, v1 - v0],\n      [0, 0, x2, y2, v2 - v0],\n    ];\n    const affineCoefs = solveLinearSystem(augmentedMatrix);\n    if (!affineCoefs) {\n      return;\n    }\n\n    context.save();\n    context.beginPath();\n\n    if (isBrokenDiagonalRendering() || !interpolate) {\n      // Make sure that all lines are horizontal or vertical\n      context.moveTo(u1, v1);\n      // This is the diagonal line. Do it in 4 steps\n      const steps = 4;\n      const ud = u0 - u1;\n      const vd = v0 - v1;\n      for (let step = 0; step < steps; step++) {\n        // Go horizontally\n        context.lineTo(\n          u1 + pixelRound(((step + 1) * ud) / steps),\n          v1 + pixelRound((step * vd) / (steps - 1))\n        );\n        // Go vertically\n        if (step != steps - 1) {\n          context.lineTo(\n            u1 + pixelRound(((step + 1) * ud) / steps),\n            v1 + pixelRound(((step + 1) * vd) / (steps - 1))\n          );\n        }\n      }\n      // We are almost at u0r, v0r\n      context.lineTo(u2, v2);\n    } else {\n      context.moveTo(u1, v1);\n      context.lineTo(u0, v0);\n      context.lineTo(u2, v2);\n    }\n\n    context.clip();\n\n    context.transform(\n      affineCoefs[0],\n      affineCoefs[2],\n      affineCoefs[1],\n      affineCoefs[3],\n      u0,\n      v0\n    );\n\n    context.translate(\n      sourceDataExtent[0] - sourceNumericalShiftX,\n      sourceDataExtent[3] - sourceNumericalShiftY\n    );\n\n    context.scale(\n      sourceResolution / pixelRatio,\n      -sourceResolution / pixelRatio\n    );\n\n    context.drawImage(stitchContext.canvas, 0, 0);\n    context.restore();\n  });\n\n  if (renderEdges) {\n    context.save();\n\n    context.globalCompositeOperation = 'source-over';\n    context.strokeStyle = 'black';\n    context.lineWidth = 1;\n\n    triangulation.getTriangles().forEach(function (triangle, i, arr) {\n      const target = triangle.target;\n      const u0 = (target[0][0] - targetTopLeft[0]) / targetResolution;\n      const v0 = -(target[0][1] - targetTopLeft[1]) / targetResolution;\n      const u1 = (target[1][0] - targetTopLeft[0]) / targetResolution;\n      const v1 = -(target[1][1] - targetTopLeft[1]) / targetResolution;\n      const u2 = (target[2][0] - targetTopLeft[0]) / targetResolution;\n      const v2 = -(target[2][1] - targetTopLeft[1]) / targetResolution;\n\n      context.beginPath();\n      context.moveTo(u1, v1);\n      context.lineTo(u0, v0);\n      context.lineTo(u2, v2);\n      context.closePath();\n      context.stroke();\n    });\n\n    context.restore();\n  }\n  return context.canvas;\n}\n","/**\n * @module ol/reproj/Tile\n */\nimport {ERROR_THRESHOLD} from './common.js';\n\nimport EventType from '../events/EventType.js';\nimport Tile from '../Tile.js';\nimport TileState from '../TileState.js';\nimport Triangulation from './Triangulation.js';\nimport {\n  calculateSourceExtentResolution,\n  canvasPool,\n  render as renderReprojected,\n} from '../reproj.js';\nimport {clamp} from '../math.js';\nimport {getArea, getIntersection} from '../extent.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport {releaseCanvas} from '../dom.js';\n\n/**\n * @typedef {function(number, number, number, number) : import(\"../Tile.js\").default} FunctionType\n */\n\n/**\n * @classdesc\n * Class encapsulating single reprojected tile.\n * See {@link module:ol/source/TileImage~TileImage}.\n *\n */\nclass ReprojTile extends Tile {\n  /**\n   * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection.\n   * @param {import(\"../tilegrid/TileGrid.js\").default} sourceTileGrid Source tile grid.\n   * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n   * @param {import(\"../tilegrid/TileGrid.js\").default} targetTileGrid Target tile grid.\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Coordinate of the tile.\n   * @param {import(\"../tilecoord.js\").TileCoord} wrappedTileCoord Coordinate of the tile wrapped in X.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {number} gutter Gutter of the source tiles.\n   * @param {FunctionType} getTileFunction\n   *     Function returning source tiles (z, x, y, pixelRatio).\n   * @param {number} [errorThreshold] Acceptable reprojection error (in px).\n   * @param {boolean} [renderEdges] Render reprojection edges.\n   * @param {boolean} [interpolate] Use linear interpolation when resampling.\n   */\n  constructor(\n    sourceProj,\n    sourceTileGrid,\n    targetProj,\n    targetTileGrid,\n    tileCoord,\n    wrappedTileCoord,\n    pixelRatio,\n    gutter,\n    getTileFunction,\n    errorThreshold,\n    renderEdges,\n    interpolate\n  ) {\n    super(tileCoord, TileState.IDLE, {interpolate: !!interpolate});\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderEdges_ = renderEdges !== undefined ? renderEdges : false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.gutter_ = gutter;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../tilegrid/TileGrid.js\").default}\n     */\n    this.sourceTileGrid_ = sourceTileGrid;\n\n    /**\n     * @private\n     * @type {import(\"../tilegrid/TileGrid.js\").default}\n     */\n    this.targetTileGrid_ = targetTileGrid;\n\n    /**\n     * @private\n     * @type {import(\"../tilecoord.js\").TileCoord}\n     */\n    this.wrappedTileCoord_ = wrappedTileCoord ? wrappedTileCoord : tileCoord;\n\n    /**\n     * @private\n     * @type {!Array<import(\"../Tile.js\").default>}\n     */\n    this.sourceTiles_ = [];\n\n    /**\n     * @private\n     * @type {?Array<import(\"../events.js\").EventsKey>}\n     */\n    this.sourcesListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.sourceZ_ = 0;\n\n    const targetExtent = targetTileGrid.getTileCoordExtent(\n      this.wrappedTileCoord_\n    );\n    const maxTargetExtent = this.targetTileGrid_.getExtent();\n    let maxSourceExtent = this.sourceTileGrid_.getExtent();\n\n    const limitedTargetExtent = maxTargetExtent\n      ? getIntersection(targetExtent, maxTargetExtent)\n      : targetExtent;\n\n    if (getArea(limitedTargetExtent) === 0) {\n      // Tile is completely outside range -> EMPTY\n      // TODO: is it actually correct that the source even creates the tile ?\n      this.state = TileState.EMPTY;\n      return;\n    }\n\n    const sourceProjExtent = sourceProj.getExtent();\n    if (sourceProjExtent) {\n      if (!maxSourceExtent) {\n        maxSourceExtent = sourceProjExtent;\n      } else {\n        maxSourceExtent = getIntersection(maxSourceExtent, sourceProjExtent);\n      }\n    }\n\n    const targetResolution = targetTileGrid.getResolution(\n      this.wrappedTileCoord_[0]\n    );\n\n    const sourceResolution = calculateSourceExtentResolution(\n      sourceProj,\n      targetProj,\n      limitedTargetExtent,\n      targetResolution\n    );\n\n    if (!isFinite(sourceResolution) || sourceResolution <= 0) {\n      // invalid sourceResolution -> EMPTY\n      // probably edges of the projections when no extent is defined\n      this.state = TileState.EMPTY;\n      return;\n    }\n\n    const errorThresholdInPixels =\n      errorThreshold !== undefined ? errorThreshold : ERROR_THRESHOLD;\n\n    /**\n     * @private\n     * @type {!import(\"./Triangulation.js\").default}\n     */\n    this.triangulation_ = new Triangulation(\n      sourceProj,\n      targetProj,\n      limitedTargetExtent,\n      maxSourceExtent,\n      sourceResolution * errorThresholdInPixels,\n      targetResolution\n    );\n\n    if (this.triangulation_.getTriangles().length === 0) {\n      // no valid triangles -> EMPTY\n      this.state = TileState.EMPTY;\n      return;\n    }\n\n    this.sourceZ_ = sourceTileGrid.getZForResolution(sourceResolution);\n    let sourceExtent = this.triangulation_.calculateSourceExtent();\n\n    if (maxSourceExtent) {\n      if (sourceProj.canWrapX()) {\n        sourceExtent[1] = clamp(\n          sourceExtent[1],\n          maxSourceExtent[1],\n          maxSourceExtent[3]\n        );\n        sourceExtent[3] = clamp(\n          sourceExtent[3],\n          maxSourceExtent[1],\n          maxSourceExtent[3]\n        );\n      } else {\n        sourceExtent = getIntersection(sourceExtent, maxSourceExtent);\n      }\n    }\n\n    if (!getArea(sourceExtent)) {\n      this.state = TileState.EMPTY;\n    } else {\n      const sourceRange = sourceTileGrid.getTileRangeForExtentAndZ(\n        sourceExtent,\n        this.sourceZ_\n      );\n\n      for (let srcX = sourceRange.minX; srcX <= sourceRange.maxX; srcX++) {\n        for (let srcY = sourceRange.minY; srcY <= sourceRange.maxY; srcY++) {\n          const tile = getTileFunction(this.sourceZ_, srcX, srcY, pixelRatio);\n          if (tile) {\n            this.sourceTiles_.push(tile);\n          }\n        }\n      }\n\n      if (this.sourceTiles_.length === 0) {\n        this.state = TileState.EMPTY;\n      }\n    }\n  }\n\n  /**\n   * Get the HTML Canvas element for this tile.\n   * @return {HTMLCanvasElement} Canvas.\n   */\n  getImage() {\n    return this.canvas_;\n  }\n\n  /**\n   * @private\n   */\n  reproject_() {\n    const sources = [];\n    this.sourceTiles_.forEach(\n      function (tile, i, arr) {\n        if (tile && tile.getState() == TileState.LOADED) {\n          sources.push({\n            extent: this.sourceTileGrid_.getTileCoordExtent(tile.tileCoord),\n            image: tile.getImage(),\n          });\n        }\n      }.bind(this)\n    );\n    this.sourceTiles_.length = 0;\n\n    if (sources.length === 0) {\n      this.state = TileState.ERROR;\n    } else {\n      const z = this.wrappedTileCoord_[0];\n      const size = this.targetTileGrid_.getTileSize(z);\n      const width = typeof size === 'number' ? size : size[0];\n      const height = typeof size === 'number' ? size : size[1];\n      const targetResolution = this.targetTileGrid_.getResolution(z);\n      const sourceResolution = this.sourceTileGrid_.getResolution(\n        this.sourceZ_\n      );\n\n      const targetExtent = this.targetTileGrid_.getTileCoordExtent(\n        this.wrappedTileCoord_\n      );\n\n      this.canvas_ = renderReprojected(\n        width,\n        height,\n        this.pixelRatio_,\n        sourceResolution,\n        this.sourceTileGrid_.getExtent(),\n        targetResolution,\n        targetExtent,\n        this.triangulation_,\n        sources,\n        this.gutter_,\n        this.renderEdges_,\n        this.interpolate\n      );\n\n      this.state = TileState.LOADED;\n    }\n    this.changed();\n  }\n\n  /**\n   * Load not yet loaded URI.\n   */\n  load() {\n    if (this.state == TileState.IDLE) {\n      this.state = TileState.LOADING;\n      this.changed();\n\n      let leftToLoad = 0;\n\n      this.sourcesListenerKeys_ = [];\n      this.sourceTiles_.forEach(\n        function (tile, i, arr) {\n          const state = tile.getState();\n          if (state == TileState.IDLE || state == TileState.LOADING) {\n            leftToLoad++;\n\n            const sourceListenKey = listen(\n              tile,\n              EventType.CHANGE,\n              function (e) {\n                const state = tile.getState();\n                if (\n                  state == TileState.LOADED ||\n                  state == TileState.ERROR ||\n                  state == TileState.EMPTY\n                ) {\n                  unlistenByKey(sourceListenKey);\n                  leftToLoad--;\n                  if (leftToLoad === 0) {\n                    this.unlistenSources_();\n                    this.reproject_();\n                  }\n                }\n              },\n              this\n            );\n            this.sourcesListenerKeys_.push(sourceListenKey);\n          }\n        }.bind(this)\n      );\n\n      if (leftToLoad === 0) {\n        setTimeout(this.reproject_.bind(this), 0);\n      } else {\n        this.sourceTiles_.forEach(function (tile, i, arr) {\n          const state = tile.getState();\n          if (state == TileState.IDLE) {\n            tile.load();\n          }\n        });\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  unlistenSources_() {\n    this.sourcesListenerKeys_.forEach(unlistenByKey);\n    this.sourcesListenerKeys_ = null;\n  }\n\n  /**\n   * Remove from the cache due to expiry\n   */\n  release() {\n    if (this.canvas_) {\n      releaseCanvas(this.canvas_.getContext('2d'));\n      canvasPool.push(this.canvas_);\n      this.canvas_ = null;\n    }\n    super.release();\n  }\n}\n\nexport default ReprojTile;\n","/**\n * @module ol/reproj/common\n */\n\n/**\n * Default maximum allowed threshold  (in pixels) for reprojection\n * triangulation.\n * @type {number}\n */\nexport const ERROR_THRESHOLD = 0.5;\n","/**\n * @module ol/structs/LRUCache\n */\n\nimport {assert} from '../asserts.js';\n\n/**\n * @typedef {Object} Entry\n * @property {string} key_ Key.\n * @property {Object} newer Newer.\n * @property {Object} older Older.\n * @property {*} value_ Value.\n */\n\n/**\n * @classdesc\n * Implements a Least-Recently-Used cache where the keys do not conflict with\n * Object's properties (e.g. 'hasOwnProperty' is not allowed as a key). Expiring\n * items from the cache is the responsibility of the user.\n *\n * @fires import(\"../events/Event.js\").default\n * @template T\n */\nclass LRUCache {\n  /**\n   * @param {number} [highWaterMark] High water mark.\n   */\n  constructor(highWaterMark) {\n    /**\n     * Desired max cache size after expireCache(). If set to 0, no cache entries\n     * will be pruned at all.\n     * @type {number}\n     */\n    this.highWaterMark = highWaterMark !== undefined ? highWaterMark : 2048;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.count_ = 0;\n\n    /**\n     * @private\n     * @type {!Object<string, Entry>}\n     */\n    this.entries_ = {};\n\n    /**\n     * @private\n     * @type {?Entry}\n     */\n    this.oldest_ = null;\n\n    /**\n     * @private\n     * @type {?Entry}\n     */\n    this.newest_ = null;\n  }\n\n  /**\n   * @return {boolean} Can expire cache.\n   */\n  canExpireCache() {\n    return this.highWaterMark > 0 && this.getCount() > this.highWaterMark;\n  }\n\n  /**\n   * Expire the cache.\n   * @param {!Object<string, boolean>} [keep] Keys to keep. To be implemented by subclasses.\n   */\n  expireCache(keep) {\n    while (this.canExpireCache()) {\n      this.pop();\n    }\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  clear() {\n    this.count_ = 0;\n    this.entries_ = {};\n    this.oldest_ = null;\n    this.newest_ = null;\n  }\n\n  /**\n   * @param {string} key Key.\n   * @return {boolean} Contains key.\n   */\n  containsKey(key) {\n    return this.entries_.hasOwnProperty(key);\n  }\n\n  /**\n   * @param {function(T, string, LRUCache<T>): ?} f The function\n   *     to call for every entry from the oldest to the newer. This function takes\n   *     3 arguments (the entry value, the entry key and the LRUCache object).\n   *     The return value is ignored.\n   */\n  forEach(f) {\n    let entry = this.oldest_;\n    while (entry) {\n      f(entry.value_, entry.key_, this);\n      entry = entry.newer;\n    }\n  }\n\n  /**\n   * @param {string} key Key.\n   * @param {*} [options] Options (reserved for subclasses).\n   * @return {T} Value.\n   */\n  get(key, options) {\n    const entry = this.entries_[key];\n    assert(entry !== undefined, 15); // Tried to get a value for a key that does not exist in the cache\n    if (entry === this.newest_) {\n      return entry.value_;\n    } else if (entry === this.oldest_) {\n      this.oldest_ = /** @type {Entry} */ (this.oldest_.newer);\n      this.oldest_.older = null;\n    } else {\n      entry.newer.older = entry.older;\n      entry.older.newer = entry.newer;\n    }\n    entry.newer = null;\n    entry.older = this.newest_;\n    this.newest_.newer = entry;\n    this.newest_ = entry;\n    return entry.value_;\n  }\n\n  /**\n   * Remove an entry from the cache.\n   * @param {string} key The entry key.\n   * @return {T} The removed entry.\n   */\n  remove(key) {\n    const entry = this.entries_[key];\n    assert(entry !== undefined, 15); // Tried to get a value for a key that does not exist in the cache\n    if (entry === this.newest_) {\n      this.newest_ = /** @type {Entry} */ (entry.older);\n      if (this.newest_) {\n        this.newest_.newer = null;\n      }\n    } else if (entry === this.oldest_) {\n      this.oldest_ = /** @type {Entry} */ (entry.newer);\n      if (this.oldest_) {\n        this.oldest_.older = null;\n      }\n    } else {\n      entry.newer.older = entry.older;\n      entry.older.newer = entry.newer;\n    }\n    delete this.entries_[key];\n    --this.count_;\n    return entry.value_;\n  }\n\n  /**\n   * @return {number} Count.\n   */\n  getCount() {\n    return this.count_;\n  }\n\n  /**\n   * @return {Array<string>} Keys.\n   */\n  getKeys() {\n    const keys = new Array(this.count_);\n    let i = 0;\n    let entry;\n    for (entry = this.newest_; entry; entry = entry.older) {\n      keys[i++] = entry.key_;\n    }\n    return keys;\n  }\n\n  /**\n   * @return {Array<T>} Values.\n   */\n  getValues() {\n    const values = new Array(this.count_);\n    let i = 0;\n    let entry;\n    for (entry = this.newest_; entry; entry = entry.older) {\n      values[i++] = entry.value_;\n    }\n    return values;\n  }\n\n  /**\n   * @return {T} Last value.\n   */\n  peekLast() {\n    return this.oldest_.value_;\n  }\n\n  /**\n   * @return {string} Last key.\n   */\n  peekLastKey() {\n    return this.oldest_.key_;\n  }\n\n  /**\n   * Get the key of the newest item in the cache.  Throws if the cache is empty.\n   * @return {string} The newest key.\n   */\n  peekFirstKey() {\n    return this.newest_.key_;\n  }\n\n  /**\n   * Return an entry without updating least recently used time.\n   * @param {string} key Key.\n   * @return {T} Value.\n   */\n  peek(key) {\n    if (!this.containsKey(key)) {\n      return undefined;\n    }\n    return this.entries_[key].value_;\n  }\n\n  /**\n   * @return {T} value Value.\n   */\n  pop() {\n    const entry = this.oldest_;\n    delete this.entries_[entry.key_];\n    if (entry.newer) {\n      entry.newer.older = null;\n    }\n    this.oldest_ = /** @type {Entry} */ (entry.newer);\n    if (!this.oldest_) {\n      this.newest_ = null;\n    }\n    --this.count_;\n    return entry.value_;\n  }\n\n  /**\n   * @param {string} key Key.\n   * @param {T} value Value.\n   */\n  replace(key, value) {\n    this.get(key); // update `newest_`\n    this.entries_[key].value_ = value;\n  }\n\n  /**\n   * @param {string} key Key.\n   * @param {T} value Value.\n   */\n  set(key, value) {\n    assert(!(key in this.entries_), 16); // Tried to set a value for a key that is used already\n    const entry = {\n      key_: key,\n      newer: null,\n      older: this.newest_,\n      value_: value,\n    };\n    if (!this.newest_) {\n      this.oldest_ = entry;\n    } else {\n      this.newest_.newer = entry;\n    }\n    this.newest_ = entry;\n    this.entries_[key] = entry;\n    ++this.count_;\n  }\n\n  /**\n   * Set a maximum number of entries for the cache.\n   * @param {number} size Cache size.\n   * @api\n   */\n  setSize(size) {\n    this.highWaterMark = size;\n  }\n}\n\nexport default LRUCache;\n","/**\n * @module ol/tilecoord\n */\n\n/**\n * An array of three numbers representing the location of a tile in a tile\n * grid. The order is `z` (zoom level), `x` (column), and `y` (row).\n * @typedef {Array<number>} TileCoord\n * @api\n */\n\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {TileCoord} [tileCoord] Tile coordinate.\n * @return {TileCoord} Tile coordinate.\n */\nexport function createOrUpdate(z, x, y, tileCoord) {\n  if (tileCoord !== undefined) {\n    tileCoord[0] = z;\n    tileCoord[1] = x;\n    tileCoord[2] = y;\n    return tileCoord;\n  } else {\n    return [z, x, y];\n  }\n}\n\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {string} Key.\n */\nexport function getKeyZXY(z, x, y) {\n  return z + '/' + x + '/' + y;\n}\n\n/**\n * Get the key for a tile coord.\n * @param {TileCoord} tileCoord The tile coord.\n * @return {string} Key.\n */\nexport function getKey(tileCoord) {\n  return getKeyZXY(tileCoord[0], tileCoord[1], tileCoord[2]);\n}\n\n/**\n * Get the tile cache key for a tile key obtained through `tile.getKey()`.\n * @param {string} tileKey The tile key.\n * @return {string} The cache key.\n */\nexport function getCacheKeyForTileKey(tileKey) {\n  const [z, x, y] = tileKey\n    .substring(tileKey.lastIndexOf('/') + 1, tileKey.length)\n    .split(',')\n    .map(Number);\n  return getKeyZXY(z, x, y);\n}\n\n/**\n * Get a tile coord given a key.\n * @param {string} key The tile coord key.\n * @return {TileCoord} The tile coord.\n */\nexport function fromKey(key) {\n  return key.split('/').map(Number);\n}\n\n/**\n * @param {TileCoord} tileCoord Tile coord.\n * @return {number} Hash.\n */\nexport function hash(tileCoord) {\n  return (tileCoord[1] << tileCoord[0]) + tileCoord[2];\n}\n\n/**\n * @param {TileCoord} tileCoord Tile coordinate.\n * @param {!import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {boolean} Tile coordinate is within extent and zoom level range.\n */\nexport function withinExtentAndZ(tileCoord, tileGrid) {\n  const z = tileCoord[0];\n  const x = tileCoord[1];\n  const y = tileCoord[2];\n\n  if (tileGrid.getMinZoom() > z || z > tileGrid.getMaxZoom()) {\n    return false;\n  }\n  const tileRange = tileGrid.getFullTileRange(z);\n  if (!tileRange) {\n    return true;\n  } else {\n    return tileRange.containsXY(x, y);\n  }\n}\n","/**\n * @module ol/TileCache\n */\nimport LRUCache from './structs/LRUCache.js';\nimport {fromKey, getKey} from './tilecoord.js';\n\nclass TileCache extends LRUCache {\n  clear() {\n    while (this.getCount() > 0) {\n      this.pop().release();\n    }\n    super.clear();\n  }\n\n  /**\n   * @param {!Object<string, boolean>} usedTiles Used tiles.\n   */\n  expireCache(usedTiles) {\n    while (this.canExpireCache()) {\n      const tile = this.peekLast();\n      if (tile.getKey() in usedTiles) {\n        break;\n      } else {\n        this.pop().release();\n      }\n    }\n  }\n\n  /**\n   * Prune all tiles from the cache that don't have the same z as the newest tile.\n   */\n  pruneExceptNewestZ() {\n    if (this.getCount() === 0) {\n      return;\n    }\n    const key = this.peekFirstKey();\n    const tileCoord = fromKey(key);\n    const z = tileCoord[0];\n    this.forEach(\n      function (tile) {\n        if (tile.tileCoord[0] !== z) {\n          this.remove(getKey(tile.tileCoord));\n          tile.release();\n        }\n      }.bind(this)\n    );\n  }\n}\n\nexport default TileCache;\n","/**\n * @module ol/source/TileEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a tile starts loading.\n   * @event module:ol/source/Tile.TileSourceEvent#tileloadstart\n   * @api\n   */\n  TILELOADSTART: 'tileloadstart',\n\n  /**\n   * Triggered when a tile finishes loading, either when its data is loaded,\n   * or when loading was aborted because the tile is no longer needed.\n   * @event module:ol/source/Tile.TileSourceEvent#tileloadend\n   * @api\n   */\n  TILELOADEND: 'tileloadend',\n\n  /**\n   * Triggered if tile loading results in an error. Note that this is not the\n   * right place to re-fetch tiles. See {@link module:ol/ImageTile~ImageTile#load}\n   * for details.\n   * @event module:ol/source/Tile.TileSourceEvent#tileloaderror\n   * @api\n   */\n  TILELOADERROR: 'tileloaderror',\n};\n\n/**\n * @typedef {'tileloadstart'|'tileloadend'|'tileloaderror'} TileSourceEventTypes\n */\n","/**\n * @module ol/source/Tile\n */\nimport Event from '../events/Event.js';\nimport Source from './Source.js';\nimport TileCache from '../TileCache.js';\nimport TileState from '../TileState.js';\nimport {abstract} from '../util.js';\nimport {assert} from '../asserts.js';\nimport {equivalent} from '../proj.js';\nimport {getKeyZXY, withinExtentAndZ} from '../tilecoord.js';\nimport {\n  getForProjection as getTileGridForProjection,\n  wrapX,\n} from '../tilegrid.js';\nimport {scale as scaleSize, toSize} from '../size.js';\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types, import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./TileEventType\").TileSourceEventTypes, TileSourceEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     import(\"./TileEventType\").TileSourceEventTypes, Return>} TileSourceOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize] CacheSize.\n * @property {boolean} [opaque=false] Whether the layer is opaque.\n * @property {number} [tilePixelRatio] TilePixelRatio.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection.\n * @property {import(\"./Source.js\").State} [state] State.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] TileGrid.\n * @property {boolean} [wrapX=false] WrapX.\n * @property {number} [transition] Transition.\n * @property {string} [key] Key.\n * @property {number|import(\"../array.js\").NearestDirectionFunction} [zDirection=0] ZDirection.\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\n * the nearest neighbor is used when resampling.\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for sources providing images divided into a tile grid.\n * @abstract\n * @api\n */\nclass TileSource extends Source {\n  /**\n   * @param {Options} options SourceTile source options.\n   */\n  constructor(options) {\n    super({\n      attributions: options.attributions,\n      attributionsCollapsible: options.attributionsCollapsible,\n      projection: options.projection,\n      state: options.state,\n      wrapX: options.wrapX,\n      interpolate: options.interpolate,\n    });\n\n    /***\n     * @type {TileSourceOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {TileSourceOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {TileSourceOnSignature<void>}\n     */\n    this.un;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.opaque_ = options.opaque !== undefined ? options.opaque : false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tilePixelRatio_ =\n      options.tilePixelRatio !== undefined ? options.tilePixelRatio : 1;\n\n    /**\n     * @type {import(\"../tilegrid/TileGrid.js\").default|null}\n     */\n    this.tileGrid = options.tileGrid !== undefined ? options.tileGrid : null;\n\n    const tileSize = [256, 256];\n    if (this.tileGrid) {\n      toSize(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()), tileSize);\n    }\n\n    /**\n     * @protected\n     * @type {import(\"../TileCache.js\").default}\n     */\n    this.tileCache = new TileCache(options.cacheSize || 0);\n\n    /**\n     * @protected\n     * @type {import(\"../size.js\").Size}\n     */\n    this.tmpSize = [0, 0];\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.key_ = options.key || '';\n\n    /**\n     * @protected\n     * @type {import(\"../Tile.js\").Options}\n     */\n    this.tileOptions = {\n      transition: options.transition,\n      interpolate: options.interpolate,\n    };\n\n    /**\n     * zDirection hint, read by the renderer. Indicates which resolution should be used\n     * by a renderer if the views resolution does not match any resolution of the tile source.\n     * If 0, the nearest resolution will be used. If 1, the nearest lower resolution\n     * will be used. If -1, the nearest higher resolution will be used.\n     * @type {number|import(\"../array.js\").NearestDirectionFunction}\n     */\n    this.zDirection = options.zDirection ? options.zDirection : 0;\n  }\n\n  /**\n   * @return {boolean} Can expire cache.\n   */\n  canExpireCache() {\n    return this.tileCache.canExpireCache();\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {!Object<string, boolean>} usedTiles Used tiles.\n   */\n  expireCache(projection, usedTiles) {\n    const tileCache = this.getTileCacheForProjection(projection);\n    if (tileCache) {\n      tileCache.expireCache(usedTiles);\n    }\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {number} z Zoom level.\n   * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n   * @param {function(import(\"../Tile.js\").default):(boolean|void)} callback Called with each\n   *     loaded tile.  If the callback returns `false`, the tile will not be\n   *     considered loaded.\n   * @return {boolean} The tile range is fully covered with loaded tiles.\n   */\n  forEachLoadedTile(projection, z, tileRange, callback) {\n    const tileCache = this.getTileCacheForProjection(projection);\n    if (!tileCache) {\n      return false;\n    }\n\n    let covered = true;\n    let tile, tileCoordKey, loaded;\n    for (let x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (let y = tileRange.minY; y <= tileRange.maxY; ++y) {\n        tileCoordKey = getKeyZXY(z, x, y);\n        loaded = false;\n        if (tileCache.containsKey(tileCoordKey)) {\n          tile = /** @type {!import(\"../Tile.js\").default} */ (\n            tileCache.get(tileCoordKey)\n          );\n          loaded = tile.getState() === TileState.LOADED;\n          if (loaded) {\n            loaded = callback(tile) !== false;\n          }\n        }\n        if (!loaded) {\n          covered = false;\n        }\n      }\n    }\n    return covered;\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {number} Gutter.\n   */\n  getGutterForProjection(projection) {\n    return 0;\n  }\n\n  /**\n   * Return the key to be used for all tiles in the source.\n   * @return {string} The key for all tiles.\n   */\n  getKey() {\n    return this.key_;\n  }\n\n  /**\n   * Set the value to be used as the key for all tiles in the source.\n   * @param {string} key The key for tiles.\n   * @protected\n   */\n  setKey(key) {\n    if (this.key_ !== key) {\n      this.key_ = key;\n      this.changed();\n    }\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {boolean} Opaque.\n   */\n  getOpaque(projection) {\n    return this.opaque_;\n  }\n\n  /**\n   * @return {Array<number>|null} Resolutions.\n   */\n  getResolutions() {\n    if (!this.tileGrid) {\n      return null;\n    }\n    return this.tileGrid.getResolutions();\n  }\n\n  /**\n   * @abstract\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {!import(\"../Tile.js\").default} Tile.\n   */\n  getTile(z, x, y, pixelRatio, projection) {\n    return abstract();\n  }\n\n  /**\n   * Return the tile grid of the tile source.\n   * @return {import(\"../tilegrid/TileGrid.js\").default|null} Tile grid.\n   * @api\n   */\n  getTileGrid() {\n    return this.tileGrid;\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {!import(\"../tilegrid/TileGrid.js\").default} Tile grid.\n   */\n  getTileGridForProjection(projection) {\n    if (!this.tileGrid) {\n      return getTileGridForProjection(projection);\n    } else {\n      return this.tileGrid;\n    }\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../TileCache.js\").default} Tile cache.\n   * @protected\n   */\n  getTileCacheForProjection(projection) {\n    const sourceProjection = this.getProjection();\n    assert(\n      sourceProjection === null || equivalent(sourceProjection, projection),\n      68 // A VectorTile source can only be rendered if it has a projection compatible with the view projection.\n    );\n    return this.tileCache;\n  }\n\n  /**\n   * Get the tile pixel ratio for this source. Subclasses may override this\n   * method, which is meant to return a supported pixel ratio that matches the\n   * provided `pixelRatio` as close as possible.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Tile pixel ratio.\n   */\n  getTilePixelRatio(pixelRatio) {\n    return this.tilePixelRatio_;\n  }\n\n  /**\n   * @param {number} z Z.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../size.js\").Size} Tile size.\n   */\n  getTilePixelSize(z, pixelRatio, projection) {\n    const tileGrid = this.getTileGridForProjection(projection);\n    const tilePixelRatio = this.getTilePixelRatio(pixelRatio);\n    const tileSize = toSize(tileGrid.getTileSize(z), this.tmpSize);\n    if (tilePixelRatio == 1) {\n      return tileSize;\n    } else {\n      return scaleSize(tileSize, tilePixelRatio, this.tmpSize);\n    }\n  }\n\n  /**\n   * Returns a tile coordinate wrapped around the x-axis. When the tile coordinate\n   * is outside the resolution and extent range of the tile grid, `null` will be\n   * returned.\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"../proj/Projection.js\").default} [projection] Projection.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate to be passed to the tileUrlFunction or\n   *     null if no tile URL should be created for the passed `tileCoord`.\n   */\n  getTileCoordForTileUrlFunction(tileCoord, projection) {\n    projection = projection !== undefined ? projection : this.getProjection();\n    const tileGrid = this.getTileGridForProjection(projection);\n    if (this.getWrapX() && projection.isGlobal()) {\n      tileCoord = wrapX(tileGrid, tileCoord, projection);\n    }\n    return withinExtentAndZ(tileCoord, tileGrid) ? tileCoord : null;\n  }\n\n  /**\n   * Remove all cached tiles from the source. The next render cycle will fetch new tiles.\n   * @api\n   */\n  clear() {\n    this.tileCache.clear();\n  }\n\n  refresh() {\n    this.clear();\n    super.refresh();\n  }\n\n  /**\n   * Increases the cache size if needed\n   * @param {number} tileCount Minimum number of tiles needed.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   */\n  updateCacheSize(tileCount, projection) {\n    const tileCache = this.getTileCacheForProjection(projection);\n    if (tileCount > tileCache.highWaterMark) {\n      tileCache.highWaterMark = tileCount;\n    }\n  }\n\n  /**\n   * Marks a tile coord as being used, without triggering a load.\n   * @abstract\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   */\n  useTile(z, x, y, projection) {}\n}\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Tile~TileSource} instances are instances of this\n * type.\n */\nexport class TileSourceEvent extends Event {\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../Tile.js\").default} tile The tile.\n   */\n  constructor(type, tile) {\n    super(type);\n\n    /**\n     * The tile related to the event.\n     * @type {import(\"../Tile.js\").default}\n     * @api\n     */\n    this.tile = tile;\n  }\n}\n\nexport default TileSource;\n","/**\n * @module ol/source/Source\n */\nimport BaseObject from '../Object.js';\nimport {abstract} from '../util.js';\nimport {get as getProjection} from '../proj.js';\n\n/**\n * @typedef {'undefined' | 'loading' | 'ready' | 'error'} State\n * State of the source, one of 'undefined', 'loading', 'ready' or 'error'.\n */\n\n/**\n * A function that takes a {@link module:ol/Map~FrameState} and returns a string or\n * an array of strings representing source attributions.\n *\n * @typedef {function(import(\"../Map.js\").FrameState): (string|Array<string>)} Attribution\n */\n\n/**\n * A type that can be used to provide attribution information for data sources.\n *\n * It represents either\n * * a simple string (e.g. `'© Acme Inc.'`)\n * * an array of simple strings (e.g. `['© Acme Inc.', '© Bacme Inc.']`)\n * * a function that returns a string or array of strings ({@link module:ol/source/Source~Attribution})\n *\n * @typedef {string|Array<string>|Attribution} AttributionLike\n */\n\n/**\n * @typedef {Object} Options\n * @property {AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {import(\"./Source.js\").State} [state='ready'] State.\n * @property {boolean} [wrapX=false] WrapX.\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\n * the nearest neighbor is used when resampling.\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for {@link module:ol/layer/Layer~Layer} sources.\n *\n * A generic `change` event is triggered when the state of the source changes.\n * @abstract\n * @api\n */\nclass Source extends BaseObject {\n  /**\n   * @param {Options} options Source options.\n   */\n  constructor(options) {\n    super();\n\n    /**\n     * @protected\n     * @type {import(\"../proj/Projection.js\").default|null}\n     */\n    this.projection = getProjection(options.projection);\n\n    /**\n     * @private\n     * @type {?Attribution}\n     */\n    this.attributions_ = adaptAttributions(options.attributions);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.attributionsCollapsible_ =\n      options.attributionsCollapsible !== undefined\n        ? options.attributionsCollapsible\n        : true;\n\n    /**\n     * This source is currently loading data. Sources that defer loading to the\n     * map's tile queue never set this to `true`.\n     * @type {boolean}\n     */\n    this.loading = false;\n\n    /**\n     * @private\n     * @type {import(\"./Source.js\").State}\n     */\n    this.state_ = options.state !== undefined ? options.state : 'ready';\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.wrapX_ = options.wrapX !== undefined ? options.wrapX : false;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.interpolate_ = !!options.interpolate;\n\n    /**\n     * @protected\n     * @type {function(import(\"../View.js\").ViewOptions):void}\n     */\n    this.viewResolver = null;\n\n    /**\n     * @protected\n     * @type {function(Error):void}\n     */\n    this.viewRejector = null;\n\n    const self = this;\n    /**\n     * @private\n     * @type {Promise<import(\"../View.js\").ViewOptions>}\n     */\n    this.viewPromise_ = new Promise(function (resolve, reject) {\n      self.viewResolver = resolve;\n      self.viewRejector = reject;\n    });\n  }\n\n  /**\n   * Get the attribution function for the source.\n   * @return {?Attribution} Attribution function.\n   * @api\n   */\n  getAttributions() {\n    return this.attributions_;\n  }\n\n  /**\n   * @return {boolean} Attributions are collapsible.\n   * @api\n   */\n  getAttributionsCollapsible() {\n    return this.attributionsCollapsible_;\n  }\n\n  /**\n   * Get the projection of the source.\n   * @return {import(\"../proj/Projection.js\").default|null} Projection.\n   * @api\n   */\n  getProjection() {\n    return this.projection;\n  }\n\n  /**\n   * @abstract\n   * @return {Array<number>|null} Resolutions.\n   */\n  getResolutions() {\n    return abstract();\n  }\n\n  /**\n   * @return {Promise<import(\"../View.js\").ViewOptions>} A promise for view-related properties.\n   */\n  getView() {\n    return this.viewPromise_;\n  }\n\n  /**\n   * Get the state of the source, see {@link import(\"./Source.js\").State} for possible states.\n   * @return {import(\"./Source.js\").State} State.\n   * @api\n   */\n  getState() {\n    return this.state_;\n  }\n\n  /**\n   * @return {boolean|undefined} Wrap X.\n   */\n  getWrapX() {\n    return this.wrapX_;\n  }\n\n  /**\n   * @return {boolean} Use linear interpolation when resampling.\n   */\n  getInterpolate() {\n    return this.interpolate_;\n  }\n\n  /**\n   * Refreshes the source. The source will be cleared, and data from the server will be reloaded.\n   * @api\n   */\n  refresh() {\n    this.changed();\n  }\n\n  /**\n   * Set the attributions of the source.\n   * @param {AttributionLike|undefined} attributions Attributions.\n   *     Can be passed as `string`, `Array<string>`, {@link module:ol/source/Source~Attribution},\n   *     or `undefined`.\n   * @api\n   */\n  setAttributions(attributions) {\n    this.attributions_ = adaptAttributions(attributions);\n    this.changed();\n  }\n\n  /**\n   * Set the state of the source.\n   * @param {import(\"./Source.js\").State} state State.\n   */\n  setState(state) {\n    this.state_ = state;\n    this.changed();\n  }\n}\n\n/**\n * Turns the attributions option into an attributions function.\n * @param {AttributionLike|undefined} attributionLike The attribution option.\n * @return {Attribution|null} An attribution function (or null).\n */\nfunction adaptAttributions(attributionLike) {\n  if (!attributionLike) {\n    return null;\n  }\n  if (Array.isArray(attributionLike)) {\n    return function (frameState) {\n      return attributionLike;\n    };\n  }\n\n  if (typeof attributionLike === 'function') {\n    return attributionLike;\n  }\n\n  return function (frameState) {\n    return [attributionLike];\n  };\n}\n\nexport default Source;\n","/**\n * @module ol/TileRange\n */\n\n/**\n * A representation of a contiguous block of tiles.  A tile range is specified\n * by its min/max tile coordinates and is inclusive of coordinates.\n */\nclass TileRange {\n  /**\n   * @param {number} minX Minimum X.\n   * @param {number} maxX Maximum X.\n   * @param {number} minY Minimum Y.\n   * @param {number} maxY Maximum Y.\n   */\n  constructor(minX, maxX, minY, maxY) {\n    /**\n     * @type {number}\n     */\n    this.minX = minX;\n\n    /**\n     * @type {number}\n     */\n    this.maxX = maxX;\n\n    /**\n     * @type {number}\n     */\n    this.minY = minY;\n\n    /**\n     * @type {number}\n     */\n    this.maxY = maxY;\n  }\n\n  /**\n   * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @return {boolean} Contains tile coordinate.\n   */\n  contains(tileCoord) {\n    return this.containsXY(tileCoord[1], tileCoord[2]);\n  }\n\n  /**\n   * @param {TileRange} tileRange Tile range.\n   * @return {boolean} Contains.\n   */\n  containsTileRange(tileRange) {\n    return (\n      this.minX <= tileRange.minX &&\n      tileRange.maxX <= this.maxX &&\n      this.minY <= tileRange.minY &&\n      tileRange.maxY <= this.maxY\n    );\n  }\n\n  /**\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @return {boolean} Contains coordinate.\n   */\n  containsXY(x, y) {\n    return this.minX <= x && x <= this.maxX && this.minY <= y && y <= this.maxY;\n  }\n\n  /**\n   * @param {TileRange} tileRange Tile range.\n   * @return {boolean} Equals.\n   */\n  equals(tileRange) {\n    return (\n      this.minX == tileRange.minX &&\n      this.minY == tileRange.minY &&\n      this.maxX == tileRange.maxX &&\n      this.maxY == tileRange.maxY\n    );\n  }\n\n  /**\n   * @param {TileRange} tileRange Tile range.\n   */\n  extend(tileRange) {\n    if (tileRange.minX < this.minX) {\n      this.minX = tileRange.minX;\n    }\n    if (tileRange.maxX > this.maxX) {\n      this.maxX = tileRange.maxX;\n    }\n    if (tileRange.minY < this.minY) {\n      this.minY = tileRange.minY;\n    }\n    if (tileRange.maxY > this.maxY) {\n      this.maxY = tileRange.maxY;\n    }\n  }\n\n  /**\n   * @return {number} Height.\n   */\n  getHeight() {\n    return this.maxY - this.minY + 1;\n  }\n\n  /**\n   * @return {import(\"./size.js\").Size} Size.\n   */\n  getSize() {\n    return [this.getWidth(), this.getHeight()];\n  }\n\n  /**\n   * @return {number} Width.\n   */\n  getWidth() {\n    return this.maxX - this.minX + 1;\n  }\n\n  /**\n   * @param {TileRange} tileRange Tile range.\n   * @return {boolean} Intersects.\n   */\n  intersects(tileRange) {\n    return (\n      this.minX <= tileRange.maxX &&\n      this.maxX >= tileRange.minX &&\n      this.minY <= tileRange.maxY &&\n      this.maxY >= tileRange.minY\n    );\n  }\n}\n\n/**\n * @param {number} minX Minimum X.\n * @param {number} maxX Maximum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxY Maximum Y.\n * @param {TileRange} [tileRange] TileRange.\n * @return {TileRange} Tile range.\n */\nexport function createOrUpdate(minX, maxX, minY, maxY, tileRange) {\n  if (tileRange !== undefined) {\n    tileRange.minX = minX;\n    tileRange.maxX = maxX;\n    tileRange.minY = minY;\n    tileRange.maxY = maxY;\n    return tileRange;\n  } else {\n    return new TileRange(minX, maxX, minY, maxY);\n  }\n}\n\nexport default TileRange;\n","/**\n * @module ol/tilegrid/TileGrid\n */\nimport TileRange, {\n  createOrUpdate as createOrUpdateTileRange,\n} from '../TileRange.js';\nimport {DEFAULT_TILE_SIZE} from './common.js';\nimport {assert} from '../asserts.js';\nimport {ceil, clamp, floor} from '../math.js';\nimport {createOrUpdate, getTopLeft} from '../extent.js';\nimport {createOrUpdate as createOrUpdateTileCoord} from '../tilecoord.js';\nimport {intersectsLinearRing} from '../geom/flat/intersectsextent.js';\nimport {isSorted, linearFindNearest} from '../array.js';\nimport {toSize} from '../size.js';\n\n/**\n * @private\n * @type {import(\"../tilecoord.js\").TileCoord}\n */\nconst tmpTileCoord = [0, 0, 0];\n\n/**\n * Number of decimal digits to consider in integer values when rounding.\n * @type {number}\n */\nconst DECIMALS = 5;\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../extent.js\").Extent} [extent] Extent for the tile grid. No tiles outside this\n * extent will be requested by {@link module:ol/source/Tile~TileSource} sources. When no `origin` or\n * `origins` are configured, the `origin` will be set to the top-left corner of the extent.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {import(\"../coordinate.js\").Coordinate} [origin] The tile grid origin, i.e. where the `x`\n * and `y` axes meet (`[z, 0, 0]`). Tile coordinates increase left to right and downwards. If not\n * specified, `extent` or `origins` must be provided.\n * @property {Array<import(\"../coordinate.js\").Coordinate>} [origins] Tile grid origins, i.e. where\n * the `x` and `y` axes meet (`[z, 0, 0]`), for each zoom level. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * origin. Tile coordinates increase left to right and downwards. If not specified, `extent` or\n * `origin` must be provided.\n * @property {!Array<number>} resolutions Resolutions. The array index of each resolution needs\n * to match the zoom level. This means that even if a `minZoom` is configured, the resolutions\n * array will have a length of `maxZoom + 1`.\n * @property {Array<import(\"../size.js\").Size>} [sizes] Number of tile rows and columns\n * of the grid for each zoom level. If specified the values\n * define each zoom level's extent together with the `origin` or `origins`.\n * A grid `extent` can be configured in addition, and will further limit the extent\n * for which tile requests are made by sources. If the bottom-left corner of\n * an extent is used as `origin` or `origins`, then the `y` value must be\n * negative because OpenLayers tile coordinates use the top left as the origin.\n * @property {number|import(\"../size.js\").Size} [tileSize] Tile size.\n * Default is `[256, 256]`.\n * @property {Array<number|import(\"../size.js\").Size>} [tileSizes] Tile sizes. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * tile size.\n */\n\n/**\n * @classdesc\n * Base class for setting the grid pattern for sources accessing tiled-image\n * servers.\n * @api\n */\nclass TileGrid {\n  /**\n   * @param {Options} options Tile grid options.\n   */\n  constructor(options) {\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.minZoom = options.minZoom !== undefined ? options.minZoom : 0;\n\n    /**\n     * @private\n     * @type {!Array<number>}\n     */\n    this.resolutions_ = options.resolutions;\n    assert(\n      isSorted(\n        this.resolutions_,\n        function (a, b) {\n          return b - a;\n        },\n        true\n      ),\n      17\n    ); // `resolutions` must be sorted in descending order\n\n    // check if we've got a consistent zoom factor and origin\n    let zoomFactor;\n    if (!options.origins) {\n      for (let i = 0, ii = this.resolutions_.length - 1; i < ii; ++i) {\n        if (!zoomFactor) {\n          zoomFactor = this.resolutions_[i] / this.resolutions_[i + 1];\n        } else {\n          if (this.resolutions_[i] / this.resolutions_[i + 1] !== zoomFactor) {\n            zoomFactor = undefined;\n            break;\n          }\n        }\n      }\n    }\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.zoomFactor_ = zoomFactor;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.maxZoom = this.resolutions_.length - 1;\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate|null}\n     */\n    this.origin_ = options.origin !== undefined ? options.origin : null;\n\n    /**\n     * @private\n     * @type {Array<import(\"../coordinate.js\").Coordinate>}\n     */\n    this.origins_ = null;\n    if (options.origins !== undefined) {\n      this.origins_ = options.origins;\n      assert(this.origins_.length == this.resolutions_.length, 20); // Number of `origins` and `resolutions` must be equal\n    }\n\n    const extent = options.extent;\n\n    if (extent !== undefined && !this.origin_ && !this.origins_) {\n      this.origin_ = getTopLeft(extent);\n    }\n\n    assert(\n      (!this.origin_ && this.origins_) || (this.origin_ && !this.origins_),\n      18\n    ); // Either `origin` or `origins` must be configured, never both\n\n    /**\n     * @private\n     * @type {Array<number|import(\"../size.js\").Size>}\n     */\n    this.tileSizes_ = null;\n    if (options.tileSizes !== undefined) {\n      this.tileSizes_ = options.tileSizes;\n      assert(this.tileSizes_.length == this.resolutions_.length, 19); // Number of `tileSizes` and `resolutions` must be equal\n    }\n\n    /**\n     * @private\n     * @type {number|import(\"../size.js\").Size}\n     */\n    this.tileSize_ =\n      options.tileSize !== undefined\n        ? options.tileSize\n        : !this.tileSizes_\n        ? DEFAULT_TILE_SIZE\n        : null;\n    assert(\n      (!this.tileSize_ && this.tileSizes_) ||\n        (this.tileSize_ && !this.tileSizes_),\n      22\n    ); // Either `tileSize` or `tileSizes` must be configured, never both\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.extent_ = extent !== undefined ? extent : null;\n\n    /**\n     * @private\n     * @type {Array<import(\"../TileRange.js\").default>}\n     */\n    this.fullTileRanges_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.tmpSize_ = [0, 0];\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.tmpExtent_ = [0, 0, 0, 0];\n\n    if (options.sizes !== undefined) {\n      this.fullTileRanges_ = options.sizes.map(function (size, z) {\n        const tileRange = new TileRange(\n          Math.min(0, size[0]),\n          Math.max(size[0] - 1, -1),\n          Math.min(0, size[1]),\n          Math.max(size[1] - 1, -1)\n        );\n        if (extent) {\n          const restrictedTileRange = this.getTileRangeForExtentAndZ(extent, z);\n          tileRange.minX = Math.max(restrictedTileRange.minX, tileRange.minX);\n          tileRange.maxX = Math.min(restrictedTileRange.maxX, tileRange.maxX);\n          tileRange.minY = Math.max(restrictedTileRange.minY, tileRange.minY);\n          tileRange.maxY = Math.min(restrictedTileRange.maxY, tileRange.maxY);\n        }\n        return tileRange;\n      }, this);\n    } else if (extent) {\n      this.calculateTileRanges_(extent);\n    }\n  }\n\n  /**\n   * Call a function with each tile coordinate for a given extent and zoom level.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} zoom Integer zoom level.\n   * @param {function(import(\"../tilecoord.js\").TileCoord): void} callback Function called with each tile coordinate.\n   * @api\n   */\n  forEachTileCoord(extent, zoom, callback) {\n    const tileRange = this.getTileRangeForExtentAndZ(extent, zoom);\n    for (let i = tileRange.minX, ii = tileRange.maxX; i <= ii; ++i) {\n      for (let j = tileRange.minY, jj = tileRange.maxY; j <= jj; ++j) {\n        callback([zoom, i, j]);\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {function(number, import(\"../TileRange.js\").default): boolean} callback Callback.\n   * @param {import(\"../TileRange.js\").default} [tempTileRange] Temporary import(\"../TileRange.js\").default object.\n   * @param {import(\"../extent.js\").Extent} [tempExtent] Temporary import(\"../extent.js\").Extent object.\n   * @return {boolean} Callback succeeded.\n   */\n  forEachTileCoordParentTileRange(\n    tileCoord,\n    callback,\n    tempTileRange,\n    tempExtent\n  ) {\n    let tileRange, x, y;\n    let tileCoordExtent = null;\n    let z = tileCoord[0] - 1;\n    if (this.zoomFactor_ === 2) {\n      x = tileCoord[1];\n      y = tileCoord[2];\n    } else {\n      tileCoordExtent = this.getTileCoordExtent(tileCoord, tempExtent);\n    }\n    while (z >= this.minZoom) {\n      if (this.zoomFactor_ === 2) {\n        x = Math.floor(x / 2);\n        y = Math.floor(y / 2);\n        tileRange = createOrUpdateTileRange(x, x, y, y, tempTileRange);\n      } else {\n        tileRange = this.getTileRangeForExtentAndZ(\n          tileCoordExtent,\n          z,\n          tempTileRange\n        );\n      }\n      if (callback(z, tileRange)) {\n        return true;\n      }\n      --z;\n    }\n    return false;\n  }\n\n  /**\n   * Get the extent for this tile grid, if it was configured.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getExtent() {\n    return this.extent_;\n  }\n\n  /**\n   * Get the maximum zoom level for the grid.\n   * @return {number} Max zoom.\n   * @api\n   */\n  getMaxZoom() {\n    return this.maxZoom;\n  }\n\n  /**\n   * Get the minimum zoom level for the grid.\n   * @return {number} Min zoom.\n   * @api\n   */\n  getMinZoom() {\n    return this.minZoom;\n  }\n\n  /**\n   * Get the origin for the grid at the given zoom level.\n   * @param {number} z Integer zoom level.\n   * @return {import(\"../coordinate.js\").Coordinate} Origin.\n   * @api\n   */\n  getOrigin(z) {\n    if (this.origin_) {\n      return this.origin_;\n    } else {\n      return this.origins_[z];\n    }\n  }\n\n  /**\n   * Get the resolution for the given zoom level.\n   * @param {number} z Integer zoom level.\n   * @return {number} Resolution.\n   * @api\n   */\n  getResolution(z) {\n    return this.resolutions_[z];\n  }\n\n  /**\n   * Get the list of resolutions for the tile grid.\n   * @return {Array<number>} Resolutions.\n   * @api\n   */\n  getResolutions() {\n    return this.resolutions_;\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"../TileRange.js\").default} [tempTileRange] Temporary import(\"../TileRange.js\").default object.\n   * @param {import(\"../extent.js\").Extent} [tempExtent] Temporary import(\"../extent.js\").Extent object.\n   * @return {import(\"../TileRange.js\").default|null} Tile range.\n   */\n  getTileCoordChildTileRange(tileCoord, tempTileRange, tempExtent) {\n    if (tileCoord[0] < this.maxZoom) {\n      if (this.zoomFactor_ === 2) {\n        const minX = tileCoord[1] * 2;\n        const minY = tileCoord[2] * 2;\n        return createOrUpdateTileRange(\n          minX,\n          minX + 1,\n          minY,\n          minY + 1,\n          tempTileRange\n        );\n      }\n      const tileCoordExtent = this.getTileCoordExtent(\n        tileCoord,\n        tempExtent || this.tmpExtent_\n      );\n      return this.getTileRangeForExtentAndZ(\n        tileCoordExtent,\n        tileCoord[0] + 1,\n        tempTileRange\n      );\n    }\n    return null;\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {number} z Integer zoom level.\n   * @param {import(\"../TileRange.js\").default} [tempTileRange] Temporary import(\"../TileRange.js\").default object.\n   * @return {import(\"../TileRange.js\").default|null} Tile range.\n   */\n  getTileRangeForTileCoordAndZ(tileCoord, z, tempTileRange) {\n    if (z > this.maxZoom || z < this.minZoom) {\n      return null;\n    }\n\n    const tileCoordZ = tileCoord[0];\n    const tileCoordX = tileCoord[1];\n    const tileCoordY = tileCoord[2];\n\n    if (z === tileCoordZ) {\n      return createOrUpdateTileRange(\n        tileCoordX,\n        tileCoordY,\n        tileCoordX,\n        tileCoordY,\n        tempTileRange\n      );\n    }\n\n    if (this.zoomFactor_) {\n      const factor = Math.pow(this.zoomFactor_, z - tileCoordZ);\n      const minX = Math.floor(tileCoordX * factor);\n      const minY = Math.floor(tileCoordY * factor);\n      if (z < tileCoordZ) {\n        return createOrUpdateTileRange(minX, minX, minY, minY, tempTileRange);\n      }\n\n      const maxX = Math.floor(factor * (tileCoordX + 1)) - 1;\n      const maxY = Math.floor(factor * (tileCoordY + 1)) - 1;\n      return createOrUpdateTileRange(minX, maxX, minY, maxY, tempTileRange);\n    }\n\n    const tileCoordExtent = this.getTileCoordExtent(tileCoord, this.tmpExtent_);\n    return this.getTileRangeForExtentAndZ(tileCoordExtent, z, tempTileRange);\n  }\n\n  /**\n   * Get the extent for a tile range.\n   * @param {number} z Integer zoom level.\n   * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n   * @param {import(\"../extent.js\").Extent} [tempExtent] Temporary import(\"../extent.js\").Extent object.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   */\n  getTileRangeExtent(z, tileRange, tempExtent) {\n    const origin = this.getOrigin(z);\n    const resolution = this.getResolution(z);\n    const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n    const minX = origin[0] + tileRange.minX * tileSize[0] * resolution;\n    const maxX = origin[0] + (tileRange.maxX + 1) * tileSize[0] * resolution;\n    const minY = origin[1] + tileRange.minY * tileSize[1] * resolution;\n    const maxY = origin[1] + (tileRange.maxY + 1) * tileSize[1] * resolution;\n    return createOrUpdate(minX, minY, maxX, maxY, tempExtent);\n  }\n\n  /**\n   * Get a tile range for the given extent and integer zoom level.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} z Integer zoom level.\n   * @param {import(\"../TileRange.js\").default} [tempTileRange] Temporary tile range object.\n   * @return {import(\"../TileRange.js\").default} Tile range.\n   */\n  getTileRangeForExtentAndZ(extent, z, tempTileRange) {\n    const tileCoord = tmpTileCoord;\n    this.getTileCoordForXYAndZ_(extent[0], extent[3], z, false, tileCoord);\n    const minX = tileCoord[1];\n    const minY = tileCoord[2];\n    this.getTileCoordForXYAndZ_(extent[2], extent[1], z, true, tileCoord);\n    return createOrUpdateTileRange(\n      minX,\n      tileCoord[1],\n      minY,\n      tileCoord[2],\n      tempTileRange\n    );\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @return {import(\"../coordinate.js\").Coordinate} Tile center.\n   */\n  getTileCoordCenter(tileCoord) {\n    const origin = this.getOrigin(tileCoord[0]);\n    const resolution = this.getResolution(tileCoord[0]);\n    const tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n    return [\n      origin[0] + (tileCoord[1] + 0.5) * tileSize[0] * resolution,\n      origin[1] - (tileCoord[2] + 0.5) * tileSize[1] * resolution,\n    ];\n  }\n\n  /**\n   * Get the extent of a tile coordinate.\n   *\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"../extent.js\").Extent} [tempExtent] Temporary extent object.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getTileCoordExtent(tileCoord, tempExtent) {\n    const origin = this.getOrigin(tileCoord[0]);\n    const resolution = this.getResolution(tileCoord[0]);\n    const tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n    const minX = origin[0] + tileCoord[1] * tileSize[0] * resolution;\n    const minY = origin[1] - (tileCoord[2] + 1) * tileSize[1] * resolution;\n    const maxX = minX + tileSize[0] * resolution;\n    const maxY = minY + tileSize[1] * resolution;\n    return createOrUpdate(minX, minY, maxX, maxY, tempExtent);\n  }\n\n  /**\n   * Get the tile coordinate for the given map coordinate and resolution.  This\n   * method considers that coordinates that intersect tile boundaries should be\n   * assigned the higher tile coordinate.\n   *\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../tilecoord.js\").TileCoord} [opt_tileCoord] Destination import(\"../tilecoord.js\").TileCoord object.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n   * @api\n   */\n  getTileCoordForCoordAndResolution(coordinate, resolution, opt_tileCoord) {\n    return this.getTileCoordForXYAndResolution_(\n      coordinate[0],\n      coordinate[1],\n      resolution,\n      false,\n      opt_tileCoord\n    );\n  }\n\n  /**\n   * Note that this method should not be called for resolutions that correspond\n   * to an integer zoom level.  Instead call the `getTileCoordForXYAndZ_` method.\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {number} resolution Resolution (for a non-integer zoom level).\n   * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n   *     intersections go to the higher tile coordinate, let edge intersections\n   *     go to the lower tile coordinate.\n   * @param {import(\"../tilecoord.js\").TileCoord} [opt_tileCoord] Temporary import(\"../tilecoord.js\").TileCoord object.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n   * @private\n   */\n  getTileCoordForXYAndResolution_(\n    x,\n    y,\n    resolution,\n    reverseIntersectionPolicy,\n    opt_tileCoord\n  ) {\n    const z = this.getZForResolution(resolution);\n    const scale = resolution / this.getResolution(z);\n    const origin = this.getOrigin(z);\n    const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n\n    let tileCoordX = (scale * (x - origin[0])) / resolution / tileSize[0];\n    let tileCoordY = (scale * (origin[1] - y)) / resolution / tileSize[1];\n\n    if (reverseIntersectionPolicy) {\n      tileCoordX = ceil(tileCoordX, DECIMALS) - 1;\n      tileCoordY = ceil(tileCoordY, DECIMALS) - 1;\n    } else {\n      tileCoordX = floor(tileCoordX, DECIMALS);\n      tileCoordY = floor(tileCoordY, DECIMALS);\n    }\n\n    return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n  }\n\n  /**\n   * Although there is repetition between this method and `getTileCoordForXYAndResolution_`,\n   * they should have separate implementations.  This method is for integer zoom\n   * levels.  The other method should only be called for resolutions corresponding\n   * to non-integer zoom levels.\n   * @param {number} x Map x coordinate.\n   * @param {number} y Map y coordinate.\n   * @param {number} z Integer zoom level.\n   * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n   *     intersections go to the higher tile coordinate, let edge intersections\n   *     go to the lower tile coordinate.\n   * @param {import(\"../tilecoord.js\").TileCoord} [opt_tileCoord] Temporary import(\"../tilecoord.js\").TileCoord object.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n   * @private\n   */\n  getTileCoordForXYAndZ_(x, y, z, reverseIntersectionPolicy, opt_tileCoord) {\n    const origin = this.getOrigin(z);\n    const resolution = this.getResolution(z);\n    const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n\n    let tileCoordX = (x - origin[0]) / resolution / tileSize[0];\n    let tileCoordY = (origin[1] - y) / resolution / tileSize[1];\n\n    if (reverseIntersectionPolicy) {\n      tileCoordX = ceil(tileCoordX, DECIMALS) - 1;\n      tileCoordY = ceil(tileCoordY, DECIMALS) - 1;\n    } else {\n      tileCoordX = floor(tileCoordX, DECIMALS);\n      tileCoordY = floor(tileCoordY, DECIMALS);\n    }\n\n    return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n  }\n\n  /**\n   * Get a tile coordinate given a map coordinate and zoom level.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} z Zoom level.\n   * @param {import(\"../tilecoord.js\").TileCoord} [opt_tileCoord] Destination import(\"../tilecoord.js\").TileCoord object.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n   * @api\n   */\n  getTileCoordForCoordAndZ(coordinate, z, opt_tileCoord) {\n    return this.getTileCoordForXYAndZ_(\n      coordinate[0],\n      coordinate[1],\n      z,\n      false,\n      opt_tileCoord\n    );\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @return {number} Tile resolution.\n   */\n  getTileCoordResolution(tileCoord) {\n    return this.resolutions_[tileCoord[0]];\n  }\n\n  /**\n   * Get the tile size for a zoom level. The type of the return value matches the\n   * `tileSize` or `tileSizes` that the tile grid was configured with. To always\n   * get an {@link import(\"../size.js\").Size}, run the result through {@link module:ol/size.toSize}.\n   * @param {number} z Z.\n   * @return {number|import(\"../size.js\").Size} Tile size.\n   * @api\n   */\n  getTileSize(z) {\n    if (this.tileSize_) {\n      return this.tileSize_;\n    } else {\n      return this.tileSizes_[z];\n    }\n  }\n\n  /**\n   * @param {number} z Zoom level.\n   * @return {import(\"../TileRange.js\").default} Extent tile range for the specified zoom level.\n   */\n  getFullTileRange(z) {\n    if (!this.fullTileRanges_) {\n      return this.extent_\n        ? this.getTileRangeForExtentAndZ(this.extent_, z)\n        : null;\n    } else {\n      return this.fullTileRanges_[z];\n    }\n  }\n\n  /**\n   * @param {number} resolution Resolution.\n   * @param {number|import(\"../array.js\").NearestDirectionFunction} [opt_direction]\n   *     If 0, the nearest resolution will be used.\n   *     If 1, the nearest higher resolution (lower Z) will be used. If -1, the\n   *     nearest lower resolution (higher Z) will be used. Default is 0.\n   *     Use a {@link module:ol/array~NearestDirectionFunction} for more precise control.\n   *\n   * For example to change tile Z at the midpoint of zoom levels\n   * ```js\n   * function(value, high, low) {\n   *   return value - low * Math.sqrt(high / low);\n   * }\n   * ```\n   * @return {number} Z.\n   * @api\n   */\n  getZForResolution(resolution, opt_direction) {\n    const z = linearFindNearest(\n      this.resolutions_,\n      resolution,\n      opt_direction || 0\n    );\n    return clamp(z, this.minZoom, this.maxZoom);\n  }\n\n  /**\n   * The tile with the provided tile coordinate intersects the given viewport.\n   * @param {import('../tilecoord.js').TileCoord} tileCoord Tile coordinate.\n   * @param {Array<number>} viewport Viewport as returned from {@link module:ol/extent.getRotatedViewport}.\n   * @return {boolean} The tile with the provided tile coordinate intersects the given viewport.\n   */\n  tileCoordIntersectsViewport(tileCoord, viewport) {\n    return intersectsLinearRing(\n      viewport,\n      0,\n      viewport.length,\n      2,\n      this.getTileCoordExtent(tileCoord)\n    );\n  }\n\n  /**\n   * @param {!import(\"../extent.js\").Extent} extent Extent for this tile grid.\n   * @private\n   */\n  calculateTileRanges_(extent) {\n    const length = this.resolutions_.length;\n    const fullTileRanges = new Array(length);\n    for (let z = this.minZoom; z < length; ++z) {\n      fullTileRanges[z] = this.getTileRangeForExtentAndZ(extent, z);\n    }\n    this.fullTileRanges_ = fullTileRanges;\n  }\n}\n\nexport default TileGrid;\n","/**\n * @module ol/tilegrid\n */\nimport TileGrid from './tilegrid/TileGrid.js';\nimport {DEFAULT_MAX_ZOOM, DEFAULT_TILE_SIZE} from './tilegrid/common.js';\nimport {METERS_PER_UNIT, get as getProjection} from './proj.js';\nimport {\n  containsCoordinate,\n  createOrUpdate,\n  getCorner,\n  getHeight,\n  getWidth,\n} from './extent.js';\nimport {toSize} from './size.js';\n\n/**\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {!TileGrid} Default tile grid for the\n * passed projection.\n */\nexport function getForProjection(projection) {\n  let tileGrid = projection.getDefaultTileGrid();\n  if (!tileGrid) {\n    tileGrid = createForProjection(projection);\n    projection.setDefaultTileGrid(tileGrid);\n  }\n  return tileGrid;\n}\n\n/**\n * @param {TileGrid} tileGrid Tile grid.\n * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {import(\"./tilecoord.js\").TileCoord} Tile coordinate.\n */\nexport function wrapX(tileGrid, tileCoord, projection) {\n  const z = tileCoord[0];\n  const center = tileGrid.getTileCoordCenter(tileCoord);\n  const projectionExtent = extentFromProjection(projection);\n  if (!containsCoordinate(projectionExtent, center)) {\n    const worldWidth = getWidth(projectionExtent);\n    const worldsAway = Math.ceil(\n      (projectionExtent[0] - center[0]) / worldWidth\n    );\n    center[0] += worldWidth * worldsAway;\n    return tileGrid.getTileCoordForCoordAndZ(center, z);\n  } else {\n    return tileCoord;\n  }\n}\n\n/**\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} [maxZoom] Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size} [tileSize] Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {import(\"./extent.js\").Corner} [corner] Extent corner (default is `'top-left'`).\n * @return {!TileGrid} TileGrid instance.\n */\nexport function createForExtent(extent, maxZoom, tileSize, corner) {\n  corner = corner !== undefined ? corner : 'top-left';\n\n  const resolutions = resolutionsFromExtent(extent, maxZoom, tileSize);\n\n  return new TileGrid({\n    extent: extent,\n    origin: getCorner(extent, corner),\n    resolutions: resolutions,\n    tileSize: tileSize,\n  });\n}\n\n/**\n * @typedef {Object} XYZOptions\n * @property {import(\"./extent.js\").Extent} [extent] Extent for the tile grid. The origin for an XYZ tile grid is the\n * top-left corner of the extent. If `maxResolution` is not provided the zero level of the grid is defined by the resolution\n * at which one tile fits in the provided extent. If not provided, the extent of the EPSG:3857 projection is used.\n * @property {number} [maxResolution] Resolution at level zero.\n * @property {number} [maxZoom] Maximum zoom. The default is `42`. This determines the number of levels\n * in the grid set. For example, a `maxZoom` of 21 means there are 22 levels in the grid set.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {number|import(\"./size.js\").Size} [tileSize=[256, 256]] Tile size in pixels.\n */\n\n/**\n * Creates a tile grid with a standard XYZ tiling scheme.\n * @param {XYZOptions} [options] Tile grid options.\n * @return {!TileGrid} Tile grid instance.\n * @api\n */\nexport function createXYZ(options) {\n  const xyzOptions = options || {};\n\n  const extent = xyzOptions.extent || getProjection('EPSG:3857').getExtent();\n\n  const gridOptions = {\n    extent: extent,\n    minZoom: xyzOptions.minZoom,\n    tileSize: xyzOptions.tileSize,\n    resolutions: resolutionsFromExtent(\n      extent,\n      xyzOptions.maxZoom,\n      xyzOptions.tileSize,\n      xyzOptions.maxResolution\n    ),\n  };\n  return new TileGrid(gridOptions);\n}\n\n/**\n * Create a resolutions array from an extent.  A zoom factor of 2 is assumed.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} [maxZoom] Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size} [tileSize] Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {number} [maxResolution] Resolution at level zero.\n * @return {!Array<number>} Resolutions array.\n */\nfunction resolutionsFromExtent(extent, maxZoom, tileSize, maxResolution) {\n  maxZoom = maxZoom !== undefined ? maxZoom : DEFAULT_MAX_ZOOM;\n  tileSize = toSize(tileSize !== undefined ? tileSize : DEFAULT_TILE_SIZE);\n\n  const height = getHeight(extent);\n  const width = getWidth(extent);\n\n  maxResolution =\n    maxResolution > 0\n      ? maxResolution\n      : Math.max(width / tileSize[0], height / tileSize[1]);\n\n  const length = maxZoom + 1;\n  const resolutions = new Array(length);\n  for (let z = 0; z < length; ++z) {\n    resolutions[z] = maxResolution / Math.pow(2, z);\n  }\n  return resolutions;\n}\n\n/**\n * @param {import(\"./proj.js\").ProjectionLike} projection Projection.\n * @param {number} [maxZoom] Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size} [tileSize] Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {import(\"./extent.js\").Corner} [corner] Extent corner (default is `'top-left'`).\n * @return {!TileGrid} TileGrid instance.\n */\nexport function createForProjection(projection, maxZoom, tileSize, corner) {\n  const extent = extentFromProjection(projection);\n  return createForExtent(extent, maxZoom, tileSize, corner);\n}\n\n/**\n * Generate a tile grid extent from a projection.  If the projection has an\n * extent, it is used.  If not, a global extent is assumed.\n * @param {import(\"./proj.js\").ProjectionLike} projection Projection.\n * @return {import(\"./extent.js\").Extent} Extent.\n */\nexport function extentFromProjection(projection) {\n  projection = getProjection(projection);\n  let extent = projection.getExtent();\n  if (!extent) {\n    const half =\n      (180 * METERS_PER_UNIT.degrees) / projection.getMetersPerUnit();\n    extent = createOrUpdate(-half, -half, half, half);\n  }\n  return extent;\n}\n","/**\n * @module ol/tileurlfunction\n */\nimport {assert} from './asserts.js';\nimport {modulo} from './math.js';\nimport {hash as tileCoordHash} from './tilecoord.js';\n\n/**\n * @param {string} template Template.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTemplate(template, tileGrid) {\n  const zRegEx = /\\{z\\}/g;\n  const xRegEx = /\\{x\\}/g;\n  const yRegEx = /\\{y\\}/g;\n  const dashYRegEx = /\\{-y\\}/g;\n  return (\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function (tileCoord, pixelRatio, projection) {\n      if (!tileCoord) {\n        return undefined;\n      } else {\n        return template\n          .replace(zRegEx, tileCoord[0].toString())\n          .replace(xRegEx, tileCoord[1].toString())\n          .replace(yRegEx, tileCoord[2].toString())\n          .replace(dashYRegEx, function () {\n            const z = tileCoord[0];\n            const range = tileGrid.getFullTileRange(z);\n            assert(range, 55); // The {-y} placeholder requires a tile grid with extent\n            const y = range.getHeight() - tileCoord[2] - 1;\n            return y.toString();\n          });\n      }\n    }\n  );\n}\n\n/**\n * @param {Array<string>} templates Templates.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTemplates(templates, tileGrid) {\n  const len = templates.length;\n  const tileUrlFunctions = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    tileUrlFunctions[i] = createFromTemplate(templates[i], tileGrid);\n  }\n  return createFromTileUrlFunctions(tileUrlFunctions);\n}\n\n/**\n * @param {Array<import(\"./Tile.js\").UrlFunction>} tileUrlFunctions Tile URL Functions.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTileUrlFunctions(tileUrlFunctions) {\n  if (tileUrlFunctions.length === 1) {\n    return tileUrlFunctions[0];\n  }\n  return (\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function (tileCoord, pixelRatio, projection) {\n      if (!tileCoord) {\n        return undefined;\n      } else {\n        const h = tileCoordHash(tileCoord);\n        const index = modulo(h, tileUrlFunctions.length);\n        return tileUrlFunctions[index](tileCoord, pixelRatio, projection);\n      }\n    }\n  );\n}\n\n/**\n * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @param {number} pixelRatio Pixel ratio.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {string|undefined} Tile URL.\n */\nexport function nullTileUrlFunction(tileCoord, pixelRatio, projection) {\n  return undefined;\n}\n\n/**\n * @param {string} url URL.\n * @return {Array<string>} Array of urls.\n */\nexport function expandUrl(url) {\n  const urls = [];\n  let match = /\\{([a-z])-([a-z])\\}/.exec(url);\n  if (match) {\n    // char range\n    const startCharCode = match[1].charCodeAt(0);\n    const stopCharCode = match[2].charCodeAt(0);\n    let charCode;\n    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      urls.push(url.replace(match[0], String.fromCharCode(charCode)));\n    }\n    return urls;\n  }\n  match = /\\{(\\d+)-(\\d+)\\}/.exec(url);\n  if (match) {\n    // number range\n    const stop = parseInt(match[2], 10);\n    for (let i = parseInt(match[1], 10); i <= stop; i++) {\n      urls.push(url.replace(match[0], i.toString()));\n    }\n    return urls;\n  }\n  urls.push(url);\n  return urls;\n}\n","/**\n * @module ol/source/UrlTile\n */\nimport TileEventType from './TileEventType.js';\nimport TileSource, {TileSourceEvent} from './Tile.js';\nimport TileState from '../TileState.js';\nimport {createFromTemplates, expandUrl} from '../tileurlfunction.js';\nimport {getKeyZXY} from '../tilecoord.js';\nimport {getUid} from '../util.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize] Cache size.\n * @property {boolean} [opaque=false] Whether the layer is opaque.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection.\n * @property {import(\"./Source.js\").State} [state] State.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] TileGrid.\n * @property {import(\"../Tile.js\").LoadFunction} tileLoadFunction TileLoadFunction.\n * @property {number} [tilePixelRatio] TilePixelRatio.\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction] TileUrlFunction.\n * @property {string} [url] Url.\n * @property {Array<string>} [urls] Urls.\n * @property {boolean} [wrapX=true] WrapX.\n * @property {number} [transition] Transition.\n * @property {string} [key] Key.\n * @property {number|import(\"../array.js\").NearestDirectionFunction} [zDirection=0] ZDirection.\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\n * the nearest neighbor is used when resampling.\n */\n\n/**\n * @classdesc\n * Base class for sources providing tiles divided into a tile grid over http.\n *\n * @fires import(\"./Tile.js\").TileSourceEvent\n */\nclass UrlTile extends TileSource {\n  /**\n   * @param {Options} options Image tile options.\n   */\n  constructor(options) {\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      opaque: options.opaque,\n      projection: options.projection,\n      state: options.state,\n      tileGrid: options.tileGrid,\n      tilePixelRatio: options.tilePixelRatio,\n      wrapX: options.wrapX,\n      transition: options.transition,\n      interpolate: options.interpolate,\n      key: options.key,\n      attributionsCollapsible: options.attributionsCollapsible,\n      zDirection: options.zDirection,\n    });\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.generateTileUrlFunction_ =\n      this.tileUrlFunction === UrlTile.prototype.tileUrlFunction;\n\n    /**\n     * @protected\n     * @type {import(\"../Tile.js\").LoadFunction}\n     */\n    this.tileLoadFunction = options.tileLoadFunction;\n\n    if (options.tileUrlFunction) {\n      this.tileUrlFunction = options.tileUrlFunction;\n    }\n\n    /**\n     * @protected\n     * @type {!Array<string>|null}\n     */\n    this.urls = null;\n\n    if (options.urls) {\n      this.setUrls(options.urls);\n    } else if (options.url) {\n      this.setUrl(options.url);\n    }\n\n    /**\n     * @private\n     * @type {!Object<string, boolean>}\n     */\n    this.tileLoadingKeys_ = {};\n  }\n\n  /**\n   * Return the tile load function of the source.\n   * @return {import(\"../Tile.js\").LoadFunction} TileLoadFunction\n   * @api\n   */\n  getTileLoadFunction() {\n    return this.tileLoadFunction;\n  }\n\n  /**\n   * Return the tile URL function of the source.\n   * @return {import(\"../Tile.js\").UrlFunction} TileUrlFunction\n   * @api\n   */\n  getTileUrlFunction() {\n    return Object.getPrototypeOf(this).tileUrlFunction === this.tileUrlFunction\n      ? this.tileUrlFunction.bind(this)\n      : this.tileUrlFunction;\n  }\n\n  /**\n   * Return the URLs used for this source.\n   * When a tileUrlFunction is used instead of url or urls,\n   * null will be returned.\n   * @return {!Array<string>|null} URLs.\n   * @api\n   */\n  getUrls() {\n    return this.urls;\n  }\n\n  /**\n   * Handle tile change events.\n   * @param {import(\"../events/Event.js\").default} event Event.\n   * @protected\n   */\n  handleTileChange(event) {\n    const tile = /** @type {import(\"../Tile.js\").default} */ (event.target);\n    const uid = getUid(tile);\n    const tileState = tile.getState();\n    let type;\n    if (tileState == TileState.LOADING) {\n      this.tileLoadingKeys_[uid] = true;\n      type = TileEventType.TILELOADSTART;\n    } else if (uid in this.tileLoadingKeys_) {\n      delete this.tileLoadingKeys_[uid];\n      type =\n        tileState == TileState.ERROR\n          ? TileEventType.TILELOADERROR\n          : tileState == TileState.LOADED\n          ? TileEventType.TILELOADEND\n          : undefined;\n    }\n    if (type != undefined) {\n      this.dispatchEvent(new TileSourceEvent(type, tile));\n    }\n  }\n\n  /**\n   * Set the tile load function of the source.\n   * @param {import(\"../Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n   * @api\n   */\n  setTileLoadFunction(tileLoadFunction) {\n    this.tileCache.clear();\n    this.tileLoadFunction = tileLoadFunction;\n    this.changed();\n  }\n\n  /**\n   * Set the tile URL function of the source.\n   * @param {import(\"../Tile.js\").UrlFunction} tileUrlFunction Tile URL function.\n   * @param {string} [key] Optional new tile key for the source.\n   * @api\n   */\n  setTileUrlFunction(tileUrlFunction, key) {\n    this.tileUrlFunction = tileUrlFunction;\n    this.tileCache.pruneExceptNewestZ();\n    if (typeof key !== 'undefined') {\n      this.setKey(key);\n    } else {\n      this.changed();\n    }\n  }\n\n  /**\n   * Set the URL to use for requests.\n   * @param {string} url URL.\n   * @api\n   */\n  setUrl(url) {\n    const urls = expandUrl(url);\n    this.urls = urls;\n    this.setUrls(urls);\n  }\n\n  /**\n   * Set the URLs to use for requests.\n   * @param {Array<string>} urls URLs.\n   * @api\n   */\n  setUrls(urls) {\n    this.urls = urls;\n    const key = urls.join('\\n');\n    if (this.generateTileUrlFunction_) {\n      this.setTileUrlFunction(createFromTemplates(urls, this.tileGrid), key);\n    } else {\n      this.setKey(key);\n    }\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {string|undefined} Tile URL.\n   */\n  tileUrlFunction(tileCoord, pixelRatio, projection) {\n    return undefined;\n  }\n\n  /**\n   * Marks a tile coord as being used, without triggering a load.\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   */\n  useTile(z, x, y) {\n    const tileCoordKey = getKeyZXY(z, x, y);\n    if (this.tileCache.containsKey(tileCoordKey)) {\n      this.tileCache.get(tileCoordKey);\n    }\n  }\n}\n\nexport default UrlTile;\n","/**\n * @module ol/uri\n */\n\n/**\n * Appends query parameters to a URI.\n *\n * @param {string} uri The original URI, which may already have query data.\n * @param {!Object} params An object where keys are URI-encoded parameter keys,\n *     and the values are arbitrary types or arrays.\n * @return {string} The new URI.\n */\nexport function appendParams(uri, params) {\n  const keyParams = [];\n  // Skip any null or undefined parameter values\n  Object.keys(params).forEach(function (k) {\n    if (params[k] !== null && params[k] !== undefined) {\n      keyParams.push(k + '=' + encodeURIComponent(params[k]));\n    }\n  });\n  const qs = keyParams.join('&');\n  // remove any trailing ? or &\n  uri = uri.replace(/[?&]$/, '');\n  // append ? or & depending on whether uri has existing parameters\n  uri += uri.includes('?') ? '&' : '?';\n  return uri + qs;\n}\n","/**\n * @module ol/tilegrid/WMTS\n */\n\nimport TileGrid from './TileGrid.js';\nimport {get as getProjection} from '../proj.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../extent.js\").Extent} [extent] Extent for the tile grid. No tiles\n * outside this extent will be requested by {@link module:ol/source/Tile~TileSource} sources.\n * When no `origin` or `origins` are configured, the `origin` will be set to the\n * top-left corner of the extent.\n * @property {import(\"../coordinate.js\").Coordinate} [origin] The tile grid origin, i.e.\n * where the `x` and `y` axes meet (`[z, 0, 0]`). Tile coordinates increase left\n * to right and downwards. If not specified, `extent` or `origins` must be provided.\n * @property {Array<import(\"../coordinate.js\").Coordinate>} [origins] Tile grid origins,\n * i.e. where the `x` and `y` axes meet (`[z, 0, 0]`), for each zoom level. If\n * given, the array length should match the length of the `resolutions` array, i.e.\n * each resolution can have a different origin. Tile coordinates increase left to\n * right and downwards. If not specified, `extent` or `origin` must be provided.\n * @property {!Array<number>} resolutions Resolutions. The array index of each\n * resolution needs to match the zoom level. This means that even if a `minZoom`\n * is configured, the resolutions array will have a length of `maxZoom + 1`\n * @property {!Array<string>} matrixIds matrix IDs. The length of this array needs\n * to match the length of the `resolutions` array.\n * @property {Array<import(\"../size.js\").Size>} [sizes] Number of tile rows and columns\n * of the grid for each zoom level. The values here are the `TileMatrixWidth` and\n * `TileMatrixHeight` advertised in the GetCapabilities response of the WMTS, and\n * define each zoom level's extent together with the `origin` or `origins`.\n * A grid `extent` can be configured in addition, and will further limit the extent for\n * which tile requests are made by sources. If the bottom-left corner of\n * an extent is used as `origin` or `origins`, then the `y` value must be\n * negative because OpenLayers tile coordinates use the top left as the origin.\n * @property {number|import(\"../size.js\").Size} [tileSize] Tile size.\n * @property {Array<number|import(\"../size.js\").Size>} [tileSizes] Tile sizes. The length of\n * this array needs to match the length of the `resolutions` array.\n */\n\n/**\n * @classdesc\n * Set the grid pattern for sources accessing WMTS tiled-image servers.\n * @api\n */\nclass WMTSTileGrid extends TileGrid {\n  /**\n   * @param {Options} options WMTS options.\n   */\n  constructor(options) {\n    super({\n      extent: options.extent,\n      origin: options.origin,\n      origins: options.origins,\n      resolutions: options.resolutions,\n      tileSize: options.tileSize,\n      tileSizes: options.tileSizes,\n      sizes: options.sizes,\n    });\n\n    /**\n     * @private\n     * @type {!Array<string>}\n     */\n    this.matrixIds_ = options.matrixIds;\n  }\n\n  /**\n   * @param {number} z Z.\n   * @return {string} MatrixId..\n   */\n  getMatrixId(z) {\n    return this.matrixIds_[z];\n  }\n\n  /**\n   * Get the list of matrix identifiers.\n   * @return {Array<string>} MatrixIds.\n   * @api\n   */\n  getMatrixIds() {\n    return this.matrixIds_;\n  }\n}\n\nexport default WMTSTileGrid;\n\n/**\n * Create a tile grid from a WMTS capabilities matrix set and an\n * optional TileMatrixSetLimits.\n * @param {Object} matrixSet An object representing a matrixSet in the\n *     capabilities document.\n * @param {import(\"../extent.js\").Extent} [extent] An optional extent to restrict the tile\n *     ranges the server provides.\n * @param {Array<Object>} [matrixLimits] An optional object representing\n *     the available matrices for tileGrid.\n * @return {WMTSTileGrid} WMTS tileGrid instance.\n * @api\n */\nexport function createFromCapabilitiesMatrixSet(\n  matrixSet,\n  extent,\n  matrixLimits\n) {\n  /** @type {!Array<number>} */\n  const resolutions = [];\n  /** @type {!Array<string>} */\n  const matrixIds = [];\n  /** @type {!Array<import(\"../coordinate.js\").Coordinate>} */\n  const origins = [];\n  /** @type {!Array<number|import(\"../size.js\").Size>} */\n  const tileSizes = [];\n  /** @type {!Array<import(\"../size.js\").Size>} */\n  const sizes = [];\n\n  matrixLimits = matrixLimits !== undefined ? matrixLimits : [];\n\n  const supportedCRSPropName = 'SupportedCRS';\n  const matrixIdsPropName = 'TileMatrix';\n  const identifierPropName = 'Identifier';\n  const scaleDenominatorPropName = 'ScaleDenominator';\n  const topLeftCornerPropName = 'TopLeftCorner';\n  const tileWidthPropName = 'TileWidth';\n  const tileHeightPropName = 'TileHeight';\n\n  const code = matrixSet[supportedCRSPropName];\n  const projection = getProjection(code);\n  const metersPerUnit = projection.getMetersPerUnit();\n  // swap origin x and y coordinates if axis orientation is lat/long\n  const switchOriginXY = projection.getAxisOrientation().substr(0, 2) == 'ne';\n\n  matrixSet[matrixIdsPropName].sort(function (a, b) {\n    return b[scaleDenominatorPropName] - a[scaleDenominatorPropName];\n  });\n\n  matrixSet[matrixIdsPropName].forEach(function (elt) {\n    let matrixAvailable;\n    // use of matrixLimits to filter TileMatrices from GetCapabilities\n    // TileMatrixSet from unavailable matrix levels.\n    if (matrixLimits.length > 0) {\n      matrixAvailable = matrixLimits.find(function (elt_ml) {\n        if (elt[identifierPropName] == elt_ml[matrixIdsPropName]) {\n          return true;\n        }\n        // Fallback for tileMatrix identifiers that don't get prefixed\n        // by their tileMatrixSet identifiers.\n        if (!elt[identifierPropName].includes(':')) {\n          return (\n            matrixSet[identifierPropName] + ':' + elt[identifierPropName] ===\n            elt_ml[matrixIdsPropName]\n          );\n        }\n        return false;\n      });\n    } else {\n      matrixAvailable = true;\n    }\n\n    if (matrixAvailable) {\n      matrixIds.push(elt[identifierPropName]);\n      const resolution =\n        (elt[scaleDenominatorPropName] * 0.28e-3) / metersPerUnit;\n      const tileWidth = elt[tileWidthPropName];\n      const tileHeight = elt[tileHeightPropName];\n      if (switchOriginXY) {\n        origins.push([\n          elt[topLeftCornerPropName][1],\n          elt[topLeftCornerPropName][0],\n        ]);\n      } else {\n        origins.push(elt[topLeftCornerPropName]);\n      }\n      resolutions.push(resolution);\n      tileSizes.push(\n        tileWidth == tileHeight ? tileWidth : [tileWidth, tileHeight]\n      );\n      sizes.push([elt['MatrixWidth'], elt['MatrixHeight']]);\n    }\n  });\n\n  return new WMTSTileGrid({\n    extent: extent,\n    origins: origins,\n    resolutions: resolutions,\n    matrixIds: matrixIds,\n    tileSizes: tileSizes,\n    sizes: sizes,\n  });\n}\n","/**\n * @module ol/source/WMTS\n */\n\nimport TileImage from './TileImage.js';\nimport {appendParams} from '../uri.js';\nimport {containsExtent} from '../extent.js';\nimport {createFromCapabilitiesMatrixSet} from '../tilegrid/WMTS.js';\nimport {createFromTileUrlFunctions, expandUrl} from '../tileurlfunction.js';\nimport {equivalent, get as getProjection, transformExtent} from '../proj.js';\n\n/**\n * Request encoding. One of 'KVP', 'REST'.\n * @typedef {'KVP' | 'REST'} RequestEncoding\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize] Initial tile cache size. Will auto-grow to hold at least the number of tiles in the viewport.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * linear interpolation is used when resampling.  Set to false to use the nearest neighbor instead.\n * @property {import(\"../tilegrid/WMTS.js\").default} tileGrid Tile grid.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {RequestEncoding} [requestEncoding='KVP'] Request encoding.\n * @property {string} layer Layer name as advertised in the WMTS capabilities.\n * @property {string} style Style name as advertised in the WMTS capabilities.\n * @property {typeof import(\"../ImageTile.js\").default} [tileClass]  Class used to instantiate image tiles. Default is {@link module:ol/ImageTile~ImageTile}.\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service.\n * For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {string} [format='image/jpeg'] Image format. Only used when `requestEncoding` is `'KVP'`.\n * @property {string} [version='1.0.0'] WMTS version.\n * @property {string} matrixSet Matrix set.\n * @property {!Object} [dimensions] Additional \"dimensions\" for tile requests.\n * This is an object with properties named like the advertised WMTS dimensions.\n * @property {string} [url]  A URL for the service.\n * For the RESTful request encoding, this is a URL\n * template.  For KVP encoding, it is normal URL. A `{?-?}` template pattern,\n * for example `subdomain{a-f}.domain.com`, may be used instead of defining\n * each one separately in the `urls` option.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {Array<string>} [urls] An array of URLs.\n * Requests will be distributed among the URLs in this array.\n * @property {boolean} [wrapX=false] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {number|import(\"../array.js\").NearestDirectionFunction} [zDirection=0]\n * Choose whether to use tiles with a higher or lower zoom level when between integer\n * zoom levels. See {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution}.\n */\n\n/**\n * @classdesc\n * Layer source for tile data from WMTS servers.\n * @api\n */\nclass WMTS extends TileImage {\n  /**\n   * @param {Options} options WMTS options.\n   */\n  constructor(options) {\n    // TODO: add support for TileMatrixLimits\n\n    const requestEncoding =\n      options.requestEncoding !== undefined ? options.requestEncoding : 'KVP';\n\n    // FIXME: should we create a default tileGrid?\n    // we could issue a getCapabilities xhr to retrieve missing configuration\n    const tileGrid = options.tileGrid;\n\n    let urls = options.urls;\n    if (urls === undefined && options.url !== undefined) {\n      urls = expandUrl(options.url);\n    }\n\n    super({\n      attributions: options.attributions,\n      attributionsCollapsible: options.attributionsCollapsible,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      interpolate: options.interpolate,\n      projection: options.projection,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileClass: options.tileClass,\n      tileGrid: tileGrid,\n      tileLoadFunction: options.tileLoadFunction,\n      tilePixelRatio: options.tilePixelRatio,\n      urls: urls,\n      wrapX: options.wrapX !== undefined ? options.wrapX : false,\n      transition: options.transition,\n      zDirection: options.zDirection,\n    });\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.version_ = options.version !== undefined ? options.version : '1.0.0';\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.format_ = options.format !== undefined ? options.format : 'image/jpeg';\n\n    /**\n     * @private\n     * @type {!Object}\n     */\n    this.dimensions_ =\n      options.dimensions !== undefined ? options.dimensions : {};\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.layer_ = options.layer;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.matrixSet_ = options.matrixSet;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.style_ = options.style;\n\n    // FIXME: should we guess this requestEncoding from options.url(s)\n    //        structure? that would mean KVP only if a template is not provided.\n\n    /**\n     * @private\n     * @type {RequestEncoding}\n     */\n    this.requestEncoding_ = requestEncoding;\n\n    this.setKey(this.getKeyForDimensions_());\n\n    if (urls && urls.length > 0) {\n      this.tileUrlFunction = createFromTileUrlFunctions(\n        urls.map(this.createFromWMTSTemplate.bind(this))\n      );\n    }\n  }\n\n  /**\n   * Set the URLs to use for requests.\n   * URLs may contain OGC conform URL Template Variables: {TileMatrix}, {TileRow}, {TileCol}.\n   * @param {Array<string>} urls URLs.\n   */\n  setUrls(urls) {\n    this.urls = urls;\n    const key = urls.join('\\n');\n    this.setTileUrlFunction(\n      createFromTileUrlFunctions(\n        urls.map(this.createFromWMTSTemplate.bind(this))\n      ),\n      key\n    );\n  }\n\n  /**\n   * Get the dimensions, i.e. those passed to the constructor through the\n   * \"dimensions\" option, and possibly updated using the updateDimensions\n   * method.\n   * @return {!Object} Dimensions.\n   * @api\n   */\n  getDimensions() {\n    return this.dimensions_;\n  }\n\n  /**\n   * Return the image format of the WMTS source.\n   * @return {string} Format.\n   * @api\n   */\n  getFormat() {\n    return this.format_;\n  }\n\n  /**\n   * Return the layer of the WMTS source.\n   * @return {string} Layer.\n   * @api\n   */\n  getLayer() {\n    return this.layer_;\n  }\n\n  /**\n   * Return the matrix set of the WMTS source.\n   * @return {string} MatrixSet.\n   * @api\n   */\n  getMatrixSet() {\n    return this.matrixSet_;\n  }\n\n  /**\n   * Return the request encoding, either \"KVP\" or \"REST\".\n   * @return {RequestEncoding} Request encoding.\n   * @api\n   */\n  getRequestEncoding() {\n    return this.requestEncoding_;\n  }\n\n  /**\n   * Return the style of the WMTS source.\n   * @return {string} Style.\n   * @api\n   */\n  getStyle() {\n    return this.style_;\n  }\n\n  /**\n   * Return the version of the WMTS source.\n   * @return {string} Version.\n   * @api\n   */\n  getVersion() {\n    return this.version_;\n  }\n\n  /**\n   * @private\n   * @return {string} The key for the current dimensions.\n   */\n  getKeyForDimensions_() {\n    let i = 0;\n    const res = [];\n    for (const key in this.dimensions_) {\n      res[i++] = key + '-' + this.dimensions_[key];\n    }\n    return res.join('/');\n  }\n\n  /**\n   * Update the dimensions.\n   * @param {Object} dimensions Dimensions.\n   * @api\n   */\n  updateDimensions(dimensions) {\n    Object.assign(this.dimensions_, dimensions);\n    this.setKey(this.getKeyForDimensions_());\n  }\n\n  /**\n   * @param {string} template Template.\n   * @return {import(\"../Tile.js\").UrlFunction} Tile URL function.\n   */\n  createFromWMTSTemplate(template) {\n    const requestEncoding = this.requestEncoding_;\n\n    // context property names are lower case to allow for a case insensitive\n    // replacement as some services use different naming conventions\n    const context = {\n      'layer': this.layer_,\n      'style': this.style_,\n      'tilematrixset': this.matrixSet_,\n    };\n\n    if (requestEncoding == 'KVP') {\n      Object.assign(context, {\n        'Service': 'WMTS',\n        'Request': 'GetTile',\n        'Version': this.version_,\n        'Format': this.format_,\n      });\n    }\n\n    // TODO: we may want to create our own appendParams function so that params\n    // order conforms to wmts spec guidance, and so that we can avoid to escape\n    // special template params\n\n    template =\n      requestEncoding == 'KVP'\n        ? appendParams(template, context)\n        : template.replace(/\\{(\\w+?)\\}/g, function (m, p) {\n            return p.toLowerCase() in context ? context[p.toLowerCase()] : m;\n          });\n\n    const tileGrid = /** @type {import(\"../tilegrid/WMTS.js\").default} */ (\n      this.tileGrid\n    );\n    const dimensions = this.dimensions_;\n\n    return (\n      /**\n       * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n       * @param {number} pixelRatio Pixel ratio.\n       * @param {import(\"../proj/Projection.js\").default} projection Projection.\n       * @return {string|undefined} Tile URL.\n       */\n      function (tileCoord, pixelRatio, projection) {\n        if (!tileCoord) {\n          return undefined;\n        } else {\n          const localContext = {\n            'TileMatrix': tileGrid.getMatrixId(tileCoord[0]),\n            'TileCol': tileCoord[1],\n            'TileRow': tileCoord[2],\n          };\n          Object.assign(localContext, dimensions);\n          let url = template;\n          if (requestEncoding == 'KVP') {\n            url = appendParams(url, localContext);\n          } else {\n            url = url.replace(/\\{(\\w+?)\\}/g, function (m, p) {\n              return localContext[p];\n            });\n          }\n          return url;\n        }\n      }\n    );\n  }\n}\n\nexport default WMTS;\n\n/**\n * Generate source options from a capabilities object.\n * @param {Object} wmtsCap An object representing the capabilities document.\n * @param {!Object} config Configuration properties for the layer.  Defaults for\n *                  the layer will apply if not provided.\n *\n * Required config properties:\n *  - layer - {string} The layer identifier.\n *\n * Optional config properties:\n *  - matrixSet - {string} The matrix set identifier, required if there is\n *       more than one matrix set in the layer capabilities.\n *  - projection - {string} The desired CRS when no matrixSet is specified.\n *       eg: \"EPSG:3857\". If the desired projection is not available,\n *       an error is thrown.\n *  - requestEncoding - {string} url encoding format for the layer. Default is\n *       the first tile url format found in the GetCapabilities response.\n *  - style - {string} The name of the style\n *  - format - {string} Image format for the layer. Default is the first\n *       format returned in the GetCapabilities response.\n *  - crossOrigin - {string|null|undefined} Cross origin. Default is `undefined`.\n * @return {Options|null} WMTS source options object or `null` if the layer was not found.\n * @api\n */\nexport function optionsFromCapabilities(wmtsCap, config) {\n  const layers = wmtsCap['Contents']['Layer'];\n  const l = layers.find(function (elt) {\n    return elt['Identifier'] == config['layer'];\n  });\n  if (!l) {\n    return null;\n  }\n  const tileMatrixSets = wmtsCap['Contents']['TileMatrixSet'];\n  let idx;\n  if (l['TileMatrixSetLink'].length > 1) {\n    if ('projection' in config) {\n      idx = l['TileMatrixSetLink'].findIndex(function (elt) {\n        const tileMatrixSet = tileMatrixSets.find(function (el) {\n          return el['Identifier'] == elt['TileMatrixSet'];\n        });\n        const supportedCRS = tileMatrixSet['SupportedCRS'];\n        const proj1 = getProjection(supportedCRS);\n        const proj2 = getProjection(config['projection']);\n        if (proj1 && proj2) {\n          return equivalent(proj1, proj2);\n        } else {\n          return supportedCRS == config['projection'];\n        }\n      });\n    } else {\n      idx = l['TileMatrixSetLink'].findIndex(function (elt) {\n        return elt['TileMatrixSet'] == config['matrixSet'];\n      });\n    }\n  } else {\n    idx = 0;\n  }\n  if (idx < 0) {\n    idx = 0;\n  }\n  const matrixSet =\n    /** @type {string} */\n    (l['TileMatrixSetLink'][idx]['TileMatrixSet']);\n  const matrixLimits =\n    /** @type {Array<Object>} */\n    (l['TileMatrixSetLink'][idx]['TileMatrixSetLimits']);\n\n  let format = /** @type {string} */ (l['Format'][0]);\n  if ('format' in config) {\n    format = config['format'];\n  }\n  idx = l['Style'].findIndex(function (elt) {\n    if ('style' in config) {\n      return elt['Title'] == config['style'];\n    } else {\n      return elt['isDefault'];\n    }\n  });\n  if (idx < 0) {\n    idx = 0;\n  }\n  const style = /** @type {string} */ (l['Style'][idx]['Identifier']);\n\n  const dimensions = {};\n  if ('Dimension' in l) {\n    l['Dimension'].forEach(function (elt, index, array) {\n      const key = elt['Identifier'];\n      let value = elt['Default'];\n      if (value === undefined) {\n        value = elt['Value'][0];\n      }\n      dimensions[key] = value;\n    });\n  }\n\n  const matrixSets = wmtsCap['Contents']['TileMatrixSet'];\n  const matrixSetObj = matrixSets.find(function (elt) {\n    return elt['Identifier'] == matrixSet;\n  });\n\n  let projection;\n  const code = matrixSetObj['SupportedCRS'];\n  if (code) {\n    projection = getProjection(code);\n  }\n  if ('projection' in config) {\n    const projConfig = getProjection(config['projection']);\n    if (projConfig) {\n      if (!projection || equivalent(projConfig, projection)) {\n        projection = projConfig;\n      }\n    }\n  }\n\n  let wrapX = false;\n  const switchXY = projection.getAxisOrientation().substr(0, 2) == 'ne';\n\n  let matrix = matrixSetObj.TileMatrix[0];\n\n  // create default matrixLimit\n  let selectedMatrixLimit = {\n    MinTileCol: 0,\n    MinTileRow: 0,\n    // subtract one to end up at tile top left\n    MaxTileCol: matrix.MatrixWidth - 1,\n    MaxTileRow: matrix.MatrixHeight - 1,\n  };\n\n  //in case of matrix limits, use matrix limits to calculate extent\n  if (matrixLimits) {\n    selectedMatrixLimit = matrixLimits[matrixLimits.length - 1];\n    const m = matrixSetObj.TileMatrix.find(\n      (tileMatrixValue) =>\n        tileMatrixValue.Identifier === selectedMatrixLimit.TileMatrix ||\n        matrixSetObj.Identifier + ':' + tileMatrixValue.Identifier ===\n          selectedMatrixLimit.TileMatrix\n    );\n    if (m) {\n      matrix = m;\n    }\n  }\n\n  const resolution =\n    (matrix.ScaleDenominator * 0.00028) / projection.getMetersPerUnit(); // WMTS 1.0.0: standardized rendering pixel size\n  const origin = switchXY\n    ? [matrix.TopLeftCorner[1], matrix.TopLeftCorner[0]]\n    : matrix.TopLeftCorner;\n  const tileSpanX = matrix.TileWidth * resolution;\n  const tileSpanY = matrix.TileHeight * resolution;\n  let matrixSetExtent = matrixSetObj['BoundingBox'];\n  if (matrixSetExtent && switchXY) {\n    matrixSetExtent = [\n      matrixSetExtent[1],\n      matrixSetExtent[0],\n      matrixSetExtent[3],\n      matrixSetExtent[2],\n    ];\n  }\n  let extent = [\n    origin[0] + tileSpanX * selectedMatrixLimit.MinTileCol,\n    // add one to get proper bottom/right coordinate\n    origin[1] - tileSpanY * (1 + selectedMatrixLimit.MaxTileRow),\n    origin[0] + tileSpanX * (1 + selectedMatrixLimit.MaxTileCol),\n    origin[1] - tileSpanY * selectedMatrixLimit.MinTileRow,\n  ];\n\n  if (\n    matrixSetExtent !== undefined &&\n    !containsExtent(matrixSetExtent, extent)\n  ) {\n    const wgs84BoundingBox = l['WGS84BoundingBox'];\n    const wgs84ProjectionExtent = getProjection('EPSG:4326').getExtent();\n    extent = matrixSetExtent;\n    if (wgs84BoundingBox) {\n      wrapX =\n        wgs84BoundingBox[0] === wgs84ProjectionExtent[0] &&\n        wgs84BoundingBox[2] === wgs84ProjectionExtent[2];\n    } else {\n      const wgs84MatrixSetExtent = transformExtent(\n        matrixSetExtent,\n        matrixSetObj['SupportedCRS'],\n        'EPSG:4326'\n      );\n      // Ignore slight deviation from the correct x limits\n      wrapX =\n        wgs84MatrixSetExtent[0] - 1e-10 <= wgs84ProjectionExtent[0] &&\n        wgs84MatrixSetExtent[2] + 1e-10 >= wgs84ProjectionExtent[2];\n    }\n  }\n\n  const tileGrid = createFromCapabilitiesMatrixSet(\n    matrixSetObj,\n    extent,\n    matrixLimits\n  );\n\n  /** @type {!Array<string>} */\n  const urls = [];\n  let requestEncoding = config['requestEncoding'];\n  requestEncoding = requestEncoding !== undefined ? requestEncoding : '';\n\n  if (\n    'OperationsMetadata' in wmtsCap &&\n    'GetTile' in wmtsCap['OperationsMetadata']\n  ) {\n    const gets = wmtsCap['OperationsMetadata']['GetTile']['DCP']['HTTP']['Get'];\n\n    for (let i = 0, ii = gets.length; i < ii; ++i) {\n      if (gets[i]['Constraint']) {\n        const constraint = gets[i]['Constraint'].find(function (element) {\n          return element['name'] == 'GetEncoding';\n        });\n        const encodings = constraint['AllowedValues']['Value'];\n\n        if (requestEncoding === '') {\n          // requestEncoding not provided, use the first encoding from the list\n          requestEncoding = encodings[0];\n        }\n        if (requestEncoding === 'KVP') {\n          if (encodings.includes('KVP')) {\n            urls.push(/** @type {string} */ (gets[i]['href']));\n          }\n        } else {\n          break;\n        }\n      } else if (gets[i]['href']) {\n        requestEncoding = 'KVP';\n        urls.push(/** @type {string} */ (gets[i]['href']));\n      }\n    }\n  }\n  if (urls.length === 0) {\n    requestEncoding = 'REST';\n    l['ResourceURL'].forEach(function (element) {\n      if (element['resourceType'] === 'tile') {\n        format = element['format'];\n        urls.push(/** @type {string} */ (element['template']));\n      }\n    });\n  }\n\n  return {\n    urls: urls,\n    layer: config['layer'],\n    matrixSet: matrixSet,\n    format: format,\n    projection: projection,\n    requestEncoding: requestEncoding,\n    tileGrid: tileGrid,\n    style: style,\n    dimensions: dimensions,\n    wrapX: wrapX,\n    crossOrigin: config['crossOrigin'],\n  };\n}\n","/**\n * @module ol/layer/BaseImage\n */\nimport Layer from './Layer.js';\n\n/**\n * @template {import(\"../source/Image.js\").default} ImageSourceType\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {import(\"../Map.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link import(\"../Map.js\").default#addLayer map.addLayer()}.\n * @property {ImageSourceType} [source] Source for this layer.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n\n/**\n * @classdesc\n * Server-rendered images that are available for arbitrary extents and\n * resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Image.js\").default} ImageSourceType\n * @template {import(\"../renderer/Layer.js\").default} RendererType\n * @extends {Layer<ImageSourceType, RendererType>}\n * @api\n */\nclass BaseImageLayer extends Layer {\n  /**\n   * @param {Options<ImageSourceType>} [options] Layer options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n    super(options);\n  }\n}\n\nexport default BaseImageLayer;\n","/**\n * @module ol/renderer/Layer\n */\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport Observable from '../Observable.js';\nimport {abstract} from '../util.js';\n\n/**\n * @template {import(\"../layer/Layer.js\").default} LayerType\n */\nclass LayerRenderer extends Observable {\n  /**\n   * @param {LayerType} layer Layer.\n   */\n  constructor(layer) {\n    super();\n\n    /**\n     * The renderer is initialized and ready to render.\n     * @type {boolean}\n     */\n    this.ready = true;\n\n    /** @private */\n    this.boundHandleImageChange_ = this.handleImageChange_.bind(this);\n\n    /**\n     * @protected\n     * @type {LayerType}\n     */\n    this.layer_ = layer;\n\n    /**\n     * @type {import(\"../render/canvas/ExecutorGroup\").default}\n     */\n    this.declutterExecutorGroup = null;\n  }\n\n  /**\n   * Asynchronous layer level hit detection.\n   * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n   * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with\n   * an array of features.\n   */\n  getFeatures(pixel) {\n    return abstract();\n  }\n\n  /**\n   * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n   * @return {Uint8ClampedArray|Uint8Array|Float32Array|DataView|null} Pixel data.\n   */\n  getData(pixel) {\n    return null;\n  }\n\n  /**\n   * Determine whether render should be called.\n   * @abstract\n   * @param {import(\"../Map.js\").FrameState} frameState Frame state.\n   * @return {boolean} Layer is ready to be rendered.\n   */\n  prepareFrame(frameState) {\n    return abstract();\n  }\n\n  /**\n   * Render the layer.\n   * @abstract\n   * @param {import(\"../Map.js\").FrameState} frameState Frame state.\n   * @param {HTMLElement} target Target that may be used to render content to.\n   * @return {HTMLElement} The rendered element.\n   */\n  renderFrame(frameState, target) {\n    return abstract();\n  }\n\n  /**\n   * @param {Object<number, Object<string, import(\"../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n   * @param {number} zoom Zoom level.\n   * @param {import(\"../Tile.js\").default} tile Tile.\n   * @return {boolean|void} If `false`, the tile will not be considered loaded.\n   */\n  loadedTileCallback(tiles, zoom, tile) {\n    if (!tiles[zoom]) {\n      tiles[zoom] = {};\n    }\n    tiles[zoom][tile.tileCoord.toString()] = tile;\n    return undefined;\n  }\n\n  /**\n   * Create a function that adds loaded tiles to the tile lookup.\n   * @param {import(\"../source/Tile.js\").default} source Tile source.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection of the tiles.\n   * @param {Object<number, Object<string, import(\"../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n   * @return {function(number, import(\"../TileRange.js\").default):boolean} A function that can be\n   *     called with a zoom level and a tile range to add loaded tiles to the lookup.\n   * @protected\n   */\n  createLoadedTileFinder(source, projection, tiles) {\n    return (\n      /**\n       * @param {number} zoom Zoom level.\n       * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n       * @return {boolean} The tile range is fully loaded.\n       * @this {LayerRenderer}\n       */\n      function (zoom, tileRange) {\n        const callback = this.loadedTileCallback.bind(this, tiles, zoom);\n        return source.forEachLoadedTile(projection, zoom, tileRange, callback);\n      }.bind(this)\n    );\n  }\n  /**\n   * @abstract\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../Map.js\").FrameState} frameState Frame state.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {import(\"./vector.js\").FeatureCallback<T>} callback Feature callback.\n   * @param {Array<import(\"./Map.js\").HitMatch<T>>} matches The hit detected matches with tolerance.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  forEachFeatureAtCoordinate(\n    coordinate,\n    frameState,\n    hitTolerance,\n    callback,\n    matches\n  ) {\n    return undefined;\n  }\n\n  /**\n   * @return {LayerType} Layer.\n   */\n  getLayer() {\n    return this.layer_;\n  }\n\n  /**\n   * Perform action necessary to get the layer rendered after new fonts have loaded\n   * @abstract\n   */\n  handleFontsChanged() {}\n\n  /**\n   * Handle changes in image state.\n   * @param {import(\"../events/Event.js\").default} event Image change event.\n   * @private\n   */\n  handleImageChange_(event) {\n    const image = /** @type {import(\"../Image.js\").default} */ (event.target);\n    if (image.getState() === ImageState.LOADED) {\n      this.renderIfReadyAndVisible();\n    }\n  }\n\n  /**\n   * Load the image if not already loaded, and register the image change\n   * listener if needed.\n   * @param {import(\"../ImageBase.js\").default} image Image.\n   * @return {boolean} `true` if the image is already loaded, `false` otherwise.\n   * @protected\n   */\n  loadImage(image) {\n    let imageState = image.getState();\n    if (imageState != ImageState.LOADED && imageState != ImageState.ERROR) {\n      image.addEventListener(EventType.CHANGE, this.boundHandleImageChange_);\n    }\n    if (imageState == ImageState.IDLE) {\n      image.load();\n      imageState = image.getState();\n    }\n    return imageState == ImageState.LOADED;\n  }\n\n  /**\n   * @protected\n   */\n  renderIfReadyAndVisible() {\n    const layer = this.getLayer();\n    if (layer && layer.getVisible() && layer.getSourceState() === 'ready') {\n      layer.changed();\n    }\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    delete this.layer_;\n    super.disposeInternal();\n  }\n}\n\nexport default LayerRenderer;\n","/**\n * @module ol/renderer/canvas/Layer\n */\nimport LayerRenderer from '../Layer.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport {\n  apply as applyTransform,\n  compose as composeTransform,\n  create as createTransform,\n} from '../../transform.js';\nimport {asArray} from '../../color.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {equals} from '../../array.js';\nimport {\n  getBottomLeft,\n  getBottomRight,\n  getTopLeft,\n  getTopRight,\n} from '../../extent.js';\n\n/**\n * @type {Array<HTMLCanvasElement>}\n */\nexport const canvasPool = [];\n\n/**\n * @type {CanvasRenderingContext2D}\n */\nlet pixelContext = null;\n\nfunction createPixelContext() {\n  const canvas = document.createElement('canvas');\n  canvas.width = 1;\n  canvas.height = 1;\n  pixelContext = canvas.getContext('2d');\n}\n\n/**\n * @abstract\n * @template {import(\"../../layer/Layer.js\").default} LayerType\n * @extends {LayerRenderer<LayerType>}\n */\nclass CanvasLayerRenderer extends LayerRenderer {\n  /**\n   * @param {LayerType} layer Layer.\n   */\n  constructor(layer) {\n    super(layer);\n\n    /**\n     * @protected\n     * @type {HTMLElement}\n     */\n    this.container = null;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.renderedResolution;\n\n    /**\n     * A temporary transform.  The values in this transform should only be used in a\n     * function that sets the values.\n     * @protected\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.tempTransform = createTransform();\n\n    /**\n     * The transform for rendered pixels to viewport CSS pixels.  This transform must\n     * be set when rendering a frame and may be used by other functions after rendering.\n     * @protected\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.pixelTransform = createTransform();\n\n    /**\n     * The transform for viewport CSS pixels to rendered pixels.  This transform must\n     * be set when rendering a frame and may be used by other functions after rendering.\n     * @protected\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.inversePixelTransform = createTransform();\n\n    /**\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context = null;\n\n    /**\n     * @type {boolean}\n     */\n    this.containerReused = false;\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.pixelContext_ = null;\n\n    /**\n     * @protected\n     * @type {import(\"../../Map.js\").FrameState|null}\n     */\n    this.frameState = null;\n  }\n\n  /**\n   * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n   * @param {number} col The column index.\n   * @param {number} row The row index.\n   * @return {Uint8ClampedArray|null} The image data.\n   */\n  getImageData(image, col, row) {\n    if (!pixelContext) {\n      createPixelContext();\n    }\n    pixelContext.clearRect(0, 0, 1, 1);\n\n    let data;\n    try {\n      pixelContext.drawImage(image, col, row, 1, 1, 0, 0, 1, 1);\n      data = pixelContext.getImageData(0, 0, 1, 1).data;\n    } catch (err) {\n      pixelContext = null;\n      return null;\n    }\n    return data;\n  }\n\n  /**\n   * @param {import('../../Map.js').FrameState} frameState Frame state.\n   * @return {string} Background color.\n   */\n  getBackground(frameState) {\n    const layer = this.getLayer();\n    let background = layer.getBackground();\n    if (typeof background === 'function') {\n      background = background(frameState.viewState.resolution);\n    }\n    return background || undefined;\n  }\n\n  /**\n   * Get a rendering container from an existing target, if compatible.\n   * @param {HTMLElement} target Potential render target.\n   * @param {string} transform CSS Transform.\n   * @param {string} [backgroundColor] Background color.\n   */\n  useContainer(target, transform, backgroundColor) {\n    const layerClassName = this.getLayer().getClassName();\n    let container, context;\n    if (\n      target &&\n      target.className === layerClassName &&\n      (!backgroundColor ||\n        (target &&\n          target.style.backgroundColor &&\n          equals(\n            asArray(target.style.backgroundColor),\n            asArray(backgroundColor)\n          )))\n    ) {\n      const canvas = target.firstElementChild;\n      if (canvas instanceof HTMLCanvasElement) {\n        context = canvas.getContext('2d');\n      }\n    }\n    if (context && context.canvas.style.transform === transform) {\n      // Container of the previous layer renderer can be used.\n      this.container = target;\n      this.context = context;\n      this.containerReused = true;\n    } else if (this.containerReused) {\n      // Previously reused container cannot be used any more.\n      this.container = null;\n      this.context = null;\n      this.containerReused = false;\n    }\n    if (!this.container) {\n      container = document.createElement('div');\n      container.className = layerClassName;\n      let style = container.style;\n      style.position = 'absolute';\n      style.width = '100%';\n      style.height = '100%';\n      context = createCanvasContext2D();\n      const canvas = context.canvas;\n      container.appendChild(canvas);\n      style = canvas.style;\n      style.position = 'absolute';\n      style.left = '0';\n      style.transformOrigin = 'top left';\n      this.container = container;\n      this.context = context;\n    }\n    if (\n      !this.containerReused &&\n      backgroundColor &&\n      !this.container.style.backgroundColor\n    ) {\n      this.container.style.backgroundColor = backgroundColor;\n    }\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../extent.js\").Extent} extent Clip extent.\n   * @protected\n   */\n  clipUnrotated(context, frameState, extent) {\n    const topLeft = getTopLeft(extent);\n    const topRight = getTopRight(extent);\n    const bottomRight = getBottomRight(extent);\n    const bottomLeft = getBottomLeft(extent);\n\n    applyTransform(frameState.coordinateToPixelTransform, topLeft);\n    applyTransform(frameState.coordinateToPixelTransform, topRight);\n    applyTransform(frameState.coordinateToPixelTransform, bottomRight);\n    applyTransform(frameState.coordinateToPixelTransform, bottomLeft);\n\n    const inverted = this.inversePixelTransform;\n    applyTransform(inverted, topLeft);\n    applyTransform(inverted, topRight);\n    applyTransform(inverted, bottomRight);\n    applyTransform(inverted, bottomLeft);\n\n    context.save();\n    context.beginPath();\n    context.moveTo(Math.round(topLeft[0]), Math.round(topLeft[1]));\n    context.lineTo(Math.round(topRight[0]), Math.round(topRight[1]));\n    context.lineTo(Math.round(bottomRight[0]), Math.round(bottomRight[1]));\n    context.lineTo(Math.round(bottomLeft[0]), Math.round(bottomLeft[1]));\n    context.clip();\n  }\n\n  /**\n   * @param {import(\"../../render/EventType.js\").default} type Event type.\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @private\n   */\n  dispatchRenderEvent_(type, context, frameState) {\n    const layer = this.getLayer();\n    if (layer.hasListener(type)) {\n      const event = new RenderEvent(\n        type,\n        this.inversePixelTransform,\n        frameState,\n        context\n      );\n      layer.dispatchEvent(event);\n    }\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n  preRender(context, frameState) {\n    this.frameState = frameState;\n    this.dispatchRenderEvent_(RenderEventType.PRERENDER, context, frameState);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n  postRender(context, frameState) {\n    this.dispatchRenderEvent_(RenderEventType.POSTRENDER, context, frameState);\n  }\n\n  /**\n   * Creates a transform for rendering to an element that will be rotated after rendering.\n   * @param {import(\"../../coordinate.js\").Coordinate} center Center.\n   * @param {number} resolution Resolution.\n   * @param {number} rotation Rotation.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {number} width Width of the rendered element (in pixels).\n   * @param {number} height Height of the rendered element (in pixels).\n   * @param {number} offsetX Offset on the x-axis in view coordinates.\n   * @protected\n   * @return {!import(\"../../transform.js\").Transform} Transform.\n   */\n  getRenderTransform(\n    center,\n    resolution,\n    rotation,\n    pixelRatio,\n    width,\n    height,\n    offsetX\n  ) {\n    const dx1 = width / 2;\n    const dy1 = height / 2;\n    const sx = pixelRatio / resolution;\n    const sy = -sx;\n    const dx2 = -center[0] + offsetX;\n    const dy2 = -center[1];\n    return composeTransform(\n      this.tempTransform,\n      dx1,\n      dy1,\n      sx,\n      sy,\n      -rotation,\n      dx2,\n      dy2\n    );\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    delete this.frameState;\n    super.disposeInternal();\n  }\n}\n\nexport default CanvasLayerRenderer;\n","/**\n * @module ol/renderer/canvas/ImageLayer\n */\nimport CanvasLayerRenderer from './Layer.js';\nimport ImageState from '../../ImageState.js';\nimport ViewHint from '../../ViewHint.js';\nimport {\n  apply as applyTransform,\n  compose as composeTransform,\n  makeInverse,\n  toString as toTransformString,\n} from '../../transform.js';\nimport {\n  containsCoordinate,\n  containsExtent,\n  getHeight,\n  getIntersection,\n  getWidth,\n  intersects as intersectsExtent,\n  isEmpty,\n} from '../../extent.js';\nimport {fromUserExtent} from '../../proj.js';\n\n/**\n * @classdesc\n * Canvas renderer for image layers.\n * @api\n */\nclass CanvasImageLayerRenderer extends CanvasLayerRenderer {\n  /**\n   * @param {import(\"../../layer/Image.js\").default} imageLayer Image layer.\n   */\n  constructor(imageLayer) {\n    super(imageLayer);\n\n    /**\n     * @protected\n     * @type {?import(\"../../ImageBase.js\").default}\n     */\n    this.image_ = null;\n  }\n\n  /**\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   */\n  getImage() {\n    return !this.image_ ? null : this.image_.getImage();\n  }\n\n  /**\n   * Determine whether render should be called.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @return {boolean} Layer is ready to be rendered.\n   */\n  prepareFrame(frameState) {\n    const layerState = frameState.layerStatesArray[frameState.layerIndex];\n    const pixelRatio = frameState.pixelRatio;\n    const viewState = frameState.viewState;\n    const viewResolution = viewState.resolution;\n\n    const imageSource = this.getLayer().getSource();\n\n    const hints = frameState.viewHints;\n\n    let renderedExtent = frameState.extent;\n    if (layerState.extent !== undefined) {\n      renderedExtent = getIntersection(\n        renderedExtent,\n        fromUserExtent(layerState.extent, viewState.projection)\n      );\n    }\n\n    if (\n      !hints[ViewHint.ANIMATING] &&\n      !hints[ViewHint.INTERACTING] &&\n      !isEmpty(renderedExtent)\n    ) {\n      if (imageSource) {\n        const projection = viewState.projection;\n        const image = imageSource.getImage(\n          renderedExtent,\n          viewResolution,\n          pixelRatio,\n          projection\n        );\n        if (image) {\n          if (this.loadImage(image)) {\n            this.image_ = image;\n          } else if (image.getState() === ImageState.EMPTY) {\n            this.image_ = null;\n          }\n        }\n      } else {\n        this.image_ = null;\n      }\n    }\n\n    return !!this.image_;\n  }\n\n  /**\n   * @param {import(\"../../pixel.js\").Pixel} pixel Pixel.\n   * @return {Uint8ClampedArray} Data at the pixel location.\n   */\n  getData(pixel) {\n    const frameState = this.frameState;\n    if (!frameState) {\n      return null;\n    }\n\n    const layer = this.getLayer();\n    const coordinate = applyTransform(\n      frameState.pixelToCoordinateTransform,\n      pixel.slice()\n    );\n\n    const layerExtent = layer.getExtent();\n    if (layerExtent) {\n      if (!containsCoordinate(layerExtent, coordinate)) {\n        return null;\n      }\n    }\n\n    const imageExtent = this.image_.getExtent();\n    const img = this.image_.getImage();\n\n    const imageMapWidth = getWidth(imageExtent);\n    const col = Math.floor(\n      img.width * ((coordinate[0] - imageExtent[0]) / imageMapWidth)\n    );\n    if (col < 0 || col >= img.width) {\n      return null;\n    }\n\n    const imageMapHeight = getHeight(imageExtent);\n    const row = Math.floor(\n      img.height * ((imageExtent[3] - coordinate[1]) / imageMapHeight)\n    );\n    if (row < 0 || row >= img.height) {\n      return null;\n    }\n\n    return this.getImageData(img, col, row);\n  }\n\n  /**\n   * Render the layer.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @param {HTMLElement} target Target that may be used to render content to.\n   * @return {HTMLElement} The rendered element.\n   */\n  renderFrame(frameState, target) {\n    const image = this.image_;\n    const imageExtent = image.getExtent();\n    const imageResolution = image.getResolution();\n    const imagePixelRatio = image.getPixelRatio();\n    const layerState = frameState.layerStatesArray[frameState.layerIndex];\n    const pixelRatio = frameState.pixelRatio;\n    const viewState = frameState.viewState;\n    const viewCenter = viewState.center;\n    const viewResolution = viewState.resolution;\n    const scale =\n      (pixelRatio * imageResolution) / (viewResolution * imagePixelRatio);\n\n    const extent = frameState.extent;\n    const resolution = viewState.resolution;\n    const rotation = viewState.rotation;\n    // desired dimensions of the canvas in pixels\n    const width = Math.round((getWidth(extent) / resolution) * pixelRatio);\n    const height = Math.round((getHeight(extent) / resolution) * pixelRatio);\n\n    // set forward and inverse pixel transforms\n    composeTransform(\n      this.pixelTransform,\n      frameState.size[0] / 2,\n      frameState.size[1] / 2,\n      1 / pixelRatio,\n      1 / pixelRatio,\n      rotation,\n      -width / 2,\n      -height / 2\n    );\n    makeInverse(this.inversePixelTransform, this.pixelTransform);\n\n    const canvasTransform = toTransformString(this.pixelTransform);\n\n    this.useContainer(target, canvasTransform, this.getBackground(frameState));\n\n    const context = this.context;\n    const canvas = context.canvas;\n\n    if (canvas.width != width || canvas.height != height) {\n      canvas.width = width;\n      canvas.height = height;\n    } else if (!this.containerReused) {\n      context.clearRect(0, 0, width, height);\n    }\n\n    // clipped rendering if layer extent is set\n    let clipped = false;\n    let render = true;\n    if (layerState.extent) {\n      const layerExtent = fromUserExtent(\n        layerState.extent,\n        viewState.projection\n      );\n      render = intersectsExtent(layerExtent, frameState.extent);\n      clipped = render && !containsExtent(layerExtent, frameState.extent);\n      if (clipped) {\n        this.clipUnrotated(context, frameState, layerExtent);\n      }\n    }\n\n    const img = image.getImage();\n\n    const transform = composeTransform(\n      this.tempTransform,\n      width / 2,\n      height / 2,\n      scale,\n      scale,\n      0,\n      (imagePixelRatio * (imageExtent[0] - viewCenter[0])) / imageResolution,\n      (imagePixelRatio * (viewCenter[1] - imageExtent[3])) / imageResolution\n    );\n\n    this.renderedResolution = (imageResolution * pixelRatio) / imagePixelRatio;\n\n    const dw = img.width * transform[0];\n    const dh = img.height * transform[3];\n\n    if (!this.getLayer().getSource().getInterpolate()) {\n      context.imageSmoothingEnabled = false;\n    }\n\n    this.preRender(context, frameState);\n    if (render && dw >= 0.5 && dh >= 0.5) {\n      const dx = transform[4];\n      const dy = transform[5];\n      const opacity = layerState.opacity;\n      let previousAlpha;\n      if (opacity !== 1) {\n        previousAlpha = context.globalAlpha;\n        context.globalAlpha = opacity;\n      }\n      context.drawImage(img, 0, 0, +img.width, +img.height, dx, dy, dw, dh);\n      if (opacity !== 1) {\n        context.globalAlpha = previousAlpha;\n      }\n    }\n    this.postRender(context, frameState);\n\n    if (clipped) {\n      context.restore();\n    }\n    context.imageSmoothingEnabled = true;\n\n    if (canvasTransform !== canvas.style.transform) {\n      canvas.style.transform = canvasTransform;\n    }\n\n    return this.container;\n  }\n}\n\nexport default CanvasImageLayerRenderer;\n","/**\n * @module ol/layer/Image\n */\nimport BaseImageLayer from './BaseImage.js';\nimport CanvasImageLayerRenderer from '../renderer/canvas/ImageLayer.js';\n\n/**\n * @classdesc\n * Server-rendered images that are available for arbitrary extents and\n * resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Image.js\").default} ImageSourceType\n * @extends {BaseImageLayer<ImageSourceType, CanvasImageLayerRenderer>}\n * @api\n */\nclass ImageLayer extends BaseImageLayer {\n  /**\n   * @param {import(\"./BaseImage.js\").Options<ImageSourceType>} [options] Layer options.\n   */\n  constructor(options) {\n    super(options);\n  }\n\n  createRenderer() {\n    return new CanvasImageLayerRenderer(this);\n  }\n\n  /**\n   * Get data for a pixel location.  A four element RGBA array will be returned.  For requests outside the\n   * layer extent, `null` will be returned.  Data for an image can only be retrieved if the\n   * source's `crossOrigin` property is set.\n   *\n   * ```js\n   * // display layer data on every pointer move\n   * map.on('pointermove', (event) => {\n   *   console.log(layer.getData(event.pixel));\n   * });\n   * ```\n   * @param {import(\"../pixel\").Pixel} pixel Pixel.\n   * @return {Uint8ClampedArray|Uint8Array|Float32Array|DataView|null} Pixel data.\n   * @api\n   */\n  getData(pixel) {\n    return super.getData(pixel);\n  }\n}\n\nexport default ImageLayer;\n","/**\n * @module ol/layer/TileProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  PRELOAD: 'preload',\n  USE_INTERIM_TILES_ON_ERROR: 'useInterimTilesOnError',\n};\n","/**\n * @module ol/layer/BaseTile\n */\nimport Layer from './Layer.js';\nimport TileProperty from './TileProperty.js';\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./Base\").BaseLayerObjectEventTypes|\n *     'change:source'|'change:preload'|'change:useInterimTilesOnError', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../render/EventType\").LayerRenderEventTypes, import(\"../render/Event\").default, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"./Base\").BaseLayerObjectEventTypes|\n *   'change:source'|'change:preload'|'change:useInterimTilesOnError'|import(\"../render/EventType\").LayerRenderEventTypes, Return>} BaseTileLayerOnSignature\n */\n\n/**\n * @template {import(\"../source/Tile.js\").default} TileSourceType\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {TileSourceType} [source] Source for this layer.\n * @property {import(\"../Map.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link import(\"../Map.js\").default#addLayer map.addLayer()}.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Tile.js\").default} TileSourceType\n * @template {import(\"../renderer/Layer.js\").default} RendererType\n * @extends {Layer<TileSourceType, RendererType>}\n * @api\n */\nclass BaseTileLayer extends Layer {\n  /**\n   * @param {Options<TileSourceType>} [options] Tile layer options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    const baseOptions = Object.assign({}, options);\n\n    delete baseOptions.preload;\n    delete baseOptions.useInterimTilesOnError;\n    super(baseOptions);\n\n    /***\n     * @type {BaseTileLayerOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {BaseTileLayerOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {BaseTileLayerOnSignature<void>}\n     */\n    this.un;\n\n    this.setPreload(options.preload !== undefined ? options.preload : 0);\n    this.setUseInterimTilesOnError(\n      options.useInterimTilesOnError !== undefined\n        ? options.useInterimTilesOnError\n        : true\n    );\n  }\n\n  /**\n   * Return the level as number to which we will preload tiles up to.\n   * @return {number} The level to preload tiles up to.\n   * @observable\n   * @api\n   */\n  getPreload() {\n    return /** @type {number} */ (this.get(TileProperty.PRELOAD));\n  }\n\n  /**\n   * Set the level as number to which we will preload tiles up to.\n   * @param {number} preload The level to preload tiles up to.\n   * @observable\n   * @api\n   */\n  setPreload(preload) {\n    this.set(TileProperty.PRELOAD, preload);\n  }\n\n  /**\n   * Whether we use interim tiles on error.\n   * @return {boolean} Use interim tiles on error.\n   * @observable\n   * @api\n   */\n  getUseInterimTilesOnError() {\n    return /** @type {boolean} */ (\n      this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)\n    );\n  }\n\n  /**\n   * Set whether we use interim tiles on error.\n   * @param {boolean} useInterimTilesOnError Use interim tiles on error.\n   * @observable\n   * @api\n   */\n  setUseInterimTilesOnError(useInterimTilesOnError) {\n    this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR, useInterimTilesOnError);\n  }\n\n  /**\n   * Get data for a pixel location.  The return type depends on the source data.  For image tiles,\n   * a four element RGBA array will be returned.  For data tiles, the array length will match the\n   * number of bands in the dataset.  For requests outside the layer extent, `null` will be returned.\n   * Data for a image tiles can only be retrieved if the source's `crossOrigin` property is set.\n   *\n   * ```js\n   * // display layer data on every pointer move\n   * map.on('pointermove', (event) => {\n   *   console.log(layer.getData(event.pixel));\n   * });\n   * ```\n   * @param {import(\"../pixel\").Pixel} pixel Pixel.\n   * @return {Uint8ClampedArray|Uint8Array|Float32Array|DataView|null} Pixel data.\n   * @api\n   */\n  getData(pixel) {\n    return super.getData(pixel);\n  }\n}\n\nexport default BaseTileLayer;\n","/**\n * @module ol/renderer/canvas/TileLayer\n */\nimport CanvasLayerRenderer from './Layer.js';\nimport ImageTile from '../../ImageTile.js';\nimport ReprojTile from '../../reproj/Tile.js';\nimport TileRange from '../../TileRange.js';\nimport TileState from '../../TileState.js';\nimport {\n  apply as applyTransform,\n  compose as composeTransform,\n  makeInverse,\n  toString as toTransformString,\n} from '../../transform.js';\nimport {\n  containsCoordinate,\n  createEmpty,\n  equals,\n  getHeight,\n  getIntersection,\n  getRotatedViewport,\n  getTopLeft,\n  getWidth,\n  intersects,\n} from '../../extent.js';\nimport {fromUserExtent} from '../../proj.js';\nimport {getUid} from '../../util.js';\nimport {numberSafeCompareFunction} from '../../array.js';\nimport {toSize} from '../../size.js';\n\n/**\n * @classdesc\n * Canvas renderer for tile layers.\n * @api\n * @template {import(\"../../layer/Tile.js\").default<import(\"../../source/Tile.js\").default>|import(\"../../layer/VectorTile.js\").default} [LayerType=import(\"../../layer/Tile.js\").default<import(\"../../source/Tile.js\").default>|import(\"../../layer/VectorTile.js\").default]\n * @extends {CanvasLayerRenderer<LayerType>}\n */\nclass CanvasTileLayerRenderer extends CanvasLayerRenderer {\n  /**\n   * @param {LayerType} tileLayer Tile layer.\n   */\n  constructor(tileLayer) {\n    super(tileLayer);\n\n    /**\n     * Rendered extent has changed since the previous `renderFrame()` call\n     * @type {boolean}\n     */\n    this.extentChanged = true;\n\n    /**\n     * @private\n     * @type {?import(\"../../extent.js\").Extent}\n     */\n    this.renderedExtent_ = null;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.renderedPixelRatio;\n\n    /**\n     * @protected\n     * @type {import(\"../../proj/Projection.js\").default}\n     */\n    this.renderedProjection = null;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.renderedRevision;\n\n    /**\n     * @protected\n     * @type {!Array<import(\"../../Tile.js\").default>}\n     */\n    this.renderedTiles = [];\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.newTiles_ = false;\n\n    /**\n     * @protected\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.tmpExtent = createEmpty();\n\n    /**\n     * @private\n     * @type {import(\"../../TileRange.js\").default}\n     */\n    this.tmpTileRange_ = new TileRange(0, 0, 0, 0);\n  }\n\n  /**\n   * @protected\n   * @param {import(\"../../Tile.js\").default} tile Tile.\n   * @return {boolean} Tile is drawable.\n   */\n  isDrawableTile(tile) {\n    const tileLayer = this.getLayer();\n    const tileState = tile.getState();\n    const useInterimTilesOnError = tileLayer.getUseInterimTilesOnError();\n    return (\n      tileState == TileState.LOADED ||\n      tileState == TileState.EMPTY ||\n      (tileState == TileState.ERROR && !useInterimTilesOnError)\n    );\n  }\n\n  /**\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @return {!import(\"../../Tile.js\").default} Tile.\n   */\n  getTile(z, x, y, frameState) {\n    const pixelRatio = frameState.pixelRatio;\n    const projection = frameState.viewState.projection;\n    const tileLayer = this.getLayer();\n    const tileSource = tileLayer.getSource();\n    let tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n    if (tile.getState() == TileState.ERROR) {\n      if (tileLayer.getUseInterimTilesOnError() && tileLayer.getPreload() > 0) {\n        // Preloaded tiles for lower resolutions might have finished loading.\n        this.newTiles_ = true;\n      }\n    }\n    if (!this.isDrawableTile(tile)) {\n      tile = tile.getInterimTile();\n    }\n    return tile;\n  }\n\n  /**\n   * @param {import(\"../../pixel.js\").Pixel} pixel Pixel.\n   * @return {Uint8ClampedArray} Data at the pixel location.\n   */\n  getData(pixel) {\n    const frameState = this.frameState;\n    if (!frameState) {\n      return null;\n    }\n\n    const layer = this.getLayer();\n    const coordinate = applyTransform(\n      frameState.pixelToCoordinateTransform,\n      pixel.slice()\n    );\n\n    const layerExtent = layer.getExtent();\n    if (layerExtent) {\n      if (!containsCoordinate(layerExtent, coordinate)) {\n        return null;\n      }\n    }\n\n    const pixelRatio = frameState.pixelRatio;\n    const projection = frameState.viewState.projection;\n    const viewState = frameState.viewState;\n    const source = layer.getRenderSource();\n    const tileGrid = source.getTileGridForProjection(viewState.projection);\n    const tilePixelRatio = source.getTilePixelRatio(frameState.pixelRatio);\n\n    for (\n      let z = tileGrid.getZForResolution(viewState.resolution);\n      z >= tileGrid.getMinZoom();\n      --z\n    ) {\n      const tileCoord = tileGrid.getTileCoordForCoordAndZ(coordinate, z);\n      const tile = source.getTile(\n        z,\n        tileCoord[1],\n        tileCoord[2],\n        pixelRatio,\n        projection\n      );\n      if (\n        !(tile instanceof ImageTile || tile instanceof ReprojTile) ||\n        (tile instanceof ReprojTile && tile.getState() === TileState.EMPTY)\n      ) {\n        return null;\n      }\n\n      if (tile.getState() !== TileState.LOADED) {\n        continue;\n      }\n\n      const tileOrigin = tileGrid.getOrigin(z);\n      const tileSize = toSize(tileGrid.getTileSize(z));\n      const tileResolution = tileGrid.getResolution(z);\n\n      const col = Math.floor(\n        tilePixelRatio *\n          ((coordinate[0] - tileOrigin[0]) / tileResolution -\n            tileCoord[1] * tileSize[0])\n      );\n\n      const row = Math.floor(\n        tilePixelRatio *\n          ((tileOrigin[1] - coordinate[1]) / tileResolution -\n            tileCoord[2] * tileSize[1])\n      );\n\n      const gutter = Math.round(\n        tilePixelRatio * source.getGutterForProjection(viewState.projection)\n      );\n\n      return this.getImageData(tile.getImage(), col + gutter, row + gutter);\n    }\n\n    return null;\n  }\n\n  /**\n   * @param {Object<number, Object<string, import(\"../../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n   * @param {number} zoom Zoom level.\n   * @param {import(\"../../Tile.js\").default} tile Tile.\n   * @return {boolean|void} If `false`, the tile will not be considered loaded.\n   */\n  loadedTileCallback(tiles, zoom, tile) {\n    if (this.isDrawableTile(tile)) {\n      return super.loadedTileCallback(tiles, zoom, tile);\n    }\n    return false;\n  }\n\n  /**\n   * Determine whether render should be called.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @return {boolean} Layer is ready to be rendered.\n   */\n  prepareFrame(frameState) {\n    return !!this.getLayer().getSource();\n  }\n\n  /**\n   * Render the layer.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @param {HTMLElement} target Target that may be used to render content to.\n   * @return {HTMLElement} The rendered element.\n   */\n  renderFrame(frameState, target) {\n    const layerState = frameState.layerStatesArray[frameState.layerIndex];\n    const viewState = frameState.viewState;\n    const projection = viewState.projection;\n    const viewResolution = viewState.resolution;\n    const viewCenter = viewState.center;\n    const rotation = viewState.rotation;\n    const pixelRatio = frameState.pixelRatio;\n\n    const tileLayer = this.getLayer();\n    const tileSource = tileLayer.getSource();\n    const sourceRevision = tileSource.getRevision();\n    const tileGrid = tileSource.getTileGridForProjection(projection);\n    const z = tileGrid.getZForResolution(viewResolution, tileSource.zDirection);\n    const tileResolution = tileGrid.getResolution(z);\n\n    let extent = frameState.extent;\n    const resolution = frameState.viewState.resolution;\n    const tilePixelRatio = tileSource.getTilePixelRatio(pixelRatio);\n    // desired dimensions of the canvas in pixels\n    const width = Math.round((getWidth(extent) / resolution) * pixelRatio);\n    const height = Math.round((getHeight(extent) / resolution) * pixelRatio);\n\n    const layerExtent =\n      layerState.extent && fromUserExtent(layerState.extent, projection);\n    if (layerExtent) {\n      extent = getIntersection(\n        extent,\n        fromUserExtent(layerState.extent, projection)\n      );\n    }\n\n    const dx = (tileResolution * width) / 2 / tilePixelRatio;\n    const dy = (tileResolution * height) / 2 / tilePixelRatio;\n    const canvasExtent = [\n      viewCenter[0] - dx,\n      viewCenter[1] - dy,\n      viewCenter[0] + dx,\n      viewCenter[1] + dy,\n    ];\n\n    const tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n\n    /**\n     * @type {Object<number, Object<string, import(\"../../Tile.js\").default>>}\n     */\n    const tilesToDrawByZ = {};\n    tilesToDrawByZ[z] = {};\n\n    const findLoadedTiles = this.createLoadedTileFinder(\n      tileSource,\n      projection,\n      tilesToDrawByZ\n    );\n\n    const tmpExtent = this.tmpExtent;\n    const tmpTileRange = this.tmpTileRange_;\n    this.newTiles_ = false;\n    const viewport = rotation\n      ? getRotatedViewport(\n          viewState.center,\n          resolution,\n          rotation,\n          frameState.size\n        )\n      : undefined;\n    for (let x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (let y = tileRange.minY; y <= tileRange.maxY; ++y) {\n        if (\n          rotation &&\n          !tileGrid.tileCoordIntersectsViewport([z, x, y], viewport)\n        ) {\n          continue;\n        }\n        const tile = this.getTile(z, x, y, frameState);\n        if (this.isDrawableTile(tile)) {\n          const uid = getUid(this);\n          if (tile.getState() == TileState.LOADED) {\n            tilesToDrawByZ[z][tile.tileCoord.toString()] = tile;\n            let inTransition = tile.inTransition(uid);\n            if (inTransition && layerState.opacity !== 1) {\n              // Skipping transition when layer is not fully opaque avoids visual artifacts.\n              tile.endTransition(uid);\n              inTransition = false;\n            }\n            if (\n              !this.newTiles_ &&\n              (inTransition || !this.renderedTiles.includes(tile))\n            ) {\n              this.newTiles_ = true;\n            }\n          }\n          if (tile.getAlpha(uid, frameState.time) === 1) {\n            // don't look for alt tiles if alpha is 1\n            continue;\n          }\n        }\n\n        const childTileRange = tileGrid.getTileCoordChildTileRange(\n          tile.tileCoord,\n          tmpTileRange,\n          tmpExtent\n        );\n\n        let covered = false;\n        if (childTileRange) {\n          covered = findLoadedTiles(z + 1, childTileRange);\n        }\n        if (!covered) {\n          tileGrid.forEachTileCoordParentTileRange(\n            tile.tileCoord,\n            findLoadedTiles,\n            tmpTileRange,\n            tmpExtent\n          );\n        }\n      }\n    }\n\n    const canvasScale =\n      ((tileResolution / viewResolution) * pixelRatio) / tilePixelRatio;\n\n    // set forward and inverse pixel transforms\n    composeTransform(\n      this.pixelTransform,\n      frameState.size[0] / 2,\n      frameState.size[1] / 2,\n      1 / pixelRatio,\n      1 / pixelRatio,\n      rotation,\n      -width / 2,\n      -height / 2\n    );\n\n    const canvasTransform = toTransformString(this.pixelTransform);\n\n    this.useContainer(target, canvasTransform, this.getBackground(frameState));\n    const context = this.context;\n    const canvas = context.canvas;\n\n    makeInverse(this.inversePixelTransform, this.pixelTransform);\n\n    // set scale transform for calculating tile positions on the canvas\n    composeTransform(\n      this.tempTransform,\n      width / 2,\n      height / 2,\n      canvasScale,\n      canvasScale,\n      0,\n      -width / 2,\n      -height / 2\n    );\n\n    if (canvas.width != width || canvas.height != height) {\n      canvas.width = width;\n      canvas.height = height;\n    } else if (!this.containerReused) {\n      context.clearRect(0, 0, width, height);\n    }\n\n    if (layerExtent) {\n      this.clipUnrotated(context, frameState, layerExtent);\n    }\n\n    if (!tileSource.getInterpolate()) {\n      context.imageSmoothingEnabled = false;\n    }\n\n    this.preRender(context, frameState);\n\n    this.renderedTiles.length = 0;\n    /** @type {Array<number>} */\n    let zs = Object.keys(tilesToDrawByZ).map(Number);\n    zs.sort(numberSafeCompareFunction);\n\n    let clips, clipZs, currentClip;\n    if (\n      layerState.opacity === 1 &&\n      (!this.containerReused ||\n        tileSource.getOpaque(frameState.viewState.projection))\n    ) {\n      zs = zs.reverse();\n    } else {\n      clips = [];\n      clipZs = [];\n    }\n    for (let i = zs.length - 1; i >= 0; --i) {\n      const currentZ = zs[i];\n      const currentTilePixelSize = tileSource.getTilePixelSize(\n        currentZ,\n        pixelRatio,\n        projection\n      );\n      const currentResolution = tileGrid.getResolution(currentZ);\n      const currentScale = currentResolution / tileResolution;\n      const dx = currentTilePixelSize[0] * currentScale * canvasScale;\n      const dy = currentTilePixelSize[1] * currentScale * canvasScale;\n      const originTileCoord = tileGrid.getTileCoordForCoordAndZ(\n        getTopLeft(canvasExtent),\n        currentZ\n      );\n      const originTileExtent = tileGrid.getTileCoordExtent(originTileCoord);\n      const origin = applyTransform(this.tempTransform, [\n        (tilePixelRatio * (originTileExtent[0] - canvasExtent[0])) /\n          tileResolution,\n        (tilePixelRatio * (canvasExtent[3] - originTileExtent[3])) /\n          tileResolution,\n      ]);\n      const tileGutter =\n        tilePixelRatio * tileSource.getGutterForProjection(projection);\n      const tilesToDraw = tilesToDrawByZ[currentZ];\n      for (const tileCoordKey in tilesToDraw) {\n        const tile = /** @type {import(\"../../ImageTile.js\").default} */ (\n          tilesToDraw[tileCoordKey]\n        );\n        const tileCoord = tile.tileCoord;\n\n        // Calculate integer positions and sizes so that tiles align\n        const xIndex = originTileCoord[1] - tileCoord[1];\n        const nextX = Math.round(origin[0] - (xIndex - 1) * dx);\n        const yIndex = originTileCoord[2] - tileCoord[2];\n        const nextY = Math.round(origin[1] - (yIndex - 1) * dy);\n        const x = Math.round(origin[0] - xIndex * dx);\n        const y = Math.round(origin[1] - yIndex * dy);\n        const w = nextX - x;\n        const h = nextY - y;\n        const transition = z === currentZ;\n\n        const inTransition =\n          transition && tile.getAlpha(getUid(this), frameState.time) !== 1;\n        let contextSaved = false;\n        if (!inTransition) {\n          if (clips) {\n            // Clip mask for regions in this tile that already filled by a higher z tile\n            currentClip = [x, y, x + w, y, x + w, y + h, x, y + h];\n            for (let i = 0, ii = clips.length; i < ii; ++i) {\n              if (z !== currentZ && currentZ < clipZs[i]) {\n                const clip = clips[i];\n                if (\n                  intersects(\n                    [x, y, x + w, y + h],\n                    [clip[0], clip[3], clip[4], clip[7]]\n                  )\n                ) {\n                  if (!contextSaved) {\n                    context.save();\n                    contextSaved = true;\n                  }\n                  context.beginPath();\n                  // counter-clockwise (outer ring) for current tile\n                  context.moveTo(currentClip[0], currentClip[1]);\n                  context.lineTo(currentClip[2], currentClip[3]);\n                  context.lineTo(currentClip[4], currentClip[5]);\n                  context.lineTo(currentClip[6], currentClip[7]);\n                  // clockwise (inner ring) for higher z tile\n                  context.moveTo(clip[6], clip[7]);\n                  context.lineTo(clip[4], clip[5]);\n                  context.lineTo(clip[2], clip[3]);\n                  context.lineTo(clip[0], clip[1]);\n                  context.clip();\n                }\n              }\n            }\n            clips.push(currentClip);\n            clipZs.push(currentZ);\n          } else {\n            context.clearRect(x, y, w, h);\n          }\n        }\n        this.drawTileImage(\n          tile,\n          frameState,\n          x,\n          y,\n          w,\n          h,\n          tileGutter,\n          transition\n        );\n        if (clips && !inTransition) {\n          if (contextSaved) {\n            context.restore();\n          }\n          this.renderedTiles.unshift(tile);\n        } else {\n          this.renderedTiles.push(tile);\n        }\n        this.updateUsedTiles(frameState.usedTiles, tileSource, tile);\n      }\n    }\n\n    this.renderedRevision = sourceRevision;\n    this.renderedResolution = tileResolution;\n    this.extentChanged =\n      !this.renderedExtent_ || !equals(this.renderedExtent_, canvasExtent);\n    this.renderedExtent_ = canvasExtent;\n    this.renderedPixelRatio = pixelRatio;\n    this.renderedProjection = projection;\n\n    this.manageTilePyramid(\n      frameState,\n      tileSource,\n      tileGrid,\n      pixelRatio,\n      projection,\n      extent,\n      z,\n      tileLayer.getPreload()\n    );\n    this.scheduleExpireCache(frameState, tileSource);\n\n    this.postRender(context, frameState);\n\n    if (layerState.extent) {\n      context.restore();\n    }\n    context.imageSmoothingEnabled = true;\n\n    if (canvasTransform !== canvas.style.transform) {\n      canvas.style.transform = canvasTransform;\n    }\n\n    return this.container;\n  }\n\n  /**\n   * @param {import(\"../../ImageTile.js\").default} tile Tile.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @param {number} x Left of the tile.\n   * @param {number} y Top of the tile.\n   * @param {number} w Width of the tile.\n   * @param {number} h Height of the tile.\n   * @param {number} gutter Tile gutter.\n   * @param {boolean} transition Apply an alpha transition.\n   */\n  drawTileImage(tile, frameState, x, y, w, h, gutter, transition) {\n    const image = this.getTileImage(tile);\n    if (!image) {\n      return;\n    }\n    const uid = getUid(this);\n    const layerState = frameState.layerStatesArray[frameState.layerIndex];\n    const alpha =\n      layerState.opacity *\n      (transition ? tile.getAlpha(uid, frameState.time) : 1);\n    const alphaChanged = alpha !== this.context.globalAlpha;\n    if (alphaChanged) {\n      this.context.save();\n      this.context.globalAlpha = alpha;\n    }\n    this.context.drawImage(\n      image,\n      gutter,\n      gutter,\n      image.width - 2 * gutter,\n      image.height - 2 * gutter,\n      x,\n      y,\n      w,\n      h\n    );\n\n    if (alphaChanged) {\n      this.context.restore();\n    }\n    if (alpha !== layerState.opacity) {\n      frameState.animate = true;\n    } else if (transition) {\n      tile.endTransition(uid);\n    }\n  }\n\n  /**\n   * @return {HTMLCanvasElement} Image\n   */\n  getImage() {\n    const context = this.context;\n    return context ? context.canvas : null;\n  }\n\n  /**\n   * Get the image from a tile.\n   * @param {import(\"../../ImageTile.js\").default} tile Tile.\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   * @protected\n   */\n  getTileImage(tile) {\n    return tile.getImage();\n  }\n\n  /**\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n   * @protected\n   */\n  scheduleExpireCache(frameState, tileSource) {\n    if (tileSource.canExpireCache()) {\n      /**\n       * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n       * @param {import(\"../../Map.js\").default} map Map.\n       * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n       */\n      const postRenderFunction = function (tileSource, map, frameState) {\n        const tileSourceKey = getUid(tileSource);\n        if (tileSourceKey in frameState.usedTiles) {\n          tileSource.expireCache(\n            frameState.viewState.projection,\n            frameState.usedTiles[tileSourceKey]\n          );\n        }\n      }.bind(null, tileSource);\n\n      frameState.postRenderFunctions.push(\n        /** @type {import(\"../../Map.js\").PostRenderFunction} */ (\n          postRenderFunction\n        )\n      );\n    }\n  }\n\n  /**\n   * @param {!Object<string, !Object<string, boolean>>} usedTiles Used tiles.\n   * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n   * @param {import('../../Tile.js').default} tile Tile.\n   * @protected\n   */\n  updateUsedTiles(usedTiles, tileSource, tile) {\n    // FIXME should we use tilesToDrawByZ instead?\n    const tileSourceKey = getUid(tileSource);\n    if (!(tileSourceKey in usedTiles)) {\n      usedTiles[tileSourceKey] = {};\n    }\n    usedTiles[tileSourceKey][tile.getKey()] = true;\n  }\n\n  /**\n   * Manage tile pyramid.\n   * This function performs a number of functions related to the tiles at the\n   * current zoom and lower zoom levels:\n   * - registers idle tiles in frameState.wantedTiles so that they are not\n   *   discarded by the tile queue\n   * - enqueues missing tiles\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../source/Tile.js\").default} tileSource Tile source.\n   * @param {import(\"../../tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../proj/Projection.js\").default} projection Projection.\n   * @param {import(\"../../extent.js\").Extent} extent Extent.\n   * @param {number} currentZ Current Z.\n   * @param {number} preload Load low resolution tiles up to `preload` levels.\n   * @param {function(import(\"../../Tile.js\").default):void} [tileCallback] Tile callback.\n   * @protected\n   */\n  manageTilePyramid(\n    frameState,\n    tileSource,\n    tileGrid,\n    pixelRatio,\n    projection,\n    extent,\n    currentZ,\n    preload,\n    tileCallback\n  ) {\n    const tileSourceKey = getUid(tileSource);\n    if (!(tileSourceKey in frameState.wantedTiles)) {\n      frameState.wantedTiles[tileSourceKey] = {};\n    }\n    const wantedTiles = frameState.wantedTiles[tileSourceKey];\n    const tileQueue = frameState.tileQueue;\n    const minZoom = tileGrid.getMinZoom();\n    const rotation = frameState.viewState.rotation;\n    const viewport = rotation\n      ? getRotatedViewport(\n          frameState.viewState.center,\n          frameState.viewState.resolution,\n          rotation,\n          frameState.size\n        )\n      : undefined;\n    let tileCount = 0;\n    let tile, tileRange, tileResolution, x, y, z;\n    for (z = minZoom; z <= currentZ; ++z) {\n      tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z, tileRange);\n      tileResolution = tileGrid.getResolution(z);\n      for (x = tileRange.minX; x <= tileRange.maxX; ++x) {\n        for (y = tileRange.minY; y <= tileRange.maxY; ++y) {\n          if (\n            rotation &&\n            !tileGrid.tileCoordIntersectsViewport([z, x, y], viewport)\n          ) {\n            continue;\n          }\n          if (currentZ - z <= preload) {\n            ++tileCount;\n            tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n            if (tile.getState() == TileState.IDLE) {\n              wantedTiles[tile.getKey()] = true;\n              if (!tileQueue.isKeyQueued(tile.getKey())) {\n                tileQueue.enqueue([\n                  tile,\n                  tileSourceKey,\n                  tileGrid.getTileCoordCenter(tile.tileCoord),\n                  tileResolution,\n                ]);\n              }\n            }\n            if (tileCallback !== undefined) {\n              tileCallback(tile);\n            }\n          } else {\n            tileSource.useTile(z, x, y, projection);\n          }\n        }\n      }\n    }\n    tileSource.updateCacheSize(tileCount, projection);\n  }\n}\n\nexport default CanvasTileLayerRenderer;\n","/**\n * @module ol/layer/Tile\n */\nimport BaseTileLayer from './BaseTile.js';\nimport CanvasTileLayerRenderer from '../renderer/canvas/TileLayer.js';\n\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Tile.js\").default} TileSourceType\n * @extends BaseTileLayer<TileSourceType, CanvasTileLayerRenderer>\n * @api\n */\nclass TileLayer extends BaseTileLayer {\n  /**\n   * @param {import(\"./BaseTile.js\").Options<TileSourceType>} [options] Tile layer options.\n   */\n  constructor(options) {\n    super(options);\n  }\n\n  createRenderer() {\n    return new CanvasTileLayerRenderer(this);\n  }\n}\n\nexport default TileLayer;\n","export var PJD_3PARAM = 1;\nexport var PJD_7PARAM = 2;\nexport var PJD_GRIDSHIFT = 3;\nexport var PJD_WGS84 = 4; // WGS84 or equivalent\nexport var PJD_NODATUM = 5; // WGS84 or equivalent\nexport var SRS_WGS84_SEMIMAJOR = 6378137.0;  // only used in grid shift transforms\nexport var SRS_WGS84_SEMIMINOR = 6356752.314;  // only used in grid shift transforms\nexport var SRS_WGS84_ESQUARED = 0.0066943799901413165; // only used in grid shift transforms\nexport var SEC_TO_RAD = 4.84813681109535993589914102357e-6;\nexport var HALF_PI = Math.PI/2;\n// ellipoid pj_set_ell.c\nexport var SIXTH = 0.1666666666666666667;\n/* 1/6 */\nexport var RA4 = 0.04722222222222222222;\n/* 17/360 */\nexport var RA6 = 0.02215608465608465608;\nexport var EPSLN = 1.0e-10;\n// you'd think you could use Number.EPSILON above but that makes\n// Mollweide get into an infinate loop.\n\nexport var D2R = 0.01745329251994329577;\nexport var R2D = 57.29577951308232088;\nexport var FORTPI = Math.PI/4;\nexport var TWO_PI = Math.PI * 2;\n// SPI is slightly greater than Math.PI, so values that exceed the -180..180\n// degree range by a tiny amount don't get wrapped. This prevents points that\n// have drifted from their original location along the 180th meridian (due to\n// floating point error) from changing their sign.\nexport var SPI = 3.14159265359;\n","var exports = {};\nexport {exports as default};\n\nexports.greenwich = 0.0; //\"0dE\",\nexports.lisbon = -9.131906111111; //\"9d07'54.862\\\"W\",\nexports.paris = 2.337229166667; //\"2d20'14.025\\\"E\",\nexports.bogota = -74.080916666667; //\"74d04'51.3\\\"W\",\nexports.madrid = -3.687938888889; //\"3d41'16.58\\\"W\",\nexports.rome = 12.452333333333; //\"12d27'8.4\\\"E\",\nexports.bern = 7.439583333333; //\"7d26'22.5\\\"E\",\nexports.jakarta = 106.807719444444; //\"106d48'27.79\\\"E\",\nexports.ferro = -17.666666666667; //\"17d40'W\",\nexports.brussels = 4.367975; //\"4d22'4.71\\\"E\",\nexports.stockholm = 18.058277777778; //\"18d3'29.8\\\"E\",\nexports.athens = 23.7163375; //\"23d42'58.815\\\"E\",\nexports.oslo = 10.722916666667; //\"10d43'22.5\\\"E\"\n","export default {\n  ft: {to_meter: 0.3048},\n  'us-ft': {to_meter: 1200 / 3937}\n};\n","var ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nexport default function match(obj, key) {\n  if (obj[key]) {\n    return obj[key];\n  }\n  var keys = Object.keys(obj);\n  var lkey = key.toLowerCase().replace(ignoredChar, '');\n  var i = -1;\n  var testkey, processedKey;\n  while (++i < keys.length) {\n    testkey = keys[i];\n    processedKey = testkey.toLowerCase().replace(ignoredChar, '');\n    if (processedKey === lkey) {\n      return obj[testkey];\n    }\n  }\n}\n","import {D2R} from './constants/values';\nimport PrimeMeridian from './constants/PrimeMeridian';\nimport units from './constants/units';\nimport match from './match';\n\nexport default function(defData) {\n  var self = {};\n  var paramObj = defData.split('+').map(function(v) {\n    return v.trim();\n  }).filter(function(a) {\n    return a;\n  }).reduce(function(p, a) {\n    var split = a.split('=');\n    split.push(true);\n    p[split[0].toLowerCase()] = split[1];\n    return p;\n  }, {});\n  var paramName, paramVal, paramOutname;\n  var params = {\n    proj: 'projName',\n    datum: 'datumCode',\n    rf: function(v) {\n      self.rf = parseFloat(v);\n    },\n    lat_0: function(v) {\n      self.lat0 = v * D2R;\n    },\n    lat_1: function(v) {\n      self.lat1 = v * D2R;\n    },\n    lat_2: function(v) {\n      self.lat2 = v * D2R;\n    },\n    lat_ts: function(v) {\n      self.lat_ts = v * D2R;\n    },\n    lon_0: function(v) {\n      self.long0 = v * D2R;\n    },\n    lon_1: function(v) {\n      self.long1 = v * D2R;\n    },\n    lon_2: function(v) {\n      self.long2 = v * D2R;\n    },\n    alpha: function(v) {\n      self.alpha = parseFloat(v) * D2R;\n    },\n    gamma: function(v) {\n      self.rectified_grid_angle = parseFloat(v);\n    },\n    lonc: function(v) {\n      self.longc = v * D2R;\n    },\n    x_0: function(v) {\n      self.x0 = parseFloat(v);\n    },\n    y_0: function(v) {\n      self.y0 = parseFloat(v);\n    },\n    k_0: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    k: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    a: function(v) {\n      self.a = parseFloat(v);\n    },\n    b: function(v) {\n      self.b = parseFloat(v);\n    },\n    r_a: function() {\n      self.R_A = true;\n    },\n    zone: function(v) {\n      self.zone = parseInt(v, 10);\n    },\n    south: function() {\n      self.utmSouth = true;\n    },\n    towgs84: function(v) {\n      self.datum_params = v.split(\",\").map(function(a) {\n        return parseFloat(a);\n      });\n    },\n    to_meter: function(v) {\n      self.to_meter = parseFloat(v);\n    },\n    units: function(v) {\n      self.units = v;\n      var unit = match(units, v);\n      if (unit) {\n        self.to_meter = unit.to_meter;\n      }\n    },\n    from_greenwich: function(v) {\n      self.from_greenwich = v * D2R;\n    },\n    pm: function(v) {\n      var pm = match(PrimeMeridian, v);\n      self.from_greenwich = (pm ? pm : parseFloat(v)) * D2R;\n    },\n    nadgrids: function(v) {\n      if (v === '@null') {\n        self.datumCode = 'none';\n      }\n      else {\n        self.nadgrids = v;\n      }\n    },\n    axis: function(v) {\n      var legalAxis = \"ewnsud\";\n      if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {\n        self.axis = v;\n      }\n    },\n    approx: function() {\n      self.approx = true;\n    }\n  };\n  for (paramName in paramObj) {\n    paramVal = paramObj[paramName];\n    if (paramName in params) {\n      paramOutname = params[paramName];\n      if (typeof paramOutname === 'function') {\n        paramOutname(paramVal);\n      }\n      else {\n        self[paramOutname] = paramVal;\n      }\n    }\n    else {\n      self[paramName] = paramVal;\n    }\n  }\n  if(typeof self.datumCode === 'string' && self.datumCode !== \"WGS84\"){\n    self.datumCode = self.datumCode.toLowerCase();\n  }\n  return self;\n}\n","export default parseString;\n\nvar NEUTRAL = 1;\nvar KEYWORD = 2;\nvar NUMBER = 3;\nvar QUOTED = 4;\nvar AFTERQUOTE = 5;\nvar ENDED = -1;\nvar whitespace = /\\s/;\nvar latin = /[A-Za-z]/;\nvar keyword = /[A-Za-z84_]/;\nvar endThings = /[,\\]]/;\nvar digets = /[\\d\\.E\\-\\+]/;\n// const ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nfunction Parser(text) {\n  if (typeof text !== 'string') {\n    throw new Error('not a string');\n  }\n  this.text = text.trim();\n  this.level = 0;\n  this.place = 0;\n  this.root = null;\n  this.stack = [];\n  this.currentObject = null;\n  this.state = NEUTRAL;\n}\nParser.prototype.readCharicter = function() {\n  var char = this.text[this.place++];\n  if (this.state !== QUOTED) {\n    while (whitespace.test(char)) {\n      if (this.place >= this.text.length) {\n        return;\n      }\n      char = this.text[this.place++];\n    }\n  }\n  switch (this.state) {\n    case NEUTRAL:\n      return this.neutral(char);\n    case KEYWORD:\n      return this.keyword(char)\n    case QUOTED:\n      return this.quoted(char);\n    case AFTERQUOTE:\n      return this.afterquote(char);\n    case NUMBER:\n      return this.number(char);\n    case ENDED:\n      return;\n  }\n};\nParser.prototype.afterquote = function(char) {\n  if (char === '\"') {\n    this.word += '\"';\n    this.state = QUOTED;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = this.word.trim();\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in afterquote yet, index ' + this.place);\n};\nParser.prototype.afterItem = function(char) {\n  if (char === ',') {\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n    }\n    this.word = null;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (char === ']') {\n    this.level--;\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n      this.word = null;\n    }\n    this.state = NEUTRAL;\n    this.currentObject = this.stack.pop();\n    if (!this.currentObject) {\n      this.state = ENDED;\n    }\n\n    return;\n  }\n};\nParser.prototype.number = function(char) {\n  if (digets.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = parseFloat(this.word);\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in number yet, index ' + this.place);\n};\nParser.prototype.quoted = function(char) {\n  if (char === '\"') {\n    this.state = AFTERQUOTE;\n    return;\n  }\n  this.word += char;\n  return;\n};\nParser.prototype.keyword = function(char) {\n  if (keyword.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (char === '[') {\n    var newObjects = [];\n    newObjects.push(this.word);\n    this.level++;\n    if (this.root === null) {\n      this.root = newObjects;\n    } else {\n      this.currentObject.push(newObjects);\n    }\n    this.stack.push(this.currentObject);\n    this.currentObject = newObjects;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in keyword yet, index ' + this.place);\n};\nParser.prototype.neutral = function(char) {\n  if (latin.test(char)) {\n    this.word = char;\n    this.state = KEYWORD;\n    return;\n  }\n  if (char === '\"') {\n    this.word = '';\n    this.state = QUOTED;\n    return;\n  }\n  if (digets.test(char)) {\n    this.word = char;\n    this.state = NUMBER;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in neutral yet, index ' + this.place);\n};\nParser.prototype.output = function() {\n  while (this.place < this.text.length) {\n    this.readCharicter();\n  }\n  if (this.state === ENDED) {\n    return this.root;\n  }\n  throw new Error('unable to parse string \"' +this.text + '\". State is ' + this.state);\n};\n\nfunction parseString(txt) {\n  var parser = new Parser(txt);\n  return parser.output();\n}\n","\n\nfunction mapit(obj, key, value) {\n  if (Array.isArray(key)) {\n    value.unshift(key);\n    key = null;\n  }\n  var thing = key ? {} : obj;\n\n  var out = value.reduce(function(newObj, item) {\n    sExpr(item, newObj);\n    return newObj\n  }, thing);\n  if (key) {\n    obj[key] = out;\n  }\n}\n\nexport function sExpr(v, obj) {\n  if (!Array.isArray(v)) {\n    obj[v] = true;\n    return;\n  }\n  var key = v.shift();\n  if (key === 'PARAMETER') {\n    key = v.shift();\n  }\n  if (v.length === 1) {\n    if (Array.isArray(v[0])) {\n      obj[key] = {};\n      sExpr(v[0], obj[key]);\n      return;\n    }\n    obj[key] = v[0];\n    return;\n  }\n  if (!v.length) {\n    obj[key] = true;\n    return;\n  }\n  if (key === 'TOWGS84') {\n    obj[key] = v;\n    return;\n  }\n  if (key === 'AXIS') {\n    if (!(key in obj)) {\n      obj[key] = [];\n    }\n    obj[key].push(v);\n    return;\n  }\n  if (!Array.isArray(key)) {\n    obj[key] = {};\n  }\n\n  var i;\n  switch (key) {\n    case 'UNIT':\n    case 'PRIMEM':\n    case 'VERT_DATUM':\n      obj[key] = {\n        name: v[0].toLowerCase(),\n        convert: v[1]\n      };\n      if (v.length === 3) {\n        sExpr(v[2], obj[key]);\n      }\n      return;\n    case 'SPHEROID':\n    case 'ELLIPSOID':\n      obj[key] = {\n        name: v[0],\n        a: v[1],\n        rf: v[2]\n      };\n      if (v.length === 4) {\n        sExpr(v[3], obj[key]);\n      }\n      return;\n    case 'PROJECTEDCRS':\n    case 'PROJCRS':\n    case 'GEOGCS':\n    case 'GEOCCS':\n    case 'PROJCS':\n    case 'LOCAL_CS':\n    case 'GEODCRS':\n    case 'GEODETICCRS':\n    case 'GEODETICDATUM':\n    case 'EDATUM':\n    case 'ENGINEERINGDATUM':\n    case 'VERT_CS':\n    case 'VERTCRS':\n    case 'VERTICALCRS':\n    case 'COMPD_CS':\n    case 'COMPOUNDCRS':\n    case 'ENGINEERINGCRS':\n    case 'ENGCRS':\n    case 'FITTED_CS':\n    case 'LOCAL_DATUM':\n    case 'DATUM':\n      v[0] = ['name', v[0]];\n      mapit(obj, key, v);\n      return;\n    default:\n      i = -1;\n      while (++i < v.length) {\n        if (!Array.isArray(v[i])) {\n          return sExpr(v, obj[key]);\n        }\n      }\n      return mapit(obj, key, v);\n  }\n}\n","var D2R = 0.01745329251994329577;\nimport parser from './parser';\nimport {sExpr} from './process';\n\n\n\nfunction rename(obj, params) {\n  var outName = params[0];\n  var inName = params[1];\n  if (!(outName in obj) && (inName in obj)) {\n    obj[outName] = obj[inName];\n    if (params.length === 3) {\n      obj[outName] = params[2](obj[outName]);\n    }\n  }\n}\n\nfunction d2r(input) {\n  return input * D2R;\n}\n\nfunction cleanWKT(wkt) {\n  if (wkt.type === 'GEOGCS') {\n    wkt.projName = 'longlat';\n  } else if (wkt.type === 'LOCAL_CS') {\n    wkt.projName = 'identity';\n    wkt.local = true;\n  } else {\n    if (typeof wkt.PROJECTION === 'object') {\n      wkt.projName = Object.keys(wkt.PROJECTION)[0];\n    } else {\n      wkt.projName = wkt.PROJECTION;\n    }\n  }\n  if (wkt.AXIS) {\n    var axisOrder = '';\n    for (var i = 0, ii = wkt.AXIS.length; i < ii; ++i) {\n      var axis = [wkt.AXIS[i][0].toLowerCase(), wkt.AXIS[i][1].toLowerCase()];\n      if (axis[0].indexOf('north') !== -1 || ((axis[0] === 'y' || axis[0] === 'lat') && axis[1] === 'north')) {\n        axisOrder += 'n';\n      } else if (axis[0].indexOf('south') !== -1 || ((axis[0] === 'y' || axis[0] === 'lat') && axis[1] === 'south')) {\n        axisOrder += 's';\n      } else if (axis[0].indexOf('east') !== -1 || ((axis[0] === 'x' || axis[0] === 'lon') && axis[1] === 'east')) {\n        axisOrder += 'e';\n      } else if (axis[0].indexOf('west') !== -1 || ((axis[0] === 'x' || axis[0] === 'lon') && axis[1] === 'west')) {\n        axisOrder += 'w';\n      }\n    }\n    if (axisOrder.length === 2) {\n      axisOrder += 'u';\n    }\n    if (axisOrder.length === 3) {\n      wkt.axis = axisOrder;\n    }\n  }\n  if (wkt.UNIT) {\n    wkt.units = wkt.UNIT.name.toLowerCase();\n    if (wkt.units === 'metre') {\n      wkt.units = 'meter';\n    }\n    if (wkt.UNIT.convert) {\n      if (wkt.type === 'GEOGCS') {\n        if (wkt.DATUM && wkt.DATUM.SPHEROID) {\n          wkt.to_meter = wkt.UNIT.convert*wkt.DATUM.SPHEROID.a;\n        }\n      } else {\n        wkt.to_meter = wkt.UNIT.convert;\n      }\n    }\n  }\n  var geogcs = wkt.GEOGCS;\n  if (wkt.type === 'GEOGCS') {\n    geogcs = wkt;\n  }\n  if (geogcs) {\n    //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){\n    //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;\n    //}\n    if (geogcs.DATUM) {\n      wkt.datumCode = geogcs.DATUM.name.toLowerCase();\n    } else {\n      wkt.datumCode = geogcs.name.toLowerCase();\n    }\n    if (wkt.datumCode.slice(0, 2) === 'd_') {\n      wkt.datumCode = wkt.datumCode.slice(2);\n    }\n    if (wkt.datumCode === 'new_zealand_geodetic_datum_1949' || wkt.datumCode === 'new_zealand_1949') {\n      wkt.datumCode = 'nzgd49';\n    }\n    if (wkt.datumCode === 'wgs_1984' || wkt.datumCode === 'world_geodetic_system_1984') {\n      if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {\n        wkt.sphere = true;\n      }\n      wkt.datumCode = 'wgs84';\n    }\n    if (wkt.datumCode.slice(-6) === '_ferro') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 6);\n    }\n    if (wkt.datumCode.slice(-8) === '_jakarta') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 8);\n    }\n    if (~wkt.datumCode.indexOf('belge')) {\n      wkt.datumCode = 'rnb72';\n    }\n    if (geogcs.DATUM && geogcs.DATUM.SPHEROID) {\n      wkt.ellps = geogcs.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\\_18/, 'clrk');\n      if (wkt.ellps.toLowerCase().slice(0, 13) === 'international') {\n        wkt.ellps = 'intl';\n      }\n\n      wkt.a = geogcs.DATUM.SPHEROID.a;\n      wkt.rf = parseFloat(geogcs.DATUM.SPHEROID.rf, 10);\n    }\n\n    if (geogcs.DATUM && geogcs.DATUM.TOWGS84) {\n      wkt.datum_params = geogcs.DATUM.TOWGS84;\n    }\n    if (~wkt.datumCode.indexOf('osgb_1936')) {\n      wkt.datumCode = 'osgb36';\n    }\n    if (~wkt.datumCode.indexOf('osni_1952')) {\n      wkt.datumCode = 'osni52';\n    }\n    if (~wkt.datumCode.indexOf('tm65')\n      || ~wkt.datumCode.indexOf('geodetic_datum_of_1965')) {\n      wkt.datumCode = 'ire65';\n    }\n    if (wkt.datumCode === 'ch1903+') {\n      wkt.datumCode = 'ch1903';\n    }\n    if (~wkt.datumCode.indexOf('israel')) {\n      wkt.datumCode = 'isr93';\n    }\n  }\n  if (wkt.b && !isFinite(wkt.b)) {\n    wkt.b = wkt.a;\n  }\n\n  function toMeter(input) {\n    var ratio = wkt.to_meter || 1;\n    return input * ratio;\n  }\n  var renamer = function(a) {\n    return rename(wkt, a);\n  };\n  var list = [\n    ['standard_parallel_1', 'Standard_Parallel_1'],\n    ['standard_parallel_1', 'Latitude of 1st standard parallel'],\n    ['standard_parallel_2', 'Standard_Parallel_2'],\n    ['standard_parallel_2', 'Latitude of 2nd standard parallel'],\n    ['false_easting', 'False_Easting'],\n    ['false_easting', 'False easting'],\n    ['false-easting', 'Easting at false origin'],\n    ['false_northing', 'False_Northing'],\n    ['false_northing', 'False northing'],\n    ['false_northing', 'Northing at false origin'],\n    ['central_meridian', 'Central_Meridian'],\n    ['central_meridian', 'Longitude of natural origin'],\n    ['central_meridian', 'Longitude of false origin'],\n    ['latitude_of_origin', 'Latitude_Of_Origin'],\n    ['latitude_of_origin', 'Central_Parallel'],\n    ['latitude_of_origin', 'Latitude of natural origin'],\n    ['latitude_of_origin', 'Latitude of false origin'],\n    ['scale_factor', 'Scale_Factor'],\n    ['k0', 'scale_factor'],\n    ['latitude_of_center', 'Latitude_Of_Center'],\n    ['latitude_of_center', 'Latitude_of_center'],\n    ['lat0', 'latitude_of_center', d2r],\n    ['longitude_of_center', 'Longitude_Of_Center'],\n    ['longitude_of_center', 'Longitude_of_center'],\n    ['longc', 'longitude_of_center', d2r],\n    ['x0', 'false_easting', toMeter],\n    ['y0', 'false_northing', toMeter],\n    ['long0', 'central_meridian', d2r],\n    ['lat0', 'latitude_of_origin', d2r],\n    ['lat0', 'standard_parallel_1', d2r],\n    ['lat1', 'standard_parallel_1', d2r],\n    ['lat2', 'standard_parallel_2', d2r],\n    ['azimuth', 'Azimuth'],\n    ['alpha', 'azimuth', d2r],\n    ['srsCode', 'name']\n  ];\n  list.forEach(renamer);\n  if (!wkt.long0 && wkt.longc && (wkt.projName === 'Albers_Conic_Equal_Area' || wkt.projName === 'Lambert_Azimuthal_Equal_Area')) {\n    wkt.long0 = wkt.longc;\n  }\n  if (!wkt.lat_ts && wkt.lat1 && (wkt.projName === 'Stereographic_South_Pole' || wkt.projName === 'Polar Stereographic (variant B)')) {\n    wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);\n    wkt.lat_ts = wkt.lat1;\n  }\n}\nexport default function(wkt) {\n  var lisp = parser(wkt);\n  var type = lisp.shift();\n  var name = lisp.shift();\n  lisp.unshift(['name', name]);\n  lisp.unshift(['type', type]);\n  var obj = {};\n  sExpr(lisp, obj);\n  cleanWKT(obj);\n  return obj;\n}\n","export default function(defs) {\n  defs('EPSG:4326', \"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\");\n  defs('EPSG:4269', \"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees\");\n  defs('EPSG:3857', \"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs\");\n\n  defs.WGS84 = defs['EPSG:4326'];\n  defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857\n  defs.GOOGLE = defs['EPSG:3857'];\n  defs['EPSG:900913'] = defs['EPSG:3857'];\n  defs['EPSG:102113'] = defs['EPSG:3857'];\n}\n","import globals from './global';\nimport parseProj from './projString';\nimport wkt from 'wkt-parser';\n\nfunction defs(name) {\n  /*global console*/\n  var that = this;\n  if (arguments.length === 2) {\n    var def = arguments[1];\n    if (typeof def === 'string') {\n      if (def.charAt(0) === '+') {\n        defs[name] = parseProj(arguments[1]);\n      }\n      else {\n        defs[name] = wkt(arguments[1]);\n      }\n    } else {\n      defs[name] = def;\n    }\n  }\n  else if (arguments.length === 1) {\n    if (Array.isArray(name)) {\n      return name.map(function(v) {\n        if (Array.isArray(v)) {\n          defs.apply(that, v);\n        }\n        else {\n          defs(v);\n        }\n      });\n    }\n    else if (typeof name === 'string') {\n      if (name in defs) {\n        return defs[name];\n      }\n    }\n    else if ('EPSG' in name) {\n      defs['EPSG:' + name.EPSG] = name;\n    }\n    else if ('ESRI' in name) {\n      defs['ESRI:' + name.ESRI] = name;\n    }\n    else if ('IAU2000' in name) {\n      defs['IAU2000:' + name.IAU2000] = name;\n    }\n    else {\n      console.log(name);\n    }\n    return;\n  }\n\n\n}\nglobals(defs);\nexport default defs;\n","import defs from './defs';\nimport wkt from 'wkt-parser';\nimport projStr from './projString';\nimport match from './match';\nfunction testObj(code){\n  return typeof code === 'string';\n}\nfunction testDef(code){\n  return code in defs;\n}\nvar codeWords = ['PROJECTEDCRS', 'PROJCRS', 'GEOGCS','GEOCCS','PROJCS','LOCAL_CS', 'GEODCRS', 'GEODETICCRS', 'GEODETICDATUM', 'ENGCRS', 'ENGINEERINGCRS'];\nfunction testWKT(code){\n  return codeWords.some(function (word) {\n    return code.indexOf(word) > -1;\n  });\n}\nvar codes = ['3857', '900913', '3785', '102113'];\nfunction checkMercator(item) {\n  var auth = match(item, 'authority');\n  if (!auth) {\n    return;\n  }\n  var code = match(auth, 'epsg');\n  return code && codes.indexOf(code) > -1;\n}\nfunction checkProjStr(item) {\n  var ext = match(item, 'extension');\n  if (!ext) {\n    return;\n  }\n  return match(ext, 'proj4');\n}\nfunction testProj(code){\n  return code[0] === '+';\n}\nfunction parse(code){\n  if (testObj(code)) {\n    //check to see if this is a WKT string\n    if (testDef(code)) {\n      return defs[code];\n    }\n    if (testWKT(code)) {\n      var out = wkt(code);\n      // test of spetial case, due to this being a very common and often malformed\n      if (checkMercator(out)) {\n        return defs['EPSG:3857'];\n      }\n      var maybeProjStr = checkProjStr(out);\n      if (maybeProjStr) {\n        return projStr(maybeProjStr);\n      }\n      return out;\n    }\n    if (testProj(code)) {\n      return projStr(code);\n    }\n  }else{\n    return code;\n  }\n}\n\nexport default parse;\n","export default function(destination, source) {\n  destination = destination || {};\n  var value, property;\n  if (!source) {\n    return destination;\n  }\n  for (property in source) {\n    value = source[property];\n    if (value !== undefined) {\n      destination[property] = value;\n    }\n  }\n  return destination;\n}\n","export default function(eccent, sinphi, cosphi) {\n  var con = eccent * sinphi;\n  return cosphi / (Math.sqrt(1 - con * con));\n}","export default function(x) {\n  return x<0 ? -1 : 1;\n}","\nimport {TWO_PI, SPI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));\n}\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, phi, sinphi) {\n  var con = eccent * sinphi;\n  var com = 0.5 * eccent;\n  con = Math.pow(((1 - con) / (1 + con)), com);\n  return (Math.tan(0.5 * (HALF_PI - phi)) / con);\n}\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, ts) {\n  var eccnth = 0.5 * eccent;\n  var con, dphi;\n  var phi = HALF_PI - 2 * Math.atan(ts);\n  for (var i = 0; i <= 15; i++) {\n    con = eccent * Math.sin(phi);\n    dphi = HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n  //console.log(\"phi2z has NoConvergence\");\n  return -9999;\n}\n","export function init() {\n  //no-op for longlat\n}\n\nfunction identity(pt) {\n  return pt;\n}\nexport {identity as forward};\nexport {identity as inverse};\nexport var names = [\"longlat\", \"identity\"];\nexport default {\n  init: init,\n  forward: identity,\n  inverse: identity,\n  names: names\n};\n","import merc from \"./projections/merc\";\nimport longlat from \"./projections/longlat\";\nvar projs = [merc, longlat];\nvar names = {};\nvar projStore = [];\n\nfunction add(proj, i) {\n  var len = projStore.length;\n  if (!proj.names) {\n    console.log(i);\n    return true;\n  }\n  projStore[len] = proj;\n  proj.names.forEach(function(n) {\n    names[n.toLowerCase()] = len;\n  });\n  return this;\n}\n\nexport {add};\n\nexport function get(name) {\n  if (!name) {\n    return false;\n  }\n  var n = name.toLowerCase();\n  if (typeof names[n] !== 'undefined' && projStore[names[n]]) {\n    return projStore[names[n]];\n  }\n}\n\nexport function start() {\n  projs.forEach(add);\n}\nexport default {\n  start: start,\n  add: add,\n  get: get\n};\n","import msfnz from '../common/msfnz';\n\nimport adjust_lon from '../common/adjust_lon';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport {FORTPI, R2D, EPSLN, HALF_PI} from '../constants/values';\nexport function init() {\n  var con = this.b / this.a;\n  this.es = 1 - con * con;\n  if(!('x0' in this)){\n    this.x0 = 0;\n  }\n  if(!('y0' in this)){\n    this.y0 = 0;\n  }\n  this.e = Math.sqrt(this.es);\n  if (this.lat_ts) {\n    if (this.sphere) {\n      this.k0 = Math.cos(this.lat_ts);\n    }\n    else {\n      this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n    }\n  }\n  else {\n    if (!this.k0) {\n      if (this.k) {\n        this.k0 = this.k;\n      }\n      else {\n        this.k0 = 1;\n      }\n    }\n  }\n}\n\n/* Mercator forward equations--mapping lat,long to x,y\n  --------------------------------------------------*/\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  // convert to radians\n  if (lat * R2D > 90 && lat * R2D < -90 && lon * R2D > 180 && lon * R2D < -180) {\n    return null;\n  }\n\n  var x, y;\n  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n    return null;\n  }\n  else {\n    if (this.sphere) {\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 + this.a * this.k0 * Math.log(Math.tan(FORTPI + 0.5 * lat));\n    }\n    else {\n      var sinphi = Math.sin(lat);\n      var ts = tsfnz(this.e, lat, sinphi);\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 - this.a * this.k0 * Math.log(ts);\n    }\n    p.x = x;\n    p.y = y;\n    return p;\n  }\n}\n\n/* Mercator inverse equations--mapping x,y to lat/long\n  --------------------------------------------------*/\nexport function inverse(p) {\n\n  var x = p.x - this.x0;\n  var y = p.y - this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lat = HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));\n  }\n  else {\n    var ts = Math.exp(-y / (this.a * this.k0));\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  lon = adjust_lon(this.long0 + x / (this.a * this.k0));\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mercator\", \"Popular Visualisation Pseudo Mercator\", \"Mercator_1SP\", \"Mercator_Auxiliary_Sphere\", \"merc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","var exports = {};\nexport {exports as default};\nexports.MERIT = {\n  a: 6378137.0,\n  rf: 298.257,\n  ellipseName: \"MERIT 1983\"\n};\n\nexports.SGS85 = {\n  a: 6378136.0,\n  rf: 298.257,\n  ellipseName: \"Soviet Geodetic System 85\"\n};\n\nexports.GRS80 = {\n  a: 6378137.0,\n  rf: 298.257222101,\n  ellipseName: \"GRS 1980(IUGG, 1980)\"\n};\n\nexports.IAU76 = {\n  a: 6378140.0,\n  rf: 298.257,\n  ellipseName: \"IAU 1976\"\n};\n\nexports.airy = {\n  a: 6377563.396,\n  b: 6356256.910,\n  ellipseName: \"Airy 1830\"\n};\n\nexports.APL4 = {\n  a: 6378137,\n  rf: 298.25,\n  ellipseName: \"Appl. Physics. 1965\"\n};\n\nexports.NWL9D = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"Naval Weapons Lab., 1965\"\n};\n\nexports.mod_airy = {\n  a: 6377340.189,\n  b: 6356034.446,\n  ellipseName: \"Modified Airy\"\n};\n\nexports.andrae = {\n  a: 6377104.43,\n  rf: 300.0,\n  ellipseName: \"Andrae 1876 (Den., Iclnd.)\"\n};\n\nexports.aust_SA = {\n  a: 6378160.0,\n  rf: 298.25,\n  ellipseName: \"Australian Natl & S. Amer. 1969\"\n};\n\nexports.GRS67 = {\n  a: 6378160.0,\n  rf: 298.2471674270,\n  ellipseName: \"GRS 67(IUGG 1967)\"\n};\n\nexports.bessel = {\n  a: 6377397.155,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841\"\n};\n\nexports.bess_nam = {\n  a: 6377483.865,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841 (Namibia)\"\n};\n\nexports.clrk66 = {\n  a: 6378206.4,\n  b: 6356583.8,\n  ellipseName: \"Clarke 1866\"\n};\n\nexports.clrk80 = {\n  a: 6378249.145,\n  rf: 293.4663,\n  ellipseName: \"Clarke 1880 mod.\"\n};\n\nexports.clrk58 = {\n  a: 6378293.645208759,\n  rf: 294.2606763692654,\n  ellipseName: \"Clarke 1858\"\n};\n\nexports.CPM = {\n  a: 6375738.7,\n  rf: 334.29,\n  ellipseName: \"Comm. des Poids et Mesures 1799\"\n};\n\nexports.delmbr = {\n  a: 6376428.0,\n  rf: 311.5,\n  ellipseName: \"Delambre 1810 (Belgium)\"\n};\n\nexports.engelis = {\n  a: 6378136.05,\n  rf: 298.2566,\n  ellipseName: \"Engelis 1985\"\n};\n\nexports.evrst30 = {\n  a: 6377276.345,\n  rf: 300.8017,\n  ellipseName: \"Everest 1830\"\n};\n\nexports.evrst48 = {\n  a: 6377304.063,\n  rf: 300.8017,\n  ellipseName: \"Everest 1948\"\n};\n\nexports.evrst56 = {\n  a: 6377301.243,\n  rf: 300.8017,\n  ellipseName: \"Everest 1956\"\n};\n\nexports.evrst69 = {\n  a: 6377295.664,\n  rf: 300.8017,\n  ellipseName: \"Everest 1969\"\n};\n\nexports.evrstSS = {\n  a: 6377298.556,\n  rf: 300.8017,\n  ellipseName: \"Everest (Sabah & Sarawak)\"\n};\n\nexports.fschr60 = {\n  a: 6378166.0,\n  rf: 298.3,\n  ellipseName: \"Fischer (Mercury Datum) 1960\"\n};\n\nexports.fschr60m = {\n  a: 6378155.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1960\"\n};\n\nexports.fschr68 = {\n  a: 6378150.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1968\"\n};\n\nexports.helmert = {\n  a: 6378200.0,\n  rf: 298.3,\n  ellipseName: \"Helmert 1906\"\n};\n\nexports.hough = {\n  a: 6378270.0,\n  rf: 297.0,\n  ellipseName: \"Hough\"\n};\n\nexports.intl = {\n  a: 6378388.0,\n  rf: 297.0,\n  ellipseName: \"International 1909 (Hayford)\"\n};\n\nexports.kaula = {\n  a: 6378163.0,\n  rf: 298.24,\n  ellipseName: \"Kaula 1961\"\n};\n\nexports.lerch = {\n  a: 6378139.0,\n  rf: 298.257,\n  ellipseName: \"Lerch 1979\"\n};\n\nexports.mprts = {\n  a: 6397300.0,\n  rf: 191.0,\n  ellipseName: \"Maupertius 1738\"\n};\n\nexports.new_intl = {\n  a: 6378157.5,\n  b: 6356772.2,\n  ellipseName: \"New International 1967\"\n};\n\nexports.plessis = {\n  a: 6376523.0,\n  rf: 6355863.0,\n  ellipseName: \"Plessis 1817 (France)\"\n};\n\nexports.krass = {\n  a: 6378245.0,\n  rf: 298.3,\n  ellipseName: \"Krassovsky, 1942\"\n};\n\nexports.SEasia = {\n  a: 6378155.0,\n  b: 6356773.3205,\n  ellipseName: \"Southeast Asia\"\n};\n\nexports.walbeck = {\n  a: 6376896.0,\n  b: 6355834.8467,\n  ellipseName: \"Walbeck\"\n};\n\nexports.WGS60 = {\n  a: 6378165.0,\n  rf: 298.3,\n  ellipseName: \"WGS 60\"\n};\n\nexports.WGS66 = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"WGS 66\"\n};\n\nexports.WGS7 = {\n  a: 6378135.0,\n  rf: 298.26,\n  ellipseName: \"WGS 72\"\n};\n\nexport var WGS84 = exports.WGS84 = {\n  a: 6378137.0,\n  rf: 298.257223563,\n  ellipseName: \"WGS 84\"\n};\n\nexports.sphere = {\n  a: 6370997.0,\n  b: 6370997.0,\n  ellipseName: \"Normal Sphere (r=6370997)\"\n};\n","import {SIXTH, RA4, RA6, EPSLN} from './constants/values';\nimport {default as Ellipsoid, WGS84} from './constants/Ellipsoid';\nimport match from './match';\n\nexport function eccentricity(a, b, rf, R_A) {\n  var a2 = a * a; // used in geocentric\n  var b2 = b * b; // used in geocentric\n  var es = (a2 - b2) / a2; // e ^ 2\n  var e = 0;\n  if (R_A) {\n    a *= 1 - es * (SIXTH + es * (RA4 + es * RA6));\n    a2 = a * a;\n    es = 0;\n  } else {\n    e = Math.sqrt(es); // eccentricity\n  }\n  var ep2 = (a2 - b2) / b2; // used in geocentric\n  return {\n    es: es,\n    e: e,\n    ep2: ep2\n  };\n}\nexport function sphere(a, b, rf, ellps, sphere) {\n  if (!a) { // do we have an ellipsoid?\n    var ellipse = match(Ellipsoid, ellps);\n    if (!ellipse) {\n      ellipse = WGS84;\n    }\n    a = ellipse.a;\n    b = ellipse.b;\n    rf = ellipse.rf;\n  }\n\n  if (rf && !b) {\n    b = (1.0 - 1.0 / rf) * a;\n  }\n  if (rf === 0 || Math.abs(a - b) < EPSLN) {\n    sphere = true;\n    b = a;\n  }\n  return {\n    a: a,\n    b: b,\n    rf: rf,\n    sphere: sphere\n  };\n}\n","var exports = {};\nexport {exports as default};\nexports.wgs84 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"WGS84\",\n  datumName: \"WGS84\"\n};\n\nexports.ch1903 = {\n  towgs84: \"674.374,15.056,405.346\",\n  ellipse: \"bessel\",\n  datumName: \"swiss\"\n};\n\nexports.ggrs87 = {\n  towgs84: \"-199.87,74.79,246.62\",\n  ellipse: \"GRS80\",\n  datumName: \"Greek_Geodetic_Reference_System_1987\"\n};\n\nexports.nad83 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"GRS80\",\n  datumName: \"North_American_Datum_1983\"\n};\n\nexports.nad27 = {\n  nadgrids: \"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat\",\n  ellipse: \"clrk66\",\n  datumName: \"North_American_Datum_1927\"\n};\n\nexports.potsdam = {\n  towgs84: \"598.1,73.7,418.2,0.202,0.045,-2.455,6.7\",\n  ellipse: \"bessel\",\n  datumName: \"Potsdam Rauenberg 1950 DHDN\"\n};\n\nexports.carthage = {\n  towgs84: \"-263.0,6.0,431.0\",\n  ellipse: \"clark80\",\n  datumName: \"Carthage 1934 Tunisia\"\n};\n\nexports.hermannskogel = {\n  towgs84: \"577.326,90.129,463.919,5.137,1.474,5.297,2.4232\",\n  ellipse: \"bessel\",\n  datumName: \"Hermannskogel\"\n};\n\nexports.osni52 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"airy\",\n  datumName: \"Irish National\"\n};\n\nexports.ire65 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"mod_airy\",\n  datumName: \"Ireland 1965\"\n};\n\nexports.rassadiran = {\n  towgs84: \"-133.63,-157.5,-158.62\",\n  ellipse: \"intl\",\n  datumName: \"Rassadiran\"\n};\n\nexports.nzgd49 = {\n  towgs84: \"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993\",\n  ellipse: \"intl\",\n  datumName: \"New Zealand Geodetic Datum 1949\"\n};\n\nexports.osgb36 = {\n  towgs84: \"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894\",\n  ellipse: \"airy\",\n  datumName: \"Airy 1830\"\n};\n\nexports.s_jtsk = {\n  towgs84: \"589,76,480\",\n  ellipse: 'bessel',\n  datumName: 'S-JTSK (Ferro)'\n};\n\nexports.beduaram = {\n  towgs84: '-106,-87,188',\n  ellipse: 'clrk80',\n  datumName: 'Beduaram'\n};\n\nexports.gunung_segara = {\n  towgs84: '-403,684,41',\n  ellipse: 'bessel',\n  datumName: 'Gunung Segara Jakarta'\n};\n\nexports.rnb72 = {\n  towgs84: \"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1\",\n  ellipse: \"intl\",\n  datumName: \"Reseau National Belge 1972\"\n};\n","import {PJD_3PARAM, PJD_7PARAM, PJD_GRIDSHIFT, PJD_WGS84, PJD_NODATUM, SEC_TO_RAD} from './constants/values';\n\nfunction datum(datumCode, datum_params, a, b, es, ep2, nadgrids) {\n  var out = {};\n\n  if (datumCode === undefined || datumCode === 'none') {\n    out.datum_type = PJD_NODATUM;\n  } else {\n    out.datum_type = PJD_WGS84;\n  }\n\n  if (datum_params) {\n    out.datum_params = datum_params.map(parseFloat);\n    if (out.datum_params[0] !== 0 || out.datum_params[1] !== 0 || out.datum_params[2] !== 0) {\n      out.datum_type = PJD_3PARAM;\n    }\n    if (out.datum_params.length > 3) {\n      if (out.datum_params[3] !== 0 || out.datum_params[4] !== 0 || out.datum_params[5] !== 0 || out.datum_params[6] !== 0) {\n        out.datum_type = PJD_7PARAM;\n        out.datum_params[3] *= SEC_TO_RAD;\n        out.datum_params[4] *= SEC_TO_RAD;\n        out.datum_params[5] *= SEC_TO_RAD;\n        out.datum_params[6] = (out.datum_params[6] / 1000000.0) + 1.0;\n      }\n    }\n  }\n\n  if (nadgrids) {\n    out.datum_type = PJD_GRIDSHIFT;\n    out.grids = nadgrids;\n  }\n  out.a = a; //datum object also uses these values\n  out.b = b;\n  out.es = es;\n  out.ep2 = ep2;\n  return out;\n}\n\nexport default datum;\n","/**\n * Resources for details of NTv2 file formats:\n * - https://web.archive.org/web/20140127204822if_/http://www.mgs.gov.on.ca:80/stdprodconsume/groups/content/@mgs/@iandit/documents/resourcelist/stel02_047447.pdf\n * - http://mimaka.com/help/gs/html/004_NTV2%20Data%20Format.htm\n */\n\nvar loadedNadgrids = {};\n\n/**\n * Load a binary NTv2 file (.gsb) to a key that can be used in a proj string like +nadgrids=<key>. Pass the NTv2 file\n * as an ArrayBuffer.\n */\nexport default function nadgrid(key, data) {\n  var view = new DataView(data);\n  var isLittleEndian = detectLittleEndian(view);\n  var header = readHeader(view, isLittleEndian);\n  if (header.nSubgrids > 1) {\n    console.log('Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored');\n  }\n  var subgrids = readSubgrids(view, header, isLittleEndian);\n  var nadgrid = {header: header, subgrids: subgrids};\n  loadedNadgrids[key] = nadgrid;\n  return nadgrid;\n}\n\n/**\n * Given a proj4 value for nadgrids, return an array of loaded grids\n */\nexport function getNadgrids(nadgrids) {\n  // Format details: http://proj.maptools.org/gen_parms.html\n  if (nadgrids === undefined) { return null; }\n  var grids = nadgrids.split(',');\n  return grids.map(parseNadgridString);\n}\n\nfunction parseNadgridString(value) {\n  if (value.length === 0) {\n    return null;\n  }\n  var optional = value[0] === '@';\n  if (optional) {\n    value = value.slice(1);\n  }\n  if (value === 'null') {\n    return {name: 'null', mandatory: !optional, grid: null, isNull: true};\n  }\n  return {\n    name: value,\n    mandatory: !optional,\n    grid: loadedNadgrids[value] || null,\n    isNull: false\n  };\n}\n\nfunction secondsToRadians(seconds) {\n  return (seconds / 3600) * Math.PI / 180;\n}\n\nfunction detectLittleEndian(view) {\n  var nFields = view.getInt32(8, false);\n  if (nFields === 11) {\n    return false;\n  }\n  nFields = view.getInt32(8, true);\n  if (nFields !== 11) {\n    console.warn('Failed to detect nadgrid endian-ness, defaulting to little-endian');\n  }\n  return true;\n}\n\nfunction readHeader(view, isLittleEndian) {\n  return {\n    nFields: view.getInt32(8, isLittleEndian),\n    nSubgridFields: view.getInt32(24, isLittleEndian),\n    nSubgrids: view.getInt32(40, isLittleEndian),\n    shiftType: decodeString(view, 56, 56 + 8).trim(),\n    fromSemiMajorAxis: view.getFloat64(120, isLittleEndian),\n    fromSemiMinorAxis: view.getFloat64(136, isLittleEndian),\n    toSemiMajorAxis: view.getFloat64(152, isLittleEndian),\n    toSemiMinorAxis: view.getFloat64(168, isLittleEndian),\n  };\n}\n\nfunction decodeString(view, start, end) {\n  return String.fromCharCode.apply(null, new Uint8Array(view.buffer.slice(start, end)));\n}\n\nfunction readSubgrids(view, header, isLittleEndian) {\n  var gridOffset = 176;\n  var grids = [];\n  for (var i = 0; i < header.nSubgrids; i++) {\n    var subHeader = readGridHeader(view, gridOffset, isLittleEndian);\n    var nodes = readGridNodes(view, gridOffset, subHeader, isLittleEndian);\n    var lngColumnCount = Math.round(\n      1 + (subHeader.upperLongitude - subHeader.lowerLongitude) / subHeader.longitudeInterval);\n    var latColumnCount = Math.round(\n      1 + (subHeader.upperLatitude - subHeader.lowerLatitude) / subHeader.latitudeInterval);\n    // Proj4 operates on radians whereas the coordinates are in seconds in the grid\n    grids.push({\n      ll: [secondsToRadians(subHeader.lowerLongitude), secondsToRadians(subHeader.lowerLatitude)],\n      del: [secondsToRadians(subHeader.longitudeInterval), secondsToRadians(subHeader.latitudeInterval)],\n      lim: [lngColumnCount, latColumnCount],\n      count: subHeader.gridNodeCount,\n      cvs: mapNodes(nodes)\n    });\n  }\n  return grids;\n}\n\nfunction mapNodes(nodes) {\n  return nodes.map(function (r) {return [secondsToRadians(r.longitudeShift), secondsToRadians(r.latitudeShift)];});\n}\n\nfunction readGridHeader(view, offset, isLittleEndian) {\n  return {\n    name: decodeString(view, offset + 8, offset + 16).trim(),\n    parent: decodeString(view, offset + 24, offset + 24 + 8).trim(),\n    lowerLatitude: view.getFloat64(offset + 72, isLittleEndian),\n    upperLatitude: view.getFloat64(offset + 88, isLittleEndian),\n    lowerLongitude: view.getFloat64(offset + 104, isLittleEndian),\n    upperLongitude: view.getFloat64(offset + 120, isLittleEndian),\n    latitudeInterval: view.getFloat64(offset + 136, isLittleEndian),\n    longitudeInterval: view.getFloat64(offset + 152, isLittleEndian),\n    gridNodeCount: view.getInt32(offset + 168, isLittleEndian)\n  };\n}\n\nfunction readGridNodes(view, offset, gridHeader, isLittleEndian) {\n  var nodesOffset = offset + 176;\n  var gridRecordLength = 16;\n  var gridShiftRecords = [];\n  for (var i = 0; i < gridHeader.gridNodeCount; i++) {\n    var record = {\n      latitudeShift: view.getFloat32(nodesOffset + i * gridRecordLength, isLittleEndian),\n      longitudeShift: view.getFloat32(nodesOffset + i * gridRecordLength + 4, isLittleEndian),\n      latitudeAccuracy: view.getFloat32(nodesOffset + i * gridRecordLength + 8, isLittleEndian),\n      longitudeAccuracy: view.getFloat32(nodesOffset + i * gridRecordLength + 12, isLittleEndian),\n    };\n    gridShiftRecords.push(record);\n  }\n  return gridShiftRecords;\n}\n","import parseCode from './parseCode';\nimport extend from './extend';\nimport projections from './projections';\nimport {sphere as dc_sphere, eccentricity as dc_eccentricity} from './deriveConstants';\nimport Datum from './constants/Datum';\nimport datum from './datum';\nimport match from './match';\nimport {getNadgrids} from \"./nadgrid\";\n\nfunction Projection(srsCode,callback) {\n  if (!(this instanceof Projection)) {\n    return new Projection(srsCode);\n  }\n  callback = callback || function(error){\n    if(error){\n      throw error;\n    }\n  };\n  var json = parseCode(srsCode);\n  if(typeof json !== 'object'){\n    callback(srsCode);\n    return;\n  }\n  var ourProj = Projection.projections.get(json.projName);\n  if(!ourProj){\n    callback(srsCode);\n    return;\n  }\n  if (json.datumCode && json.datumCode !== 'none') {\n    var datumDef = match(Datum, json.datumCode);\n    if (datumDef) {\n      json.datum_params = json.datum_params || (datumDef.towgs84 ? datumDef.towgs84.split(',') : null);\n      json.ellps = datumDef.ellipse;\n      json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;\n    }\n  }\n  json.k0 = json.k0 || 1.0;\n  json.axis = json.axis || 'enu';\n  json.ellps = json.ellps || 'wgs84';\n  json.lat1 = json.lat1 || json.lat0; // Lambert_Conformal_Conic_1SP, for example, needs this\n\n  var sphere_ = dc_sphere(json.a, json.b, json.rf, json.ellps, json.sphere);\n  var ecc = dc_eccentricity(sphere_.a, sphere_.b, sphere_.rf, json.R_A);\n  var nadgrids = getNadgrids(json.nadgrids);\n  var datumObj = json.datum || datum(json.datumCode, json.datum_params, sphere_.a, sphere_.b, ecc.es, ecc.ep2,\n    nadgrids);\n\n  extend(this, json); // transfer everything over from the projection because we don't know what we'll need\n  extend(this, ourProj); // transfer all the methods from the projection\n\n  // copy the 4 things over we calculated in deriveConstants.sphere\n  this.a = sphere_.a;\n  this.b = sphere_.b;\n  this.rf = sphere_.rf;\n  this.sphere = sphere_.sphere;\n\n  // copy the 3 things we calculated in deriveConstants.eccentricity\n  this.es = ecc.es;\n  this.e = ecc.e;\n  this.ep2 = ecc.ep2;\n\n  // add in the datum object\n  this.datum = datumObj;\n\n  // init the projection\n  this.init();\n\n  // legecy callback from back in the day when it went to spatialreference.org\n  callback(null, this);\n\n}\nProjection.projections = projections;\nProjection.projections.start();\nexport default Projection;\n","'use strict';\nimport {PJD_3PARAM, PJD_7PARAM, HALF_PI} from './constants/values';\nexport function compareDatums(source, dest) {\n  if (source.datum_type !== dest.datum_type) {\n    return false; // false, datums are not equal\n  } else if (source.a !== dest.a || Math.abs(source.es - dest.es) > 0.000000000050) {\n    // the tolerance for es is to ensure that GRS80 and WGS84\n    // are considered identical\n    return false;\n  } else if (source.datum_type === PJD_3PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2]);\n  } else if (source.datum_type === PJD_7PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2] && source.datum_params[3] === dest.datum_params[3] && source.datum_params[4] === dest.datum_params[4] && source.datum_params[5] === dest.datum_params[5] && source.datum_params[6] === dest.datum_params[6]);\n  } else {\n    return true; // datums are equal\n  }\n} // cs_compare_datums()\n\n/*\n * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates\n * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),\n * according to the current ellipsoid parameters.\n *\n *    Latitude  : Geodetic latitude in radians                     (input)\n *    Longitude : Geodetic longitude in radians                    (input)\n *    Height    : Geodetic height, in meters                       (input)\n *    X         : Calculated Geocentric X coordinate, in meters    (output)\n *    Y         : Calculated Geocentric Y coordinate, in meters    (output)\n *    Z         : Calculated Geocentric Z coordinate, in meters    (output)\n *\n */\nexport function geodeticToGeocentric(p, es, a) {\n  var Longitude = p.x;\n  var Latitude = p.y;\n  var Height = p.z ? p.z : 0; //Z value not always supplied\n\n  var Rn; /*  Earth radius at location  */\n  var Sin_Lat; /*  Math.sin(Latitude)  */\n  var Sin2_Lat; /*  Square of Math.sin(Latitude)  */\n  var Cos_Lat; /*  Math.cos(Latitude)  */\n\n  /*\n   ** Don't blow up if Latitude is just a little out of the value\n   ** range as it may just be a rounding issue.  Also removed longitude\n   ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.\n   */\n  if (Latitude < -HALF_PI && Latitude > -1.001 * HALF_PI) {\n    Latitude = -HALF_PI;\n  } else if (Latitude > HALF_PI && Latitude < 1.001 * HALF_PI) {\n    Latitude = HALF_PI;\n  } else if (Latitude < -HALF_PI) {\n    /* Latitude out of range */\n    //..reportError('geocent:lat out of range:' + Latitude);\n    return { x: -Infinity, y: -Infinity, z: p.z };\n  } else if (Latitude > HALF_PI) {\n    /* Latitude out of range */\n    return { x: Infinity, y: Infinity, z: p.z };\n  }\n\n  if (Longitude > Math.PI) {\n    Longitude -= (2 * Math.PI);\n  }\n  Sin_Lat = Math.sin(Latitude);\n  Cos_Lat = Math.cos(Latitude);\n  Sin2_Lat = Sin_Lat * Sin_Lat;\n  Rn = a / (Math.sqrt(1.0e0 - es * Sin2_Lat));\n  return {\n    x: (Rn + Height) * Cos_Lat * Math.cos(Longitude),\n    y: (Rn + Height) * Cos_Lat * Math.sin(Longitude),\n    z: ((Rn * (1 - es)) + Height) * Sin_Lat\n  };\n} // cs_geodetic_to_geocentric()\n\nexport function geocentricToGeodetic(p, es, a, b) {\n  /* local defintions and variables */\n  /* end-criterium of loop, accuracy of sin(Latitude) */\n  var genau = 1e-12;\n  var genau2 = (genau * genau);\n  var maxiter = 30;\n\n  var P; /* distance between semi-minor axis and location */\n  var RR; /* distance between center and location */\n  var CT; /* sin of geocentric latitude */\n  var ST; /* cos of geocentric latitude */\n  var RX;\n  var RK;\n  var RN; /* Earth radius at location */\n  var CPHI0; /* cos of start or old geodetic latitude in iterations */\n  var SPHI0; /* sin of start or old geodetic latitude in iterations */\n  var CPHI; /* cos of searched geodetic latitude */\n  var SPHI; /* sin of searched geodetic latitude */\n  var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */\n  var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */\n\n  var X = p.x;\n  var Y = p.y;\n  var Z = p.z ? p.z : 0.0; //Z value not always supplied\n  var Longitude;\n  var Latitude;\n  var Height;\n\n  P = Math.sqrt(X * X + Y * Y);\n  RR = Math.sqrt(X * X + Y * Y + Z * Z);\n\n  /*      special cases for latitude and longitude */\n  if (P / a < genau) {\n\n    /*  special case, if P=0. (X=0., Y=0.) */\n    Longitude = 0.0;\n\n    /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis\n     *  of ellipsoid (=center of mass), Latitude becomes PI/2 */\n    if (RR / a < genau) {\n      Latitude = HALF_PI;\n      Height = -b;\n      return {\n        x: p.x,\n        y: p.y,\n        z: p.z\n      };\n    }\n  } else {\n    /*  ellipsoidal (geodetic) longitude\n     *  interval: -PI < Longitude <= +PI */\n    Longitude = Math.atan2(Y, X);\n  }\n\n  /* --------------------------------------------------------------\n   * Following iterative algorithm was developped by\n   * \"Institut for Erdmessung\", University of Hannover, July 1988.\n   * Internet: www.ife.uni-hannover.de\n   * Iterative computation of CPHI,SPHI and Height.\n   * Iteration of CPHI and SPHI to 10**-12 radian resp.\n   * 2*10**-7 arcsec.\n   * --------------------------------------------------------------\n   */\n  CT = Z / RR;\n  ST = P / RR;\n  RX = 1.0 / Math.sqrt(1.0 - es * (2.0 - es) * ST * ST);\n  CPHI0 = ST * (1.0 - es) * RX;\n  SPHI0 = CT * RX;\n  iter = 0;\n\n  /* loop to find sin(Latitude) resp. Latitude\n   * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */\n  do {\n    iter++;\n    RN = a / Math.sqrt(1.0 - es * SPHI0 * SPHI0);\n\n    /*  ellipsoidal (geodetic) height */\n    Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - es * SPHI0 * SPHI0);\n\n    RK = es * RN / (RN + Height);\n    RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);\n    CPHI = ST * (1.0 - RK) * RX;\n    SPHI = CT * RX;\n    SDPHI = SPHI * CPHI0 - CPHI * SPHI0;\n    CPHI0 = CPHI;\n    SPHI0 = SPHI;\n  }\n  while (SDPHI * SDPHI > genau2 && iter < maxiter);\n\n  /*      ellipsoidal (geodetic) latitude */\n  Latitude = Math.atan(SPHI / Math.abs(CPHI));\n  return {\n    x: Longitude,\n    y: Latitude,\n    z: Height\n  };\n} // cs_geocentric_to_geodetic()\n\n/****************************************************************/\n// pj_geocentic_to_wgs84( p )\n//  p = point to transform in geocentric coordinates (x,y,z)\n\n\n/** point object, nothing fancy, just allows values to be\n    passed back and forth by reference rather than by value.\n    Other point classes may be used as long as they have\n    x and y properties, which will get modified in the transform method.\n*/\nexport function geocentricToWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x + datum_params[0],\n      y: p.y + datum_params[1],\n      z: p.z + datum_params[2],\n    };\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF,\n      y: M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF,\n      z: M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF\n    };\n  }\n} // cs_geocentric_to_wgs84\n\n/****************************************************************/\n// pj_geocentic_from_wgs84()\n//  coordinate system definition,\n//  point to transform in geocentric coordinates (x,y,z)\nexport function geocentricFromWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x - datum_params[0],\n      y: p.y - datum_params[1],\n      z: p.z - datum_params[2],\n    };\n\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    var x_tmp = (p.x - Dx_BF) / M_BF;\n    var y_tmp = (p.y - Dy_BF) / M_BF;\n    var z_tmp = (p.z - Dz_BF) / M_BF;\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n\n    return {\n      x: x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp,\n      y: -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp,\n      z: Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp\n    };\n  } //cs_geocentric_from_wgs84()\n}\n","import {\n  PJD_3PARAM,\n  PJD_7PARAM,\n  PJD_GRIDSHIFT,\n  PJD_NODATUM,\n  R2D,\n  SRS_WGS84_ESQUARED,\n  SRS_WGS84_SEMIMAJOR, SRS_WGS84_SEMIMINOR\n} from './constants/values';\n\nimport {geodeticToGeocentric, geocentricToGeodetic, geocentricToWgs84, geocentricFromWgs84, compareDatums} from './datumUtils';\nimport adjust_lon from \"./common/adjust_lon\";\nfunction checkParams(type) {\n  return (type === PJD_3PARAM || type === PJD_7PARAM);\n}\n\nexport default function(source, dest, point) {\n  // Short cut if the datums are identical.\n  if (compareDatums(source, dest)) {\n    return point; // in this case, zero is sucess,\n    // whereas cs_compare_datums returns 1 to indicate TRUE\n    // confusing, should fix this\n  }\n\n  // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest\n  if (source.datum_type === PJD_NODATUM || dest.datum_type === PJD_NODATUM) {\n    return point;\n  }\n\n  // If this datum requires grid shifts, then apply it to geodetic coordinates.\n  var source_a = source.a;\n  var source_es = source.es;\n  if (source.datum_type === PJD_GRIDSHIFT) {\n    var gridShiftCode = applyGridShift(source, false, point);\n    if (gridShiftCode !== 0) {\n      return undefined;\n    }\n    source_a = SRS_WGS84_SEMIMAJOR;\n    source_es = SRS_WGS84_ESQUARED;\n  }\n\n  var dest_a = dest.a;\n  var dest_b = dest.b;\n  var dest_es = dest.es;\n  if (dest.datum_type === PJD_GRIDSHIFT) {\n    dest_a = SRS_WGS84_SEMIMAJOR;\n    dest_b = SRS_WGS84_SEMIMINOR;\n    dest_es = SRS_WGS84_ESQUARED;\n  }\n\n  // Do we need to go through geocentric coordinates?\n  if (source_es === dest_es && source_a === dest_a && !checkParams(source.datum_type) &&  !checkParams(dest.datum_type)) {\n    return point;\n  }\n\n  // Convert to geocentric coordinates.\n  point = geodeticToGeocentric(point, source_es, source_a);\n  // Convert between datums\n  if (checkParams(source.datum_type)) {\n    point = geocentricToWgs84(point, source.datum_type, source.datum_params);\n  }\n  if (checkParams(dest.datum_type)) {\n    point = geocentricFromWgs84(point, dest.datum_type, dest.datum_params);\n  }\n  point = geocentricToGeodetic(point, dest_es, dest_a, dest_b);\n\n  if (dest.datum_type === PJD_GRIDSHIFT) {\n    var destGridShiftResult = applyGridShift(dest, true, point);\n    if (destGridShiftResult !== 0) {\n      return undefined;\n    }\n  }\n\n  return point;\n}\n\nexport function applyGridShift(source, inverse, point) {\n  if (source.grids === null || source.grids.length === 0) {\n    console.log('Grid shift grids not found');\n    return -1;\n  }\n  var input = {x: -point.x, y: point.y};\n  var output = {x: Number.NaN, y: Number.NaN};\n  var onlyMandatoryGrids = false;\n  var attemptedGrids = [];\n  for (var i = 0; i < source.grids.length; i++) {\n    var grid = source.grids[i];\n    attemptedGrids.push(grid.name);\n    if (grid.isNull) {\n      output = input;\n      break;\n    }\n    onlyMandatoryGrids = grid.mandatory;\n    if (grid.grid === null) {\n      if (grid.mandatory) {\n        console.log(\"Unable to find mandatory grid '\" + grid.name + \"'\");\n        return -1;\n      }\n      continue;\n    }\n    var subgrid = grid.grid.subgrids[0];\n    // skip tables that don't match our point at all\n    var epsilon = (Math.abs(subgrid.del[1]) + Math.abs(subgrid.del[0])) / 10000.0;\n    var minX = subgrid.ll[0] - epsilon;\n    var minY = subgrid.ll[1] - epsilon;\n    var maxX = subgrid.ll[0] + (subgrid.lim[0] - 1) * subgrid.del[0] + epsilon;\n    var maxY = subgrid.ll[1] + (subgrid.lim[1] - 1) * subgrid.del[1] + epsilon;\n    if (minY > input.y || minX > input.x || maxY < input.y || maxX < input.x ) {\n      continue;\n    }\n    output = applySubgridShift(input, inverse, subgrid);\n    if (!isNaN(output.x)) {\n      break;\n    }\n  }\n  if (isNaN(output.x)) {\n    console.log(\"Failed to find a grid shift table for location '\"+\n      -input.x * R2D + \" \" + input.y * R2D + \" tried: '\" + attemptedGrids + \"'\");\n    return -1;\n  }\n  point.x = -output.x;\n  point.y = output.y;\n  return 0;\n}\n\nfunction applySubgridShift(pin, inverse, ct) {\n  var val = {x: Number.NaN, y: Number.NaN};\n  if (isNaN(pin.x)) { return val; }\n  var tb = {x: pin.x, y: pin.y};\n  tb.x -= ct.ll[0];\n  tb.y -= ct.ll[1];\n  tb.x = adjust_lon(tb.x - Math.PI) + Math.PI;\n  var t = nadInterpolate(tb, ct);\n  if (inverse) {\n    if (isNaN(t.x)) {\n      return val;\n    }\n    t.x = tb.x - t.x;\n    t.y = tb.y - t.y;\n    var i = 9, tol = 1e-12;\n    var dif, del;\n    do {\n      del = nadInterpolate(t, ct);\n      if (isNaN(del.x)) {\n        console.log(\"Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.\");\n        break;\n      }\n      dif = {x: tb.x - (del.x + t.x), y: tb.y - (del.y + t.y)};\n      t.x += dif.x;\n      t.y += dif.y;\n    } while (i-- && Math.abs(dif.x) > tol && Math.abs(dif.y) > tol);\n    if (i < 0) {\n      console.log(\"Inverse grid shift iterator failed to converge.\");\n      return val;\n    }\n    val.x = adjust_lon(t.x + ct.ll[0]);\n    val.y = t.y + ct.ll[1];\n  } else {\n    if (!isNaN(t.x)) {\n      val.x = pin.x + t.x;\n      val.y = pin.y + t.y;\n    }\n  }\n  return val;\n}\n\nfunction nadInterpolate(pin, ct) {\n  var t = {x: pin.x / ct.del[0], y: pin.y / ct.del[1]};\n  var indx = {x: Math.floor(t.x), y: Math.floor(t.y)};\n  var frct = {x: t.x - 1.0 * indx.x, y: t.y - 1.0 * indx.y};\n  var val= {x: Number.NaN, y: Number.NaN};\n  var inx;\n  if (indx.x < 0 || indx.x >= ct.lim[0]) {\n    return val;\n  }\n  if (indx.y < 0 || indx.y >= ct.lim[1]) {\n    return val;\n  }\n  inx = (indx.y * ct.lim[0]) + indx.x;\n  var f00 = {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  inx++;\n  var f10= {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  inx += ct.lim[0];\n  var f11 = {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  inx--;\n  var f01 = {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  var m11 = frct.x * frct.y, m10 = frct.x * (1.0 - frct.y),\n    m00 = (1.0 - frct.x) * (1.0 - frct.y), m01 = (1.0 - frct.x) * frct.y;\n  val.x = (m00 * f00.x + m10 * f10.x + m01 * f01.x + m11 * f11.x);\n  val.y = (m00 * f00.y + m10 * f10.y + m01 * f01.y + m11 * f11.y);\n  return val;\n}\n","export default function(crs, denorm, point) {\n  var xin = point.x,\n    yin = point.y,\n    zin = point.z || 0.0;\n  var v, t, i;\n  var out = {};\n  for (i = 0; i < 3; i++) {\n    if (denorm && i === 2 && point.z === undefined) {\n      continue;\n    }\n    if (i === 0) {\n      v = xin;\n      if (\"ew\".indexOf(crs.axis[i]) !== -1) {\n        t = 'x';\n      } else {\n        t = 'y';\n      }\n\n    }\n    else if (i === 1) {\n      v = yin;\n      if (\"ns\".indexOf(crs.axis[i]) !== -1) {\n        t = 'y';\n      } else {\n        t = 'x';\n      }\n    }\n    else {\n      v = zin;\n      t = 'z';\n    }\n    switch (crs.axis[i]) {\n    case 'e':\n      out[t] = v;\n      break;\n    case 'w':\n      out[t] = -v;\n      break;\n    case 'n':\n      out[t] = v;\n      break;\n    case 's':\n      out[t] = -v;\n      break;\n    case 'u':\n      if (point[t] !== undefined) {\n        out.z = v;\n      }\n      break;\n    case 'd':\n      if (point[t] !== undefined) {\n        out.z = -v;\n      }\n      break;\n    default:\n      //console.log(\"ERROR: unknow axis (\"+crs.axis[i]+\") - check definition of \"+crs.projName);\n      return null;\n    }\n  }\n  return out;\n}\n","export default function (array){\n  var out = {\n    x: array[0],\n    y: array[1]\n  };\n  if (array.length>2) {\n    out.z = array[2];\n  }\n  if (array.length>3) {\n    out.m = array[3];\n  }\n  return out;\n}","export default function (point) {\n  checkCoord(point.x);\n  checkCoord(point.y);\n}\nfunction checkCoord(num) {\n  if (typeof Number.isFinite === 'function') {\n    if (Number.isFinite(num)) {\n      return;\n    }\n    throw new TypeError('coordinates must be finite numbers');\n  }\n  if (typeof num !== 'number' || num !== num || !isFinite(num)) {\n    throw new TypeError('coordinates must be finite numbers');\n  }\n}\n","import {D2R, R2D, PJD_3PARAM, PJD_7PARAM} from './constants/values';\nimport datum_transform from './datum_transform';\nimport adjust_axis from './adjust_axis';\nimport proj from './Proj';\nimport toPoint from './common/toPoint';\nimport checkSanity from './checkSanity';\n\nfunction checkNotWGS(source, dest) {\n  return ((source.datum.datum_type === PJD_3PARAM || source.datum.datum_type === PJD_7PARAM) && dest.datumCode !== 'WGS84') || ((dest.datum.datum_type === PJD_3PARAM || dest.datum.datum_type === PJD_7PARAM) && source.datumCode !== 'WGS84');\n}\n\nexport default function transform(source, dest, point, enforceAxis) {\n  var wgs84;\n  if (Array.isArray(point)) {\n    point = toPoint(point);\n  }\n  checkSanity(point);\n  // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84\n  if (source.datum && dest.datum && checkNotWGS(source, dest)) {\n    wgs84 = new proj('WGS84');\n    point = transform(source, wgs84, point, enforceAxis);\n    source = wgs84;\n  }\n  // DGR, 2010/11/12\n  if (enforceAxis && source.axis !== 'enu') {\n    point = adjust_axis(source, false, point);\n  }\n  // Transform source points to long/lat, if they aren't already.\n  if (source.projName === 'longlat') {\n    point = {\n      x: point.x * D2R,\n      y: point.y * D2R,\n      z: point.z || 0\n    };\n  } else {\n    if (source.to_meter) {\n      point = {\n        x: point.x * source.to_meter,\n        y: point.y * source.to_meter,\n        z: point.z || 0\n      };\n    }\n    point = source.inverse(point); // Convert Cartesian to longlat\n    if (!point) {\n      return;\n    }\n  }\n  // Adjust for the prime meridian if necessary\n  if (source.from_greenwich) {\n    point.x += source.from_greenwich;\n  }\n\n  // Convert datums if needed, and if possible.\n  point = datum_transform(source.datum, dest.datum, point);\n  if (!point) {\n    return;\n  }\n\n  // Adjust for the prime meridian if necessary\n  if (dest.from_greenwich) {\n    point = {\n      x: point.x - dest.from_greenwich,\n      y: point.y,\n      z: point.z || 0\n    };\n  }\n\n  if (dest.projName === 'longlat') {\n    // convert radians to decimal degrees\n    point = {\n      x: point.x * R2D,\n      y: point.y * R2D,\n      z: point.z || 0\n    };\n  } else { // else project\n    point = dest.forward(point);\n    if (dest.to_meter) {\n      point = {\n        x: point.x / dest.to_meter,\n        y: point.y / dest.to_meter,\n        z: point.z || 0\n      };\n    }\n  }\n\n  // DGR, 2010/11/12\n  if (enforceAxis && dest.axis !== 'enu') {\n    return adjust_axis(dest, true, point);\n  }\n\n  return point;\n}\n","import proj from './Proj';\nimport transform from './transform';\nvar wgs84 = proj('WGS84');\n\nfunction transformer(from, to, coords, enforceAxis) {\n  var transformedArray, out, keys;\n  if (Array.isArray(coords)) {\n    transformedArray = transform(from, to, coords, enforceAxis) || {x: NaN, y: NaN};\n    if (coords.length > 2) {\n      if ((typeof from.name !== 'undefined' && from.name === 'geocent') || (typeof to.name !== 'undefined' && to.name === 'geocent')) {\n        if (typeof transformedArray.z === 'number') {\n          return [transformedArray.x, transformedArray.y, transformedArray.z].concat(coords.splice(3));\n        } else {\n          return [transformedArray.x, transformedArray.y, coords[2]].concat(coords.splice(3));\n        }\n      } else {\n        return [transformedArray.x, transformedArray.y].concat(coords.splice(2));\n      }\n    } else {\n      return [transformedArray.x, transformedArray.y];\n    }\n  } else {\n    out = transform(from, to, coords, enforceAxis);\n    keys = Object.keys(coords);\n    if (keys.length === 2) {\n      return out;\n    }\n    keys.forEach(function (key) {\n      if ((typeof from.name !== 'undefined' && from.name === 'geocent') || (typeof to.name !== 'undefined' && to.name === 'geocent')) {\n        if (key === 'x' || key === 'y' || key === 'z') {\n          return;\n        }\n      } else {\n        if (key === 'x' || key === 'y') {\n          return;\n        }\n      }\n      out[key] = coords[key];\n    });\n    return out;\n  }\n}\n\nfunction checkProj(item) {\n  if (item instanceof proj) {\n    return item;\n  }\n  if (item.oProj) {\n    return item.oProj;\n  }\n  return proj(item);\n}\n\nfunction proj4(fromProj, toProj, coord) {\n  fromProj = checkProj(fromProj);\n  var single = false;\n  var obj;\n  if (typeof toProj === 'undefined') {\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  } else if (typeof toProj.x !== 'undefined' || Array.isArray(toProj)) {\n    coord = toProj;\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  }\n  toProj = checkProj(toProj);\n  if (coord) {\n    return transformer(fromProj, toProj, coord);\n  } else {\n    obj = {\n      forward: function (coords, enforceAxis) {\n        return transformer(fromProj, toProj, coords, enforceAxis);\n      },\n      inverse: function (coords, enforceAxis) {\n        return transformer(toProj, fromProj, coords, enforceAxis);\n      }\n    };\n    if (single) {\n      obj.oProj = toProj;\n    }\n    return obj;\n  }\n}\nexport default proj4;","\n\n\n/**\n * UTM zones are grouped, and assigned to one of a group of 6\n * sets.\n *\n * {int} @private\n */\nvar NUM_100K_SETS = 6;\n\n/**\n * The column letters (for easting) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';\n\n/**\n * The row letters (for northing) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_ROW_LETTERS = 'AFAFAF';\n\nvar A = 65; // A\nvar I = 73; // I\nvar O = 79; // O\nvar V = 86; // V\nvar Z = 90; // Z\nexport default {\n  forward: forward,\n  inverse: inverse,\n  toPoint: toPoint\n};\n/**\n * Conversion of lat/lon to MGRS.\n *\n * @param {object} ll Object literal with lat and lon properties on a\n *     WGS84 ellipsoid.\n * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for\n *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.\n * @return {string} the MGRS string for the given location and accuracy.\n */\nexport function forward(ll, accuracy) {\n  accuracy = accuracy || 5; // default accuracy 1m\n  return encode(LLtoUTM({\n    lat: ll[1],\n    lon: ll[0]\n  }), accuracy);\n};\n\n/**\n * Conversion of MGRS to lat/lon.\n *\n * @param {string} mgrs MGRS string.\n * @return {array} An array with left (longitude), bottom (latitude), right\n *     (longitude) and top (latitude) values in WGS84, representing the\n *     bounding box for the provided MGRS reference.\n */\nexport function inverse(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];\n  }\n  return [bbox.left, bbox.bottom, bbox.right, bbox.top];\n};\n\nexport function toPoint(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat];\n  }\n  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];\n};\n/**\n * Conversion from degrees to radians.\n *\n * @private\n * @param {number} deg the angle in degrees.\n * @return {number} the angle in radians.\n */\nfunction degToRad(deg) {\n  return (deg * (Math.PI / 180.0));\n}\n\n/**\n * Conversion from radians to degrees.\n *\n * @private\n * @param {number} rad the angle in radians.\n * @return {number} the angle in degrees.\n */\nfunction radToDeg(rad) {\n  return (180.0 * (rad / Math.PI));\n}\n\n/**\n * Converts a set of Longitude and Latitude co-ordinates to UTM\n * using the WGS84 ellipsoid.\n *\n * @private\n * @param {object} ll Object literal with lat and lon properties\n *     representing the WGS84 coordinate to be converted.\n * @return {object} Object literal containing the UTM value with easting,\n *     northing, zoneNumber and zoneLetter properties, and an optional\n *     accuracy property in digits. Returns null if the conversion failed.\n */\nfunction LLtoUTM(ll) {\n  var Lat = ll.lat;\n  var Long = ll.lon;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var k0 = 0.9996;\n  var LongOrigin;\n  var eccPrimeSquared;\n  var N, T, C, A, M;\n  var LatRad = degToRad(Lat);\n  var LongRad = degToRad(Long);\n  var LongOriginRad;\n  var ZoneNumber;\n  // (int)\n  ZoneNumber = Math.floor((Long + 180) / 6) + 1;\n\n  //Make sure the longitude 180.00 is in Zone 60\n  if (Long === 180) {\n    ZoneNumber = 60;\n  }\n\n  // Special zone for Norway\n  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {\n    ZoneNumber = 32;\n  }\n\n  // Special zones for Svalbard\n  if (Lat >= 72.0 && Lat < 84.0) {\n    if (Long >= 0.0 && Long < 9.0) {\n      ZoneNumber = 31;\n    }\n    else if (Long >= 9.0 && Long < 21.0) {\n      ZoneNumber = 33;\n    }\n    else if (Long >= 21.0 && Long < 33.0) {\n      ZoneNumber = 35;\n    }\n    else if (Long >= 33.0 && Long < 42.0) {\n      ZoneNumber = 37;\n    }\n  }\n\n  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin\n  // in middle of\n  // zone\n  LongOriginRad = degToRad(LongOrigin);\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));\n  T = Math.tan(LatRad) * Math.tan(LatRad);\n  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);\n  A = Math.cos(LatRad) * (LongRad - LongOriginRad);\n\n  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));\n\n  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);\n\n  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));\n  if (Lat < 0.0) {\n    UTMNorthing += 10000000.0; //10000000 meter offset for\n    // southern hemisphere\n  }\n\n  return {\n    northing: Math.round(UTMNorthing),\n    easting: Math.round(UTMEasting),\n    zoneNumber: ZoneNumber,\n    zoneLetter: getLetterDesignator(Lat)\n  };\n}\n\n/**\n * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience\n * class where the Zone can be specified as a single string eg.\"60N\" which\n * is then broken down into the ZoneNumber and ZoneLetter.\n *\n * @private\n * @param {object} utm An object literal with northing, easting, zoneNumber\n *     and zoneLetter properties. If an optional accuracy property is\n *     provided (in meters), a bounding box will be returned instead of\n *     latitude and longitude.\n * @return {object} An object literal containing either lat and lon values\n *     (if no accuracy was provided), or top, right, bottom and left values\n *     for the bounding box calculated according to the provided accuracy.\n *     Returns null if the conversion failed.\n */\nfunction UTMtoLL(utm) {\n\n  var UTMNorthing = utm.northing;\n  var UTMEasting = utm.easting;\n  var zoneLetter = utm.zoneLetter;\n  var zoneNumber = utm.zoneNumber;\n  // check the ZoneNummber is valid\n  if (zoneNumber < 0 || zoneNumber > 60) {\n    return null;\n  }\n\n  var k0 = 0.9996;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var eccPrimeSquared;\n  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));\n  var N1, T1, C1, R1, D, M;\n  var LongOrigin;\n  var mu, phi1Rad;\n\n  // remove 500,000 meter offset for longitude\n  var x = UTMEasting - 500000.0;\n  var y = UTMNorthing;\n\n  // We must know somehow if we are in the Northern or Southern\n  // hemisphere, this is the only time we use the letter So even\n  // if the Zone letter isn't exactly correct it should indicate\n  // the hemisphere correctly\n  if (zoneLetter < 'N') {\n    y -= 10000000.0; // remove 10,000,000 meter offset used\n    // for southern hemisphere\n  }\n\n  // There are 60 zones with zone 1 being at West -180 to -174\n  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin\n  // in middle of\n  // zone\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  M = y / k0;\n  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));\n\n  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);\n  // double phi1 = ProjMath.radToDeg(phi1Rad);\n\n  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));\n  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);\n  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);\n  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);\n  D = x / (N1 * k0);\n\n  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);\n  lat = radToDeg(lat);\n\n  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);\n  lon = LongOrigin + radToDeg(lon);\n\n  var result;\n  if (utm.accuracy) {\n    var topRight = UTMtoLL({\n      northing: utm.northing + utm.accuracy,\n      easting: utm.easting + utm.accuracy,\n      zoneLetter: utm.zoneLetter,\n      zoneNumber: utm.zoneNumber\n    });\n    result = {\n      top: topRight.lat,\n      right: topRight.lon,\n      bottom: lat,\n      left: lon\n    };\n  }\n  else {\n    result = {\n      lat: lat,\n      lon: lon\n    };\n  }\n  return result;\n}\n\n/**\n * Calculates the MGRS letter designator for the given latitude.\n *\n * @private\n * @param {number} lat The latitude in WGS84 to get the letter designator\n *     for.\n * @return {char} The letter designator.\n */\nfunction getLetterDesignator(lat) {\n  //This is here as an error flag to show that the Latitude is\n  //outside MGRS limits\n  var LetterDesignator = 'Z';\n\n  if ((84 >= lat) && (lat >= 72)) {\n    LetterDesignator = 'X';\n  }\n  else if ((72 > lat) && (lat >= 64)) {\n    LetterDesignator = 'W';\n  }\n  else if ((64 > lat) && (lat >= 56)) {\n    LetterDesignator = 'V';\n  }\n  else if ((56 > lat) && (lat >= 48)) {\n    LetterDesignator = 'U';\n  }\n  else if ((48 > lat) && (lat >= 40)) {\n    LetterDesignator = 'T';\n  }\n  else if ((40 > lat) && (lat >= 32)) {\n    LetterDesignator = 'S';\n  }\n  else if ((32 > lat) && (lat >= 24)) {\n    LetterDesignator = 'R';\n  }\n  else if ((24 > lat) && (lat >= 16)) {\n    LetterDesignator = 'Q';\n  }\n  else if ((16 > lat) && (lat >= 8)) {\n    LetterDesignator = 'P';\n  }\n  else if ((8 > lat) && (lat >= 0)) {\n    LetterDesignator = 'N';\n  }\n  else if ((0 > lat) && (lat >= -8)) {\n    LetterDesignator = 'M';\n  }\n  else if ((-8 > lat) && (lat >= -16)) {\n    LetterDesignator = 'L';\n  }\n  else if ((-16 > lat) && (lat >= -24)) {\n    LetterDesignator = 'K';\n  }\n  else if ((-24 > lat) && (lat >= -32)) {\n    LetterDesignator = 'J';\n  }\n  else if ((-32 > lat) && (lat >= -40)) {\n    LetterDesignator = 'H';\n  }\n  else if ((-40 > lat) && (lat >= -48)) {\n    LetterDesignator = 'G';\n  }\n  else if ((-48 > lat) && (lat >= -56)) {\n    LetterDesignator = 'F';\n  }\n  else if ((-56 > lat) && (lat >= -64)) {\n    LetterDesignator = 'E';\n  }\n  else if ((-64 > lat) && (lat >= -72)) {\n    LetterDesignator = 'D';\n  }\n  else if ((-72 > lat) && (lat >= -80)) {\n    LetterDesignator = 'C';\n  }\n  return LetterDesignator;\n}\n\n/**\n * Encodes a UTM location as MGRS string.\n *\n * @private\n * @param {object} utm An object literal with easting, northing,\n *     zoneLetter, zoneNumber\n * @param {number} accuracy Accuracy in digits (1-5).\n * @return {string} MGRS string for the given UTM location.\n */\nfunction encode(utm, accuracy) {\n  // prepend with leading zeroes\n  var seasting = \"00000\" + utm.easting,\n    snorthing = \"00000\" + utm.northing;\n\n  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);\n}\n\n/**\n * Get the two letter 100k designator for a given UTM easting,\n * northing and zone number value.\n *\n * @private\n * @param {number} easting\n * @param {number} northing\n * @param {number} zoneNumber\n * @return the two letter 100k designator for the given UTM location.\n */\nfunction get100kID(easting, northing, zoneNumber) {\n  var setParm = get100kSetForZone(zoneNumber);\n  var setColumn = Math.floor(easting / 100000);\n  var setRow = Math.floor(northing / 100000) % 20;\n  return getLetter100kID(setColumn, setRow, setParm);\n}\n\n/**\n * Given a UTM zone number, figure out the MGRS 100K set it is in.\n *\n * @private\n * @param {number} i An UTM zone number.\n * @return {number} the 100k set the UTM zone is in.\n */\nfunction get100kSetForZone(i) {\n  var setParm = i % NUM_100K_SETS;\n  if (setParm === 0) {\n    setParm = NUM_100K_SETS;\n  }\n\n  return setParm;\n}\n\n/**\n * Get the two-letter MGRS 100k designator given information\n * translated from the UTM northing, easting and zone number.\n *\n * @private\n * @param {number} column the column index as it relates to the MGRS\n *        100k set spreadsheet, created from the UTM easting.\n *        Values are 1-8.\n * @param {number} row the row index as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM northing value. Values\n *        are from 0-19.\n * @param {number} parm the set block, as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM zone. Values are from\n *        1-60.\n * @return two letter MGRS 100k code.\n */\nfunction getLetter100kID(column, row, parm) {\n  // colOrigin and rowOrigin are the letters at the origin of the set\n  var index = parm - 1;\n  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);\n  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);\n\n  // colInt and rowInt are the letters to build to return\n  var colInt = colOrigin + column - 1;\n  var rowInt = rowOrigin + row;\n  var rollover = false;\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n    rollover = true;\n  }\n\n  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {\n    colInt++;\n  }\n\n  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {\n    colInt++;\n\n    if (colInt === I) {\n      colInt++;\n    }\n  }\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n    rollover = true;\n  }\n  else {\n    rollover = false;\n  }\n\n  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {\n    rowInt++;\n  }\n\n  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {\n    rowInt++;\n\n    if (rowInt === I) {\n      rowInt++;\n    }\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n  }\n\n  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);\n  return twoLetter;\n}\n\n/**\n * Decode the UTM parameters from a MGRS string.\n *\n * @private\n * @param {string} mgrsString an UPPERCASE coordinate string is expected.\n * @return {object} An object literal with easting, northing, zoneLetter,\n *     zoneNumber and accuracy (in meters) properties.\n */\nfunction decode(mgrsString) {\n\n  if (mgrsString && mgrsString.length === 0) {\n    throw (\"MGRSPoint coverting from nothing\");\n  }\n\n  var length = mgrsString.length;\n\n  var hunK = null;\n  var sb = \"\";\n  var testChar;\n  var i = 0;\n\n  // get Zone number\n  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {\n    if (i >= 2) {\n      throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n    }\n    sb += testChar;\n    i++;\n  }\n\n  var zoneNumber = parseInt(sb, 10);\n\n  if (i === 0 || i + 3 > length) {\n    // A good MGRS string has to be 4-5 digits long,\n    // ##AAA/#AAA at least.\n    throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n  }\n\n  var zoneLetter = mgrsString.charAt(i++);\n\n  // Should we check the zone letter here? Why not.\n  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {\n    throw (\"MGRSPoint zone letter \" + zoneLetter + \" not handled: \" + mgrsString);\n  }\n\n  hunK = mgrsString.substring(i, i += 2);\n\n  var set = get100kSetForZone(zoneNumber);\n\n  var east100k = getEastingFromChar(hunK.charAt(0), set);\n  var north100k = getNorthingFromChar(hunK.charAt(1), set);\n\n  // We have a bug where the northing may be 2000000 too low.\n  // How\n  // do we know when to roll over?\n\n  while (north100k < getMinNorthing(zoneLetter)) {\n    north100k += 2000000;\n  }\n\n  // calculate the char index for easting/northing separator\n  var remainder = length - i;\n\n  if (remainder % 2 !== 0) {\n    throw (\"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters\" + mgrsString);\n  }\n\n  var sep = remainder / 2;\n\n  var sepEasting = 0.0;\n  var sepNorthing = 0.0;\n  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;\n  if (sep > 0) {\n    accuracyBonus = 100000.0 / Math.pow(10, sep);\n    sepEastingString = mgrsString.substring(i, i + sep);\n    sepEasting = parseFloat(sepEastingString) * accuracyBonus;\n    sepNorthingString = mgrsString.substring(i + sep);\n    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;\n  }\n\n  easting = sepEasting + east100k;\n  northing = sepNorthing + north100k;\n\n  return {\n    easting: easting,\n    northing: northing,\n    zoneLetter: zoneLetter,\n    zoneNumber: zoneNumber,\n    accuracy: accuracyBonus\n  };\n}\n\n/**\n * Given the first letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the easting value that\n * should be added to the other, secondary easting value.\n *\n * @private\n * @param {char} e The first letter from a two-letter MGRS 100´k zone.\n * @param {number} set The MGRS table set for the zone number.\n * @return {number} The easting value for the given letter and set.\n */\nfunction getEastingFromChar(e, set) {\n  // colOrigin is the letter at the origin of the set for the\n  // column\n  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);\n  var eastingValue = 100000.0;\n  var rewindMarker = false;\n\n  while (curCol !== e.charCodeAt(0)) {\n    curCol++;\n    if (curCol === I) {\n      curCol++;\n    }\n    if (curCol === O) {\n      curCol++;\n    }\n    if (curCol > Z) {\n      if (rewindMarker) {\n        throw (\"Bad character: \" + e);\n      }\n      curCol = A;\n      rewindMarker = true;\n    }\n    eastingValue += 100000.0;\n  }\n\n  return eastingValue;\n}\n\n/**\n * Given the second letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the northing value that\n * should be added to the other, secondary northing value. You have to\n * remember that Northings are determined from the equator, and the vertical\n * cycle of letters mean a 2000000 additional northing meters. This happens\n * approx. every 18 degrees of latitude. This method does *NOT* count any\n * additional northings. You have to figure out how many 2000000 meters need\n * to be added for the zone letter of the MGRS coordinate.\n *\n * @private\n * @param {char} n Second letter of the MGRS 100k zone\n * @param {number} set The MGRS table set number, which is dependent on the\n *     UTM zone number.\n * @return {number} The northing value for the given letter and set.\n */\nfunction getNorthingFromChar(n, set) {\n\n  if (n > 'V') {\n    throw (\"MGRSPoint given invalid Northing \" + n);\n  }\n\n  // rowOrigin is the letter at the origin of the set for the\n  // column\n  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);\n  var northingValue = 0.0;\n  var rewindMarker = false;\n\n  while (curRow !== n.charCodeAt(0)) {\n    curRow++;\n    if (curRow === I) {\n      curRow++;\n    }\n    if (curRow === O) {\n      curRow++;\n    }\n    // fixing a bug making whole application hang in this loop\n    // when 'n' is a wrong character\n    if (curRow > V) {\n      if (rewindMarker) { // making sure that this loop ends\n        throw (\"Bad character: \" + n);\n      }\n      curRow = A;\n      rewindMarker = true;\n    }\n    northingValue += 100000.0;\n  }\n\n  return northingValue;\n}\n\n/**\n * The function getMinNorthing returns the minimum northing value of a MGRS\n * zone.\n *\n * Ported from Geotrans' c Lattitude_Band_Value structure table.\n *\n * @private\n * @param {char} zoneLetter The MGRS zone to get the min northing for.\n * @return {number}\n */\nfunction getMinNorthing(zoneLetter) {\n  var northing;\n  switch (zoneLetter) {\n  case 'C':\n    northing = 1100000.0;\n    break;\n  case 'D':\n    northing = 2000000.0;\n    break;\n  case 'E':\n    northing = 2800000.0;\n    break;\n  case 'F':\n    northing = 3700000.0;\n    break;\n  case 'G':\n    northing = 4600000.0;\n    break;\n  case 'H':\n    northing = 5500000.0;\n    break;\n  case 'J':\n    northing = 6400000.0;\n    break;\n  case 'K':\n    northing = 7300000.0;\n    break;\n  case 'L':\n    northing = 8200000.0;\n    break;\n  case 'M':\n    northing = 9100000.0;\n    break;\n  case 'N':\n    northing = 0.0;\n    break;\n  case 'P':\n    northing = 800000.0;\n    break;\n  case 'Q':\n    northing = 1700000.0;\n    break;\n  case 'R':\n    northing = 2600000.0;\n    break;\n  case 'S':\n    northing = 3500000.0;\n    break;\n  case 'T':\n    northing = 4400000.0;\n    break;\n  case 'U':\n    northing = 5300000.0;\n    break;\n  case 'V':\n    northing = 6200000.0;\n    break;\n  case 'W':\n    northing = 7000000.0;\n    break;\n  case 'X':\n    northing = 7900000.0;\n    break;\n  default:\n    northing = -1.0;\n  }\n  if (northing >= 0.0) {\n    return northing;\n  }\n  else {\n    throw (\"Invalid zone letter: \" + zoneLetter);\n  }\n\n}\n","import {toPoint, forward} from 'mgrs';\n\nfunction Point(x, y, z) {\n  if (!(this instanceof Point)) {\n    return new Point(x, y, z);\n  }\n  if (Array.isArray(x)) {\n    this.x = x[0];\n    this.y = x[1];\n    this.z = x[2] || 0.0;\n  } else if(typeof x === 'object') {\n    this.x = x.x;\n    this.y = x.y;\n    this.z = x.z || 0.0;\n  } else if (typeof x === 'string' && typeof y === 'undefined') {\n    var coords = x.split(',');\n    this.x = parseFloat(coords[0], 10);\n    this.y = parseFloat(coords[1], 10);\n    this.z = parseFloat(coords[2], 10) || 0.0;\n  } else {\n    this.x = x;\n    this.y = y;\n    this.z = z || 0.0;\n  }\n  console.warn('proj4.Point will be removed in version 3, use proj4.toPoint');\n}\n\nPoint.fromMGRS = function(mgrsStr) {\n  return new Point(toPoint(mgrsStr));\n};\nPoint.prototype.toMGRS = function(accuracy) {\n  return forward([this.x, this.y], accuracy);\n};\nexport default Point;\n","var C00 = 1;\nvar C02 = 0.25;\nvar C04 = 0.046875;\nvar C06 = 0.01953125;\nvar C08 = 0.01068115234375;\nvar C22 = 0.75;\nvar C44 = 0.46875;\nvar C46 = 0.01302083333333333333;\nvar C48 = 0.00712076822916666666;\nvar C66 = 0.36458333333333333333;\nvar C68 = 0.00569661458333333333;\nvar C88 = 0.3076171875;\n\nexport default function(es) {\n  var en = [];\n  en[0] = C00 - es * (C02 + es * (C04 + es * (C06 + es * C08)));\n  en[1] = es * (C22 - es * (C04 + es * (C06 + es * C08)));\n  var t = es * es;\n  en[2] = t * (C44 - es * (C46 + es * C48));\n  t *= es;\n  en[3] = t * (C66 - es * C68);\n  en[4] = t * es * C88;\n  return en;\n}","export default function(phi, sphi, cphi, en) {\n  cphi *= sphi;\n  sphi *= sphi;\n  return (en[0] * phi - cphi * (en[1] + sphi * (en[2] + sphi * (en[3] + sphi * en[4]))));\n}","import pj_mlfn from \"./pj_mlfn\";\nimport {EPSLN} from '../constants/values';\n\nvar MAX_ITER = 20;\n\nexport default function(arg, es, en) {\n  var k = 1 / (1 - es);\n  var phi = arg;\n  for (var i = MAX_ITER; i; --i) { /* rarely goes over 2 iterations */\n    var s = Math.sin(phi);\n    var t = 1 - es * s * s;\n    //t = this.pj_mlfn(phi, s, Math.cos(phi), en) - arg;\n    //phi -= t * (t * Math.sqrt(t)) * k;\n    t = (pj_mlfn(phi, s, Math.cos(phi), en) - arg) * (t * Math.sqrt(t)) * k;\n    phi -= t;\n    if (Math.abs(t) < EPSLN) {\n      return phi;\n    }\n  }\n  //..reportError(\"cass:pj_inv_mlfn: Convergence error\");\n  return phi;\n}\n","// Heavily based on this tmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/tmerc.js\n\nimport pj_enfn from '../common/pj_enfn';\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport adjust_lon from '../common/adjust_lon';\n\nimport {EPSLN, HALF_PI} from '../constants/values';\nimport sign from '../common/sign';\n\nexport function init() {\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  if (this.es) {\n    this.en = pj_enfn(this.es);\n    this.ml0 = pj_mlfn(this.lat0, Math.sin(this.lat0), Math.cos(this.lat0), this.en);\n  }\n}\n\n/**\n    Transverse Mercator Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var con;\n  var x, y;\n  var sin_phi = Math.sin(lat);\n  var cos_phi = Math.cos(lat);\n\n  if (!this.es) {\n    var b = cos_phi * Math.sin(delta_lon);\n\n    if ((Math.abs(Math.abs(b) - 1)) < EPSLN) {\n      return (93);\n    }\n    else {\n      x = 0.5 * this.a * this.k0 * Math.log((1 + b) / (1 - b)) + this.x0;\n      y = cos_phi * Math.cos(delta_lon) / Math.sqrt(1 - Math.pow(b, 2));\n      b = Math.abs(y);\n\n      if (b >= 1) {\n        if ((b - 1) > EPSLN) {\n          return (93);\n        }\n        else {\n          y = 0;\n        }\n      }\n      else {\n        y = Math.acos(y);\n      }\n\n      if (lat < 0) {\n        y = -y;\n      }\n\n      y = this.a * this.k0 * (y - this.lat0) + this.y0;\n    }\n  }\n  else {\n    var al = cos_phi * delta_lon;\n    var als = Math.pow(al, 2);\n    var c = this.ep2 * Math.pow(cos_phi, 2);\n    var cs = Math.pow(c, 2);\n    var tq = Math.abs(cos_phi) > EPSLN ? Math.tan(lat) : 0;\n    var t = Math.pow(tq, 2);\n    var ts = Math.pow(t, 2);\n    con = 1 - this.es * Math.pow(sin_phi, 2);\n    al = al / Math.sqrt(con);\n    var ml = pj_mlfn(lat, sin_phi, cos_phi, this.en);\n\n    x = this.a * (this.k0 * al * (1 +\n      als / 6 * (1 - t + c +\n      als / 20 * (5 - 18 * t + ts + 14 * c - 58 * t * c +\n      als / 42 * (61 + 179 * ts - ts * t - 479 * t))))) +\n      this.x0;\n\n    y = this.a * (this.k0 * (ml - this.ml0 +\n      sin_phi * delta_lon * al / 2 * (1 +\n      als / 12 * (5 - t + 9 * c + 4 * cs +\n      als / 30 * (61 + ts - 58 * t + 270 * c - 330 * t * c +\n      als / 56 * (1385 + 543 * ts - ts * t - 3111 * t)))))) +\n      this.y0;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\n/**\n    Transverse Mercator Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var con, phi;\n  var lat, lon;\n  var x = (p.x - this.x0) * (1 / this.a);\n  var y = (p.y - this.y0) * (1 / this.a);\n\n  if (!this.es) {\n    var f = Math.exp(x / this.k0);\n    var g = 0.5 * (f - 1 / f);\n    var temp = this.lat0 + y / this.k0;\n    var h = Math.cos(temp);\n    con = Math.sqrt((1 - Math.pow(h, 2)) / (1 + Math.pow(g, 2)));\n    lat = Math.asin(con);\n\n    if (y < 0) {\n      lat = -lat;\n    }\n\n    if ((g === 0) && (h === 0)) {\n      lon = 0;\n    }\n    else {\n      lon = adjust_lon(Math.atan2(g, h) + this.long0);\n    }\n  }\n  else { // ellipsoidal form\n    con = this.ml0 + y / this.k0;\n    phi = pj_inv_mlfn(con, this.es, this.en);\n\n    if (Math.abs(phi) < HALF_PI) {\n      var sin_phi = Math.sin(phi);\n      var cos_phi = Math.cos(phi);\n      var tan_phi = Math.abs(cos_phi) > EPSLN ? Math.tan(phi) : 0;\n      var c = this.ep2 * Math.pow(cos_phi, 2);\n      var cs = Math.pow(c, 2);\n      var t = Math.pow(tan_phi, 2);\n      var ts = Math.pow(t, 2);\n      con = 1 - this.es * Math.pow(sin_phi, 2);\n      var d = x * Math.sqrt(con) / this.k0;\n      var ds = Math.pow(d, 2);\n      con = con * tan_phi;\n\n      lat = phi - (con * ds / (1 - this.es)) * 0.5 * (1 -\n        ds / 12 * (5 + 3 * t - 9 * c * t + c - 4 * cs -\n        ds / 30 * (61 + 90 * t - 252 * c * t + 45 * ts + 46 * c -\n        ds / 56 * (1385 + 3633 * t + 4095 * ts + 1574 * ts * t))));\n\n      lon = adjust_lon(this.long0 + (d * (1 -\n        ds / 6 * (1 + 2 * t + c -\n        ds / 20 * (5 + 28 * t + 24 * ts + 8 * c * t + 6 * c -\n        ds / 42 * (61 + 662 * t + 1320 * ts + 720 * ts * t)))) / cos_phi));\n    }\n    else {\n      lat = HALF_PI * sign(y);\n      lon = 0;\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Fast_Transverse_Mercator\", \"Fast Transverse Mercator\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(x) {\n  var r = Math.exp(x);\n  r = (r - 1 / r) / 2;\n  return r;\n}","export default function(x, y) {\n  x = Math.abs(x);\n  y = Math.abs(y);\n  var a = Math.max(x, y);\n  var b = Math.min(x, y) / (a ? a : 1);\n\n  return a * Math.sqrt(1 + Math.pow(b, 2));\n}\n","export default function(x) {\n  var y = 1 + x;\n  var z = y - 1;\n\n  return z === 0 ? x : x * Math.log(y) / z;\n}\n","import hypot from './hypot';\nimport log1py from './log1py';\n\nexport default function(x) {\n  var y = Math.abs(x);\n  y = log1py(y * (1 + y / (hypot(1, y) + 1)));\n\n  return x < 0 ? -y : y;\n}\n","export default function(pp, B) {\n  var cos_2B = 2 * Math.cos(2 * B);\n  var i = pp.length - 1;\n  var h1 = pp[i];\n  var h2 = 0;\n  var h;\n\n  while (--i >= 0) {\n    h = -h2 + cos_2B * h1 + pp[i];\n    h2 = h1;\n    h1 = h;\n  }\n\n  return (B + h * Math.sin(2 * B));\n}\n","export default function(pp, arg_r) {\n  var r = 2 * Math.cos(arg_r);\n  var i = pp.length - 1;\n  var hr1 = pp[i];\n  var hr2 = 0;\n  var hr;\n\n  while (--i >= 0) {\n    hr = -hr2 + r * hr1 + pp[i];\n    hr2 = hr1;\n    hr1 = hr;\n  }\n\n  return Math.sin(arg_r) * hr;\n}\n","export default function(x) {\n  var r = Math.exp(x);\n  r = (r + 1 / r) / 2;\n  return r;\n}","import sinh from './sinh';\nimport cosh from './cosh';\n\nexport default function(pp, arg_r, arg_i) {\n  var sin_arg_r = Math.sin(arg_r);\n  var cos_arg_r = Math.cos(arg_r);\n  var sinh_arg_i = sinh(arg_i);\n  var cosh_arg_i = cosh(arg_i);\n  var r = 2 * cos_arg_r * cosh_arg_i;\n  var i = -2 * sin_arg_r * sinh_arg_i;\n  var j = pp.length - 1;\n  var hr = pp[j];\n  var hi1 = 0;\n  var hr1 = 0;\n  var hi = 0;\n  var hr2;\n  var hi2;\n\n  while (--j >= 0) {\n    hr2 = hr1;\n    hi2 = hi1;\n    hr1 = hr;\n    hi1 = hi;\n    hr = -hr2 + r * hr1 - i * hi1 + pp[j];\n    hi = -hi2 + i * hr1 + r * hi1;\n  }\n\n  r = sin_arg_r * cosh_arg_i;\n  i = cos_arg_r * sinh_arg_i;\n\n  return [r * hr - i * hi, r * hi + i * hr];\n}\n","// Heavily based on this etmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/etmerc.js\n\nimport tmerc from '../projections/tmerc';\nimport sinh from '../common/sinh';\nimport hypot from '../common/hypot';\nimport asinhy from '../common/asinhy';\nimport gatg from '../common/gatg';\nimport clens from '../common/clens';\nimport clens_cmplx from '../common/clens_cmplx';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  if (!this.approx && (isNaN(this.es) || this.es <= 0)) {\n    throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION[\"Fast_Transverse_Mercator\"] in the WKT.');\n  }\n  if (this.approx) {\n    // When '+approx' is set, use tmerc instead\n    tmerc.init.apply(this);\n    this.forward = tmerc.forward;\n    this.inverse = tmerc.inverse;\n  }\n\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  this.cgb = [];\n  this.cbg = [];\n  this.utg = [];\n  this.gtu = [];\n\n  var f = this.es / (1 + Math.sqrt(1 - this.es));\n  var n = f / (2 - f);\n  var np = n;\n\n  this.cgb[0] = n * (2 + n * (-2 / 3 + n * (-2 + n * (116 / 45 + n * (26 / 45 + n * (-2854 / 675 ))))));\n  this.cbg[0] = n * (-2 + n * ( 2 / 3 + n * ( 4 / 3 + n * (-82 / 45 + n * (32 / 45 + n * (4642 / 4725))))));\n\n  np = np * n;\n  this.cgb[1] = np * (7 / 3 + n * (-8 / 5 + n * (-227 / 45 + n * (2704 / 315 + n * (2323 / 945)))));\n  this.cbg[1] = np * (5 / 3 + n * (-16 / 15 + n * ( -13 / 9 + n * (904 / 315 + n * (-1522 / 945)))));\n\n  np = np * n;\n  this.cgb[2] = np * (56 / 15 + n * (-136 / 35 + n * (-1262 / 105 + n * (73814 / 2835))));\n  this.cbg[2] = np * (-26 / 15 + n * (34 / 21 + n * (8 / 5 + n * (-12686 / 2835))));\n\n  np = np * n;\n  this.cgb[3] = np * (4279 / 630 + n * (-332 / 35 + n * (-399572 / 14175)));\n  this.cbg[3] = np * (1237 / 630 + n * (-12 / 5 + n * ( -24832 / 14175)));\n\n  np = np * n;\n  this.cgb[4] = np * (4174 / 315 + n * (-144838 / 6237));\n  this.cbg[4] = np * (-734 / 315 + n * (109598 / 31185));\n\n  np = np * n;\n  this.cgb[5] = np * (601676 / 22275);\n  this.cbg[5] = np * (444337 / 155925);\n\n  np = Math.pow(n, 2);\n  this.Qn = this.k0 / (1 + n) * (1 + np * (1 / 4 + np * (1 / 64 + np / 256)));\n\n  this.utg[0] = n * (-0.5 + n * ( 2 / 3 + n * (-37 / 96 + n * ( 1 / 360 + n * (81 / 512 + n * (-96199 / 604800))))));\n  this.gtu[0] = n * (0.5 + n * (-2 / 3 + n * (5 / 16 + n * (41 / 180 + n * (-127 / 288 + n * (7891 / 37800))))));\n\n  this.utg[1] = np * (-1 / 48 + n * (-1 / 15 + n * (437 / 1440 + n * (-46 / 105 + n * (1118711 / 3870720)))));\n  this.gtu[1] = np * (13 / 48 + n * (-3 / 5 + n * (557 / 1440 + n * (281 / 630 + n * (-1983433 / 1935360)))));\n\n  np = np * n;\n  this.utg[2] = np * (-17 / 480 + n * (37 / 840 + n * (209 / 4480 + n * (-5569 / 90720 ))));\n  this.gtu[2] = np * (61 / 240 + n * (-103 / 140 + n * (15061 / 26880 + n * (167603 / 181440))));\n\n  np = np * n;\n  this.utg[3] = np * (-4397 / 161280 + n * (11 / 504 + n * (830251 / 7257600)));\n  this.gtu[3] = np * (49561 / 161280 + n * (-179 / 168 + n * (6601661 / 7257600)));\n\n  np = np * n;\n  this.utg[4] = np * (-4583 / 161280 + n * (108847 / 3991680));\n  this.gtu[4] = np * (34729 / 80640 + n * (-3418889 / 1995840));\n\n  np = np * n;\n  this.utg[5] = np * (-20648693 / 638668800);\n  this.gtu[5] = np * (212378941 / 319334400);\n\n  var Z = gatg(this.cbg, this.lat0);\n  this.Zb = -this.Qn * (Z + clens(this.gtu, 2 * Z));\n}\n\nexport function forward(p) {\n  var Ce = adjust_lon(p.x - this.long0);\n  var Cn = p.y;\n\n  Cn = gatg(this.cbg, Cn);\n  var sin_Cn = Math.sin(Cn);\n  var cos_Cn = Math.cos(Cn);\n  var sin_Ce = Math.sin(Ce);\n  var cos_Ce = Math.cos(Ce);\n\n  Cn = Math.atan2(sin_Cn, cos_Ce * cos_Cn);\n  Ce = Math.atan2(sin_Ce * cos_Cn, hypot(sin_Cn, cos_Cn * cos_Ce));\n  Ce = asinhy(Math.tan(Ce));\n\n  var tmp = clens_cmplx(this.gtu, 2 * Cn, 2 * Ce);\n\n  Cn = Cn + tmp[0];\n  Ce = Ce + tmp[1];\n\n  var x;\n  var y;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    x = this.a * (this.Qn * Ce) + this.x0;\n    y = this.a * (this.Qn * Cn + this.Zb) + this.y0;\n  }\n  else {\n    x = Infinity;\n    y = Infinity;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\nexport function inverse(p) {\n  var Ce = (p.x - this.x0) * (1 / this.a);\n  var Cn = (p.y - this.y0) * (1 / this.a);\n\n  Cn = (Cn - this.Zb) / this.Qn;\n  Ce = Ce / this.Qn;\n\n  var lon;\n  var lat;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    var tmp = clens_cmplx(this.utg, 2 * Cn, 2 * Ce);\n\n    Cn = Cn + tmp[0];\n    Ce = Ce + tmp[1];\n    Ce = Math.atan(sinh(Ce));\n\n    var sin_Cn = Math.sin(Cn);\n    var cos_Cn = Math.cos(Cn);\n    var sin_Ce = Math.sin(Ce);\n    var cos_Ce = Math.cos(Ce);\n\n    Cn = Math.atan2(sin_Cn * cos_Ce, hypot(sin_Ce, cos_Ce * cos_Cn));\n    Ce = Math.atan2(sin_Ce, cos_Ce * cos_Cn);\n\n    lon = adjust_lon(Ce + this.long0);\n    lat = gatg(this.cgb, Cn);\n  }\n  else {\n    lon = Infinity;\n    lat = Infinity;\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Extended_Transverse_Mercator\", \"Extended Transverse Mercator\", \"etmerc\", \"Transverse_Mercator\", \"Transverse Mercator\", \"tmerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from './adjust_lon';\n\nexport default function(zone, lon) {\n  if (zone === undefined) {\n    zone = Math.floor((adjust_lon(lon) + Math.PI) * 30 / Math.PI) + 1;\n\n    if (zone < 0) {\n      return 0;\n    } else if (zone > 60) {\n      return 60;\n    }\n  }\n  return zone;\n}\n","import adjust_zone from '../common/adjust_zone';\nimport etmerc from './etmerc';\nexport var dependsOn = 'etmerc';\nimport {D2R} from '../constants/values';\n\n\nexport function init() {\n  var zone = adjust_zone(this.zone, this.long0);\n  if (zone === undefined) {\n    throw new Error('unknown utm zone');\n  }\n  this.lat0 = 0;\n  this.long0 =  ((6 * Math.abs(zone)) - 183) * D2R;\n  this.x0 = 500000;\n  this.y0 = this.utmSouth ? 10000000 : 0;\n  this.k0 = 0.9996;\n\n  etmerc.init.apply(this);\n  this.forward = etmerc.forward;\n  this.inverse = etmerc.inverse;\n}\n\nexport var names = [\"Universal Transverse Mercator System\", \"utm\"];\nexport default {\n  init: init,\n  names: names,\n  dependsOn: dependsOn\n};\n","export default function(esinp, exp) {\n  return (Math.pow((1 - esinp) / (1 + esinp), exp));\n}","import srat from '../common/srat';\nvar MAX_ITER = 20;\nimport {HALF_PI, FORTPI} from '../constants/values';\n\nexport function init() {\n  var sphi = Math.sin(this.lat0);\n  var cphi = Math.cos(this.lat0);\n  cphi *= cphi;\n  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);\n  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));\n  this.phic0 = Math.asin(sphi / this.C);\n  this.ratexp = 0.5 * this.C * this.e;\n  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;\n  p.x = this.C * lon;\n  return p;\n}\n\nexport function inverse(p) {\n  var DEL_TOL = 1e-14;\n  var lon = p.x / this.C;\n  var lat = p.y;\n  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);\n  for (var i = MAX_ITER; i > 0; --i) {\n    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), - 0.5 * this.e)) - HALF_PI;\n    if (Math.abs(lat - p.y) < DEL_TOL) {\n      break;\n    }\n    p.y = lat;\n  }\n  /* convergence failed */\n  if (!i) {\n    return null;\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gauss\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import gauss from './gauss';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  gauss.init.apply(this);\n  if (!this.rc) {\n    return;\n  }\n  this.sinc0 = Math.sin(this.phic0);\n  this.cosc0 = Math.cos(this.phic0);\n  this.R2 = 2 * this.rc;\n  if (!this.title) {\n    this.title = \"Oblique Stereographic Alternative\";\n  }\n}\n\nexport function forward(p) {\n  var sinc, cosc, cosl, k;\n  p.x = adjust_lon(p.x - this.long0);\n  gauss.forward.apply(this, [p]);\n  sinc = Math.sin(p.y);\n  cosc = Math.cos(p.y);\n  cosl = Math.cos(p.x);\n  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);\n  p.x = k * cosc * Math.sin(p.x);\n  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);\n  p.x = this.a * p.x + this.x0;\n  p.y = this.a * p.y + this.y0;\n  return p;\n}\n\nexport function inverse(p) {\n  var sinc, cosc, lon, lat, rho;\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n  if ((rho = Math.sqrt(p.x * p.x + p.y * p.y))) {\n    var c = 2 * Math.atan2(rho, this.R2);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);\n    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  gauss.inverse.apply(this, [p]);\n  p.x = adjust_lon(p.x + this.long0);\n  return p;\n}\n\nexport var names = [\"Stereographic_North_Pole\", \"Oblique_Stereographic\", \"Polar_Stereographic\", \"sterea\",\"Oblique Stereographic Alternative\",\"Double_Stereographic\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {EPSLN, HALF_PI} from '../constants/values';\n\nimport sign from '../common/sign';\nimport msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function ssfn_(phit, sinphi, eccen) {\n  sinphi *= eccen;\n  return (Math.tan(0.5 * (HALF_PI + phit)) * Math.pow((1 - sinphi) / (1 + sinphi), 0.5 * eccen));\n}\n\nexport function init() {\n  this.coslat0 = Math.cos(this.lat0);\n  this.sinlat0 = Math.sin(this.lat0);\n  if (this.sphere) {\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n      this.k0 = 0.5 * (1 + sign(this.lat0) * Math.sin(this.lat_ts));\n    }\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (this.lat0 > 0) {\n        //North pole\n        //trace('stere:north pole');\n        this.con = 1;\n      }\n      else {\n        //South pole\n        //trace('stere:south pole');\n        this.con = -1;\n      }\n    }\n    this.cons = Math.sqrt(Math.pow(1 + this.e, 1 + this.e) * Math.pow(1 - this.e, 1 - this.e));\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n      this.k0 = 0.5 * this.cons * msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) / tsfnz(this.e, this.con * this.lat_ts, this.con * Math.sin(this.lat_ts));\n    }\n    this.ms1 = msfnz(this.e, this.sinlat0, this.coslat0);\n    this.X0 = 2 * Math.atan(this.ssfn_(this.lat0, this.sinlat0, this.e)) - HALF_PI;\n    this.cosX0 = Math.cos(this.X0);\n    this.sinX0 = Math.sin(this.X0);\n  }\n}\n\n// Stereographic forward equations--mapping lat,long to x,y\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinlat = Math.sin(lat);\n  var coslat = Math.cos(lat);\n  var A, X, sinX, cosX, ts, rh;\n  var dlon = adjust_lon(lon - this.long0);\n\n  if (Math.abs(Math.abs(lon - this.long0) - Math.PI) <= EPSLN && Math.abs(lat + this.lat0) <= EPSLN) {\n    //case of the origine point\n    //trace('stere:this is the origin point');\n    p.x = NaN;\n    p.y = NaN;\n    return p;\n  }\n  if (this.sphere) {\n    //trace('stere:sphere case');\n    A = 2 * this.k0 / (1 + this.sinlat0 * sinlat + this.coslat0 * coslat * Math.cos(dlon));\n    p.x = this.a * A * coslat * Math.sin(dlon) + this.x0;\n    p.y = this.a * A * (this.coslat0 * sinlat - this.sinlat0 * coslat * Math.cos(dlon)) + this.y0;\n    return p;\n  }\n  else {\n    X = 2 * Math.atan(this.ssfn_(lat, sinlat, this.e)) - HALF_PI;\n    cosX = Math.cos(X);\n    sinX = Math.sin(X);\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      ts = tsfnz(this.e, lat * this.con, this.con * sinlat);\n      rh = 2 * this.a * this.k0 * ts / this.cons;\n      p.x = this.x0 + rh * Math.sin(lon - this.long0);\n      p.y = this.y0 - this.con * rh * Math.cos(lon - this.long0);\n      //trace(p.toString());\n      return p;\n    }\n    else if (Math.abs(this.sinlat0) < EPSLN) {\n      //Eq\n      //trace('stere:equateur');\n      A = 2 * this.a * this.k0 / (1 + cosX * Math.cos(dlon));\n      p.y = A * sinX;\n    }\n    else {\n      //other case\n      //trace('stere:normal case');\n      A = 2 * this.a * this.k0 * this.ms1 / (this.cosX0 * (1 + this.sinX0 * sinX + this.cosX0 * cosX * Math.cos(dlon)));\n      p.y = A * (this.cosX0 * sinX - this.sinX0 * cosX * Math.cos(dlon)) + this.y0;\n    }\n    p.x = A * cosX * Math.sin(dlon) + this.x0;\n  }\n  //trace(p.toString());\n  return p;\n}\n\n//* Stereographic inverse equations--mapping x,y to lat/long\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat, ts, ce, Chi;\n  var rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  if (this.sphere) {\n    var c = 2 * Math.atan(rh / (2 * this.a * this.k0));\n    lon = this.long0;\n    lat = this.lat0;\n    if (rh <= EPSLN) {\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    lat = Math.asin(Math.cos(c) * this.sinlat0 + p.y * Math.sin(c) * this.coslat0 / rh);\n    if (Math.abs(this.coslat0) < EPSLN) {\n      if (this.lat0 > 0) {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      }\n      else {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      }\n    }\n    else {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(c), rh * this.coslat0 * Math.cos(c) - p.y * this.sinlat0 * Math.sin(c)));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (rh <= EPSLN) {\n        lat = this.lat0;\n        lon = this.long0;\n        p.x = lon;\n        p.y = lat;\n        //trace(p.toString());\n        return p;\n      }\n      p.x *= this.con;\n      p.y *= this.con;\n      ts = rh * this.cons / (2 * this.a * this.k0);\n      lat = this.con * phi2z(this.e, ts);\n      lon = this.con * adjust_lon(this.con * this.long0 + Math.atan2(p.x, - 1 * p.y));\n    }\n    else {\n      ce = 2 * Math.atan(rh * this.cosX0 / (2 * this.a * this.k0 * this.ms1));\n      lon = this.long0;\n      if (rh <= EPSLN) {\n        Chi = this.X0;\n      }\n      else {\n        Chi = Math.asin(Math.cos(ce) * this.sinX0 + p.y * Math.sin(ce) * this.cosX0 / rh);\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(ce), rh * this.cosX0 * Math.cos(ce) - p.y * this.sinX0 * Math.sin(ce)));\n      }\n      lat = -1 * phi2z(this.e, Math.tan(0.5 * (HALF_PI + Chi)));\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n\n  //trace(p.toString());\n  return p;\n\n}\n\nexport var names = [\"stere\", \"Stereographic_South_Pole\", \"Polar Stereographic (variant B)\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  ssfn_: ssfn_\n};\n","/*\n  references:\n    Formules et constantes pour le Calcul pour la\n    projection cylindrique conforme à axe oblique et pour la transformation entre\n    des systèmes de référence.\n    http://www.swisstopo.admin.ch/internet/swisstopo/fr/home/topics/survey/sys/refsys/switzerland.parsysrelated1.31216.downloadList.77004.DownloadFile.tmp/swissprojectionfr.pdf\n  */\n\nexport function init() {\n  var phy0 = this.lat0;\n  this.lambda0 = this.long0;\n  var sinPhy0 = Math.sin(phy0);\n  var semiMajorAxis = this.a;\n  var invF = this.rf;\n  var flattening = 1 / invF;\n  var e2 = 2 * flattening - Math.pow(flattening, 2);\n  var e = this.e = Math.sqrt(e2);\n  this.R = this.k0 * semiMajorAxis * Math.sqrt(1 - e2) / (1 - e2 * Math.pow(sinPhy0, 2));\n  this.alpha = Math.sqrt(1 + e2 / (1 - e2) * Math.pow(Math.cos(phy0), 4));\n  this.b0 = Math.asin(sinPhy0 / this.alpha);\n  var k1 = Math.log(Math.tan(Math.PI / 4 + this.b0 / 2));\n  var k2 = Math.log(Math.tan(Math.PI / 4 + phy0 / 2));\n  var k3 = Math.log((1 + e * sinPhy0) / (1 - e * sinPhy0));\n  this.K = k1 - this.alpha * k2 + this.alpha * e / 2 * k3;\n}\n\nexport function forward(p) {\n  var Sa1 = Math.log(Math.tan(Math.PI / 4 - p.y / 2));\n  var Sa2 = this.e / 2 * Math.log((1 + this.e * Math.sin(p.y)) / (1 - this.e * Math.sin(p.y)));\n  var S = -this.alpha * (Sa1 + Sa2) + this.K;\n\n  // spheric latitude\n  var b = 2 * (Math.atan(Math.exp(S)) - Math.PI / 4);\n\n  // spheric longitude\n  var I = this.alpha * (p.x - this.lambda0);\n\n  // psoeudo equatorial rotation\n  var rotI = Math.atan(Math.sin(I) / (Math.sin(this.b0) * Math.tan(b) + Math.cos(this.b0) * Math.cos(I)));\n\n  var rotB = Math.asin(Math.cos(this.b0) * Math.sin(b) - Math.sin(this.b0) * Math.cos(b) * Math.cos(I));\n\n  p.y = this.R / 2 * Math.log((1 + Math.sin(rotB)) / (1 - Math.sin(rotB))) + this.y0;\n  p.x = this.R * rotI + this.x0;\n  return p;\n}\n\nexport function inverse(p) {\n  var Y = p.x - this.x0;\n  var X = p.y - this.y0;\n\n  var rotI = Y / this.R;\n  var rotB = 2 * (Math.atan(Math.exp(X / this.R)) - Math.PI / 4);\n\n  var b = Math.asin(Math.cos(this.b0) * Math.sin(rotB) + Math.sin(this.b0) * Math.cos(rotB) * Math.cos(rotI));\n  var I = Math.atan(Math.sin(rotI) / (Math.cos(this.b0) * Math.cos(rotI) - Math.sin(this.b0) * Math.tan(rotB)));\n\n  var lambda = this.lambda0 + I / this.alpha;\n\n  var S = 0;\n  var phy = b;\n  var prevPhy = -1000;\n  var iteration = 0;\n  while (Math.abs(phy - prevPhy) > 0.0000001) {\n    if (++iteration > 20) {\n      //...reportError(\"omercFwdInfinity\");\n      return;\n    }\n    //S = Math.log(Math.tan(Math.PI / 4 + phy / 2));\n    S = 1 / this.alpha * (Math.log(Math.tan(Math.PI / 4 + b / 2)) - this.K) + this.e * Math.log(Math.tan(Math.PI / 4 + Math.asin(this.e * Math.sin(phy)) / 2));\n    prevPhy = phy;\n    phy = 2 * Math.atan(Math.exp(S)) - Math.PI / 2;\n  }\n\n  p.x = lambda;\n  p.y = phy;\n  return p;\n}\n\nexport var names = [\"somerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import tsfnz from '../common/tsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport { D2R, EPSLN, HALF_PI, TWO_PI, FORTPI } from '../constants/values';\n\nvar TOL = 1e-7;\n\nfunction isTypeA(P) {\n  var typeAProjections = ['Hotine_Oblique_Mercator','Hotine_Oblique_Mercator_Azimuth_Natural_Origin'];\n  var projectionName = typeof P.PROJECTION === \"object\" ? Object.keys(P.PROJECTION)[0] : P.PROJECTION;\n  \n  return 'no_uoff' in P || 'no_off' in P || typeAProjections.indexOf(projectionName) !== -1;\n}\n\n\n/* Initialize the Oblique Mercator  projection\n    ------------------------------------------*/\nexport function init() {  \n  var con, com, cosph0, D, F, H, L, sinph0, p, J, gamma = 0,\n    gamma0, lamc = 0, lam1 = 0, lam2 = 0, phi1 = 0, phi2 = 0, alpha_c = 0, AB;\n  \n  // only Type A uses the no_off or no_uoff property\n  // https://github.com/OSGeo/proj.4/issues/104\n  this.no_off = isTypeA(this);\n  this.no_rot = 'no_rot' in this;\n  \n  var alp = false;\n  if (\"alpha\" in this) {\n    alp = true;\n  }\n\n  var gam = false;\n  if (\"rectified_grid_angle\" in this) {\n    gam = true;\n  }\n\n  if (alp) {\n    alpha_c = this.alpha;\n  }\n  \n  if (gam) {\n    gamma = (this.rectified_grid_angle * D2R);\n  }\n  \n  if (alp || gam) {\n    lamc = this.longc;\n  } else {\n    lam1 = this.long1;\n    phi1 = this.lat1;\n    lam2 = this.long2;\n    phi2 = this.lat2;\n    \n    if (Math.abs(phi1 - phi2) <= TOL || (con = Math.abs(phi1)) <= TOL ||\n        Math.abs(con - HALF_PI) <= TOL || Math.abs(Math.abs(this.lat0) - HALF_PI) <= TOL ||\n        Math.abs(Math.abs(phi2) - HALF_PI) <= TOL) {\n      throw new Error();\n    }\n  }\n  \n  var one_es = 1.0 - this.es;\n  com = Math.sqrt(one_es);\n  \n  if (Math.abs(this.lat0) > EPSLN) {\n    sinph0 = Math.sin(this.lat0);\n    cosph0 = Math.cos(this.lat0);\n    con = 1 - this.es * sinph0 * sinph0;\n    this.B = cosph0 * cosph0;\n    this.B = Math.sqrt(1 + this.es * this.B * this.B / one_es);\n    this.A = this.B * this.k0 * com / con;\n    D = this.B * com / (cosph0 * Math.sqrt(con));\n    F = D * D -1;\n    \n    if (F <= 0) {\n      F = 0;\n    } else {\n      F = Math.sqrt(F);\n      if (this.lat0 < 0) {\n        F = -F;\n      }\n    }\n    \n    this.E = F += D;\n    this.E *= Math.pow(tsfnz(this.e, this.lat0, sinph0), this.B);\n  } else {\n    this.B = 1 / com;\n    this.A = this.k0;\n    this.E = D = F = 1;\n  }\n  \n  if (alp || gam) {\n    if (alp) {\n      gamma0 = Math.asin(Math.sin(alpha_c) / D);\n      if (!gam) {\n        gamma = alpha_c;\n      }\n    } else {\n      gamma0 = gamma;\n      alpha_c = Math.asin(D * Math.sin(gamma0));\n    }\n    this.lam0 = lamc - Math.asin(0.5 * (F - 1 / F) * Math.tan(gamma0)) / this.B;\n  } else {\n    H = Math.pow(tsfnz(this.e, phi1, Math.sin(phi1)), this.B);\n    L = Math.pow(tsfnz(this.e, phi2, Math.sin(phi2)), this.B);\n    F = this.E / H;\n    p = (L - H) / (L + H);\n    J = this.E * this.E;\n    J = (J - L * H) / (J + L * H);\n    con = lam1 - lam2;\n    \n    if (con < -Math.pi) {\n      lam2 -=TWO_PI;\n    } else if (con > Math.pi) {\n      lam2 += TWO_PI;\n    }\n    \n    this.lam0 = adjust_lon(0.5 * (lam1 + lam2) - Math.atan(J * Math.tan(0.5 * this.B * (lam1 - lam2)) / p) / this.B);\n    gamma0 = Math.atan(2 * Math.sin(this.B * adjust_lon(lam1 - this.lam0)) / (F - 1 / F));\n    gamma = alpha_c = Math.asin(D * Math.sin(gamma0));\n  }\n  \n  this.singam = Math.sin(gamma0);\n  this.cosgam = Math.cos(gamma0);\n  this.sinrot = Math.sin(gamma);\n  this.cosrot = Math.cos(gamma);\n  \n  this.rB = 1 / this.B;\n  this.ArB = this.A * this.rB;\n  this.BrA = 1 / this.ArB;\n  AB = this.A * this.B;\n  \n  if (this.no_off) {\n    this.u_0 = 0;\n  } else {\n    this.u_0 = Math.abs(this.ArB * Math.atan(Math.sqrt(D * D - 1) / Math.cos(alpha_c)));\n    \n    if (this.lat0 < 0) {\n      this.u_0 = - this.u_0;\n    }  \n  }\n    \n  F = 0.5 * gamma0;\n  this.v_pole_n = this.ArB * Math.log(Math.tan(FORTPI - F));\n  this.v_pole_s = this.ArB * Math.log(Math.tan(FORTPI + F));\n}\n\n\n/* Oblique Mercator forward equations--mapping lat,long to x,y\n    ----------------------------------------------------------*/\nexport function forward(p) {\n  var coords = {};\n  var S, T, U, V, W, temp, u, v;\n  p.x = p.x - this.lam0;\n  \n  if (Math.abs(Math.abs(p.y) - HALF_PI) > EPSLN) {\n    W = this.E / Math.pow(tsfnz(this.e, p.y, Math.sin(p.y)), this.B);\n    \n    temp = 1 / W;\n    S = 0.5 * (W - temp);\n    T = 0.5 * (W + temp);\n    V = Math.sin(this.B * p.x);\n    U = (S * this.singam - V * this.cosgam) / T;\n        \n    if (Math.abs(Math.abs(U) - 1.0) < EPSLN) {\n      throw new Error();\n    }\n    \n    v = 0.5 * this.ArB * Math.log((1 - U)/(1 + U));\n    temp = Math.cos(this.B * p.x);\n    \n    if (Math.abs(temp) < TOL) {\n      u = this.A * p.x;\n    } else {\n      u = this.ArB * Math.atan2((S * this.cosgam + V * this.singam), temp);\n    }    \n  } else {\n    v = p.y > 0 ? this.v_pole_n : this.v_pole_s;\n    u = this.ArB * p.y;\n  }\n     \n  if (this.no_rot) {\n    coords.x = u;\n    coords.y = v;\n  } else {\n    u -= this.u_0;\n    coords.x = v * this.cosrot + u * this.sinrot;\n    coords.y = u * this.cosrot - v * this.sinrot;\n  }\n  \n  coords.x = (this.a * coords.x + this.x0);\n  coords.y = (this.a * coords.y + this.y0);\n  \n  return coords;\n}\n\nexport function inverse(p) {\n  var u, v, Qp, Sp, Tp, Vp, Up;\n  var coords = {};\n  \n  p.x = (p.x - this.x0) * (1.0 / this.a);\n  p.y = (p.y - this.y0) * (1.0 / this.a);\n\n  if (this.no_rot) {\n    v = p.y;\n    u = p.x;\n  } else {\n    v = p.x * this.cosrot - p.y * this.sinrot;\n    u = p.y * this.cosrot + p.x * this.sinrot + this.u_0;\n  }\n  \n  Qp = Math.exp(-this.BrA * v);\n  Sp = 0.5 * (Qp - 1 / Qp);\n  Tp = 0.5 * (Qp + 1 / Qp);\n  Vp = Math.sin(this.BrA * u);\n  Up = (Vp * this.cosgam + Sp * this.singam) / Tp;\n  \n  if (Math.abs(Math.abs(Up) - 1) < EPSLN) {\n    coords.x = 0;\n    coords.y = Up < 0 ? -HALF_PI : HALF_PI;\n  } else {\n    coords.y = this.E / Math.sqrt((1 + Up) / (1 - Up));\n    coords.y = phi2z(this.e, Math.pow(coords.y, 1 / this.B));\n    \n    if (coords.y === Infinity) {\n      throw new Error();\n    }\n        \n    coords.x = -this.rB * Math.atan2((Sp * this.cosgam - Vp * this.singam), Math.cos(this.BrA * u));\n  }\n  \n  coords.x += this.lam0;\n  \n  return coords;\n}\n\nexport var names = [\"Hotine_Oblique_Mercator\", \"Hotine Oblique Mercator\", \"Hotine_Oblique_Mercator_Azimuth_Natural_Origin\", \"Hotine_Oblique_Mercator_Two_Point_Natural_Origin\", \"Hotine_Oblique_Mercator_Azimuth_Center\", \"Oblique_Mercator\", \"omerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport sign from '../common/sign';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport {HALF_PI, EPSLN} from '../constants/values';\nexport function init() {\n  \n  //double lat0;                    /* the reference latitude               */\n  //double long0;                   /* the reference longitude              */\n  //double lat1;                    /* first standard parallel              */\n  //double lat2;                    /* second standard parallel             */\n  //double r_maj;                   /* major axis                           */\n  //double r_min;                   /* minor axis                           */\n  //double false_east;              /* x offset in meters                   */\n  //double false_north;             /* y offset in meters                   */\n  \n  //the above value can be set with proj4.defs\n  //example: proj4.defs(\"EPSG:2154\",\"+proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs\");\n\n  if (!this.lat2) {\n    this.lat2 = this.lat1;\n  } //if lat2 is not defined\n  if (!this.k0) {\n    this.k0 = 1;\n  }\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n\n  var temp = this.b / this.a;\n  this.e = Math.sqrt(1 - temp * temp);\n\n  var sin1 = Math.sin(this.lat1);\n  var cos1 = Math.cos(this.lat1);\n  var ms1 = msfnz(this.e, sin1, cos1);\n  var ts1 = tsfnz(this.e, this.lat1, sin1);\n\n  var sin2 = Math.sin(this.lat2);\n  var cos2 = Math.cos(this.lat2);\n  var ms2 = msfnz(this.e, sin2, cos2);\n  var ts2 = tsfnz(this.e, this.lat2, sin2);\n\n  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);\n  }\n  else {\n    this.ns = sin1;\n  }\n  if (isNaN(this.ns)) {\n    this.ns = sin1;\n  }\n  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));\n  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);\n  if (!this.title) {\n    this.title = \"Lambert Conformal Conic\";\n  }\n}\n\n// Lambert Conformal conic forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  // singular cases :\n  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {\n    lat = sign(lat) * (HALF_PI - 2 * EPSLN);\n  }\n\n  var con = Math.abs(Math.abs(lat) - HALF_PI);\n  var ts, rh1;\n  if (con > EPSLN) {\n    ts = tsfnz(this.e, lat, Math.sin(lat));\n    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);\n  }\n  else {\n    con = lat * this.ns;\n    if (con <= 0) {\n      return null;\n    }\n    rh1 = 0;\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;\n  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;\n\n  return p;\n}\n\n// Lambert Conformal Conic inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var rh1, con, ts;\n  var lat, lon;\n  var x = (p.x - this.x0) / this.k0;\n  var y = (this.rh - (p.y - this.y0) / this.k0);\n  if (this.ns > 0) {\n    rh1 = Math.sqrt(x * x + y * y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(x * x + y * y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2((con * x), (con * y));\n  }\n  if ((rh1 !== 0) || (this.ns > 0)) {\n    con = 1 / this.ns;\n    ts = Math.pow((rh1 / (this.a * this.f0)), con);\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  else {\n    lat = -HALF_PI;\n  }\n  lon = adjust_lon(theta / this.ns + this.long0);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\n  \"Lambert Tangential Conformal Conic Projection\",\n  \"Lambert_Conformal_Conic\",\n  \"Lambert_Conformal_Conic_1SP\",\n  \"Lambert_Conformal_Conic_2SP\",\n  \"lcc\",\n  \"Lambert Conic Conformal (1SP)\",\n  \"Lambert Conic Conformal (2SP)\"\n];\n\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  this.a = 6377397.155;\n  this.es = 0.006674372230614;\n  this.e = Math.sqrt(this.es);\n  if (!this.lat0) {\n    this.lat0 = 0.863937979737193;\n  }\n  if (!this.long0) {\n    this.long0 = 0.7417649320975901 - 0.308341501185665;\n  }\n  /* if scale not set default to 0.9999 */\n  if (!this.k0) {\n    this.k0 = 0.9999;\n  }\n  this.s45 = 0.785398163397448; /* 45 */\n  this.s90 = 2 * this.s45;\n  this.fi0 = this.lat0;\n  this.e2 = this.es;\n  this.e = Math.sqrt(this.e2);\n  this.alfa = Math.sqrt(1 + (this.e2 * Math.pow(Math.cos(this.fi0), 4)) / (1 - this.e2));\n  this.uq = 1.04216856380474;\n  this.u0 = Math.asin(Math.sin(this.fi0) / this.alfa);\n  this.g = Math.pow((1 + this.e * Math.sin(this.fi0)) / (1 - this.e * Math.sin(this.fi0)), this.alfa * this.e / 2);\n  this.k = Math.tan(this.u0 / 2 + this.s45) / Math.pow(Math.tan(this.fi0 / 2 + this.s45), this.alfa) * this.g;\n  this.k1 = this.k0;\n  this.n0 = this.a * Math.sqrt(1 - this.e2) / (1 - this.e2 * Math.pow(Math.sin(this.fi0), 2));\n  this.s0 = 1.37008346281555;\n  this.n = Math.sin(this.s0);\n  this.ro0 = this.k1 * this.n0 / Math.tan(this.s0);\n  this.ad = this.s90 - this.uq;\n}\n\n/* ellipsoid */\n/* calculate xy from lat/lon */\n/* Constants, identical to inverse transform function */\nexport function forward(p) {\n  var gfi, u, deltav, s, d, eps, ro;\n  var lon = p.x;\n  var lat = p.y;\n  var delta_lon = adjust_lon(lon - this.long0);\n  /* Transformation */\n  gfi = Math.pow(((1 + this.e * Math.sin(lat)) / (1 - this.e * Math.sin(lat))), (this.alfa * this.e / 2));\n  u = 2 * (Math.atan(this.k * Math.pow(Math.tan(lat / 2 + this.s45), this.alfa) / gfi) - this.s45);\n  deltav = -delta_lon * this.alfa;\n  s = Math.asin(Math.cos(this.ad) * Math.sin(u) + Math.sin(this.ad) * Math.cos(u) * Math.cos(deltav));\n  d = Math.asin(Math.cos(u) * Math.sin(deltav) / Math.cos(s));\n  eps = this.n * d;\n  ro = this.ro0 * Math.pow(Math.tan(this.s0 / 2 + this.s45), this.n) / Math.pow(Math.tan(s / 2 + this.s45), this.n);\n  p.y = ro * Math.cos(eps) / 1;\n  p.x = ro * Math.sin(eps) / 1;\n\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  return (p);\n}\n\n/* calculate lat/lon from xy */\nexport function inverse(p) {\n  var u, deltav, s, d, eps, ro, fi1;\n  var ok;\n\n  /* Transformation */\n  /* revert y, x*/\n  var tmp = p.x;\n  p.x = p.y;\n  p.y = tmp;\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  ro = Math.sqrt(p.x * p.x + p.y * p.y);\n  eps = Math.atan2(p.y, p.x);\n  d = eps / Math.sin(this.s0);\n  s = 2 * (Math.atan(Math.pow(this.ro0 / ro, 1 / this.n) * Math.tan(this.s0 / 2 + this.s45)) - this.s45);\n  u = Math.asin(Math.cos(this.ad) * Math.sin(s) - Math.sin(this.ad) * Math.cos(s) * Math.cos(d));\n  deltav = Math.asin(Math.cos(s) * Math.sin(d) / Math.cos(u));\n  p.x = this.long0 - deltav / this.alfa;\n  fi1 = u;\n  ok = 0;\n  var iter = 0;\n  do {\n    p.y = 2 * (Math.atan(Math.pow(this.k, - 1 / this.alfa) * Math.pow(Math.tan(u / 2 + this.s45), 1 / this.alfa) * Math.pow((1 + this.e * Math.sin(fi1)) / (1 - this.e * Math.sin(fi1)), this.e / 2)) - this.s45);\n    if (Math.abs(fi1 - p.y) < 0.0000000001) {\n      ok = 1;\n    }\n    fi1 = p.y;\n    iter += 1;\n  } while (ok === 0 && iter < 15);\n  if (iter >= 15) {\n    return null;\n  }\n\n  return (p);\n}\n\nexport var names = [\"Krovak\", \"krovak\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(e0, e1, e2, e3, phi) {\n  return (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi));\n}","export default function(x) {\n  return (1 - 0.25 * x * (1 + x / 16 * (3 + 1.25 * x)));\n}","export default function(x) {\n  return (0.375 * x * (1 + 0.25 * x * (1 + 0.46875 * x)));\n}","export default function(x) {\n  return (0.05859375 * x * x * (1 + 0.75 * x));\n}","export default function(x) {\n  return (x * x * x * (35 / 3072));\n}","export default function(a, e, sinphi) {\n  var temp = e * sinphi;\n  return a / Math.sqrt(1 - temp * temp);\n}","import {HALF_PI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) < HALF_PI) ? x : (x - (sign(x) * Math.PI));\n}\n","export default function(ml, e0, e1, e2, e3) {\n  var phi;\n  var dphi;\n\n  phi = ml / e0;\n  for (var i = 0; i < 15; i++) {\n    dphi = (ml - (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi))) / (e0 - 2 * e1 * Math.cos(2 * phi) + 4 * e2 * Math.cos(4 * phi) - 6 * e3 * Math.cos(6 * phi));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //..reportError(\"IMLFN-CONV:Latitude failed to converge after 15 iterations\");\n  return NaN;\n}","import mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nexport function init() {\n  if (!this.sphere) {\n    this.e0 = e0fn(this.es);\n    this.e1 = e1fn(this.es);\n    this.e2 = e2fn(this.es);\n    this.e3 = e3fn(this.es);\n    this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  }\n}\n\n/* Cassini forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y;\n  var lam = p.x;\n  var phi = p.y;\n  lam = adjust_lon(lam - this.long0);\n\n  if (this.sphere) {\n    x = this.a * Math.asin(Math.cos(phi) * Math.sin(lam));\n    y = this.a * (Math.atan2(Math.tan(phi), Math.cos(lam)) - this.lat0);\n  }\n  else {\n    //ellipsoid\n    var sinphi = Math.sin(phi);\n    var cosphi = Math.cos(phi);\n    var nl = gN(this.a, this.e, sinphi);\n    var tl = Math.tan(phi) * Math.tan(phi);\n    var al = lam * Math.cos(phi);\n    var asq = al * al;\n    var cl = this.es * cosphi * cosphi / (1 - this.es);\n    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\n    x = nl * al * (1 - asq * tl * (1 / 6 - (8 - tl + 8 * cl) * asq / 120));\n    y = ml - this.ml0 + nl * sinphi / cosphi * asq * (0.5 + (5 - tl + 6 * cl) * asq / 24);\n\n\n  }\n\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var phi, lam;\n\n  if (this.sphere) {\n    var dd = y + this.lat0;\n    phi = Math.asin(Math.sin(dd) * Math.cos(x));\n    lam = Math.atan2(Math.tan(x), Math.cos(dd));\n  }\n  else {\n    /* ellipsoid */\n    var ml1 = this.ml0 / this.a + y;\n    var phi1 = imlfn(ml1, this.e0, this.e1, this.e2, this.e3);\n    if (Math.abs(Math.abs(phi1) - HALF_PI) <= EPSLN) {\n      p.x = this.long0;\n      p.y = HALF_PI;\n      if (y < 0) {\n        p.y *= -1;\n      }\n      return p;\n    }\n    var nl1 = gN(this.a, this.e, Math.sin(phi1));\n\n    var rl1 = nl1 * nl1 * nl1 / this.a / this.a * (1 - this.es);\n    var tl1 = Math.pow(Math.tan(phi1), 2);\n    var dl = x * this.a / nl1;\n    var dsq = dl * dl;\n    phi = phi1 - nl1 * Math.tan(phi1) / rl1 * dl * dl * (0.5 - (1 + 3 * tl1) * dl * dl / 24);\n    lam = dl * (1 - dsq * (tl1 / 3 + (1 + 3 * tl1) * tl1 * dsq / 15)) / Math.cos(phi1);\n\n  }\n\n  p.x = adjust_lon(lam + this.long0);\n  p.y = adjust_lat(phi);\n  return p;\n\n}\n\nexport var names = [\"Cassini\", \"Cassini_Soldner\", \"cass\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(eccent, sinphi) {\n  var con;\n  if (eccent > 1.0e-7) {\n    con = eccent * sinphi;\n    return ((1 - eccent * eccent) * (sinphi / (1 - con * con) - (0.5 / eccent) * Math.log((1 - con) / (1 + con))));\n  }\n  else {\n    return (2 * sinphi);\n  }\n}","\nimport {HALF_PI, EPSLN, FORTPI} from '../constants/values';\n\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\nexport var S_POLE = 1;\n\nexport var N_POLE = 2;\nexport var EQUIT = 3;\nexport var OBLIQ = 4;\n\n/* Initialize the Lambert Azimuthal Equal Area projection\n  ------------------------------------------------------*/\nexport function init() {\n  var t = Math.abs(this.lat0);\n  if (Math.abs(t - HALF_PI) < EPSLN) {\n    this.mode = this.lat0 < 0 ? this.S_POLE : this.N_POLE;\n  }\n  else if (Math.abs(t) < EPSLN) {\n    this.mode = this.EQUIT;\n  }\n  else {\n    this.mode = this.OBLIQ;\n  }\n  if (this.es > 0) {\n    var sinphi;\n\n    this.qp = qsfnz(this.e, 1);\n    this.mmf = 0.5 / (1 - this.es);\n    this.apa = authset(this.es);\n    switch (this.mode) {\n    case this.N_POLE:\n      this.dd = 1;\n      break;\n    case this.S_POLE:\n      this.dd = 1;\n      break;\n    case this.EQUIT:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      this.dd = 1 / this.rq;\n      this.xmf = 1;\n      this.ymf = 0.5 * this.qp;\n      break;\n    case this.OBLIQ:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      sinphi = Math.sin(this.lat0);\n      this.sinb1 = qsfnz(this.e, sinphi) / this.qp;\n      this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1);\n      this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * sinphi * sinphi) * this.rq * this.cosb1);\n      this.ymf = (this.xmf = this.rq) / this.dd;\n      this.xmf *= this.dd;\n      break;\n    }\n  }\n  else {\n    if (this.mode === this.OBLIQ) {\n      this.sinph0 = Math.sin(this.lat0);\n      this.cosph0 = Math.cos(this.lat0);\n    }\n  }\n}\n\n/* Lambert Azimuthal Equal Area forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y, coslam, sinlam, sinphi, q, sinb, cosb, b, cosphi;\n  var lam = p.x;\n  var phi = p.y;\n\n  lam = adjust_lon(lam - this.long0);\n  if (this.sphere) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    coslam = Math.cos(lam);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      y = (this.mode === this.EQUIT) ? 1 + cosphi * coslam : 1 + this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n      if (y <= EPSLN) {\n        return null;\n      }\n      y = Math.sqrt(2 / y);\n      x = y * cosphi * Math.sin(lam);\n      y *= (this.mode === this.EQUIT) ? sinphi : this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        coslam = -coslam;\n      }\n      if (Math.abs(phi + this.lat0) < EPSLN) {\n        return null;\n      }\n      y = FORTPI - phi * 0.5;\n      y = 2 * ((this.mode === this.S_POLE) ? Math.cos(y) : Math.sin(y));\n      x = y * Math.sin(lam);\n      y *= coslam;\n    }\n  }\n  else {\n    sinb = 0;\n    cosb = 0;\n    b = 0;\n    coslam = Math.cos(lam);\n    sinlam = Math.sin(lam);\n    sinphi = Math.sin(phi);\n    q = qsfnz(this.e, sinphi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinb = q / this.qp;\n      cosb = Math.sqrt(1 - sinb * sinb);\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n      b = 1 + this.sinb1 * sinb + this.cosb1 * cosb * coslam;\n      break;\n    case this.EQUIT:\n      b = 1 + cosb * coslam;\n      break;\n    case this.N_POLE:\n      b = HALF_PI + phi;\n      q = this.qp - q;\n      break;\n    case this.S_POLE:\n      b = phi - HALF_PI;\n      q = this.qp + q;\n      break;\n    }\n    if (Math.abs(b) < EPSLN) {\n      return null;\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n    case this.EQUIT:\n      b = Math.sqrt(2 / b);\n      if (this.mode === this.OBLIQ) {\n        y = this.ymf * b * (this.cosb1 * sinb - this.sinb1 * cosb * coslam);\n      }\n      else {\n        y = (b = Math.sqrt(2 / (1 + cosb * coslam))) * sinb * this.ymf;\n      }\n      x = this.xmf * b * cosb * sinlam;\n      break;\n    case this.N_POLE:\n    case this.S_POLE:\n      if (q >= 0) {\n        x = (b = Math.sqrt(q)) * sinlam;\n        y = coslam * ((this.mode === this.S_POLE) ? b : -b);\n      }\n      else {\n        x = y = 0;\n      }\n      break;\n    }\n  }\n\n  p.x = this.a * x + this.x0;\n  p.y = this.a * y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var lam, phi, cCe, sCe, q, rho, ab;\n  if (this.sphere) {\n    var cosz = 0,\n      rh, sinz = 0;\n\n    rh = Math.sqrt(x * x + y * y);\n    phi = rh * 0.5;\n    if (phi > 1) {\n      return null;\n    }\n    phi = 2 * Math.asin(phi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinz = Math.sin(phi);\n      cosz = Math.cos(phi);\n    }\n    switch (this.mode) {\n    case this.EQUIT:\n      phi = (Math.abs(rh) <= EPSLN) ? 0 : Math.asin(y * sinz / rh);\n      x *= sinz;\n      y = cosz * rh;\n      break;\n    case this.OBLIQ:\n      phi = (Math.abs(rh) <= EPSLN) ? this.lat0 : Math.asin(cosz * this.sinph0 + y * sinz * this.cosph0 / rh);\n      x *= sinz * this.cosph0;\n      y = (cosz - Math.sin(phi) * this.sinph0) * rh;\n      break;\n    case this.N_POLE:\n      y = -y;\n      phi = HALF_PI - phi;\n      break;\n    case this.S_POLE:\n      phi -= HALF_PI;\n      break;\n    }\n    lam = (y === 0 && (this.mode === this.EQUIT || this.mode === this.OBLIQ)) ? 0 : Math.atan2(x, y);\n  }\n  else {\n    ab = 0;\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      x /= this.dd;\n      y *= this.dd;\n      rho = Math.sqrt(x * x + y * y);\n      if (rho < EPSLN) {\n        p.x = this.long0;\n        p.y = this.lat0;\n        return p;\n      }\n      sCe = 2 * Math.asin(0.5 * rho / this.rq);\n      cCe = Math.cos(sCe);\n      x *= (sCe = Math.sin(sCe));\n      if (this.mode === this.OBLIQ) {\n        ab = cCe * this.sinb1 + y * sCe * this.cosb1 / rho;\n        q = this.qp * ab;\n        y = rho * this.cosb1 * cCe - y * this.sinb1 * sCe;\n      }\n      else {\n        ab = y * sCe / rho;\n        q = this.qp * ab;\n        y = rho * cCe;\n      }\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        y = -y;\n      }\n      q = (x * x + y * y);\n      if (!q) {\n        p.x = this.long0;\n        p.y = this.lat0;\n        return p;\n      }\n      ab = 1 - q / this.qp;\n      if (this.mode === this.S_POLE) {\n        ab = -ab;\n      }\n    }\n    lam = Math.atan2(x, y);\n    phi = authlat(Math.asin(ab), this.apa);\n  }\n\n  p.x = adjust_lon(this.long0 + lam);\n  p.y = phi;\n  return p;\n}\n\n/* determine latitude from authalic latitude */\nvar P00 = 0.33333333333333333333;\n\nvar P01 = 0.17222222222222222222;\nvar P02 = 0.10257936507936507936;\nvar P10 = 0.06388888888888888888;\nvar P11 = 0.06640211640211640211;\nvar P20 = 0.01641501294219154443;\n\nfunction authset(es) {\n  var t;\n  var APA = [];\n  APA[0] = es * P00;\n  t = es * es;\n  APA[0] += t * P01;\n  APA[1] = t * P10;\n  t *= es;\n  APA[0] += t * P02;\n  APA[1] += t * P11;\n  APA[2] = t * P20;\n  return APA;\n}\n\nfunction authlat(beta, APA) {\n  var t = beta + beta;\n  return (beta + APA[0] * Math.sin(t) + APA[1] * Math.sin(t + t) + APA[2] * Math.sin(t + t + t));\n}\n\nexport var names = [\"Lambert Azimuthal Equal Area\", \"Lambert_Azimuthal_Equal_Area\", \"laea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  S_POLE: S_POLE,\n  N_POLE: N_POLE,\n  EQUIT: EQUIT,\n  OBLIQ: OBLIQ\n};\n","export default function(x) {\n  if (Math.abs(x) > 1) {\n    x = (x > 1) ? 1 : -1;\n  }\n  return Math.asin(x);\n}","import msfnz from '../common/msfnz';\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e3 = Math.sqrt(this.es);\n\n  this.sin_po = Math.sin(this.lat1);\n  this.cos_po = Math.cos(this.lat1);\n  this.t1 = this.sin_po;\n  this.con = this.sin_po;\n  this.ms1 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs1 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  this.sin_po = Math.sin(this.lat2);\n  this.cos_po = Math.cos(this.lat2);\n  this.t2 = this.sin_po;\n  this.ms2 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs2 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  this.sin_po = Math.sin(this.lat0);\n  this.cos_po = Math.cos(this.lat0);\n  this.t3 = this.sin_po;\n  this.qs0 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns0 = (this.ms1 * this.ms1 - this.ms2 * this.ms2) / (this.qs2 - this.qs1);\n  }\n  else {\n    this.ns0 = this.con;\n  }\n  this.c = this.ms1 * this.ms1 + this.ns0 * this.qs1;\n  this.rh = this.a * Math.sqrt(this.c - this.ns0 * this.qs0) / this.ns0;\n}\n\n/* Albers Conical Equal Area forward equations--mapping lat,long to x,y\n  -------------------------------------------------------------------*/\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  this.sin_phi = Math.sin(lat);\n  this.cos_phi = Math.cos(lat);\n\n  var qs = qsfnz(this.e3, this.sin_phi, this.cos_phi);\n  var rh1 = this.a * Math.sqrt(this.c - this.ns0 * qs) / this.ns0;\n  var theta = this.ns0 * adjust_lon(lon - this.long0);\n  var x = rh1 * Math.sin(theta) + this.x0;\n  var y = this.rh - rh1 * Math.cos(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh1, qs, con, theta, lon, lat;\n\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  if (this.ns0 >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n  con = rh1 * this.ns0 / this.a;\n  if (this.sphere) {\n    lat = Math.asin((this.c - con * con) / (2 * this.ns0));\n  }\n  else {\n    qs = (this.c - con * con) / this.ns0;\n    lat = this.phi1z(this.e3, qs);\n  }\n\n  lon = adjust_lon(theta / this.ns0 + this.long0);\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\n/* Function to compute phi1, the latitude for the inverse of the\n   Albers Conical Equal-Area projection.\n-------------------------------------------*/\nexport function phi1z(eccent, qs) {\n  var sinphi, cosphi, con, com, dphi;\n  var phi = asinz(0.5 * qs);\n  if (eccent < EPSLN) {\n    return phi;\n  }\n\n  var eccnts = eccent * eccent;\n  for (var i = 1; i <= 25; i++) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    con = eccent * sinphi;\n    com = 1 - con * con;\n    dphi = 0.5 * com * com / cosphi * (qs / (1 - eccnts) - sinphi / com + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi = phi + dphi;\n    if (Math.abs(dphi) <= 1e-7) {\n      return phi;\n    }\n  }\n  return null;\n}\n\nexport var names = [\"Albers_Conic_Equal_Area\", \"Albers\", \"aea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  phi1z: phi1z\n};\n","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\n/*\n  reference:\n    Wolfram Mathworld \"Gnomonic Projection\"\n    http://mathworld.wolfram.com/GnomonicProjection.html\n    Accessed: 12th November 2009\n  */\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n  // Approximation for projecting points to the horizon (infinity)\n  this.infinity_dist = 1000 * this.a;\n  this.rc = 1;\n}\n\n/* Gnomonic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g;\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.x0 + this.a * ksp * cosphi * Math.sin(dlon) / g;\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon) / g;\n  }\n  else {\n\n    // Point is in the opposing hemisphere and is unprojectable\n    // We still need to return a reasonable point, so we project\n    // to infinity, on a bearing\n    // equivalent to the northern hemisphere equivalent\n    // This is a reasonable approximation for short shapes and lines that\n    // straddle the horizon.\n\n    x = this.x0 + this.infinity_dist * cosphi * Math.sin(dlon);\n    y = this.y0 + this.infinity_dist * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* Rho */\n  var sinc, cosc;\n  var c;\n  var lon, lat;\n\n  /* Inverse equations\n      -----------------*/\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n\n  if ((rh = Math.sqrt(p.x * p.x + p.y * p.y))) {\n    c = Math.atan2(rh, this.rc);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n\n    lat = asinz(cosc * this.sin_p14 + (p.y * sinc * this.cos_p14) / rh);\n    lon = Math.atan2(p.x * sinc, rh * this.cos_p14 * cosc - p.y * this.sin_p14 * sinc);\n    lon = adjust_lon(this.long0 + lon);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gnom\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, q) {\n  var temp = 1 - (1 - eccent * eccent) / (2 * eccent) * Math.log((1 - eccent) / (1 + eccent));\n  if (Math.abs(Math.abs(q) - temp) < 1.0E-6) {\n    if (q < 0) {\n      return (-1 * HALF_PI);\n    }\n    else {\n      return HALF_PI;\n    }\n  }\n  //var phi = 0.5* q/(1-eccent*eccent);\n  var phi = Math.asin(0.5 * q);\n  var dphi;\n  var sin_phi;\n  var cos_phi;\n  var con;\n  for (var i = 0; i < 30; i++) {\n    sin_phi = Math.sin(phi);\n    cos_phi = Math.cos(phi);\n    con = eccent * sin_phi;\n    dphi = Math.pow(1 - con * con, 2) / (2 * cos_phi) * (q / (1 - eccent * eccent) - sin_phi / (1 - con * con) + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //console.log(\"IQSFN-CONV:Latitude failed to converge after 30 iterations\");\n  return NaN;\n}\n","import adjust_lon from '../common/adjust_lon';\nimport qsfnz from '../common/qsfnz';\nimport msfnz from '../common/msfnz';\nimport iqsfnz from '../common/iqsfnz';\n\n/*\n  reference:\n    \"Cartographic Projection Procedures for the UNIX Environment-\n    A User's Manual\" by Gerald I. Evenden,\n    USGS Open File Report 90-284and Release 4 Interim Reports (2003)\n*/\nexport function init() {\n  //no-op\n  if (!this.sphere) {\n    this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n  }\n}\n\n/* Cylindrical Equal Area forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  if (this.sphere) {\n    x = this.x0 + this.a * dlon * Math.cos(this.lat_ts);\n    y = this.y0 + this.a * Math.sin(lat) / Math.cos(this.lat_ts);\n  }\n  else {\n    var qs = qsfnz(this.e, Math.sin(lat));\n    x = this.x0 + this.a * this.k0 * dlon;\n    y = this.y0 + this.a * qs * 0.5 / this.k0;\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Cylindrical Equal Area inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + (p.x / this.a) / Math.cos(this.lat_ts));\n    lat = Math.asin((p.y / this.a) * Math.cos(this.lat_ts));\n  }\n  else {\n    lat = iqsfnz(this.e, 2 * p.y * this.k0 / this.a);\n    lon = adjust_lon(this.long0 + p.x / (this.a * this.k0));\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"cea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Equidistant Cylindrical (Plate Carre)\";\n\n  this.rc = Math.cos(this.lat_ts);\n}\n\n// forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  var dlon = adjust_lon(lon - this.long0);\n  var dlat = adjust_lat(lat - this.lat0);\n  p.x = this.x0 + (this.a * dlon * this.rc);\n  p.y = this.y0 + (this.a * dlat);\n  return p;\n}\n\n// inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var x = p.x;\n  var y = p.y;\n\n  p.x = adjust_lon(this.long0 + ((x - this.x0) / (this.a * this.rc)));\n  p.y = adjust_lat(this.lat0 + ((y - this.y0) / (this.a)));\n  return p;\n}\n\nexport var names = [\"Equirectangular\", \"Equidistant_Cylindrical\", \"eqc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport mlfn from '../common/mlfn';\nimport {EPSLN} from '../constants/values';\n\nimport gN from '../common/gN';\nvar MAX_ITER = 20;\n\nexport function init() {\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2); // devait etre dans tmerc.js mais n y est pas donc je commente sinon retour de valeurs nulles\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0); //si que des zeros le calcul ne se fait pas\n}\n\n/* Polyconic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y, el;\n  var dlon = adjust_lon(lon - this.long0);\n  el = dlon * Math.sin(lat);\n  if (this.sphere) {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.a * this.lat0;\n    }\n    else {\n      x = this.a * Math.sin(el) / Math.tan(lat);\n      y = this.a * (adjust_lat(lat - this.lat0) + (1 - Math.cos(el)) / Math.tan(lat));\n    }\n  }\n  else {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.ml0;\n    }\n    else {\n      var nl = gN(this.a, this.e, Math.sin(lat)) / Math.tan(lat);\n      x = nl * Math.sin(el);\n      y = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat) - this.ml0 + nl * (1 - Math.cos(el));\n    }\n\n  }\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  var lon, lat, x, y, i;\n  var al, bl;\n  var phi, dphi;\n  x = p.x - this.x0;\n  y = p.y - this.y0;\n\n  if (this.sphere) {\n    if (Math.abs(y + this.a * this.lat0) <= EPSLN) {\n      lon = adjust_lon(x / this.a + this.long0);\n      lat = 0;\n    }\n    else {\n      al = this.lat0 + y / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var tanphi;\n      for (i = MAX_ITER; i; --i) {\n        tanphi = Math.tan(phi);\n        dphi = -1 * (al * (phi * tanphi + 1) - phi - 0.5 * (phi * phi + bl) * tanphi) / ((phi - al) / tanphi - 1);\n        phi += dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n      lon = adjust_lon(this.long0 + (Math.asin(x * Math.tan(phi) / this.a)) / Math.sin(lat));\n    }\n  }\n  else {\n    if (Math.abs(y + this.ml0) <= EPSLN) {\n      lat = 0;\n      lon = adjust_lon(this.long0 + x / this.a);\n    }\n    else {\n\n      al = (this.ml0 + y) / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var cl, mln, mlnp, ma;\n      var con;\n      for (i = MAX_ITER; i; --i) {\n        con = this.e * Math.sin(phi);\n        cl = Math.sqrt(1 - con * con) * Math.tan(phi);\n        mln = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n        mlnp = this.e0 - 2 * this.e1 * Math.cos(2 * phi) + 4 * this.e2 * Math.cos(4 * phi) - 6 * this.e3 * Math.cos(6 * phi);\n        ma = mln / this.a;\n        dphi = (al * (cl * ma + 1) - ma - 0.5 * cl * (ma * ma + bl)) / (this.es * Math.sin(2 * phi) * (ma * ma + bl - 2 * al * ma) / (4 * cl) + (al - ma) * (cl * mlnp - 2 / Math.sin(2 * phi)) - mlnp);\n        phi -= dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n\n      //lat=phi4z(this.e,this.e0,this.e1,this.e2,this.e3,al,bl,0,0);\n      cl = Math.sqrt(1 - this.es * Math.pow(Math.sin(lat), 2)) * Math.tan(lat);\n      lon = adjust_lon(this.long0 + Math.asin(x * cl / this.a) / Math.sin(lat));\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Polyconic\", \"poly\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {SEC_TO_RAD} from '../constants/values';\n\n/*\n  reference\n    Department of Land and Survey Technical Circular 1973/32\n      http://www.linz.govt.nz/docs/miscellaneous/nz-map-definition.pdf\n    OSG Technical Report 4.1\n      http://www.linz.govt.nz/docs/miscellaneous/nzmg.pdf\n  */\n\n/**\n * iterations: Number of iterations to refine inverse transform.\n *     0 -> km accuracy\n *     1 -> m accuracy -- suitable for most mapping applications\n *     2 -> mm accuracy\n */\nexport var iterations = 1;\n\nexport function init() {\n  this.A = [];\n  this.A[1] = 0.6399175073;\n  this.A[2] = -0.1358797613;\n  this.A[3] = 0.063294409;\n  this.A[4] = -0.02526853;\n  this.A[5] = 0.0117879;\n  this.A[6] = -0.0055161;\n  this.A[7] = 0.0026906;\n  this.A[8] = -0.001333;\n  this.A[9] = 0.00067;\n  this.A[10] = -0.00034;\n\n  this.B_re = [];\n  this.B_im = [];\n  this.B_re[1] = 0.7557853228;\n  this.B_im[1] = 0;\n  this.B_re[2] = 0.249204646;\n  this.B_im[2] = 0.003371507;\n  this.B_re[3] = -0.001541739;\n  this.B_im[3] = 0.041058560;\n  this.B_re[4] = -0.10162907;\n  this.B_im[4] = 0.01727609;\n  this.B_re[5] = -0.26623489;\n  this.B_im[5] = -0.36249218;\n  this.B_re[6] = -0.6870983;\n  this.B_im[6] = -1.1651967;\n\n  this.C_re = [];\n  this.C_im = [];\n  this.C_re[1] = 1.3231270439;\n  this.C_im[1] = 0;\n  this.C_re[2] = -0.577245789;\n  this.C_im[2] = -0.007809598;\n  this.C_re[3] = 0.508307513;\n  this.C_im[3] = -0.112208952;\n  this.C_re[4] = -0.15094762;\n  this.C_im[4] = 0.18200602;\n  this.C_re[5] = 1.01418179;\n  this.C_im[5] = 1.64497696;\n  this.C_re[6] = 1.9660549;\n  this.C_im[6] = 2.5127645;\n\n  this.D = [];\n  this.D[1] = 1.5627014243;\n  this.D[2] = 0.5185406398;\n  this.D[3] = -0.03333098;\n  this.D[4] = -0.1052906;\n  this.D[5] = -0.0368594;\n  this.D[6] = 0.007317;\n  this.D[7] = 0.01220;\n  this.D[8] = 0.00394;\n  this.D[9] = -0.0013;\n}\n\n/**\n    New Zealand Map Grid Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var n;\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lat = lat - this.lat0;\n  var delta_lon = lon - this.long0;\n\n  // 1. Calculate d_phi and d_psi    ...                          // and d_lambda\n  // For this algorithm, delta_latitude is in seconds of arc x 10-5, so we need to scale to those units. Longitude is radians.\n  var d_phi = delta_lat / SEC_TO_RAD * 1E-5;\n  var d_lambda = delta_lon;\n  var d_phi_n = 1; // d_phi^0\n\n  var d_psi = 0;\n  for (n = 1; n <= 10; n++) {\n    d_phi_n = d_phi_n * d_phi;\n    d_psi = d_psi + this.A[n] * d_phi_n;\n  }\n\n  // 2. Calculate theta\n  var th_re = d_psi;\n  var th_im = d_lambda;\n\n  // 3. Calculate z\n  var th_n_re = 1;\n  var th_n_im = 0; // theta^0\n  var th_n_re1;\n  var th_n_im1;\n\n  var z_re = 0;\n  var z_im = 0;\n  for (n = 1; n <= 6; n++) {\n    th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n    th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n    th_n_re = th_n_re1;\n    th_n_im = th_n_im1;\n    z_re = z_re + this.B_re[n] * th_n_re - this.B_im[n] * th_n_im;\n    z_im = z_im + this.B_im[n] * th_n_re + this.B_re[n] * th_n_im;\n  }\n\n  // 4. Calculate easting and northing\n  p.x = (z_im * this.a) + this.x0;\n  p.y = (z_re * this.a) + this.y0;\n\n  return p;\n}\n\n/**\n    New Zealand Map Grid Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var n;\n  var x = p.x;\n  var y = p.y;\n\n  var delta_x = x - this.x0;\n  var delta_y = y - this.y0;\n\n  // 1. Calculate z\n  var z_re = delta_y / this.a;\n  var z_im = delta_x / this.a;\n\n  // 2a. Calculate theta - first approximation gives km accuracy\n  var z_n_re = 1;\n  var z_n_im = 0; // z^0\n  var z_n_re1;\n  var z_n_im1;\n\n  var th_re = 0;\n  var th_im = 0;\n  for (n = 1; n <= 6; n++) {\n    z_n_re1 = z_n_re * z_re - z_n_im * z_im;\n    z_n_im1 = z_n_im * z_re + z_n_re * z_im;\n    z_n_re = z_n_re1;\n    z_n_im = z_n_im1;\n    th_re = th_re + this.C_re[n] * z_n_re - this.C_im[n] * z_n_im;\n    th_im = th_im + this.C_im[n] * z_n_re + this.C_re[n] * z_n_im;\n  }\n\n  // 2b. Iterate to refine the accuracy of the calculation\n  //        0 iterations gives km accuracy\n  //        1 iteration gives m accuracy -- good enough for most mapping applications\n  //        2 iterations bives mm accuracy\n  for (var i = 0; i < this.iterations; i++) {\n    var th_n_re = th_re;\n    var th_n_im = th_im;\n    var th_n_re1;\n    var th_n_im1;\n\n    var num_re = z_re;\n    var num_im = z_im;\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      num_re = num_re + (n - 1) * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      num_im = num_im + (n - 1) * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    th_n_re = 1;\n    th_n_im = 0;\n    var den_re = this.B_re[1];\n    var den_im = this.B_im[1];\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      den_re = den_re + n * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      den_im = den_im + n * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    // Complex division\n    var den2 = den_re * den_re + den_im * den_im;\n    th_re = (num_re * den_re + num_im * den_im) / den2;\n    th_im = (num_im * den_re - num_re * den_im) / den2;\n  }\n\n  // 3. Calculate d_phi              ...                                    // and d_lambda\n  var d_psi = th_re;\n  var d_lambda = th_im;\n  var d_psi_n = 1; // d_psi^0\n\n  var d_phi = 0;\n  for (n = 1; n <= 9; n++) {\n    d_psi_n = d_psi_n * d_psi;\n    d_phi = d_phi + this.D[n] * d_psi_n;\n  }\n\n  // 4. Calculate latitude and longitude\n  // d_phi is calcuated in second of arc * 10^-5, so we need to scale back to radians. d_lambda is in radians.\n  var lat = this.lat0 + (d_phi * SEC_TO_RAD * 1E5);\n  var lon = this.long0 + d_lambda;\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"New_Zealand_Map_Grid\", \"nzmg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\n\n/* Initialize the Miller Cylindrical projection\n  -------------------------------------------*/\nexport function init() {\n  //no-op\n}\n\n/* Miller Cylindrical forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x = this.x0 + this.a * dlon;\n  var y = this.y0 + this.a * Math.log(Math.tan((Math.PI / 4) + (lat / 2.5))) * 1.25;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Miller Cylindrical inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n\n  var lon = adjust_lon(this.long0 + p.x / this.a);\n  var lat = 2.5 * (Math.atan(Math.exp(0.8 * p.y / this.a)) - Math.PI / 4);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Miller_Cylindrical\", \"mill\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport pj_enfn from '../common/pj_enfn';\nvar MAX_ITER = 20;\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n\nexport function init() {\n  /* Place parameters in static storage for common use\n    -------------------------------------------------*/\n\n\n  if (!this.sphere) {\n    this.en = pj_enfn(this.es);\n  }\n  else {\n    this.n = 1;\n    this.m = 0;\n    this.es = 0;\n    this.C_y = Math.sqrt((this.m + 1) / this.n);\n    this.C_x = this.C_y / (this.m + 1);\n  }\n\n}\n\n/* Sinusoidal forward equations--mapping lat,long to x,y\n  -----------------------------------------------------*/\nexport function forward(p) {\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n    -----------------*/\n  lon = adjust_lon(lon - this.long0);\n\n  if (this.sphere) {\n    if (!this.m) {\n      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;\n    }\n    else {\n      var k = this.n * Math.sin(lat);\n      for (var i = MAX_ITER; i; --i) {\n        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));\n        lat -= V;\n        if (Math.abs(V) < EPSLN) {\n          break;\n        }\n      }\n    }\n    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));\n    y = this.a * this.C_y * lat;\n\n  }\n  else {\n\n    var s = Math.sin(lat);\n    var c = Math.cos(lat);\n    y = this.a * pj_mlfn(lat, s, c, this.en);\n    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var lat, temp, lon, s;\n\n  p.x -= this.x0;\n  lon = p.x / this.a;\n  p.y -= this.y0;\n  lat = p.y / this.a;\n\n  if (this.sphere) {\n    lat /= this.C_y;\n    lon = lon / (this.C_x * (this.m + Math.cos(lat)));\n    if (this.m) {\n      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);\n    }\n    else if (this.n !== 1) {\n      lat = asinz(Math.sin(lat) / this.n);\n    }\n    lon = adjust_lon(lon + this.long0);\n    lat = adjust_lat(lat);\n  }\n  else {\n    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);\n    s = Math.abs(lat);\n    if (s < HALF_PI) {\n      s = Math.sin(lat);\n      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));\n      //temp = this.long0 + p.x / (this.a * Math.cos(lat));\n      lon = adjust_lon(temp);\n    }\n    else if ((s - EPSLN) < HALF_PI) {\n      lon = this.long0;\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Sinusoidal\", \"sinu\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nexport function init() {}\nimport {EPSLN} from '../constants/values';\n/* Mollweide forward equations--mapping lat,long to x,y\n    ----------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var theta = lat;\n  var con = Math.PI * Math.sin(lat);\n\n  /* Iterate using the Newton-Raphson method to find theta\n      -----------------------------------------------------*/\n  while (true) {\n    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));\n    theta += delta_theta;\n    if (Math.abs(delta_theta) < EPSLN) {\n      break;\n    }\n  }\n  theta /= 2;\n\n  /* If the latitude is 90 deg, force the x coordinate to be \"0 + false easting\"\n       this is done here because of precision problems with \"cos(theta)\"\n       --------------------------------------------------------------------------*/\n  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {\n    delta_lon = 0;\n  }\n  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;\n  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var theta;\n  var arg;\n\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  arg = p.y / (1.4142135623731 * this.a);\n\n  /* Because of division by zero problems, 'arg' can not be 1.  Therefore\n       a number very close to one is used instead.\n       -------------------------------------------------------------------*/\n  if (Math.abs(arg) > 0.999999999999) {\n    arg = 0.999999999999;\n  }\n  theta = Math.asin(arg);\n  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))));\n  if (lon < (-Math.PI)) {\n    lon = -Math.PI;\n  }\n  if (lon > Math.PI) {\n    lon = Math.PI;\n  }\n  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;\n  if (Math.abs(arg) > 1) {\n    arg = 1;\n  }\n  var lat = Math.asin(arg);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mollweide\", \"moll\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport msfnz from '../common/msfnz';\nimport mlfn from '../common/mlfn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.lat2 = this.lat2 || this.lat1;\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n\n  this.sinphi = Math.sin(this.lat1);\n  this.cosphi = Math.cos(this.lat1);\n\n  this.ms1 = msfnz(this.e, this.sinphi, this.cosphi);\n  this.ml1 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat1);\n\n  if (Math.abs(this.lat1 - this.lat2) < EPSLN) {\n    this.ns = this.sinphi;\n  }\n  else {\n    this.sinphi = Math.sin(this.lat2);\n    this.cosphi = Math.cos(this.lat2);\n    this.ms2 = msfnz(this.e, this.sinphi, this.cosphi);\n    this.ml2 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat2);\n    this.ns = (this.ms1 - this.ms2) / (this.ml2 - this.ml1);\n  }\n  this.g = this.ml1 + this.ms1 / this.ns;\n  this.ml0 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  this.rh = this.a * (this.g - this.ml0);\n}\n\n/* Equidistant Conic forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var rh1;\n\n  /* Forward equations\n      -----------------*/\n  if (this.sphere) {\n    rh1 = this.a * (this.g - lat);\n  }\n  else {\n    var ml = mlfn(this.e0, this.e1, this.e2, this.e3, lat);\n    rh1 = this.a * (this.g - ml);\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  var x = this.x0 + rh1 * Math.sin(theta);\n  var y = this.y0 + this.rh - rh1 * Math.cos(theta);\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  var con, rh1, lat, lon;\n  if (this.ns >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    lat = adjust_lat(this.g - rh1 / this.a);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    var ml = this.g - rh1 / this.a;\n    lat = imlfn(ml, this.e0, this.e1, this.e2, this.e3);\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n\n}\n\nexport var names = [\"Equidistant_Conic\", \"eqdc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n/* Initialize the Van Der Grinten projection\n  ----------------------------------------*/\nexport function init() {\n  //this.R = 6370997; //Radius of earth\n  this.R = this.a;\n}\n\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  /* Forward equations\n    -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x, y;\n\n  if (Math.abs(lat) <= EPSLN) {\n    x = this.x0 + this.R * dlon;\n    y = this.y0;\n  }\n  var theta = asinz(2 * Math.abs(lat / Math.PI));\n  if ((Math.abs(dlon) <= EPSLN) || (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN)) {\n    x = this.x0;\n    if (lat >= 0) {\n      y = this.y0 + Math.PI * this.R * Math.tan(0.5 * theta);\n    }\n    else {\n      y = this.y0 + Math.PI * this.R * -Math.tan(0.5 * theta);\n    }\n    //  return(OK);\n  }\n  var al = 0.5 * Math.abs((Math.PI / dlon) - (dlon / Math.PI));\n  var asq = al * al;\n  var sinth = Math.sin(theta);\n  var costh = Math.cos(theta);\n\n  var g = costh / (sinth + costh - 1);\n  var gsq = g * g;\n  var m = g * (2 / sinth - 1);\n  var msq = m * m;\n  var con = Math.PI * this.R * (al * (g - msq) + Math.sqrt(asq * (g - msq) * (g - msq) - (msq + asq) * (gsq - msq))) / (msq + asq);\n  if (dlon < 0) {\n    con = -con;\n  }\n  x = this.x0 + con;\n  //con = Math.abs(con / (Math.PI * this.R));\n  var q = asq + g;\n  con = Math.PI * this.R * (m * q - al * Math.sqrt((msq + asq) * (asq + 1) - q * q)) / (msq + asq);\n  if (lat >= 0) {\n    //y = this.y0 + Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 + con;\n  }\n  else {\n    //y = this.y0 - Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 - con;\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Van Der Grinten inverse equations--mapping x,y to lat/long\n  ---------------------------------------------------------*/\nexport function inverse(p) {\n  var lon, lat;\n  var xx, yy, xys, c1, c2, c3;\n  var a1;\n  var m1;\n  var con;\n  var th1;\n  var d;\n\n  /* inverse equations\n    -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  con = Math.PI * this.R;\n  xx = p.x / con;\n  yy = p.y / con;\n  xys = xx * xx + yy * yy;\n  c1 = -Math.abs(yy) * (1 + xys);\n  c2 = c1 - 2 * yy * yy + xx * xx;\n  c3 = -2 * c1 + 1 + 2 * yy * yy + xys * xys;\n  d = yy * yy / c3 + (2 * c2 * c2 * c2 / c3 / c3 / c3 - 9 * c1 * c2 / c3 / c3) / 27;\n  a1 = (c1 - c2 * c2 / 3 / c3) / c3;\n  m1 = 2 * Math.sqrt(-a1 / 3);\n  con = ((3 * d) / a1) / m1;\n  if (Math.abs(con) > 1) {\n    if (con >= 0) {\n      con = 1;\n    }\n    else {\n      con = -1;\n    }\n  }\n  th1 = Math.acos(con) / 3;\n  if (p.y >= 0) {\n    lat = (-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n  else {\n    lat = -(-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n\n  if (Math.abs(xx) < EPSLN) {\n    lon = this.long0;\n  }\n  else {\n    lon = adjust_lon(this.long0 + Math.PI * (xys - 1 + Math.sqrt(1 + 2 * (xx * xx - yy * yy) + xys * xys)) / 2 / xx);\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Van_der_Grinten_I\", \"VanDerGrinten\", \"vandg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport asinz from '../common/asinz';\nimport imlfn from '../common/imlfn';\n\n\n\nexport function init() {\n  this.sin_p12 = Math.sin(this.lat0);\n  this.cos_p12 = Math.cos(this.lat0);\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinphi = Math.sin(p.y);\n  var cosphi = Math.cos(p.y);\n  var dlon = adjust_lon(lon - this.long0);\n  var e0, e1, e2, e3, Mlp, Ml, tanphi, Nl1, Nl, psi, Az, G, H, GH, Hs, c, kp, cos_c, s, s2, s3, s4, s5;\n  if (this.sphere) {\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      p.x = this.x0 + this.a * (HALF_PI - lat) * Math.sin(dlon);\n      p.y = this.y0 - this.a * (HALF_PI - lat) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      p.x = this.x0 + this.a * (HALF_PI + lat) * Math.sin(dlon);\n      p.y = this.y0 + this.a * (HALF_PI + lat) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //default case\n      cos_c = this.sin_p12 * sinphi + this.cos_p12 * cosphi * Math.cos(dlon);\n      c = Math.acos(cos_c);\n      kp = c ? c / Math.sin(c) : 1;\n      p.x = this.x0 + this.a * kp * cosphi * Math.sin(dlon);\n      p.y = this.y0 + this.a * kp * (this.cos_p12 * sinphi - this.sin_p12 * cosphi * Math.cos(dlon));\n      return p;\n    }\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp - Ml) * Math.sin(dlon);\n      p.y = this.y0 - (Mlp - Ml) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp + Ml) * Math.sin(dlon);\n      p.y = this.y0 + (Mlp + Ml) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //Default case\n      tanphi = sinphi / cosphi;\n      Nl1 = gN(this.a, this.e, this.sin_p12);\n      Nl = gN(this.a, this.e, sinphi);\n      psi = Math.atan((1 - this.es) * tanphi + this.es * Nl1 * this.sin_p12 / (Nl * cosphi));\n      Az = Math.atan2(Math.sin(dlon), this.cos_p12 * Math.tan(psi) - this.sin_p12 * Math.cos(dlon));\n      if (Az === 0) {\n        s = Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else if (Math.abs(Math.abs(Az) - Math.PI) <= EPSLN) {\n        s = -Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else {\n        s = Math.asin(Math.sin(dlon) * Math.cos(psi) / Math.sin(Az));\n      }\n      G = this.e * this.sin_p12 / Math.sqrt(1 - this.es);\n      H = this.e * this.cos_p12 * Math.cos(Az) / Math.sqrt(1 - this.es);\n      GH = G * H;\n      Hs = H * H;\n      s2 = s * s;\n      s3 = s2 * s;\n      s4 = s3 * s;\n      s5 = s4 * s;\n      c = Nl1 * s * (1 - s2 * Hs * (1 - Hs) / 6 + s3 / 8 * GH * (1 - 2 * Hs) + s4 / 120 * (Hs * (4 - 7 * Hs) - 3 * G * G * (1 - 7 * Hs)) - s5 / 48 * GH);\n      p.x = this.x0 + c * Math.sin(Az);\n      p.y = this.y0 + c * Math.cos(Az);\n      return p;\n    }\n  }\n\n\n}\n\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var rh, z, sinz, cosz, lon, lat, con, e0, e1, e2, e3, Mlp, M, N1, psi, Az, cosAz, tmp, A, B, D, Ee, F, sinpsi;\n  if (this.sphere) {\n    rh = Math.sqrt(p.x * p.x + p.y * p.y);\n    if (rh > (2 * HALF_PI * this.a)) {\n      return;\n    }\n    z = rh / this.a;\n\n    sinz = Math.sin(z);\n    cosz = Math.cos(z);\n\n    lon = this.long0;\n    if (Math.abs(rh) <= EPSLN) {\n      lat = this.lat0;\n    }\n    else {\n      lat = asinz(cosz * this.sin_p12 + (p.y * sinz * this.cos_p12) / rh);\n      con = Math.abs(this.lat0) - HALF_PI;\n      if (Math.abs(con) <= EPSLN) {\n        if (this.lat0 >= 0) {\n          lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n        }\n        else {\n          lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n        }\n      }\n      else {\n        /*con = cosz - this.sin_p12 * Math.sin(lat);\n        if ((Math.abs(con) < EPSLN) && (Math.abs(p.x) < EPSLN)) {\n          //no-op, just keep the lon value as is\n        } else {\n          var temp = Math.atan2((p.x * sinz * this.cos_p12), (con * rh));\n          lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz * this.cos_p12), (con * rh)));\n        }*/\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * sinz, rh * this.cos_p12 * cosz - p.y * this.sin_p12 * sinz));\n      }\n    }\n\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = Mlp - rh;\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = rh - Mlp;\n\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else {\n      //default case\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      Az = Math.atan2(p.x, p.y);\n      N1 = gN(this.a, this.e, this.sin_p12);\n      cosAz = Math.cos(Az);\n      tmp = this.e * this.cos_p12 * cosAz;\n      A = -tmp * tmp / (1 - this.es);\n      B = 3 * this.es * (1 - A) * this.sin_p12 * this.cos_p12 * cosAz / (1 - this.es);\n      D = rh / N1;\n      Ee = D - A * (1 + A) * Math.pow(D, 3) / 6 - B * (1 + 3 * A) * Math.pow(D, 4) / 24;\n      F = 1 - A * Ee * Ee / 2 - D * Ee * Ee * Ee / 6;\n      psi = Math.asin(this.sin_p12 * Math.cos(Ee) + this.cos_p12 * Math.sin(Ee) * cosAz);\n      lon = adjust_lon(this.long0 + Math.asin(Math.sin(Az) * Math.sin(Ee) / Math.cos(psi)));\n      sinpsi = Math.sin(psi);\n      lat = Math.atan2((sinpsi - this.es * F * this.sin_p12) * Math.tan(psi), sinpsi * (1 - this.es));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n  }\n\n}\n\nexport var names = [\"Azimuthal_Equidistant\", \"aeqd\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nexport function init() {\n  //double temp;      /* temporary variable    */\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n}\n\n/* Orthographic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g, x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.a * ksp * cosphi * Math.sin(dlon);\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* height above ellipsoid      */\n  var z; /* angle          */\n  var sinz, cosz; /* sin of z and cos of z      */\n  var con;\n  var lon, lat;\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  z = asinz(rh / this.a);\n\n  sinz = Math.sin(z);\n  cosz = Math.cos(z);\n\n  lon = this.long0;\n  if (Math.abs(rh) <= EPSLN) {\n    lat = this.lat0;\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lat = asinz(cosz * this.sin_p14 + (p.y * sinz * this.cos_p14) / rh);\n  con = Math.abs(this.lat0) - HALF_PI;\n  if (Math.abs(con) <= EPSLN) {\n    if (this.lat0 >= 0) {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n    }\n    else {\n      lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz), rh * this.cos_p14 * cosz - p.y * this.sin_p14 * sinz));\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"ortho\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","// QSC projection rewritten from the original PROJ4\n// https://github.com/OSGeo/proj.4/blob/master/src/PJ_qsc.c\n\nimport {EPSLN, TWO_PI, SPI, HALF_PI, FORTPI} from '../constants/values';\n\n/* constants */\nvar FACE_ENUM = {\n    FRONT: 1,\n    RIGHT: 2,\n    BACK: 3,\n    LEFT: 4,\n    TOP: 5,\n    BOTTOM: 6\n};\n\nvar AREA_ENUM = {\n    AREA_0: 1,\n    AREA_1: 2,\n    AREA_2: 3,\n    AREA_3: 4\n};\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Quadrilateralized Spherical Cube\";\n\n  /* Determine the cube face from the center of projection. */\n  if (this.lat0 >= HALF_PI - FORTPI / 2.0) {\n    this.face = FACE_ENUM.TOP;\n  } else if (this.lat0 <= -(HALF_PI - FORTPI / 2.0)) {\n    this.face = FACE_ENUM.BOTTOM;\n  } else if (Math.abs(this.long0) <= FORTPI) {\n    this.face = FACE_ENUM.FRONT;\n  } else if (Math.abs(this.long0) <= HALF_PI + FORTPI) {\n    this.face = this.long0 > 0.0 ? FACE_ENUM.RIGHT : FACE_ENUM.LEFT;\n  } else {\n    this.face = FACE_ENUM.BACK;\n  }\n\n  /* Fill in useful values for the ellipsoid <-> sphere shift\n   * described in [LK12]. */\n  if (this.es !== 0) {\n    this.one_minus_f = 1 - (this.a - this.b) / this.a;\n    this.one_minus_f_squared = this.one_minus_f * this.one_minus_f;\n  }\n}\n\n// QSC forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n  var xy = {x: 0, y: 0};\n  var lat, lon;\n  var theta, phi;\n  var t, mu;\n  /* nu; */\n  var area = {value: 0};\n\n  // move lon according to projection's lon\n  p.x -= this.long0;\n\n  /* Convert the geodetic latitude to a geocentric latitude.\n   * This corresponds to the shift from the ellipsoid to the sphere\n   * described in [LK12]. */\n  if (this.es !== 0) {//if (P->es != 0) {\n    lat = Math.atan(this.one_minus_f_squared * Math.tan(p.y));\n  } else {\n    lat = p.y;\n  }\n\n  /* Convert the input lat, lon into theta, phi as used by QSC.\n   * This depends on the cube face and the area on it.\n   * For the top and bottom face, we can compute theta and phi\n   * directly from phi, lam. For the other faces, we must use\n   * unit sphere cartesian coordinates as an intermediate step. */\n  lon = p.x; //lon = lp.lam;\n  if (this.face === FACE_ENUM.TOP) {\n    phi = HALF_PI - lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = lon - HALF_PI;\n    } else if (lon > HALF_PI + FORTPI || lon <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = (lon > 0.0 ? lon - SPI : lon + SPI);\n    } else if (lon > -(HALF_PI + FORTPI) && lon <= -FORTPI) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = lon + HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = lon;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = HALF_PI + lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = -lon + HALF_PI;\n    } else if (lon < FORTPI && lon >= -FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = -lon;\n    } else if (lon < -FORTPI && lon >= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = -lon - HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = (lon > 0.0 ? -lon + SPI : -lon - SPI);\n    }\n  } else {\n    var q, r, s;\n    var sinlat, coslat;\n    var sinlon, coslon;\n\n    if (this.face === FACE_ENUM.RIGHT) {\n      lon = qsc_shift_lon_origin(lon, +HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lon = qsc_shift_lon_origin(lon, +SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lon = qsc_shift_lon_origin(lon, -HALF_PI);\n    }\n    sinlat = Math.sin(lat);\n    coslat = Math.cos(lat);\n    sinlon = Math.sin(lon);\n    coslon = Math.cos(lon);\n    q = coslat * coslon;\n    r = coslat * sinlon;\n    s = sinlat;\n\n    if (this.face === FACE_ENUM.FRONT) {\n      phi = Math.acos(q);\n      theta = qsc_fwd_equat_face_theta(phi, s, r, area);\n    } else if (this.face === FACE_ENUM.RIGHT) {\n      phi = Math.acos(r);\n      theta = qsc_fwd_equat_face_theta(phi, s, -q, area);\n    } else if (this.face === FACE_ENUM.BACK) {\n      phi = Math.acos(-q);\n      theta = qsc_fwd_equat_face_theta(phi, s, -r, area);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      phi = Math.acos(-r);\n      theta = qsc_fwd_equat_face_theta(phi, s, q, area);\n    } else {\n      /* Impossible */\n      phi = theta = 0;\n      area.value = AREA_ENUM.AREA_0;\n    }\n  }\n\n  /* Compute mu and nu for the area of definition.\n   * For mu, see Eq. (3-21) in [OL76], but note the typos:\n   * compare with Eq. (3-14). For nu, see Eq. (3-38). */\n  mu = Math.atan((12 / SPI) * (theta + Math.acos(Math.sin(theta) * Math.cos(FORTPI)) - HALF_PI));\n  t = Math.sqrt((1 - Math.cos(phi)) / (Math.cos(mu) * Math.cos(mu)) / (1 - Math.cos(Math.atan(1 / Math.cos(theta)))));\n\n  /* Apply the result to the real area. */\n  if (area.value === AREA_ENUM.AREA_1) {\n    mu += HALF_PI;\n  } else if (area.value === AREA_ENUM.AREA_2) {\n    mu += SPI;\n  } else if (area.value === AREA_ENUM.AREA_3) {\n    mu += 1.5 * SPI;\n  }\n\n  /* Now compute x, y from mu and nu */\n  xy.x = t * Math.cos(mu);\n  xy.y = t * Math.sin(mu);\n  xy.x = xy.x * this.a + this.x0;\n  xy.y = xy.y * this.a + this.y0;\n\n  p.x = xy.x;\n  p.y = xy.y;\n  return p;\n}\n\n// QSC inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n  var lp = {lam: 0, phi: 0};\n  var mu, nu, cosmu, tannu;\n  var tantheta, theta, cosphi, phi;\n  var t;\n  var area = {value: 0};\n\n  /* de-offset */\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  /* Convert the input x, y to the mu and nu angles as used by QSC.\n   * This depends on the area of the cube face. */\n  nu = Math.atan(Math.sqrt(p.x * p.x + p.y * p.y));\n  mu = Math.atan2(p.y, p.x);\n  if (p.x >= 0.0 && p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_0;\n  } else if (p.y >= 0.0 && p.y >= Math.abs(p.x)) {\n    area.value = AREA_ENUM.AREA_1;\n    mu -= HALF_PI;\n  } else if (p.x < 0.0 && -p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_2;\n    mu = (mu < 0.0 ? mu + SPI : mu - SPI);\n  } else {\n    area.value = AREA_ENUM.AREA_3;\n    mu += HALF_PI;\n  }\n\n  /* Compute phi and theta for the area of definition.\n   * The inverse projection is not described in the original paper, but some\n   * good hints can be found here (as of 2011-12-14):\n   * http://fits.gsfc.nasa.gov/fitsbits/saf.93/saf.9302\n   * (search for \"Message-Id: <9302181759.AA25477 at fits.cv.nrao.edu>\") */\n  t = (SPI / 12) * Math.tan(mu);\n  tantheta = Math.sin(t) / (Math.cos(t) - (1 / Math.sqrt(2)));\n  theta = Math.atan(tantheta);\n  cosmu = Math.cos(mu);\n  tannu = Math.tan(nu);\n  cosphi = 1 - cosmu * cosmu * tannu * tannu * (1 - Math.cos(Math.atan(1 / Math.cos(theta))));\n  if (cosphi < -1) {\n    cosphi = -1;\n  } else if (cosphi > +1) {\n    cosphi = +1;\n  }\n\n  /* Apply the result to the real area on the cube face.\n   * For the top and bottom face, we can compute phi and lam directly.\n   * For the other faces, we must use unit sphere cartesian coordinates\n   * as an intermediate step. */\n  if (this.face === FACE_ENUM.TOP) {\n    phi = Math.acos(cosphi);\n    lp.phi = HALF_PI - phi;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = (theta < 0.0 ? theta + SPI : theta - SPI);\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = theta;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = Math.acos(cosphi);\n    lp.phi = phi - HALF_PI;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = -theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = -theta;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = -theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = (theta < 0.0 ? -theta - SPI : -theta + SPI);\n    }\n  } else {\n    /* Compute phi and lam via cartesian unit sphere coordinates. */\n    var q, r, s;\n    q = cosphi;\n    t = q * q;\n    if (t >= 1) {\n      s = 0;\n    } else {\n      s = Math.sqrt(1 - t) * Math.sin(theta);\n    }\n    t += s * s;\n    if (t >= 1) {\n      r = 0;\n    } else {\n      r = Math.sqrt(1 - t);\n    }\n    /* Rotate q,r,s into the correct area. */\n    if (area.value === AREA_ENUM.AREA_1) {\n      t = r;\n      r = -s;\n      s = t;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      r = -r;\n      s = -s;\n    } else if (area.value === AREA_ENUM.AREA_3) {\n      t = r;\n      r = s;\n      s = -t;\n    }\n    /* Rotate q,r,s into the correct cube face. */\n    if (this.face === FACE_ENUM.RIGHT) {\n      t = q;\n      q = -r;\n      r = t;\n    } else if (this.face === FACE_ENUM.BACK) {\n      q = -q;\n      r = -r;\n    } else if (this.face === FACE_ENUM.LEFT) {\n      t = q;\n      q = r;\n      r = -t;\n    }\n    /* Now compute phi and lam from the unit sphere coordinates. */\n    lp.phi = Math.acos(-s) - HALF_PI;\n    lp.lam = Math.atan2(r, q);\n    if (this.face === FACE_ENUM.RIGHT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, +HALF_PI);\n    }\n  }\n\n  /* Apply the shift from the sphere to the ellipsoid as described\n   * in [LK12]. */\n  if (this.es !== 0) {\n    var invert_sign;\n    var tanphi, xa;\n    invert_sign = (lp.phi < 0 ? 1 : 0);\n    tanphi = Math.tan(lp.phi);\n    xa = this.b / Math.sqrt(tanphi * tanphi + this.one_minus_f_squared);\n    lp.phi = Math.atan(Math.sqrt(this.a * this.a - xa * xa) / (this.one_minus_f * xa));\n    if (invert_sign) {\n      lp.phi = -lp.phi;\n    }\n  }\n\n  lp.lam += this.long0;\n  p.x = lp.lam;\n  p.y = lp.phi;\n  return p;\n}\n\n/* Helper function for forward projection: compute the theta angle\n * and determine the area number. */\nfunction qsc_fwd_equat_face_theta(phi, y, x, area) {\n  var theta;\n  if (phi < EPSLN) {\n    area.value = AREA_ENUM.AREA_0;\n    theta = 0.0;\n  } else {\n    theta = Math.atan2(y, x);\n    if (Math.abs(theta) <= FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n    } else if (theta > FORTPI && theta <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta -= HALF_PI;\n    } else if (theta > HALF_PI + FORTPI || theta <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = (theta >= 0.0 ? theta - SPI : theta + SPI);\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta += HALF_PI;\n    }\n  }\n  return theta;\n}\n\n/* Helper function: shift the longitude. */\nfunction qsc_shift_lon_origin(lon, offset) {\n  var slon = lon + offset;\n  if (slon < -SPI) {\n    slon += TWO_PI;\n  } else if (slon > +SPI) {\n    slon -= TWO_PI;\n  }\n  return slon;\n}\n\nexport var names = [\"Quadrilateralized Spherical Cube\", \"Quadrilateralized_Spherical_Cube\", \"qsc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n","// Robinson projection\n// Based on https://github.com/OSGeo/proj.4/blob/master/src/PJ_robin.c\n// Polynomial coeficients from http://article.gmane.org/gmane.comp.gis.proj-4.devel/6039\n\nimport {HALF_PI, D2R, R2D, EPSLN} from '../constants/values';\nimport adjust_lon from '../common/adjust_lon';\n\nvar COEFS_X = [\n    [1.0000, 2.2199e-17, -7.15515e-05, 3.1103e-06],\n    [0.9986, -0.000482243, -2.4897e-05, -1.3309e-06],\n    [0.9954, -0.00083103, -4.48605e-05, -9.86701e-07],\n    [0.9900, -0.00135364, -5.9661e-05, 3.6777e-06],\n    [0.9822, -0.00167442, -4.49547e-06, -5.72411e-06],\n    [0.9730, -0.00214868, -9.03571e-05, 1.8736e-08],\n    [0.9600, -0.00305085, -9.00761e-05, 1.64917e-06],\n    [0.9427, -0.00382792, -6.53386e-05, -2.6154e-06],\n    [0.9216, -0.00467746, -0.00010457, 4.81243e-06],\n    [0.8962, -0.00536223, -3.23831e-05, -5.43432e-06],\n    [0.8679, -0.00609363, -0.000113898, 3.32484e-06],\n    [0.8350, -0.00698325, -6.40253e-05, 9.34959e-07],\n    [0.7986, -0.00755338, -5.00009e-05, 9.35324e-07],\n    [0.7597, -0.00798324, -3.5971e-05, -2.27626e-06],\n    [0.7186, -0.00851367, -7.01149e-05, -8.6303e-06],\n    [0.6732, -0.00986209, -0.000199569, 1.91974e-05],\n    [0.6213, -0.010418, 8.83923e-05, 6.24051e-06],\n    [0.5722, -0.00906601, 0.000182, 6.24051e-06],\n    [0.5322, -0.00677797, 0.000275608, 6.24051e-06]\n];\n\nvar COEFS_Y = [\n    [-5.20417e-18, 0.0124, 1.21431e-18, -8.45284e-11],\n    [0.0620, 0.0124, -1.26793e-09, 4.22642e-10],\n    [0.1240, 0.0124, 5.07171e-09, -1.60604e-09],\n    [0.1860, 0.0123999, -1.90189e-08, 6.00152e-09],\n    [0.2480, 0.0124002, 7.10039e-08, -2.24e-08],\n    [0.3100, 0.0123992, -2.64997e-07, 8.35986e-08],\n    [0.3720, 0.0124029, 9.88983e-07, -3.11994e-07],\n    [0.4340, 0.0123893, -3.69093e-06, -4.35621e-07],\n    [0.4958, 0.0123198, -1.02252e-05, -3.45523e-07],\n    [0.5571, 0.0121916, -1.54081e-05, -5.82288e-07],\n    [0.6176, 0.0119938, -2.41424e-05, -5.25327e-07],\n    [0.6769, 0.011713, -3.20223e-05, -5.16405e-07],\n    [0.7346, 0.0113541, -3.97684e-05, -6.09052e-07],\n    [0.7903, 0.0109107, -4.89042e-05, -1.04739e-06],\n    [0.8435, 0.0103431, -6.4615e-05, -1.40374e-09],\n    [0.8936, 0.00969686, -6.4636e-05, -8.547e-06],\n    [0.9394, 0.00840947, -0.000192841, -4.2106e-06],\n    [0.9761, 0.00616527, -0.000256, -4.2106e-06],\n    [1.0000, 0.00328947, -0.000319159, -4.2106e-06]\n];\n\nvar FXC = 0.8487;\nvar FYC = 1.3523;\nvar C1 = R2D/5; // rad to 5-degree interval\nvar RC1 = 1/C1;\nvar NODES = 18;\n\nvar poly3_val = function(coefs, x) {\n    return coefs[0] + x * (coefs[1] + x * (coefs[2] + x * coefs[3]));\n};\n\nvar poly3_der = function(coefs, x) {\n    return coefs[1] + x * (2 * coefs[2] + x * 3 * coefs[3]);\n};\n\nfunction newton_rapshon(f_df, start, max_err, iters) {\n    var x = start;\n    for (; iters; --iters) {\n        var upd = f_df(x);\n        x -= upd;\n        if (Math.abs(upd) < max_err) {\n            break;\n        }\n    }\n    return x;\n}\n\nexport function init() {\n    this.x0 = this.x0 || 0;\n    this.y0 = this.y0 || 0;\n    this.long0 = this.long0 || 0;\n    this.es = 0;\n    this.title = this.title || \"Robinson\";\n}\n\nexport function forward(ll) {\n    var lon = adjust_lon(ll.x - this.long0);\n\n    var dphi = Math.abs(ll.y);\n    var i = Math.floor(dphi * C1);\n    if (i < 0) {\n        i = 0;\n    } else if (i >= NODES) {\n        i = NODES - 1;\n    }\n    dphi = R2D * (dphi - RC1 * i);\n    var xy = {\n        x: poly3_val(COEFS_X[i], dphi) * lon,\n        y: poly3_val(COEFS_Y[i], dphi)\n    };\n    if (ll.y < 0) {\n        xy.y = -xy.y;\n    }\n\n    xy.x = xy.x * this.a * FXC + this.x0;\n    xy.y = xy.y * this.a * FYC + this.y0;\n    return xy;\n}\n\nexport function inverse(xy) {\n    var ll = {\n        x: (xy.x - this.x0) / (this.a * FXC),\n        y: Math.abs(xy.y - this.y0) / (this.a * FYC)\n    };\n\n    if (ll.y >= 1) { // pathologic case\n        ll.x /= COEFS_X[NODES][0];\n        ll.y = xy.y < 0 ? -HALF_PI : HALF_PI;\n    } else {\n        // find table interval\n        var i = Math.floor(ll.y * NODES);\n        if (i < 0) {\n            i = 0;\n        } else if (i >= NODES) {\n            i = NODES - 1;\n        }\n        for (;;) {\n            if (COEFS_Y[i][0] > ll.y) {\n                --i;\n            } else if (COEFS_Y[i+1][0] <= ll.y) {\n                ++i;\n            } else {\n                break;\n            }\n        }\n        // linear interpolation in 5 degree interval\n        var coefs = COEFS_Y[i];\n        var t = 5 * (ll.y - coefs[0]) / (COEFS_Y[i+1][0] - coefs[0]);\n        // find t so that poly3_val(coefs, t) = ll.y\n        t = newton_rapshon(function(x) {\n            return (poly3_val(coefs, x) - ll.y) / poly3_der(coefs, x);\n        }, t, EPSLN, 100);\n\n        ll.x /= poly3_val(COEFS_X[i], t);\n        ll.y = (5 * i + t) * D2R;\n        if (xy.y < 0) {\n            ll.y = -ll.y;\n        }\n    }\n\n    ll.x = adjust_lon(ll.x + this.long0);\n    return ll;\n}\n\nexport var names = [\"Robinson\", \"robin\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {\n    geodeticToGeocentric,\n    geocentricToGeodetic\n} from '../datumUtils';\n\nexport function init() {\n    this.name = 'geocent';\n\n}\n\nexport function forward(p) {\n    var point = geodeticToGeocentric(p, this.es, this.a);\n    return point;\n}\n\nexport function inverse(p) {\n    var point = geocentricToGeodetic(p, this.es, this.a, this.b);\n    return point;\n}\n\nexport var names = [\"Geocentric\", 'geocentric', \"geocent\", \"Geocent\"];\nexport default {\n    init: init,\n    forward: forward,\n    inverse: inverse,\n    names: names\n};","\nvar mode = {\n  N_POLE: 0,\n  S_POLE: 1,\n  EQUIT: 2,\n  OBLIQ: 3\n};\n\nimport { D2R, HALF_PI, EPSLN } from \"../constants/values\";\nimport hypot from \"../common/hypot\";\n\nvar params = {\n  h:     { def: 100000, num: true },           // default is Karman line, no default in PROJ.7\n  azi:   { def: 0, num: true, degrees: true }, // default is North\n  tilt:  { def: 0, num: true, degrees: true }, // default is Nadir\n  long0: { def: 0, num: true },                // default is Greenwich, conversion to rad is automatic\n  lat0:  { def: 0, num: true }                 // default is Equator, conversion to rad is automatic\n};\n\nexport function init() {\n  Object.keys(params).forEach(function (p) {\n    if (typeof this[p] === \"undefined\") {\n      this[p] = params[p].def;\n    } else if (params[p].num && isNaN(this[p])) {\n      throw new Error(\"Invalid parameter value, must be numeric \" + p + \" = \" + this[p]);\n    } else if (params[p].num) {\n      this[p] = parseFloat(this[p]);\n    }\n    if (params[p].degrees) {\n      this[p] = this[p] * D2R;\n    }\n  }.bind(this));\n\n  if (Math.abs((Math.abs(this.lat0) - HALF_PI)) < EPSLN) {\n    this.mode = this.lat0 < 0 ? mode.S_POLE : mode.N_POLE;\n  } else if (Math.abs(this.lat0) < EPSLN) {\n    this.mode = mode.EQUIT;\n  } else {\n    this.mode = mode.OBLIQ;\n    this.sinph0 = Math.sin(this.lat0);\n    this.cosph0 = Math.cos(this.lat0);\n  }\n\n  this.pn1 = this.h / this.a;  // Normalize relative to the Earth's radius\n\n  if (this.pn1 <= 0 || this.pn1 > 1e10) {\n    throw new Error(\"Invalid height\");\n  }\n  \n  this.p = 1 + this.pn1;\n  this.rp = 1 / this.p;\n  this.h1 = 1 / this.pn1;\n  this.pfact = (this.p + 1) * this.h1;\n  this.es = 0;\n\n  var omega = this.tilt;\n  var gamma = this.azi;\n  this.cg = Math.cos(gamma);\n  this.sg = Math.sin(gamma);\n  this.cw = Math.cos(omega);\n  this.sw = Math.sin(omega);\n}\n\nexport function forward(p) {\n  p.x -= this.long0;\n  var sinphi = Math.sin(p.y);\n  var cosphi = Math.cos(p.y);\n  var coslam = Math.cos(p.x);\n  var x, y;\n  switch (this.mode) {\n    case mode.OBLIQ:\n      y = this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n      break;\n    case mode.EQUIT:\n      y = cosphi * coslam;\n      break;\n    case mode.S_POLE:\n      y = -sinphi;\n      break;\n    case mode.N_POLE:\n      y = sinphi;\n      break;\n  }\n  y = this.pn1 / (this.p - y);\n  x = y * cosphi * Math.sin(p.x);\n\n  switch (this.mode) {\n    case mode.OBLIQ:\n      y *= this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n      break;\n    case mode.EQUIT:\n      y *= sinphi;\n      break;\n    case mode.N_POLE:\n      y *= -(cosphi * coslam);\n      break;\n    case mode.S_POLE:\n      y *= cosphi * coslam;\n      break;\n  }\n\n  // Tilt \n  var yt, ba;\n  yt = y * this.cg + x * this.sg;\n  ba = 1 / (yt * this.sw * this.h1 + this.cw);\n  x = (x * this.cg - y * this.sg) * this.cw * ba;\n  y = yt * ba;\n\n  p.x = x * this.a;\n  p.y = y * this.a;\n  return p;\n}\n\nexport function inverse(p) {\n  p.x /= this.a;\n  p.y /= this.a;\n  var r = { x: p.x, y: p.y };\n\n  // Un-Tilt\n  var bm, bq, yt;\n  yt = 1 / (this.pn1 - p.y * this.sw);\n  bm = this.pn1 * p.x * yt;\n  bq = this.pn1 * p.y * this.cw * yt;\n  p.x = bm * this.cg + bq * this.sg;\n  p.y = bq * this.cg - bm * this.sg;\n\n  var rh = hypot(p.x, p.y);\n  if (Math.abs(rh) < EPSLN) {\n    r.x = 0;\n    r.y = p.y;\n  } else {\n    var cosz, sinz;\n    sinz = 1 - rh * rh * this.pfact;\n    sinz = (this.p - Math.sqrt(sinz)) / (this.pn1 / rh + rh / this.pn1);\n    cosz = Math.sqrt(1 - sinz * sinz);\n    switch (this.mode) {\n      case mode.OBLIQ:\n        r.y = Math.asin(cosz * this.sinph0 + p.y * sinz * this.cosph0 / rh);\n        p.y = (cosz - this.sinph0 * Math.sin(r.y)) * rh;\n        p.x *= sinz * this.cosph0;\n        break;\n      case mode.EQUIT:\n        r.y = Math.asin(p.y * sinz / rh);\n        p.y = cosz * rh;\n        p.x *= sinz;\n        break;\n      case mode.N_POLE:\n        r.y = Math.asin(cosz);\n        p.y = -p.y;\n        break;\n      case mode.S_POLE:\n        r.y = -Math.asin(cosz);\n        break;\n    }\n    r.x = Math.atan2(p.x, p.y);\n  }\n\n  p.x = r.x + this.long0;\n  p.y = r.y;\n  return p;\n}\n\nexport var names = [\"Tilted_Perspective\", \"tpers\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import hypot from '../common/hypot';\n\nexport function init() {\n    this.flip_axis = (this.sweep === 'x' ? 1 : 0);\n    this.h = Number(this.h);\n    this.radius_g_1 = this.h / this.a;\n\n    if (this.radius_g_1 <= 0 || this.radius_g_1 > 1e10) {\n        throw new Error();\n    }\n\n    this.radius_g = 1.0 + this.radius_g_1;\n    this.C = this.radius_g * this.radius_g - 1.0;\n\n    if (this.es !== 0.0) {\n        var one_es = 1.0 - this.es;\n        var rone_es = 1 / one_es;\n\n        this.radius_p = Math.sqrt(one_es);\n        this.radius_p2 = one_es;\n        this.radius_p_inv2 = rone_es;\n\n        this.shape = 'ellipse'; // Use as a condition in the forward and inverse functions.\n    } else {\n        this.radius_p = 1.0;\n        this.radius_p2 = 1.0;\n        this.radius_p_inv2 = 1.0;\n\n        this.shape = 'sphere';  // Use as a condition in the forward and inverse functions.\n    }\n\n    if (!this.title) {\n        this.title = \"Geostationary Satellite View\";\n    }\n}\n\nfunction forward(p) {\n    var lon = p.x;\n    var lat = p.y;\n    var tmp, v_x, v_y, v_z;\n    lon = lon - this.long0;\n\n    if (this.shape === 'ellipse') {\n        lat = Math.atan(this.radius_p2 * Math.tan(lat));\n        var r = this.radius_p / hypot(this.radius_p * Math.cos(lat), Math.sin(lat));\n\n        v_x = r * Math.cos(lon) * Math.cos(lat);\n        v_y = r * Math.sin(lon) * Math.cos(lat);\n        v_z = r * Math.sin(lat);\n\n        if (((this.radius_g - v_x) * v_x - v_y * v_y - v_z * v_z * this.radius_p_inv2) < 0.0) {\n            p.x = Number.NaN;\n            p.y = Number.NaN;\n            return p;\n        }\n\n        tmp = this.radius_g - v_x;\n        if (this.flip_axis) {\n            p.x = this.radius_g_1 * Math.atan(v_y / hypot(v_z, tmp));\n            p.y = this.radius_g_1 * Math.atan(v_z / tmp);\n        } else {\n            p.x = this.radius_g_1 * Math.atan(v_y / tmp);\n            p.y = this.radius_g_1 * Math.atan(v_z / hypot(v_y, tmp));\n        }\n    } else if (this.shape === 'sphere') {\n        tmp = Math.cos(lat);\n        v_x = Math.cos(lon) * tmp;\n        v_y = Math.sin(lon) * tmp;\n        v_z = Math.sin(lat);\n        tmp = this.radius_g - v_x;\n\n        if (this.flip_axis) {\n            p.x = this.radius_g_1 * Math.atan(v_y / hypot(v_z, tmp));\n            p.y = this.radius_g_1 * Math.atan(v_z / tmp);\n        } else {\n            p.x = this.radius_g_1 * Math.atan(v_y / tmp);\n            p.y = this.radius_g_1 * Math.atan(v_z / hypot(v_y, tmp));\n        }\n    }\n    p.x = p.x * this.a;\n    p.y = p.y * this.a;\n    return p;\n}\n\nfunction inverse(p) {\n    var v_x = -1.0;\n    var v_y = 0.0;\n    var v_z = 0.0;\n    var a, b, det, k;\n\n    p.x = p.x / this.a;\n    p.y = p.y / this.a;\n\n    if (this.shape === 'ellipse') {\n        if (this.flip_axis) {\n            v_z = Math.tan(p.y / this.radius_g_1);\n            v_y = Math.tan(p.x / this.radius_g_1) * hypot(1.0, v_z);\n        } else {\n            v_y = Math.tan(p.x / this.radius_g_1);\n            v_z = Math.tan(p.y / this.radius_g_1) * hypot(1.0, v_y);\n        }\n\n        var v_zp = v_z / this.radius_p;\n        a = v_y * v_y + v_zp * v_zp + v_x * v_x;\n        b = 2 * this.radius_g * v_x;\n        det = (b * b) - 4 * a * this.C;\n\n        if (det < 0.0) {\n            p.x = Number.NaN;\n            p.y = Number.NaN;\n            return p;\n        }\n\n        k = (-b - Math.sqrt(det)) / (2.0 * a);\n        v_x = this.radius_g + k * v_x;\n        v_y *= k;\n        v_z *= k;\n\n        p.x = Math.atan2(v_y, v_x);\n        p.y = Math.atan(v_z * Math.cos(p.x) / v_x);\n        p.y = Math.atan(this.radius_p_inv2 * Math.tan(p.y));\n    } else if (this.shape === 'sphere') {\n        if (this.flip_axis) {\n            v_z = Math.tan(p.y / this.radius_g_1);\n            v_y = Math.tan(p.x / this.radius_g_1) * Math.sqrt(1.0 + v_z * v_z);\n        } else {\n            v_y = Math.tan(p.x / this.radius_g_1);\n            v_z = Math.tan(p.y / this.radius_g_1) * Math.sqrt(1.0 + v_y * v_y);\n        }\n\n        a = v_y * v_y + v_z * v_z + v_x * v_x;\n        b = 2 * this.radius_g * v_x;\n        det = (b * b) - 4 * a * this.C;\n        if (det < 0.0) {\n            p.x = Number.NaN;\n            p.y = Number.NaN;\n            return p;\n        }\n\n        k = (-b - Math.sqrt(det)) / (2.0 * a);\n        v_x = this.radius_g + k * v_x;\n        v_y *= k;\n        v_z *= k;\n\n        p.x = Math.atan2(v_y, v_x);\n        p.y = Math.atan(v_z * Math.cos(p.x) / v_x);\n    }\n    p.x = p.x + this.long0;\n    return p;\n}\n\nexport var names = [\"Geostationary Satellite View\", \"Geostationary_Satellite\", \"geos\"];\nexport default {\n    init: init,\n    forward: forward,\n    inverse: inverse,\n    names: names,\n};\n\n","import tmerc from './lib/projections/tmerc';\nimport etmerc from './lib/projections/etmerc';\nimport utm from './lib/projections/utm';\nimport sterea from './lib/projections/sterea';\nimport stere from './lib/projections/stere';\nimport somerc from './lib/projections/somerc';\nimport omerc from './lib/projections/omerc';\nimport lcc from './lib/projections/lcc';\nimport krovak from './lib/projections/krovak';\nimport cass from './lib/projections/cass';\nimport laea from './lib/projections/laea';\nimport aea from './lib/projections/aea';\nimport gnom from './lib/projections/gnom';\nimport cea from './lib/projections/cea';\nimport eqc from './lib/projections/eqc';\nimport poly from './lib/projections/poly';\nimport nzmg from './lib/projections/nzmg';\nimport mill from './lib/projections/mill';\nimport sinu from './lib/projections/sinu';\nimport moll from './lib/projections/moll';\nimport eqdc from './lib/projections/eqdc';\nimport vandg from './lib/projections/vandg';\nimport aeqd from './lib/projections/aeqd';\nimport ortho from './lib/projections/ortho';\nimport qsc from './lib/projections/qsc';\nimport robin from './lib/projections/robin';\nimport geocent from './lib/projections/geocent';\nimport tpers from './lib/projections/tpers';\nimport geos from './lib/projections/geos';\nexport default function(proj4){\n  proj4.Proj.projections.add(tmerc);\n  proj4.Proj.projections.add(etmerc);\n  proj4.Proj.projections.add(utm);\n  proj4.Proj.projections.add(sterea);\n  proj4.Proj.projections.add(stere);\n  proj4.Proj.projections.add(somerc);\n  proj4.Proj.projections.add(omerc);\n  proj4.Proj.projections.add(lcc);\n  proj4.Proj.projections.add(krovak);\n  proj4.Proj.projections.add(cass);\n  proj4.Proj.projections.add(laea);\n  proj4.Proj.projections.add(aea);\n  proj4.Proj.projections.add(gnom);\n  proj4.Proj.projections.add(cea);\n  proj4.Proj.projections.add(eqc);\n  proj4.Proj.projections.add(poly);\n  proj4.Proj.projections.add(nzmg);\n  proj4.Proj.projections.add(mill);\n  proj4.Proj.projections.add(sinu);\n  proj4.Proj.projections.add(moll);\n  proj4.Proj.projections.add(eqdc);\n  proj4.Proj.projections.add(vandg);\n  proj4.Proj.projections.add(aeqd);\n  proj4.Proj.projections.add(ortho);\n  proj4.Proj.projections.add(qsc);\n  proj4.Proj.projections.add(robin);\n  proj4.Proj.projections.add(geocent);\n  proj4.Proj.projections.add(tpers);\n  proj4.Proj.projections.add(geos);\n}","import proj4 from './core';\nimport Proj from \"./Proj\";\nimport Point from \"./Point\";\nimport common from \"./common/toPoint\";\nimport defs from \"./defs\";\nimport nadgrid from \"./nadgrid\";\nimport transform from \"./transform\";\nimport mgrs from \"mgrs\";\nimport includedProjections from \"../projs\";\n\nproj4.defaultDatum = 'WGS84'; //default datum\nproj4.Proj = Proj;\nproj4.WGS84 = new proj4.Proj('WGS84');\nproj4.Point = Point;\nproj4.toPoint = common;\nproj4.defs = defs;\nproj4.nadgrid = nadgrid;\nproj4.transform = transform;\nproj4.mgrs = mgrs;\nproj4.version = '__VERSION__';\nincludedProjections(proj4);\nexport default proj4;\n","/**\n * @module ol/source/ImageWMS\n */\n\nimport EventType from '../events/EventType.js';\nimport ImageSource, {defaultImageLoadFunction} from './Image.js';\nimport ImageWrapper from '../Image.js';\nimport {DEFAULT_VERSION} from './wms.js';\nimport {appendParams} from '../uri.js';\nimport {assert} from '../asserts.js';\nimport {calculateSourceResolution} from '../reproj.js';\nimport {ceil, floor, round} from '../math.js';\nimport {compareVersions} from '../string.js';\nimport {\n  containsExtent,\n  getCenter,\n  getForViewAndSize,\n  getHeight,\n  getWidth,\n} from '../extent.js';\nimport {get as getProjection, transform} from '../proj.js';\n\n/**\n * Number of decimal digits to consider in integer values when rounding.\n * @type {number}\n */\nconst DECIMALS = 4;\n\n/**\n * @const\n * @type {import(\"../size.js\").Size}\n */\nconst GETFEATUREINFO_IMAGE_SIZE = [101, 101];\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [hidpi=true] Use the `ol/Map#pixelRatio` value when requesting\n * the image from the remote server.\n * @property {import(\"./wms.js\").ServerType} [serverType] The type of\n * the remote WMS server: `mapserver`, `geoserver`, `carmentaserver`, or `qgis`.\n * Only needed if `hidpi` is `true`.\n * @property {import(\"../Image.js\").LoadFunction} [imageLoadFunction] Optional function to load an image given a URL.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * linear interpolation is used when resampling.  Set to false to use the nearest neighbor instead.\n * @property {Object<string,*>} [params] WMS request parameters.\n * At least a `LAYERS` param is required. `STYLES` is\n * `''` by default. `VERSION` is `1.3.0` by default. `WIDTH`, `HEIGHT`, `BBOX`\n * and `CRS` (`SRS` for WMS version < 1.3.0) will be set dynamically.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {number} [ratio=1.5] Ratio. `1` means image requests are the size of the map viewport, `2` means\n * twice the width and height of the map viewport, and so on. Must be `1` or\n * higher.\n * @property {Array<number>} [resolutions] Resolutions.\n * If specified, requests will be made for these resolutions only.\n * @property {string} [url] WMS service URL.\n */\n\n/**\n * @classdesc\n * Source for WMS servers providing single, untiled images.\n *\n * @fires module:ol/source/Image.ImageSourceEvent\n * @api\n */\nclass ImageWMS extends ImageSource {\n  /**\n   * @param {Options} [options] ImageWMS options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super({\n      attributions: options.attributions,\n      interpolate: options.interpolate,\n      projection: options.projection,\n      resolutions: options.resolutions,\n    });\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.url_ = options.url;\n\n    /**\n     * @private\n     * @type {import(\"../Image.js\").LoadFunction}\n     */\n    this.imageLoadFunction_ =\n      options.imageLoadFunction !== undefined\n        ? options.imageLoadFunction\n        : defaultImageLoadFunction;\n\n    /**\n     * @private\n     * @type {!Object}\n     */\n    this.params_ = Object.assign({}, options.params);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.v13_ = true;\n    this.updateV13_();\n\n    /**\n     * @private\n     * @type {import(\"./wms.js\").ServerType}\n     */\n    this.serverType_ = options.serverType;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n    /**\n     * @private\n     * @type {import(\"../Image.js\").default}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.imageSize_ = [0, 0];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedRevision_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.ratio_ = options.ratio !== undefined ? options.ratio : 1.5;\n  }\n\n  /**\n   * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n   * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n   * constructed.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../proj.js\").ProjectionLike} projection Projection.\n   * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n   *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n   *     in the `LAYERS` parameter will be used. `VERSION` should not be\n   *     specified here.\n   * @return {string|undefined} GetFeatureInfo URL.\n   * @api\n   */\n  getFeatureInfoUrl(coordinate, resolution, projection, params) {\n    if (this.url_ === undefined) {\n      return undefined;\n    }\n    const projectionObj = getProjection(projection);\n    const sourceProjectionObj = this.getProjection();\n\n    if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n      resolution = calculateSourceResolution(\n        sourceProjectionObj,\n        projectionObj,\n        coordinate,\n        resolution\n      );\n      coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n    }\n\n    const extent = getForViewAndSize(\n      coordinate,\n      resolution,\n      0,\n      GETFEATUREINFO_IMAGE_SIZE\n    );\n\n    const baseParams = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_VERSION,\n      'REQUEST': 'GetFeatureInfo',\n      'FORMAT': 'image/png',\n      'TRANSPARENT': true,\n      'QUERY_LAYERS': this.params_['LAYERS'],\n    };\n    Object.assign(baseParams, this.params_, params);\n\n    const x = floor((coordinate[0] - extent[0]) / resolution, DECIMALS);\n    const y = floor((extent[3] - coordinate[1]) / resolution, DECIMALS);\n    baseParams[this.v13_ ? 'I' : 'X'] = x;\n    baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n    return this.getRequestUrl_(\n      extent,\n      GETFEATUREINFO_IMAGE_SIZE,\n      1,\n      sourceProjectionObj || projectionObj,\n      baseParams\n    );\n  }\n\n  /**\n   * Return the GetLegendGraphic URL, optionally optimized for the passed\n   * resolution and possibly including any passed specific parameters. Returns\n   * `undefined` if the GetLegendGraphic URL cannot be constructed.\n   *\n   * @param {number} [resolution] Resolution. If set to undefined, `SCALE`\n   *     will not be calculated and included in URL.\n   * @param {Object} [params] GetLegendGraphic params. If `LAYER` is set, the\n   *     request is generated for this wms layer, else it will try to use the\n   *     configured wms layer. Default `FORMAT` is `image/png`.\n   *     `VERSION` should not be specified here.\n   * @return {string|undefined} GetLegendGraphic URL.\n   * @api\n   */\n  getLegendUrl(resolution, params) {\n    if (this.url_ === undefined) {\n      return undefined;\n    }\n\n    const baseParams = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_VERSION,\n      'REQUEST': 'GetLegendGraphic',\n      'FORMAT': 'image/png',\n    };\n\n    if (params === undefined || params['LAYER'] === undefined) {\n      const layers = this.params_.LAYERS;\n      const isSingleLayer = !Array.isArray(layers) || layers.length === 1;\n      if (!isSingleLayer) {\n        return undefined;\n      }\n      baseParams['LAYER'] = layers;\n    }\n\n    if (resolution !== undefined) {\n      const mpu = this.getProjection()\n        ? this.getProjection().getMetersPerUnit()\n        : 1;\n      const pixelSize = 0.00028;\n      baseParams['SCALE'] = (resolution * mpu) / pixelSize;\n    }\n\n    Object.assign(baseParams, params);\n\n    return appendParams(/** @type {string} */ (this.url_), baseParams);\n  }\n\n  /**\n   * Get the user-provided params, i.e. those passed to the constructor through\n   * the \"params\" option, and possibly updated using the updateParams method.\n   * @return {Object} Params.\n   * @api\n   */\n  getParams() {\n    return this.params_;\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../Image.js\").default} Single image.\n   */\n  getImageInternal(extent, resolution, pixelRatio, projection) {\n    if (this.url_ === undefined) {\n      return null;\n    }\n\n    resolution = this.findNearestResolution(resolution);\n\n    if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n      pixelRatio = 1;\n    }\n\n    const imageResolution = resolution / pixelRatio;\n\n    const center = getCenter(extent);\n    const viewWidth = ceil(getWidth(extent) / imageResolution, DECIMALS);\n    const viewHeight = ceil(getHeight(extent) / imageResolution, DECIMALS);\n    const viewExtent = getForViewAndSize(center, imageResolution, 0, [\n      viewWidth,\n      viewHeight,\n    ]);\n    const requestWidth = ceil(\n      (this.ratio_ * getWidth(extent)) / imageResolution,\n      DECIMALS\n    );\n    const requestHeight = ceil(\n      (this.ratio_ * getHeight(extent)) / imageResolution,\n      DECIMALS\n    );\n    const requestExtent = getForViewAndSize(center, imageResolution, 0, [\n      requestWidth,\n      requestHeight,\n    ]);\n\n    const image = this.image_;\n    if (\n      image &&\n      this.renderedRevision_ == this.getRevision() &&\n      image.getResolution() == resolution &&\n      image.getPixelRatio() == pixelRatio &&\n      containsExtent(image.getExtent(), viewExtent)\n    ) {\n      return image;\n    }\n\n    const params = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_VERSION,\n      'REQUEST': 'GetMap',\n      'FORMAT': 'image/png',\n      'TRANSPARENT': true,\n    };\n    Object.assign(params, this.params_);\n\n    this.imageSize_[0] = round(\n      getWidth(requestExtent) / imageResolution,\n      DECIMALS\n    );\n    this.imageSize_[1] = round(\n      getHeight(requestExtent) / imageResolution,\n      DECIMALS\n    );\n\n    const url = this.getRequestUrl_(\n      requestExtent,\n      this.imageSize_,\n      pixelRatio,\n      projection,\n      params\n    );\n\n    this.image_ = new ImageWrapper(\n      requestExtent,\n      resolution,\n      pixelRatio,\n      url,\n      this.crossOrigin_,\n      this.imageLoadFunction_\n    );\n\n    this.renderedRevision_ = this.getRevision();\n\n    this.image_.addEventListener(\n      EventType.CHANGE,\n      this.handleImageChange.bind(this)\n    );\n\n    return this.image_;\n  }\n\n  /**\n   * Return the image load function of the source.\n   * @return {import(\"../Image.js\").LoadFunction} The image load function.\n   * @api\n   */\n  getImageLoadFunction() {\n    return this.imageLoadFunction_;\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {import(\"../size.js\").Size} size Size.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {Object} params Params.\n   * @return {string} Request URL.\n   * @private\n   */\n  getRequestUrl_(extent, size, pixelRatio, projection, params) {\n    assert(this.url_ !== undefined, 9); // `url` must be configured or set using `#setUrl()`\n\n    params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n    if (!('STYLES' in this.params_)) {\n      params['STYLES'] = '';\n    }\n\n    if (pixelRatio != 1) {\n      switch (this.serverType_) {\n        case 'geoserver':\n          const dpi = (90 * pixelRatio + 0.5) | 0;\n          if ('FORMAT_OPTIONS' in params) {\n            params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n          } else {\n            params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n          }\n          break;\n        case 'mapserver':\n          params['MAP_RESOLUTION'] = 90 * pixelRatio;\n          break;\n        case 'carmentaserver':\n        case 'qgis':\n          params['DPI'] = 90 * pixelRatio;\n          break;\n        default: // Unknown `serverType` configured\n          assert(false, 8);\n          break;\n      }\n    }\n\n    params['WIDTH'] = size[0];\n    params['HEIGHT'] = size[1];\n\n    const axisOrientation = projection.getAxisOrientation();\n    let bbox;\n    if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n      bbox = [extent[1], extent[0], extent[3], extent[2]];\n    } else {\n      bbox = extent;\n    }\n    params['BBOX'] = bbox.join(',');\n\n    return appendParams(/** @type {string} */ (this.url_), params);\n  }\n\n  /**\n   * Return the URL used for this WMS source.\n   * @return {string|undefined} URL.\n   * @api\n   */\n  getUrl() {\n    return this.url_;\n  }\n\n  /**\n   * Set the image load function of the source.\n   * @param {import(\"../Image.js\").LoadFunction} imageLoadFunction Image load function.\n   * @api\n   */\n  setImageLoadFunction(imageLoadFunction) {\n    this.image_ = null;\n    this.imageLoadFunction_ = imageLoadFunction;\n    this.changed();\n  }\n\n  /**\n   * Set the URL to use for requests.\n   * @param {string|undefined} url URL.\n   * @api\n   */\n  setUrl(url) {\n    if (url != this.url_) {\n      this.url_ = url;\n      this.image_ = null;\n      this.changed();\n    }\n  }\n\n  /**\n   * Update the user-provided params.\n   * @param {Object} params Params.\n   * @api\n   */\n  updateParams(params) {\n    Object.assign(this.params_, params);\n    this.updateV13_();\n    this.image_ = null;\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  updateV13_() {\n    const version = this.params_['VERSION'] || DEFAULT_VERSION;\n    this.v13_ = compareVersions(version, '1.3') >= 0;\n  }\n}\n\nexport default ImageWMS;\n","/**\n * @module ol/source/Image\n */\nimport Event from '../events/Event.js';\nimport ImageState from '../ImageState.js';\nimport ReprojImage from '../reproj/Image.js';\nimport Source from './Source.js';\nimport {abstract} from '../util.js';\nimport {equals} from '../extent.js';\nimport {equivalent} from '../proj.js';\nimport {linearFindNearest} from '../array.js';\n\n/**\n * @enum {string}\n */\nexport const ImageSourceEventType = {\n  /**\n   * Triggered when an image starts loading.\n   * @event module:ol/source/Image.ImageSourceEvent#imageloadstart\n   * @api\n   */\n  IMAGELOADSTART: 'imageloadstart',\n\n  /**\n   * Triggered when an image finishes loading.\n   * @event module:ol/source/Image.ImageSourceEvent#imageloadend\n   * @api\n   */\n  IMAGELOADEND: 'imageloadend',\n\n  /**\n   * Triggered if image loading results in an error.\n   * @event module:ol/source/Image.ImageSourceEvent#imageloaderror\n   * @api\n   */\n  IMAGELOADERROR: 'imageloaderror',\n};\n\n/**\n * @typedef {'imageloadend'|'imageloaderror'|'imageloadstart'} ImageSourceEventTypes\n */\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Image~ImageSource} instances are instances of this\n * type.\n */\nexport class ImageSourceEvent extends Event {\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../Image.js\").default} image The image.\n   */\n  constructor(type, image) {\n    super(type);\n\n    /**\n     * The image related to the event.\n     * @type {import(\"../Image.js\").default}\n     * @api\n     */\n    this.image = image;\n  }\n}\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types, import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<ImageSourceEventTypes, ImageSourceEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types\n *     |ImageSourceEventTypes, Return>} ImageSourceOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * linear interpolation is used when resampling.  Set to false to use the nearest neighbor instead.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection.\n * @property {Array<number>} [resolutions] Resolutions.\n * @property {import(\"./Source.js\").State} [state] State.\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for sources providing a single image.\n * @abstract\n * @fires module:ol/source/Image.ImageSourceEvent\n * @api\n */\nclass ImageSource extends Source {\n  /**\n   * @param {Options} options Single image source options.\n   */\n  constructor(options) {\n    super({\n      attributions: options.attributions,\n      projection: options.projection,\n      state: options.state,\n      interpolate:\n        options.interpolate !== undefined ? options.interpolate : true,\n    });\n\n    /***\n     * @type {ImageSourceOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {ImageSourceOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {ImageSourceOnSignature<void>}\n     */\n    this.un;\n\n    /**\n     * @private\n     * @type {Array<number>|null}\n     */\n    this.resolutions_ =\n      options.resolutions !== undefined ? options.resolutions : null;\n\n    /**\n     * @private\n     * @type {import(\"../reproj/Image.js\").default}\n     */\n    this.reprojectedImage_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.reprojectedRevision_ = 0;\n  }\n\n  /**\n   * @return {Array<number>|null} Resolutions.\n   */\n  getResolutions() {\n    return this.resolutions_;\n  }\n\n  /**\n   * @protected\n   * @param {number} resolution Resolution.\n   * @return {number} Resolution.\n   */\n  findNearestResolution(resolution) {\n    if (this.resolutions_) {\n      const idx = linearFindNearest(this.resolutions_, resolution, 0);\n      resolution = this.resolutions_[idx];\n    }\n    return resolution;\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../ImageBase.js\").default} Single image.\n   */\n  getImage(extent, resolution, pixelRatio, projection) {\n    const sourceProjection = this.getProjection();\n    if (\n      !sourceProjection ||\n      !projection ||\n      equivalent(sourceProjection, projection)\n    ) {\n      if (sourceProjection) {\n        projection = sourceProjection;\n      }\n      return this.getImageInternal(extent, resolution, pixelRatio, projection);\n    } else {\n      if (this.reprojectedImage_) {\n        if (\n          this.reprojectedRevision_ == this.getRevision() &&\n          equivalent(this.reprojectedImage_.getProjection(), projection) &&\n          this.reprojectedImage_.getResolution() == resolution &&\n          equals(this.reprojectedImage_.getExtent(), extent)\n        ) {\n          return this.reprojectedImage_;\n        }\n        this.reprojectedImage_.dispose();\n        this.reprojectedImage_ = null;\n      }\n\n      this.reprojectedImage_ = new ReprojImage(\n        sourceProjection,\n        projection,\n        extent,\n        resolution,\n        pixelRatio,\n        function (extent, resolution, pixelRatio) {\n          return this.getImageInternal(\n            extent,\n            resolution,\n            pixelRatio,\n            sourceProjection\n          );\n        }.bind(this),\n        this.getInterpolate()\n      );\n      this.reprojectedRevision_ = this.getRevision();\n\n      return this.reprojectedImage_;\n    }\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../ImageBase.js\").default} Single image.\n   * @protected\n   */\n  getImageInternal(extent, resolution, pixelRatio, projection) {\n    return abstract();\n  }\n\n  /**\n   * Handle image change events.\n   * @param {import(\"../events/Event.js\").default} event Event.\n   * @protected\n   */\n  handleImageChange(event) {\n    const image = /** @type {import(\"../Image.js\").default} */ (event.target);\n    let type;\n    switch (image.getState()) {\n      case ImageState.LOADING:\n        this.loading = true;\n        type = ImageSourceEventType.IMAGELOADSTART;\n        break;\n      case ImageState.LOADED:\n        this.loading = false;\n        type = ImageSourceEventType.IMAGELOADEND;\n        break;\n      case ImageState.ERROR:\n        this.loading = false;\n        type = ImageSourceEventType.IMAGELOADERROR;\n        break;\n      default:\n        return;\n    }\n    if (this.hasListener(type)) {\n      this.dispatchEvent(new ImageSourceEvent(type, image));\n    }\n  }\n}\n\n/**\n * Default image load function for image sources that use import(\"../Image.js\").Image image\n * instances.\n * @param {import(\"../Image.js\").default} image Image.\n * @param {string} src Source.\n */\nexport function defaultImageLoadFunction(image, src) {\n  /** @type {HTMLImageElement|HTMLVideoElement} */ (image.getImage()).src = src;\n}\n\nexport default ImageSource;\n","/**\n * @module ol/reproj/Image\n */\nimport {ERROR_THRESHOLD} from './common.js';\n\nimport EventType from '../events/EventType.js';\nimport ImageBase from '../ImageBase.js';\nimport ImageState from '../ImageState.js';\nimport Triangulation from './Triangulation.js';\nimport {\n  calculateSourceResolution,\n  render as renderReprojected,\n} from '../reproj.js';\nimport {getCenter, getHeight, getIntersection, getWidth} from '../extent.js';\nimport {listen, unlistenByKey} from '../events.js';\n\n/**\n * @typedef {function(import(\"../extent.js\").Extent, number, number) : import(\"../ImageBase.js\").default} FunctionType\n */\n\n/**\n * @classdesc\n * Class encapsulating single reprojected image.\n * See {@link module:ol/source/Image~ImageSource}.\n */\nclass ReprojImage extends ImageBase {\n  /**\n   * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection (of the data).\n   * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n   * @param {import(\"../extent.js\").Extent} targetExtent Target extent.\n   * @param {number} targetResolution Target resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {FunctionType} getImageFunction\n   *     Function returning source images (extent, resolution, pixelRatio).\n   * @param {boolean} interpolate Use linear interpolation when resampling.\n   */\n  constructor(\n    sourceProj,\n    targetProj,\n    targetExtent,\n    targetResolution,\n    pixelRatio,\n    getImageFunction,\n    interpolate\n  ) {\n    const maxSourceExtent = sourceProj.getExtent();\n    const maxTargetExtent = targetProj.getExtent();\n\n    const limitedTargetExtent = maxTargetExtent\n      ? getIntersection(targetExtent, maxTargetExtent)\n      : targetExtent;\n\n    const targetCenter = getCenter(limitedTargetExtent);\n    const sourceResolution = calculateSourceResolution(\n      sourceProj,\n      targetProj,\n      targetCenter,\n      targetResolution\n    );\n\n    const errorThresholdInPixels = ERROR_THRESHOLD;\n\n    const triangulation = new Triangulation(\n      sourceProj,\n      targetProj,\n      limitedTargetExtent,\n      maxSourceExtent,\n      sourceResolution * errorThresholdInPixels,\n      targetResolution\n    );\n\n    const sourceExtent = triangulation.calculateSourceExtent();\n    const sourceImage = getImageFunction(\n      sourceExtent,\n      sourceResolution,\n      pixelRatio\n    );\n    const state = sourceImage ? ImageState.IDLE : ImageState.EMPTY;\n    const sourcePixelRatio = sourceImage ? sourceImage.getPixelRatio() : 1;\n\n    super(targetExtent, targetResolution, sourcePixelRatio, state);\n\n    /**\n     * @private\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.targetProj_ = targetProj;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.maxSourceExtent_ = maxSourceExtent;\n\n    /**\n     * @private\n     * @type {!import(\"./Triangulation.js\").default}\n     */\n    this.triangulation_ = triangulation;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.targetResolution_ = targetResolution;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.targetExtent_ = targetExtent;\n\n    /**\n     * @private\n     * @type {import(\"../ImageBase.js\").default}\n     */\n    this.sourceImage_ = sourceImage;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.sourcePixelRatio_ = sourcePixelRatio;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.interpolate_ = interpolate;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.sourceListenerKey_ = null;\n  }\n\n  /**\n   * Clean up.\n   */\n  disposeInternal() {\n    if (this.state == ImageState.LOADING) {\n      this.unlistenSource_();\n    }\n    super.disposeInternal();\n  }\n\n  /**\n   * @return {HTMLCanvasElement} Image.\n   */\n  getImage() {\n    return this.canvas_;\n  }\n\n  /**\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  getProjection() {\n    return this.targetProj_;\n  }\n\n  /**\n   * @private\n   */\n  reproject_() {\n    const sourceState = this.sourceImage_.getState();\n    if (sourceState == ImageState.LOADED) {\n      const width = getWidth(this.targetExtent_) / this.targetResolution_;\n      const height = getHeight(this.targetExtent_) / this.targetResolution_;\n\n      this.canvas_ = renderReprojected(\n        width,\n        height,\n        this.sourcePixelRatio_,\n        this.sourceImage_.getResolution(),\n        this.maxSourceExtent_,\n        this.targetResolution_,\n        this.targetExtent_,\n        this.triangulation_,\n        [\n          {\n            extent: this.sourceImage_.getExtent(),\n            image: this.sourceImage_.getImage(),\n          },\n        ],\n        0,\n        undefined,\n        this.interpolate_\n      );\n    }\n    this.state = sourceState;\n    this.changed();\n  }\n\n  /**\n   * Load not yet loaded URI.\n   */\n  load() {\n    if (this.state == ImageState.IDLE) {\n      this.state = ImageState.LOADING;\n      this.changed();\n\n      const sourceState = this.sourceImage_.getState();\n      if (sourceState == ImageState.LOADED || sourceState == ImageState.ERROR) {\n        this.reproject_();\n      } else {\n        this.sourceListenerKey_ = listen(\n          this.sourceImage_,\n          EventType.CHANGE,\n          function (e) {\n            const sourceState = this.sourceImage_.getState();\n            if (\n              sourceState == ImageState.LOADED ||\n              sourceState == ImageState.ERROR\n            ) {\n              this.unlistenSource_();\n              this.reproject_();\n            }\n          },\n          this\n        );\n        this.sourceImage_.load();\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  unlistenSource_() {\n    unlistenByKey(\n      /** @type {!import(\"../events.js\").EventsKey} */ (this.sourceListenerKey_)\n    );\n    this.sourceListenerKey_ = null;\n  }\n}\n\nexport default ReprojImage;\n","import WMSCapabilities from 'ol/format/WMSCapabilities'\nimport { Map, View } from 'ol'\nimport WMTSSource from 'ol/source/WMTS'\nimport { Tile as TileLayer, Image as ImageLayer } from 'ol/layer'\nimport WMTSTileGrid from 'ol/tilegrid/WMTS.js'\nimport { register } from 'ol/proj/proj4.js'\nimport { transform } from 'ol/proj'\nimport proj4 from 'proj4'\nimport Projection from 'ol/proj/Projection'\nimport { getTopLeft } from 'ol/extent.js'\nimport ImageWMS from 'ol/source/ImageWMS'\n\nimport LayerSwitcher from 'ol-layerswitcher'\nimport 'ol/ol.css'\nimport 'ol-layerswitcher/src/ol-layerswitcher.css'\n\nvar currentLayer\n\n// add map\nconst BRTA_ATTRIBUTION = 'Kaartgegevens: © <a href=\"http://www.cbs.nl\">CBS</a>, <a href=\"http://www.kadaster.nl\">Kadaster</a>, <a href=\"http://openstreetmap.org\">OpenStreetMap</a><span class=\"printhide\">-auteurs (<a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>).</span>'\nconst LUFO_ATTRIBUTION = 'Kaartgegevens: © <a href=\"http://www.kadaster.nl\">Kadaster</a><span class=\"printhide\">-auteurs (<a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>).</span>'\n\nproj4.defs('EPSG:28992', '+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs')\nregister(proj4)\nconst RDPROJECTION = new Projection({\n  code: 'EPSG:28992',\n  extent: [-285401.92, 22598.08, 595401.92, 903401.92]\n})\n\nconst RESOLUTIONS = [3440.640, 1720.320, 860.160, 430.080, 215.040, 107.520, 53.760, 26.880, 13.440, 6.720, 3.360, 1.680, 0.840, 0.420, 0.210]\nconst MATRIXIDS = new Array(15)\nfor (var i = 0; i < 15; ++i) {\n  MATRIXIDS[i] = i\n}\n\nfunction stripQueryParams (serviceUrl) {\n  const urlObj = new URL(serviceUrl)\n  return `${urlObj.protocol}//${urlObj.host}${urlObj.pathname}?`\n}\n\nfunction getWMSLayer (serviceUrl, serviceTitle, layers, styles) {\n  const layersReversed = layers.reverse()\n  const layersParam = layersReversed.join(',')\n  const stylesReversed = styles.reverse()\n  const stylesParam = stylesReversed.join(',')\n\n  const wmsSource = new ImageWMS({\n    crossOrigin: 'anonymous',\n    url: stripQueryParams(serviceUrl),\n    params: { LAYERS: layersParam, MAP_RESOLUTION: '96', STYLES: stylesParam },\n    ratio: 1,\n    hidpi: false,\n    serverType: 'mapserver',\n    projection: RDPROJECTION\n  })\n  return new ImageLayer({\n    title: serviceTitle,\n    visible: true,\n    opacity: document.getElementById('opacitySlider').value / 100,\n    source: wmsSource,\n    crossOrigin: 'anonymous'\n  })\n}\n\nfunction switchLayer (serviceUrl, serviceTitle) {\n  if (currentLayer) {\n    MAP.removeLayer(currentLayer)\n  }\n  const layers = []\n  const els = document.getElementsByClassName('layerCheck')\n  const styleEls = document.getElementsByClassName('styleselect')\n  const styles = []\n  Array.prototype.forEach.call(els, function (el) {\n    if (el.checked) {\n      const currentLayer = el.getAttribute('layer')\n      layers.push(currentLayer)\n      Array.prototype.forEach.call(styleEls, function (styleEl) {\n        const styleLyrName = styleEl.getAttribute('layer')\n        if (currentLayer === styleLyrName) {\n          styles.push(styleEl.value)\n        }\n      })\n    }\n  })\n  currentLayer = getWMSLayer(serviceUrl, serviceTitle, layers, styles)\n  MAP.addLayer(currentLayer)\n  MAP.render()\n}\n\nfunction getWmtsLayer (serviceUrl, attribution, layername) {\n  return new TileLayer({\n    title: `${layername} WMTS`,\n    visible: false,\n    extent: RDPROJECTION.extent,\n    source: new WMTSSource({\n      crossOrigin: 'anonymous',\n      url: serviceUrl,\n      layer: layername,\n      matrixSet: 'EPSG:28992',\n      format: 'image/png',\n      attributions: attribution,\n      projection: RDPROJECTION,\n      tileGrid: new WMTSTileGrid({\n        origin: getTopLeft(RDPROJECTION.getExtent()),\n        resolutions: RESOLUTIONS,\n        matrixIds: MATRIXIDS\n      }),\n      style: 'default'\n    })\n  })\n}\n\nfunction getBRTALayer (layername) {\n  return getWmtsLayer('https://service.pdok.nl/brt/achtergrondkaart/wmts/v2_0', BRTA_ATTRIBUTION, layername)\n}\n\nconst brtWmtsLayer = getBRTALayer('standaard')\nconst brtGrijsWmtsLayer = getBRTALayer('grijs')\nconst brtPastelWmtsLayer = getBRTALayer('pastel')\nconst brtWaterWmtsLayer = getBRTALayer('water')\nconst lufoLayer = getWmtsLayer('https://service.pdok.nl/hwh/luchtfotorgb/wmts/v1_0', LUFO_ATTRIBUTION, 'Actueel_ortho25')\nbrtGrijsWmtsLayer.set('visible', true)\n\nconst top10Layers = ['gebouwvlak', 'spoorbaandeellijn', 'waterdeelvlak', 'waterdeelvlakcontour', 'terreinvlakcontour', 'terreinvlak', 'wegdeelvlak', 'wegdeelvlakcontour']\nconst top10nlLayer = getWMSLayer('https://geodata.nationaalgeoregister.nl/top10nlv2/ows?', '',\n  top10Layers, [])\ntop10nlLayer.set('title', 'Top10NL WMS')\ntop10nlLayer.set('visible', false)\n\nbrtWmtsLayer.set('base', true)\nbrtGrijsWmtsLayer.set('base', true)\nbrtPastelWmtsLayer.set('base', true)\nbrtWaterWmtsLayer.set('base', true)\nlufoLayer.set('base', true)\ntop10nlLayer.set('base', true)\n\nconst MAP = new Map({\n  layers: [\n    top10nlLayer,\n    brtWaterWmtsLayer,\n    brtPastelWmtsLayer,\n    brtGrijsWmtsLayer,\n    brtWmtsLayer,\n    lufoLayer\n  ],\n  target: document.getElementById('map'),\n  view: new View({\n    center: transform([5.43, 52.18], 'EPSG:4326', 'EPSG:28992'),\n    zoom: 8,\n    projection: 'EPSG:28992'\n  })\n})\n\nvar LAYERSWITCHER = new LayerSwitcher({\n  tipLabel: 'Legend', // Optional label for button\n  groupSelectStyle: 'none' // Can be 'children' [default], 'group' or 'none'\n})\nMAP.addControl(LAYERSWITCHER)\n\ndocument.getElementById('export-png').addEventListener('click', function () {\n  MAP.once('rendercomplete', function () {\n    var mapCanvas = document.createElement('canvas')\n    var size = MAP.getSize()\n    mapCanvas.width = size[0]\n    mapCanvas.height = size[1]\n    var mapContext = mapCanvas.getContext('2d')\n    Array.prototype.forEach.call(document.querySelectorAll('.ol-layer canvas'), function (canvas) {\n      if (canvas.width > 0) {\n        var opacity = canvas.parentNode.style.opacity\n        mapContext.globalAlpha = opacity === '' ? 1 : Number(opacity)\n        var transform = canvas.style.transform\n\n        mapContext.fillStyle = document.getElementById(\"mapBgColor\").value\n        mapContext.fillRect(0,0,size[0],size[1])\n        mapContext.globalCompositeOperation='source-atop';\n\n        // Get the transform parameters from the style's transform matrix\n        var matrix = transform.match(/^matrix\\(([^(]*)\\)$/)[1].split(',').map(Number)\n        // Apply the transform to the export map context\n        CanvasRenderingContext2D.prototype.setTransform.apply(mapContext, matrix)\n        mapContext.drawImage(canvas, 0, 0)\n      }\n    })\n    if (navigator.msSaveBlob) {\n      // link download attribuute does not work on MS browsers\n      navigator.msSaveBlob(mapCanvas.msToBlob(), 'map.png')\n    } else {\n      var link = document.getElementById('image-download')\n      link.href = mapCanvas.toDataURL('image/png', 1)\n      link.click()\n    }\n  })\n  MAP.renderSync()\n})\n\nfunction unpackLayers (capObj, result) {\n  if (!Array.isArray(capObj)) {\n    capObj = [capObj]\n  }\n  capObj.forEach(function (lyr) {\n    if ('Layer' in lyr) {\n      unpackLayers(lyr.Layer, result)\n    } else {\n      result.push(lyr)\n    }\n  })\n  return result\n}\n\nfunction urlChanged () {\n  const getMapUrlEl = document.getElementById('GetMapUrl')\n  SERVICE_URL = getMapUrlEl.value\n  const parser = new WMSCapabilities()\n  fetch(SERVICE_URL).then(function (response) {\n    return response.text()\n  }).then(function (text) {\n    var result = parser.read(text)\n    SERVICE_TITLE = result.Service.Title\n    let layers = []\n    layers = unpackLayers(result.Capability, layers)\n    const layerNames = []\n    var tbl = document.getElementById('layerlist')\n    tbl.innerHTML = ''\n    var tblBody = document.createElement('tbody')\n    layers.forEach(function (x) {\n      layerNames.push(x.Name)\n      var row = document.createElement('tr')\n      row.setAttribute('draggable', 'true')\n      row.classList.add('draggable')\n      row.addEventListener('dragover', dragOver)\n      row.addEventListener('dragstart', dragStart)\n      var cell = document.createElement('td')\n      var cellText = document.createTextNode(x.Name)\n      var checkbox = document.createElement('input')\n      var cell2 = document.createElement('td')\n      var cell3 = document.createElement('td')\n      var selectList = document.createElement('select')\n      selectList.setAttribute('layer', x.Name)\n      selectList.classList.add('styleselect')\n      if (x.Style) {\n        x.Style.forEach(function (style) {\n          let title = style.Title\n          if (!style.Title) {\n            title = style.Name\n            if (style.Name.indexOf(':') !== -1) {\n              title = style.Name.split(':')[1]\n            }\n          }\n          const option = document.createElement('option')\n          option.value = style.Name\n          option.text = title\n          selectList.appendChild(option)\n        })\n      }\n      selectList.addEventListener('change', function () {\n        switchLayer(SERVICE_URL, SERVICE_TITLE)\n      })\n      cell3.appendChild(selectList)\n      checkbox.type = 'checkbox'\n      checkbox.checked = true\n      checkbox.classList.add('layerCheck')\n      checkbox.setAttribute('layer', x.Name)\n      checkbox.addEventListener('change', function () {\n        switchLayer(SERVICE_URL, SERVICE_TITLE)\n      })\n      cell2.appendChild(checkbox)\n      cell.appendChild(cellText)\n      row.appendChild(cell2)\n      row.appendChild(cell)\n      row.appendChild(cell3)\n      tblBody.appendChild(row)\n    })\n    tbl.appendChild(tblBody)\n    switchLayer(SERVICE_URL, SERVICE_TITLE)\n  })\n}\n\nvar SERVICE_URL\nvar SERVICE_TITLE\n\nvar GET_MAP_URL_EL = document.getElementById('GetMapUrl')\nGET_MAP_URL_EL.addEventListener('blur', urlChanged)\n\nconst SL_EL = document.getElementById('opacitySlider')\nSL_EL.addEventListener('change', function (e) {\n  switchLayer(SERVICE_URL, SERVICE_TITLE)\n})\nconst C_EL = document.getElementById('mapBgColor')\nC_EL.addEventListener('change', function (e) {\n  document.getElementById(\"column2\").style.backgroundColor = e.target.value\n})\n\n\nvar DRAG_EL\nfunction dragOver (e) {\n  const closestRow = e.target.closest('tr')\n  if (isBefore(DRAG_EL, closestRow)) { closestRow.parentNode.insertBefore(DRAG_EL, closestRow) } else { closestRow.parentNode.insertBefore(DRAG_EL, closestRow.nextSibling) }\n  switchLayer(SERVICE_URL, SERVICE_TITLE)\n}\n\nfunction dragStart (e) {\n  e.dataTransfer.effectAllowed = 'move'\n  e.dataTransfer.setData('text/plain', null) // Thanks to bqlou for their comment.\n  DRAG_EL = e.target\n}\n\nfunction isBefore (el1, el2) {\n  if (el2.parentNode === el1.parentNode) {\n    for (var cur = el1.previousSibling; cur && cur.nodeType !== 9; cur = cur.previousSibling) {\n      if (cur === el2) { return true }\n    }\n  }\n  return false\n}\n\nconst SIZE_SELECT_EL = document.getElementById('sizeSelect')\nconst SIZE_INPUT_EL = document.getElementById('sizeInput')\n\nfunction updateMapSize (sizeString) {\n  const x = sizeString.split('x')[0]\n  const y = sizeString.split('x')[1]\n  const mapEl = document.getElementById('map')\n  mapEl.style.width = `${x}px`\n  mapEl.style.height = `${y}px`\n  MAP.renderSync()\n  MAP.updateSize()\n}\n\nSIZE_SELECT_EL.addEventListener('change', function (e) {\n  updateMapSize(e.target.value)\n})\n\nSIZE_INPUT_EL.addEventListener('blur', function (e) {\n  if (!e.target.value) {\n    return\n  }\n  const regex = /[0-9]+[x|X][0-9]+/g\n  if (!e.target.value.match(regex)) {\n    alert(\"size format should be '[0-9]+x[0-9]+' for instance 200x300\")\n    return\n  }\n  updateMapSize(e.target.value.toLowerCase())\n})\n\nconst grayscaleCheckbox = document.getElementById('grayscaleBaselayers')\n\nfunction postRender (evt) {\n  evt.context.globalCompositeOperation = 'color'\n  if (evt.context.globalCompositeOperation === 'color') {\n    // operation is supported by browser\n    evt.context.fillStyle = 'rgba(255,255,255,' + GRAYSCALE / 100 + ')'\n    evt.context.fillRect(\n      0,\n      0,\n      evt.context.canvas.width,\n      evt.context.canvas.height\n    )\n  }\n  evt.context.globalCompositeOperation = 'source-over'\n}\n\nvar GRAYSCALE = grayscaleCheckbox.checked === true ? 100 : 0\ngrayscaleCheckbox.addEventListener('change', function (e) {\n  GRAYSCALE = e.target.checked === true ? 100 : 0\n  MAP.render()\n})\n\nMAP\n  .getLayers().forEach(function (lyr) {\n    if (lyr.get('base')) {\n      // see comment on this answer https://stackoverflow.com/a/59819793\n      lyr.on('postrender', postRender)\n    }\n  }\n  )\n\nvar rad = document.getElementsByClassName('sizeRadio')\nfor (let i = 0; i < rad.length; i++) {\n  rad[i].addEventListener('change', function () {\n    const input = document.getElementById('sizeInput')\n    const select = document.getElementById('sizeSelect')\n    if (this.value === 'preset') {\n      input.style.display = 'none'\n      select.style.display = 'block'\n    } else { // custom\n      input.style.display = 'block'\n      select.style.display = 'none'\n    }\n  })\n}\ndocument.getElementById('preset').checked = true\nSIZE_SELECT_EL.value = '500x500'\n","/**\n * @module ol/source/wms\n */\n\n/**\n * Default WMS version.\n * @type {string}\n */\nexport const DEFAULT_VERSION = '1.3.0';\n\n/**\n * @api\n * @typedef {'carmentaserver' | 'geoserver' | 'mapserver' | 'qgis'} ServerType\n * Set the server type to use implementation-specific parameters beyond the WMS specification.\n *  - `'carmentaserver'`: HiDPI support for [Carmenta Server](https://www.carmenta.com/en/products/carmenta-server)\n *  - `'geoserver'`: HiDPI support for [GeoServer](https://geoserver.org/)\n *  - `'mapserver'`: HiDPI support for [MapServer](https://mapserver.org/)\n *  - `'qgis'`: HiDPI support for [QGIS](https://qgis.org/)\n */\n","(function (global, factory) {\r\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('ol/control/Control'), require('ol/Observable'), require('ol/layer/Group')) :\r\n\ttypeof define === 'function' && define.amd ? define(['ol/control/Control', 'ol/Observable', 'ol/layer/Group'], factory) :\r\n\t(global.LayerSwitcher = factory(global.ol.control.Control,global.ol.Observable,global.ol.layer.Group));\r\n}(this, (function (Control,ol_Observable,LayerGroup) { 'use strict';\r\n\r\nControl = 'default' in Control ? Control['default'] : Control;\r\nLayerGroup = 'default' in LayerGroup ? LayerGroup['default'] : LayerGroup;\r\n\r\n/**\r\n * @protected\r\n */\r\nconst CSS_PREFIX = 'layer-switcher-';\r\n/**\r\n * OpenLayers LayerSwitcher Control, displays a list of layers and groups\r\n * associated with a map which have a `title` property.\r\n *\r\n * To be shown in the LayerSwitcher panel layers must have a `title` property;\r\n * base map layers should have a `type` property set to `base`. Group layers\r\n * (`LayerGroup`) can be used to visually group layers together; a group\r\n * with a `fold` property set to either `'open'` or `'close'` will be displayed\r\n * with a toggle.\r\n *\r\n * See [BaseLayerOptions](#baselayeroptions) for a full list of LayerSwitcher\r\n * properties for layers (`TileLayer`, `ImageLayer`, `VectorTile` etc.) and\r\n * [GroupLayerOptions](#grouplayeroptions) for group layer (`LayerGroup`)\r\n * LayerSwitcher properties.\r\n *\r\n * Layer and group properties can either be set by adding extra properties\r\n * to their options when they are created or via their set method.\r\n *\r\n * Specify a `title` for a Layer by adding a `title` property to it's options object:\r\n * ```javascript\r\n * var lyr = new ol.layer.Tile({\r\n *   // Specify a title property which will be displayed by the layer switcher\r\n *   title: 'OpenStreetMap',\r\n *   visible: true,\r\n *   source: new ol.source.OSM()\r\n * })\r\n * ```\r\n *\r\n * Alternatively the properties can be set via the `set` method after a layer has been created:\r\n * ```javascript\r\n * var lyr = new ol.layer.Tile({\r\n *   visible: true,\r\n *   source: new ol.source.OSM()\r\n * })\r\n * // Specify a title property which will be displayed by the layer switcher\r\n * lyr.set('title', 'OpenStreetMap');\r\n * ```\r\n *\r\n * To create a LayerSwitcher and add it to a map, create a new instance then pass it to the map's [`addControl` method](https://openlayers.org/en/latest/apidoc/module-ol_Map-Map.html#addControl).\r\n * ```javascript\r\n * var layerSwitcher = new LayerSwitcher({\r\n *   reverse: true,\r\n *   groupSelectStyle: 'group'\r\n * });\r\n * map.addControl(layerSwitcher);\r\n * ```\r\n *\r\n * @constructor\r\n * @extends {ol/control/Control~Control}\r\n * @param opt_options LayerSwitcher options, see  [LayerSwitcher Options](#options) and [RenderOptions](#renderoptions) which LayerSwitcher `Options` extends for more details.\r\n */\r\nclass LayerSwitcher extends Control {\r\n    constructor(opt_options) {\r\n        const options = Object.assign({}, opt_options);\r\n        const element = document.createElement('div');\r\n        super({ element: element, target: options.target });\r\n        this.activationMode = options.activationMode || 'mouseover';\r\n        this.startActive = options.startActive === true;\r\n        // TODO Next: Rename to showButtonContent\r\n        this.label = options.label !== undefined ? options.label : '';\r\n        // TODO Next: Rename to hideButtonContent\r\n        this.collapseLabel =\r\n            options.collapseLabel !== undefined ? options.collapseLabel : '\\u00BB';\r\n        // TODO Next: Rename to showButtonTitle\r\n        this.tipLabel = options.tipLabel ? options.tipLabel : 'Legend';\r\n        // TODO Next: Rename to hideButtonTitle\r\n        this.collapseTipLabel = options.collapseTipLabel\r\n            ? options.collapseTipLabel\r\n            : 'Collapse legend';\r\n        this.groupSelectStyle = LayerSwitcher.getGroupSelectStyle(options.groupSelectStyle);\r\n        this.reverse = options.reverse !== false;\r\n        this.mapListeners = [];\r\n        this.hiddenClassName = 'ol-unselectable ol-control layer-switcher';\r\n        if (LayerSwitcher.isTouchDevice_()) {\r\n            this.hiddenClassName += ' touch';\r\n        }\r\n        this.shownClassName = 'shown';\r\n        element.className = this.hiddenClassName;\r\n        this.button = document.createElement('button');\r\n        element.appendChild(this.button);\r\n        this.panel = document.createElement('div');\r\n        this.panel.className = 'panel';\r\n        element.appendChild(this.panel);\r\n        LayerSwitcher.enableTouchScroll_(this.panel);\r\n        element.classList.add(CSS_PREFIX + 'group-select-style-' + this.groupSelectStyle);\r\n        element.classList.add(CSS_PREFIX + 'activation-mode-' + this.activationMode);\r\n        if (this.activationMode === 'click') {\r\n            // TODO Next: Remove in favour of layer-switcher-activation-mode-click\r\n            element.classList.add('activationModeClick');\r\n            this.button.onclick = (e) => {\r\n                const evt = e || window.event;\r\n                if (this.element.classList.contains(this.shownClassName)) {\r\n                    this.hidePanel();\r\n                }\r\n                else {\r\n                    this.showPanel();\r\n                }\r\n                evt.preventDefault();\r\n            };\r\n        }\r\n        else {\r\n            this.button.onmouseover = () => {\r\n                this.showPanel();\r\n            };\r\n            this.button.onclick = (e) => {\r\n                const evt = e || window.event;\r\n                this.showPanel();\r\n                evt.preventDefault();\r\n            };\r\n            this.panel.onmouseout = (evt) => {\r\n                if (!this.panel.contains(evt.relatedTarget)) {\r\n                    this.hidePanel();\r\n                }\r\n            };\r\n        }\r\n        this.updateButton();\r\n    }\r\n    /**\r\n     * Set the map instance the control is associated with.\r\n     * @param map The map instance.\r\n     */\r\n    setMap(map) {\r\n        // Clean up listeners associated with the previous map\r\n        for (let i = 0; i < this.mapListeners.length; i++) {\r\n            ol_Observable.unByKey(this.mapListeners[i]);\r\n        }\r\n        this.mapListeners.length = 0;\r\n        // Wire up listeners etc. and store reference to new map\r\n        super.setMap(map);\r\n        if (map) {\r\n            if (this.startActive) {\r\n                this.showPanel();\r\n            }\r\n            else {\r\n                this.renderPanel();\r\n            }\r\n            if (this.activationMode !== 'click') {\r\n                this.mapListeners.push(map.on('pointerdown', () => {\r\n                    this.hidePanel();\r\n                }));\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Show the layer panel. Fires `'show'` event.\r\n     * @fires LayerSwitcher#show\r\n     */\r\n    showPanel() {\r\n        if (!this.element.classList.contains(this.shownClassName)) {\r\n            this.element.classList.add(this.shownClassName);\r\n            this.updateButton();\r\n            this.renderPanel();\r\n        }\r\n        /**\r\n         * Event triggered after the panel has been shown.\r\n         * Listen to the event via the `on` or `once` methods; for example:\r\n         * ```js\r\n         * var layerSwitcher = new LayerSwitcher();\r\n         * map.addControl(layerSwitcher);\r\n         *\r\n         * layerSwitcher.on('show', evt => {\r\n         *   console.log('show', evt);\r\n         * });\r\n         * @event LayerSwitcher#show\r\n         */\r\n        this.dispatchEvent('show');\r\n    }\r\n    /**\r\n     * Hide the layer panel. Fires `'hide'` event.\r\n     * @fires LayerSwitcher#hide\r\n     */\r\n    hidePanel() {\r\n        if (this.element.classList.contains(this.shownClassName)) {\r\n            this.element.classList.remove(this.shownClassName);\r\n            this.updateButton();\r\n        }\r\n        /**\r\n         * Event triggered after the panel has been hidden.\r\n         * @event LayerSwitcher#hide\r\n         */\r\n        this.dispatchEvent('hide');\r\n    }\r\n    /**\r\n     * Update button text content and attributes based on current\r\n     * state\r\n     */\r\n    updateButton() {\r\n        if (this.element.classList.contains(this.shownClassName)) {\r\n            this.button.textContent = this.collapseLabel;\r\n            this.button.setAttribute('title', this.collapseTipLabel);\r\n            this.button.setAttribute('aria-label', this.collapseTipLabel);\r\n        }\r\n        else {\r\n            this.button.textContent = this.label;\r\n            this.button.setAttribute('title', this.tipLabel);\r\n            this.button.setAttribute('aria-label', this.tipLabel);\r\n        }\r\n    }\r\n    /**\r\n     * Re-draw the layer panel to represent the current state of the layers.\r\n     */\r\n    renderPanel() {\r\n        this.dispatchEvent('render');\r\n        LayerSwitcher.renderPanel(this.getMap(), this.panel, {\r\n            groupSelectStyle: this.groupSelectStyle,\r\n            reverse: this.reverse\r\n        });\r\n        this.dispatchEvent('rendercomplete');\r\n    }\r\n    /**\r\n     * **_[static]_** - Re-draw the layer panel to represent the current state of the layers.\r\n     * @param map The OpenLayers Map instance to render layers for\r\n     * @param panel The DOM Element into which the layer tree will be rendered\r\n     * @param options Options for panel, group, and layers\r\n     */\r\n    static renderPanel(map, panel, options) {\r\n        // Create the event.\r\n        const render_event = new Event('render');\r\n        // Dispatch the event.\r\n        panel.dispatchEvent(render_event);\r\n        options = options || {};\r\n        options.groupSelectStyle = LayerSwitcher.getGroupSelectStyle(options.groupSelectStyle);\r\n        LayerSwitcher.ensureTopVisibleBaseLayerShown(map, options.groupSelectStyle);\r\n        while (panel.firstChild) {\r\n            panel.removeChild(panel.firstChild);\r\n        }\r\n        // Reset indeterminate state for all layers and groups before\r\n        // applying based on groupSelectStyle\r\n        LayerSwitcher.forEachRecursive(map, function (l, _idx, _a) {\r\n            l.set('indeterminate', false);\r\n        });\r\n        if (options.groupSelectStyle === 'children' ||\r\n            options.groupSelectStyle === 'none') {\r\n            // Set visibile and indeterminate state of groups based on\r\n            // their children's visibility\r\n            LayerSwitcher.setGroupVisibility(map);\r\n        }\r\n        else if (options.groupSelectStyle === 'group') {\r\n            // Set child indetermiate state based on their parent's visibility\r\n            LayerSwitcher.setChildVisibility(map);\r\n        }\r\n        const ul = document.createElement('ul');\r\n        panel.appendChild(ul);\r\n        // passing two map arguments instead of lyr as we're passing the map as the root of the layers tree\r\n        LayerSwitcher.renderLayers_(map, map, ul, options, function render(_changedLyr) {\r\n            LayerSwitcher.renderPanel(map, panel, options);\r\n        });\r\n        // Create the event.\r\n        const rendercomplete_event = new Event('rendercomplete');\r\n        // Dispatch the event.\r\n        panel.dispatchEvent(rendercomplete_event);\r\n    }\r\n    /**\r\n     * **_[static]_** - Determine if a given layer group contains base layers\r\n     * @param grp Group to test\r\n     */\r\n    static isBaseGroup(grp) {\r\n        if (grp instanceof LayerGroup) {\r\n            const lyrs = grp.getLayers().getArray();\r\n            return lyrs.length && lyrs[0].get('type') === 'base';\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n    static setGroupVisibility(map) {\r\n        // Get a list of groups, with the deepest first\r\n        const groups = LayerSwitcher.getGroupsAndLayers(map, function (l) {\r\n            return (l instanceof LayerGroup &&\r\n                !l.get('combine') &&\r\n                !LayerSwitcher.isBaseGroup(l));\r\n        }).reverse();\r\n        // console.log(groups.map(g => g.get('title')));\r\n        groups.forEach(function (grp) {\r\n            // TODO Can we use getLayersArray, is it public in the esm build?\r\n            const descendantVisibility = grp.getLayersArray().map(function (l) {\r\n                const state = l.getVisible();\r\n                // console.log('>', l.get('title'), state);\r\n                return state;\r\n            });\r\n            // console.log(descendantVisibility);\r\n            if (descendantVisibility.every(function (v) {\r\n                return v === true;\r\n            })) {\r\n                grp.setVisible(true);\r\n                grp.set('indeterminate', false);\r\n            }\r\n            else if (descendantVisibility.every(function (v) {\r\n                return v === false;\r\n            })) {\r\n                grp.setVisible(false);\r\n                grp.set('indeterminate', false);\r\n            }\r\n            else {\r\n                grp.setVisible(true);\r\n                grp.set('indeterminate', true);\r\n            }\r\n        });\r\n    }\r\n    static setChildVisibility(map) {\r\n        // console.log('setChildVisibility');\r\n        const groups = LayerSwitcher.getGroupsAndLayers(map, function (l) {\r\n            return (l instanceof LayerGroup &&\r\n                !l.get('combine') &&\r\n                !LayerSwitcher.isBaseGroup(l));\r\n        });\r\n        groups.forEach(function (grp) {\r\n            const group = grp;\r\n            // console.log(group.get('title'));\r\n            const groupVisible = group.getVisible();\r\n            const groupIndeterminate = group.get('indeterminate');\r\n            group\r\n                .getLayers()\r\n                .getArray()\r\n                .forEach(function (l) {\r\n                l.set('indeterminate', false);\r\n                if ((!groupVisible || groupIndeterminate) && l.getVisible()) {\r\n                    l.set('indeterminate', true);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Ensure only the top-most base layer is visible if more than one is visible.\r\n     * @param map The map instance.\r\n     * @param groupSelectStyle\r\n     * @protected\r\n     */\r\n    static ensureTopVisibleBaseLayerShown(map, groupSelectStyle) {\r\n        let lastVisibleBaseLyr;\r\n        LayerSwitcher.forEachRecursive(map, function (lyr, _idx, _arr) {\r\n            if (lyr.get('type') === 'base' && lyr.getVisible()) {\r\n                lastVisibleBaseLyr = lyr;\r\n            }\r\n        });\r\n        if (lastVisibleBaseLyr)\r\n            LayerSwitcher.setVisible_(map, lastVisibleBaseLyr, true, groupSelectStyle);\r\n    }\r\n    /**\r\n     * **_[static]_** - Get an Array of all layers and groups displayed by the LayerSwitcher (has a `'title'` property)\r\n     * contained by the specified map or layer group; optionally filtering via `filterFn`\r\n     * @param grp The map or layer group for which layers are found.\r\n     * @param filterFn Optional function used to filter the returned layers\r\n     */\r\n    static getGroupsAndLayers(grp, filterFn) {\r\n        const layers = [];\r\n        filterFn =\r\n            filterFn ||\r\n                function (_lyr, _idx, _arr) {\r\n                    return true;\r\n                };\r\n        LayerSwitcher.forEachRecursive(grp, function (lyr, idx, arr) {\r\n            if (lyr.get('title')) {\r\n                if (filterFn(lyr, idx, arr)) {\r\n                    layers.push(lyr);\r\n                }\r\n            }\r\n        });\r\n        return layers;\r\n    }\r\n    /**\r\n     * Toggle the visible state of a layer.\r\n     * Takes care of hiding other layers in the same exclusive group if the layer\r\n     * is toggle to visible.\r\n     * @protected\r\n     * @param map The map instance.\r\n     * @param lyr layer whose visibility will be toggled.\r\n     * @param visible Set whether the layer is shown\r\n     * @param groupSelectStyle\r\n     * @protected\r\n     */\r\n    static setVisible_(map, lyr, visible, groupSelectStyle) {\r\n        // console.log(lyr.get('title'), visible, groupSelectStyle);\r\n        lyr.setVisible(visible);\r\n        if (visible && lyr.get('type') === 'base') {\r\n            // Hide all other base layers regardless of grouping\r\n            LayerSwitcher.forEachRecursive(map, function (l, _idx, _arr) {\r\n                if (l != lyr && l.get('type') === 'base') {\r\n                    l.setVisible(false);\r\n                }\r\n            });\r\n        }\r\n        if (lyr instanceof LayerGroup &&\r\n            !lyr.get('combine') &&\r\n            groupSelectStyle === 'children') {\r\n            lyr.getLayers().forEach((l) => {\r\n                LayerSwitcher.setVisible_(map, l, lyr.getVisible(), groupSelectStyle);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Render all layers that are children of a group.\r\n     * @param map The map instance.\r\n     * @param lyr Layer to be rendered (should have a title property).\r\n     * @param idx Position in parent group list.\r\n     * @param options Options for groups and layers\r\n     * @protected\r\n     */\r\n    static renderLayer_(map, lyr, idx, options, render) {\r\n        const li = document.createElement('li');\r\n        const lyrTitle = lyr.get('title');\r\n        const checkboxId = LayerSwitcher.uuid();\r\n        const label = document.createElement('label');\r\n        if (lyr instanceof LayerGroup && !lyr.get('combine')) {\r\n            const isBaseGroup = LayerSwitcher.isBaseGroup(lyr);\r\n            li.classList.add('group');\r\n            if (isBaseGroup) {\r\n                li.classList.add(CSS_PREFIX + 'base-group');\r\n            }\r\n            // Group folding\r\n            if (lyr.get('fold')) {\r\n                li.classList.add(CSS_PREFIX + 'fold');\r\n                li.classList.add(CSS_PREFIX + lyr.get('fold'));\r\n                const btn = document.createElement('button');\r\n                btn.onclick = function (e) {\r\n                    const evt = e || window.event;\r\n                    LayerSwitcher.toggleFold_(lyr, li);\r\n                    evt.preventDefault();\r\n                };\r\n                li.appendChild(btn);\r\n            }\r\n            if (!isBaseGroup && options.groupSelectStyle != 'none') {\r\n                const input = document.createElement('input');\r\n                input.type = 'checkbox';\r\n                input.id = checkboxId;\r\n                input.checked = lyr.getVisible();\r\n                input.indeterminate = lyr.get('indeterminate');\r\n                input.onchange = function (e) {\r\n                    const target = e.target;\r\n                    LayerSwitcher.setVisible_(map, lyr, target.checked, options.groupSelectStyle);\r\n                    render(lyr);\r\n                };\r\n                li.appendChild(input);\r\n                label.htmlFor = checkboxId;\r\n            }\r\n            label.innerHTML = lyrTitle;\r\n            li.appendChild(label);\r\n            const ul = document.createElement('ul');\r\n            li.appendChild(ul);\r\n            LayerSwitcher.renderLayers_(map, lyr, ul, options, render);\r\n        }\r\n        else {\r\n            li.className = 'layer';\r\n            const input = document.createElement('input');\r\n            if (lyr.get('type') === 'base') {\r\n                input.type = 'radio';\r\n            }\r\n            else {\r\n                input.type = 'checkbox';\r\n            }\r\n            input.id = checkboxId;\r\n            input.checked = lyr.get('visible');\r\n            input.indeterminate = lyr.get('indeterminate');\r\n            input.onchange = function (e) {\r\n                const target = e.target;\r\n                LayerSwitcher.setVisible_(map, lyr, target.checked, options.groupSelectStyle);\r\n                render(lyr);\r\n            };\r\n            li.appendChild(input);\r\n            label.htmlFor = checkboxId;\r\n            label.innerHTML = lyrTitle;\r\n            const rsl = map.getView().getResolution();\r\n            if (rsl >= lyr.getMaxResolution() || rsl < lyr.getMinResolution()) {\r\n                label.className += ' disabled';\r\n            }\r\n            else if (lyr.getMinZoom && lyr.getMaxZoom) {\r\n                const zoom = map.getView().getZoom();\r\n                if (zoom <= lyr.getMinZoom() || zoom > lyr.getMaxZoom()) {\r\n                    label.className += ' disabled';\r\n                }\r\n            }\r\n            li.appendChild(label);\r\n        }\r\n        return li;\r\n    }\r\n    /**\r\n     * Render all layers that are children of a group.\r\n     * @param map The map instance.\r\n     * @param lyr Group layer whose children will be rendered.\r\n     * @param elm DOM element that children will be appended to.\r\n     * @param options Options for groups and layers\r\n     * @protected\r\n     */\r\n    static renderLayers_(map, lyr, elm, options, render) {\r\n        let lyrs = lyr.getLayers().getArray().slice();\r\n        if (options.reverse)\r\n            lyrs = lyrs.reverse();\r\n        for (let i = 0, l; i < lyrs.length; i++) {\r\n            l = lyrs[i];\r\n            if (l.get('title')) {\r\n                elm.appendChild(LayerSwitcher.renderLayer_(map, l, i, options, render));\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * **_[static]_** - Call the supplied function for each layer in the passed layer group\r\n     * recursing nested groups.\r\n     * @param lyr The layer group to start iterating from.\r\n     * @param fn Callback which will be called for each layer\r\n     * found under `lyr`.\r\n     */\r\n    static forEachRecursive(lyr, fn) {\r\n        lyr.getLayers().forEach(function (lyr, idx, a) {\r\n            fn(lyr, idx, a);\r\n            if (lyr instanceof LayerGroup) {\r\n                LayerSwitcher.forEachRecursive(lyr, fn);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * **_[static]_** - Generate a UUID\r\n     * Adapted from http://stackoverflow.com/a/2117523/526860\r\n     * @returns {String} UUID\r\n     */\r\n    static uuid() {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            const r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\r\n            return v.toString(16);\r\n        });\r\n    }\r\n    /**\r\n     * Apply workaround to enable scrolling of overflowing content within an\r\n     * element. Adapted from https://gist.github.com/chrismbarr/4107472\r\n     * @param elm Element on which to enable touch scrolling\r\n     * @protected\r\n     */\r\n    static enableTouchScroll_(elm) {\r\n        if (LayerSwitcher.isTouchDevice_()) {\r\n            let scrollStartPos = 0;\r\n            elm.addEventListener('touchstart', function (event) {\r\n                scrollStartPos = this.scrollTop + event.touches[0].pageY;\r\n            }, false);\r\n            elm.addEventListener('touchmove', function (event) {\r\n                this.scrollTop = scrollStartPos - event.touches[0].pageY;\r\n            }, false);\r\n        }\r\n    }\r\n    /**\r\n     * Determine if the current browser supports touch events. Adapted from\r\n     * https://gist.github.com/chrismbarr/4107472\r\n     * @returns {Boolean} True if client can have 'TouchEvent' event\r\n     * @protected\r\n     */\r\n    static isTouchDevice_() {\r\n        try {\r\n            document.createEvent('TouchEvent');\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Fold/unfold layer group\r\n     * @param lyr Layer group to fold/unfold\r\n     * @param li List item containing layer group\r\n     * @protected\r\n     */\r\n    static toggleFold_(lyr, li) {\r\n        li.classList.remove(CSS_PREFIX + lyr.get('fold'));\r\n        lyr.set('fold', lyr.get('fold') === 'open' ? 'close' : 'open');\r\n        li.classList.add(CSS_PREFIX + lyr.get('fold'));\r\n    }\r\n    /**\r\n     * If a valid groupSelectStyle value is not provided then return the default\r\n     * @param groupSelectStyle The string to check for validity\r\n     * @returns The value groupSelectStyle, if valid, the default otherwise\r\n     * @protected\r\n     */\r\n    static getGroupSelectStyle(groupSelectStyle) {\r\n        return ['none', 'children', 'group'].indexOf(groupSelectStyle) >= 0\r\n            ? groupSelectStyle\r\n            : 'children';\r\n    }\r\n}\r\n// Expose LayerSwitcher as ol.control.LayerSwitcher if using a full build of\r\n// OpenLayers\r\nif (window['ol'] && window['ol']['control']) {\r\n    window['ol']['control']['LayerSwitcher'] = LayerSwitcher;\r\n}\r\n\r\nreturn LayerSwitcher;\r\n\r\n})));\r\n","/**\n * @module ol/proj/proj4\n */\nimport Projection from './Projection.js';\nimport {\n  addCoordinateTransforms,\n  addEquivalentProjections,\n  addProjection,\n  createSafeCoordinateTransform,\n  get,\n} from '../proj.js';\nimport {get as getTransform} from './transforms.js';\n\n/**\n * Make projections defined in proj4 (with `proj4.defs()`) available in\n * OpenLayers. Requires proj4 >= 2.8.0.\n *\n * This function should be called whenever changes are made to the proj4\n * registry, e.g. after calling `proj4.defs()`. Existing transforms will not be\n * modified by this function.\n *\n * @param {?} proj4 Proj4.\n * @api\n */\nexport function register(proj4) {\n  const projCodes = Object.keys(proj4.defs);\n  const len = projCodes.length;\n  let i, j;\n  for (i = 0; i < len; ++i) {\n    const code = projCodes[i];\n    if (!get(code)) {\n      const def = proj4.defs(code);\n      let units = def.units;\n      if (!units && def.projName === 'longlat') {\n        units = 'degrees';\n      }\n      addProjection(\n        new Projection({\n          code: code,\n          axisOrientation: def.axis,\n          metersPerUnit: def.to_meter,\n          units,\n        })\n      );\n    }\n  }\n  for (i = 0; i < len; ++i) {\n    const code1 = projCodes[i];\n    const proj1 = get(code1);\n    for (j = 0; j < len; ++j) {\n      const code2 = projCodes[j];\n      const proj2 = get(code2);\n      if (!getTransform(code1, code2)) {\n        if (proj4.defs[code1] === proj4.defs[code2]) {\n          addEquivalentProjections([proj1, proj2]);\n        } else {\n          const transform = proj4(code1, code2);\n          addCoordinateTransforms(\n            proj1,\n            proj2,\n            createSafeCoordinateTransform(proj1, proj2, transform.forward),\n            createSafeCoordinateTransform(proj2, proj1, transform.inverse)\n          );\n        }\n      }\n    }\n  }\n}\n"],"names":["$KD0eF","parcelRequire","$1f093ab5083c8a1f$var$Observable","default","constructor","super","this","on","onInternal","once","onceInternal","un","unInternal","revision_","changed","dispatchEvent","$3xzSb","CHANGE","getRevision","type","listener","Array","isArray","len","length","keys","i","$ilM9F","listen","key","listenOnce","ol_key","$1f093ab5083c8a1f$export$b7ef3f8527533384","ii","removeEventListener","unlistenByKey","prototype","$1f093ab5083c8a1f$export$2e2bcd8739ae039","$4kyFN","$08c28d22c0cb5a39$var$Target","target","eventTarget_","pendingRemovals_","dispatching_","listeners_","addEventListener","listeners","listenersForType","includes","push","event","isString","evt","$f18Q2","dispatching","pendingRemovals","propagate","handleEvent","call","propagationStopped","pr","$6wUzV","VOID","disposeInternal","$gn0g3","clear","getListeners","undefined","hasListener","Object","index","indexOf","splice","$08c28d22c0cb5a39$export$2e2bcd8739ae039","$3273ed08087da3da$export$2e2bcd8739ae039","disposed","dispose","$aeedce20e9577100$export$2e2bcd8739ae039","defaultPrevented","preventDefault","stopPropagation","$fVVyM","$013a1733c226ec50$export$22e23a2304399231","$013a1733c226ec50$export$8f11cee4bdc7e668","$013a1733c226ec50$export$1cd1943b3a73bbe8","$013a1733c226ec50$export$ff83df6f9971435f","fn","lastResult","lastArgs","lastThis","called","nextArgs","slice","arguments","equals","apply","$b998d41b678ed5d1$export$4e734a3b32fb971b","a","b","$b998d41b678ed5d1$export$8a3786cc03fdb777","arr","direction","n","$b998d41b678ed5d1$export$8b58be045bf06082","data","extension","$b998d41b678ed5d1$export$e9bab7fafb253603","arr1","arr2","len1","$b998d41b678ed5d1$export$efa610630f9e181","func","strict","compare","every","currentVal","res","$beaefe87199bb537$export$42ffd38884aecdac","object","property","$beaefe87199bb537$export$dd1bc94b04021eeb","$294047c5e65f31a3$export$2e2bcd8739ae039","ERROR","BLUR","CLEAR","CONTEXTMENU","CLICK","DBLCLICK","DRAGENTER","DRAGOVER","DROP","FOCUS","KEYDOWN","KEYPRESS","LOAD","RESIZE","TOUCHMOVE","WHEEL","$d5bf8abd656a3cdc$export$63174c828edd6ff8","thisArg","bind","originalListener","eventsKey","$d5bf8abd656a3cdc$export$8d2a95bc11b44725","$d5bf8abd656a3cdc$export$b0a21c8b3c1c921","$7xdj9","$0b703156bb914e6f$export$2f5ff21d758d25a7","layer","$0b703156bb914e6f$var$Property","$0b703156bb914e6f$var$LayerGroup","options","baseOptions","assign","layers","layersListenerKeys_","listenerKeys_","addChangeListener","handleLayersChanged_","$cD8Qe","unique","$4Cz58","assert","getArray","setLayers","handleLayerChange_","forEach","getLayers","$1TIYs","ADD","handleLayersAdd_","REMOVE","handleLayersRemove_","id","layersArray","registerLayerListeners_","listenerKeys","$jXCUw","PROPERTYCHANGE","handleLayerGroupAdd_","handleLayerGroupRemove_","$9iPUS","getUid","collectionEvent","element","get","collection","currentLayers","set","getLayersArray","array","getLayerStatesArray","dest","states","pos","ownLayerState","getLayerState","defaultZIndex","zIndex","layerState","opacity","visible","maxResolution","Math","min","minResolution","max","minZoom","maxZoom","extent","$9pD6L","getIntersection","getSourceState","$0b703156bb914e6f$export$2e2bcd8739ae039","$fFFY7","$57c5f0299cb9b82f$var$BaseLayer","background_","background","properties","$lbO8S","OPACITY","VISIBLE","Z_INDEX","MAX_RESOLUTION","Infinity","MIN_RESOLUTION","MIN_ZOOM","MAX_ZOOM","className_","className","setProperties","state_","getBackground","getClassName","managed","state","getZIndex","$9byFX","clamp","round","getOpacity","getVisible","getExtent","getMaxResolution","getMinResolution","getMinZoom","getMaxZoom","abstract","EXTENT","setBackground","setExtent","setMaxResolution","setMinResolution","setMaxZoom","setMinZoom","setOpacity","setVisible","setZIndex","zindex","$57c5f0299cb9b82f$export$2e2bcd8739ae039","$b68b3d6e32e3074a$export$cf395d7c4a2d5a17","oldValue","$b68b3d6e32e3074a$var$BaseObject","$2FcER","values","values_","value","hasOwnProperty","getKeys","getProperties","hasProperties","notify","eventType","removeChangeListener","silent","applyProperties","source","unset","isEmpty","$b68b3d6e32e3074a$export$2e2bcd8739ae039","$e881b5dca21eb5d4$export$2e2bcd8739ae039","$6c5e11070e371322$export$817eb92a8194bab0","Error","$6c5e11070e371322$var$uidCounter_","$6c5e11070e371322$export$5e82334337e0f204","obj","ol_uid","String","$f6d1853b3fcae320$export$2e2bcd8739ae039","SOURCE","MAP","$5wMtC","$35d5ec884318008e$export$a7a9523472993e97","assertion","errorCode","$40658b5e833b516b$var$messages","$40658b5e833b516b$var$AssertionError","code","message","name","$40658b5e833b516b$export$2e2bcd8739ae039","$6b000a049d919fe5$export$7d15b64cf5a3a4c4","$6b000a049d919fe5$export$251bb0a9cef172e6","x","y","x1","y1","x2","y2","dx","dy","t","$6b000a049d919fe5$export$88e6ebb4fe54f538","$6b000a049d919fe5$export$8240f01c446270e6","mat","maxRow","maxEl","abs","r","absValue","tmp","j","coef","k","l","m","$6b000a049d919fe5$export$56cb859c01fa134d","angleInRadians","PI","$6b000a049d919fe5$export$cba01ba138429a1d","angleInDegrees","$6b000a049d919fe5$export$ba467bec01d66def","$6b000a049d919fe5$export$3a89f8d6f6bf6c9f","$6b000a049d919fe5$export$a81f732198733497","decimals","factor","pow","$6b000a049d919fe5$export$2077e0241d6afd3c","$6b000a049d919fe5$export$a3fe094919f356fd","floor","$6b000a049d919fe5$export$803ce6b71a0a94b2","ceil","$931ffc4e747c14db$var$Property","$931ffc4e747c14db$export$a87ae6eb2761ec6d","$931ffc4e747c14db$var$Collection","unique_","array_","assertUnique_","updateLength_","getLength","pop","extend","f","item","insertAt","elem","removeAt","remove","prev","setAt","except","$931ffc4e747c14db$export$2e2bcd8739ae039","$161dd067fe2d672c$export$2e2bcd8739ae039","$iM9A6","$6da4c8ed3074c92b$export$8aceca7c77505534","coordinates","$6da4c8ed3074c92b$export$fe201bb3bbe031e9","$6da4c8ed3074c92b$export$1f820e3920fa5715","$6da4c8ed3074c92b$export$9cd59f9826255e47","$6da4c8ed3074c92b$export$cbe64c389534206f","$6da4c8ed3074c92b$export$ac68c24d37ca240f","coordinate","$6da4c8ed3074c92b$export$805bdfd6d6690e97","$6da4c8ed3074c92b$export$be866b1e0809b17e","extent1","extent2","$6da4c8ed3074c92b$export$f97905ead28c61a8","minX","minY","maxX","maxY","relationship","UNKNOWN","LEFT","RIGHT","BELOW","ABOVE","INTERSECTING","$6da4c8ed3074c92b$export$958e3e1a02eac4b6","$6da4c8ed3074c92b$export$3e2152b047719fa1","$6da4c8ed3074c92b$export$4838bf78d04a9440","$6da4c8ed3074c92b$export$be0ab0bf96ca59ca","flatCoordinates","offset","end","stride","$6da4c8ed3074c92b$export$30570204156ffd18","$6da4c8ed3074c92b$export$e9bab7fafb253603","$6da4c8ed3074c92b$export$8b58be045bf06082","$6da4c8ed3074c92b$export$f1dab130b92b85a9","$6da4c8ed3074c92b$export$f9ed8a3d123a08e2","callback","val","$6da4c8ed3074c92b$export$8d09f5e2e1bf560d","$6da4c8ed3074c92b$export$e77c1cf70445e168","$6da4c8ed3074c92b$export$b84fa077c8b05295","$6da4c8ed3074c92b$export$cb1538b07e6964ff","$6da4c8ed3074c92b$export$520c40045967cb15","area","$6da4c8ed3074c92b$export$dd1bc94b04021eeb","$6da4c8ed3074c92b$export$3c49c185de0c2bfc","$6da4c8ed3074c92b$export$c08559766941f856","$6da4c8ed3074c92b$export$c91255cadecfe081","$6da4c8ed3074c92b$export$a1cfd206661d0801","corner","$6da4c8ed3074c92b$export$13ba650faf8308","center","resolution","rotation","size","x0","y0","x3","y3","$6da4c8ed3074c92b$export$4b7a6fb4002cd6ac","cosRotation","cos","sinRotation","sin","xCos","xSin","yCos","ySin","$6da4c8ed3074c92b$export$72209efa88586d42","intersection","$6da4c8ed3074c92b$export$7b0a31e10bbff018","$6da4c8ed3074c92b$export$6a4fe494c558c238","$6da4c8ed3074c92b$export$a6a5a7a461419425","start","intersects","startRel","endRel","startX","startY","endX","endY","slope","$6da4c8ed3074c92b$export$9f9dcb98c894b623","transformFn","stops","width","height","xs","ys","i1","$6da4c8ed3074c92b$var$_boundingExtentXYs","$dab4245bc22b806c$export$2e2bcd8739ae039","$b978dafe8f7d27ff$var$Control","style","pointerEvents","target_","map_","render","setTarget","$DfnQm","removeNode","getMap","setMap","map","getOverlayContainerStopEvent","appendChild","$jDfdj","POSTRENDER","mapEvent","document","getElementById","$b978dafe8f7d27ff$export$2e2bcd8739ae039","$e4ad75f913b6f7ff$export$2e2bcd8739ae039","MOVESTART","MOVEEND","LOADSTART","LOADEND","$8UoiJ","$075f937d7366f1a2$export$9e05d10eae75c464","canvasPool","settings","canvas","shift","WORKER_OFFSCREEN_CANVAS","OffscreenCanvas","createElement","getContext","$075f937d7366f1a2$export$e918ac6a1026a12a","context","clearRect","$075f937d7366f1a2$export$5542201de9311ab2","newNode","oldNode","parent","parentNode","replaceChild","$075f937d7366f1a2$export$1d0aa160432dfea5","node","removeChild","$075f937d7366f1a2$export$1e1c9bf5a4ffe0d1","lastChild","$075f937d7366f1a2$export$caeacfe04f52533a","children","oldChildren","childNodes","oldChild","newChild","insertBefore","$67c66761d21428d0$var$ua","navigator","userAgent","toLowerCase","$67c66761d21428d0$export$8442bdfd18b7b8a6","$67c66761d21428d0$export$39dfd62a25e0fe93","test","$67c66761d21428d0$export$76c0a3b101d93136","$67c66761d21428d0$export$6b83a0446fc26f94","devicePixelRatio","$67c66761d21428d0$export$98fcef3dc9973292","WorkerGlobalScope","self","$67c66761d21428d0$export$716f8695eedb9bad","Image","decode","$67c66761d21428d0$export$f751ce96c6c4e4fc","passive","defineProperty","window","error","$a4f89edd2ef65182$export$b089dda0fde13047","normalizeWhitespace","$a4f89edd2ef65182$export$caa0047a9c11e135","join","accumulator","nodeType","Node","CDATA_SECTION_NODE","TEXT_NODE","nodeValue","replace","firstChild","nextSibling","$a4f89edd2ef65182$export$18ed2f5932a1b385","valueReader","objectStack","$a4f89edd2ef65182$export$145ce5485ab74220","localName","$a4f89edd2ef65182$export$b69a91976ee81208","$a4f89edd2ef65182$export$7989129829daaabf","fixedNodeName","fixedNamespaceURI","newNodeName","nodeName","namespaceURI","qualifiedName","$a4f89edd2ef65182$export$f65ca476c09acec0","createElementNS","$a4f89edd2ef65182$export$7094a064528c7fee","$a4f89edd2ef65182$export$c6eb0402f939765f","namespaceURIs","structure","structureNS","$a4f89edd2ef65182$export$5c934df85741dbd1","parsersNS","firstElementChild","nextElementSibling","parsers","parser","$a4f89edd2ef65182$export$dc8ce45ce1679f4f","$a4f89edd2ef65182$var$document_","implementation","createDocument","$ecf528189e807846$export$2e2bcd8739ae039","read","doc","xml","DOMParser","parseFromString","readFromDocument","readFromNode","ELEMENT_NODE","$ff7180bdd45ebb19$export$66e1c0999abad646","v1","v2","s1","split","s2","n1","parseInt","n2","$d5e0fde316cac971$export$a8558234a836634","string","exec","$d5e0fde316cac971$export$5be9c99d34ad295b","$d5e0fde316cac971$export$5a7483b211367c0c","parseFloat","$d5e0fde316cac971$export$6161a72ab5b6b722","$d5e0fde316cac971$export$1c8fe3e9d3126f53","$d5e0fde316cac971$export$dda73877cb166cd3","trim","$dd74b316579eb032$export$40bb929053d4012c","getAttributeNS","$2e70ee21db6a32c8$var$NAMESPACE_URIS","$2e70ee21db6a32c8$var$PARSERS","Service","$2e70ee21db6a32c8$var$SERVICE_PARSERS","Capability","$2e70ee21db6a32c8$var$CAPABILITY_PARSERS","Request","$2e70ee21db6a32c8$var$REQUEST_PARSERS","Exception","$2e70ee21db6a32c8$var$EXCEPTION_PARSERS","Layer","layerObject","$2e70ee21db6a32c8$var$LAYER_PARSERS","$2e70ee21db6a32c8$var$readLayer","Name","Title","Abstract","KeywordList","$2e70ee21db6a32c8$var$readKeywordList","OnlineResource","ContactInformation","$2e70ee21db6a32c8$var$CONTACT_INFORMATION_PARSERS","Fees","AccessConstraints","LayerLimit","MaxWidth","MaxHeight","ContactPersonPrimary","$2e70ee21db6a32c8$var$CONTACT_PERSON_PARSERS","ContactPosition","ContactAddress","$2e70ee21db6a32c8$var$CONTACT_ADDRESS_PARSERS","ContactVoiceTelephone","ContactFacsimileTelephone","ContactElectronicMailAddress","ContactPerson","ContactOrganization","AddressType","Address","City","StateOrProvince","PostCode","Country","Format","CRS","EX_GeographicBoundingBox","geographicBoundingBox","$2e70ee21db6a32c8$var$EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS","westBoundLongitude","southBoundLatitude","eastBoundLongitude","northBoundLatitude","BoundingBox","getAttribute","resolutions","crs","Dimension","units","unitSymbol","multipleValues","nearestValue","current","Attribution","$2e70ee21db6a32c8$var$ATTRIBUTION_PARSERS","AuthorityURL","authorityObject","$2e70ee21db6a32c8$var$readFormatOnlineresource","Identifier","MetadataURL","metadataObject","DataURL","FeatureListURL","Style","$2e70ee21db6a32c8$var$STYLE_PARSERS","MinScaleDenominator","MaxScaleDenominator","LogoURL","$2e70ee21db6a32c8$var$readSizedFormatOnlineresource","GetCapabilities","$2e70ee21db6a32c8$var$readOperationType","GetMap","GetFeatureInfo","$2e70ee21db6a32c8$var$OPERATIONTYPE_PARSERS","DCPType","$2e70ee21db6a32c8$var$DCPTYPE_PARSERS","HTTP","$2e70ee21db6a32c8$var$HTTP_PARSERS","Get","Post","LegendURL","StyleSheetURL","StyleURL","$2e70ee21db6a32c8$var$FORMAT_ONLINERESOURCE_PARSERS","$2e70ee21db6a32c8$var$KEYWORDLIST_PARSERS","Keyword","parentLayerObject","queryable","cascaded","opaque","noSubsets","fixedWidth","fixedHeight","childValue","concat","parentValue","formatOnlineresource","$2e70ee21db6a32c8$export$2e2bcd8739ae039","version","wmsCapabilityObject","$e22e7611e69f42a9$export$5635d7ef4b8fee1c","transform","$e22e7611e69f42a9$export$f672e0b6f7222cd7","dx1","dy1","sx","sy","angle","dx2","dy2","$e22e7611e69f42a9$export$bd70ea2a93c0fa4","det","c","d","e","$e22e7611e69f42a9$var$transformStringDiv","$e22e7611e69f42a9$export$f84e8e69fd4488a5","transformString","$322346e1ff7894ca$var$HEX_COLOR_RE_","$322346e1ff7894ca$var$NAMED_COLOR_RE_","$322346e1ff7894ca$export$590567be997858b6","color","g","$322346e1ff7894ca$export$f84e8e69fd4488a5","$322346e1ff7894ca$var$fromNamed","el","body","rgb","getComputedStyle","$322346e1ff7894ca$export$3004f64547af360e","cache","cacheSize","s","hasAlpha","substr","startsWith","Number","$322346e1ff7894ca$export$a3295358bff77e","$322346e1ff7894ca$var$fromStringInternal_","$322346e1ff7894ca$export$75093a47a9fa838d","$f351daabfe6e2d22$var$IconImageCache","cache_","cacheSize_","maxCacheSize_","canExpireCache","expire","iconImage","src","crossOrigin","$f351daabfe6e2d22$var$getKey","setSize","maxCacheSize","$f351daabfe6e2d22$export$747ccdf771a87ab8","$f5e92a4d985a2824$export$2e2bcd8739ae039","PRERENDER","PRECOMPOSE","POSTCOMPOSE","RENDERCOMPLETE","$534f30fce11effcd$var$Layer","mapPrecomposeKey_","mapRenderKey_","sourceChangeKey_","renderer_","rendered","handleSourcePropertyChange_","setSource","getSource","getRenderSource","getState","handleSourceChange_","getFeatures","pixel","Promise","resolve","getData","frameState","layerRenderer","getRenderer","prepareFrame","renderFrame","unrender","setMapInternal","getMapInternal","layerStatesArray","some","arrayLayerState","createRenderer","hasRenderer","$534f30fce11effcd$export$acb1e9cb9ce4ca56","viewState","zoom","$534f30fce11effcd$export$2e2bcd8739ae039","$1bd0a226f9a16141$export$e9bab7fafb253603","coordinate1","coordinate2","$1bd0a226f9a16141$export$bb628a54ab399bc9","cosAngle","sinAngle","$1bd0a226f9a16141$export$39a9ce3624977b84","projection","canWrapX","worldWidth","getWidth","worldsAway","$1bd0a226f9a16141$export$24e2b27d1ff0c1d5","sourceExtentWidth","projectionExtent","$b370ab32454a96fd$var$MapRenderer","dispatchRenderEvent","calculateMatrices2D","coordinateToPixelTransform","pixelToCoordinateTransform","forEachFeatureAtCoordinate","hitTolerance","checkWrapped","layerFilter","thisArg2","result","feature","geometry","translatedCoordinate","offsets","layerStates","numLayers","matches","tmpCoord","getWrapX","callback1","order","distanceSq","sort","hasFeatureAtCoordinate","TRUE","scheduleExpireIconCache","postRenderFunctions","$b370ab32454a96fd$var$expireIconCache","$b370ab32454a96fd$export$2e2bcd8739ae039","$b80dddceb0c42ad4$var$RenderEvent","inversePixelTransform","$b80dddceb0c42ad4$export$2e2bcd8739ae039","$ce07df6d5d4656f1$var$fontRegEx","RegExp","$ce07df6d5d4656f1$var$fontRegExMatchIndex","$ce07df6d5d4656f1$export$5abde8a6aec4a131","fontSpec","match","lineHeight","weight","variant","families","family","$d4aabc5c971073f1$export$1d36981fcadac93b","$d4aabc5c971073f1$var$measureFont","$d4aabc5c971073f1$var$measureContext","$d4aabc5c971073f1$export$7fdcec604f0b1fa7","referenceFonts","text","interval","referenceWidth","isAvailable","fontStyle","fontWeight","fontFamily","available","referenceFont","$d4aabc5c971073f1$export$4ea92329b673abd1","check","done","fonts","font","clearInterval","measureElement","$d4aabc5c971073f1$var$measureText","createCanvasContext2D","measureText","$fa78c97693b12120$export$2e2bcd8739ae039","fontChangeListenerKey_","redrawText","element_","position","container","getViewport","children_","renderedVisible_","display","declutterLayers","previousElement","layerIndex","sourceState","renderDeclutter","replaceChildren","$3a171922c3a0c5ed$var$MapEvent","$3a171922c3a0c5ed$export$2e2bcd8739ae039","$a1b91f073c6a6c43$export$2e2bcd8739ae039","originalEvent","dragging","activePointers","pixel_","coordinate_","getEventPixel","getCoordinateFromPixel","$150f412a4a7fa263$export$2e2bcd8739ae039","SINGLECLICK","POINTERDRAG","POINTERMOVE","POINTERDOWN","POINTERUP","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","$d564567e31203d44$export$2e2bcd8739ae039","$6085d006f9d0efe2$var$MapBrowserEventHandler","moveTolerance","clickTimeoutId_","emulateClicks_","dragging_","dragListenerKeys_","moveTolerance_","down_","activePointers_","trackedTouches_","pointerdownListenerKey_","handlePointerDown_","originalPointerMoveEvent_","relayedListenerKey_","relayMoveEvent_","boundHandleTouchMove_","handleTouchMove_","PASSIVE_EVENT_LISTENERS","emulateClick_","pointerEvent","newEvent","clearTimeout","setTimeout","updateActivePointers_","pointerId","handlePointerUp_","isMouseActionButton_","button","getOwnerDocument","handlePointerMove_","getRootNode","isMoving_","cancelable","clientX","clientY","$6085d006f9d0efe2$export$2e2bcd8739ae039","$07fa325567004bb7$export$2e2bcd8739ae039","LAYERGROUP","SIZE","TARGET","VIEW","$716c6804ea170b71$export$2e2bcd8739ae039","priorityFunction","keyFunction","priorityFunction_","keyFunction_","elements_","priorities_","queuedElements_","dequeue","elements","priorities","siftUp_","elementKey","enqueue","priority","siftDown_","getCount","getLeftChildIndex_","getRightChildIndex_","getParentIndex_","heapify_","isKeyQueued","isQueued","count","startIndex","lIndex","rIndex","smallerChildIndex","parentIndex","reprioritize","$b8291d9739c3c64e$export$2e2bcd8739ae039","IDLE","LOADING","LOADED","EMPTY","$4c51fd53052a6bbc$export$2e2bcd8739ae039","tilePriorityFunction","tileChangeCallback","getKey","boundHandleTileChange_","handleTileChange","tileChangeCallback_","tilesLoading_","tilesLoadingKeys_","added","getTilesLoading","tile","tileKey","loadMoreTiles","maxTotalLoading","maxNewLoads","newLoads","load","$4c51fd53052a6bbc$export$f08ad5eceeff5d45","tileSourceKey","tileCenter","tileResolution","wantedTiles","deltaX","deltaY","log","sqrt","$7d362782b4ccb93d$export$2e2bcd8739ae039","ANIMATING","INTERACTING","$d35baefbe89be4c5$export$2e2bcd8739ae039","CENTER","RESOLUTION","ROTATION","$03edbd434a9e6608$export$1482081eec883108","radians","degrees","ft","$6dc418afeec7068a$export$2e2bcd8739ae039","code_","units_","extent_","worldExtent_","worldExtent","axisOrientation_","axisOrientation","global_","global","canWrapX_","getPointResolutionFunc_","getPointResolution","defaultTileGrid_","metersPerUnit_","metersPerUnit","getCode","getUnits","getMetersPerUnit","getWorldExtent","getAxisOrientation","isGlobal","setGlobal","getDefaultTileGrid","setDefaultTileGrid","tileGrid","setWorldExtent","setGetPointResolution","getPointResolutionFunc","$84ad988f04807ab1$export$f3928063e5e96d35","$84ad988f04807ab1$export$21e6da8a7375dfe8","$84ad988f04807ab1$export$ae9d6ed80df710e5","$84ad988f04807ab1$export$d26945d1ad52feeb","tan","$84ad988f04807ab1$var$EPSG3857Projection","point","cosh","$84ad988f04807ab1$export$b508d7ad9a891c1b","$84ad988f04807ab1$export$1ff8bb36c0983070","input","output","dimension","$84ad988f04807ab1$export$8c71322ec28ed6b4","atan","exp","$b58ae362632b32c5$export$21e6da8a7375dfe8","$b58ae362632b32c5$export$1482081eec883108","$b58ae362632b32c5$var$EPSG4326Projection","$b58ae362632b32c5$export$b508d7ad9a891c1b","$f5ec5c943d804ecb$var$cache","$f5ec5c943d804ecb$export$e16d8520af44a096","$11b5dd198626e1de$var$transforms","$11b5dd198626e1de$export$e16d8520af44a096","destination","sourceCode","destinationCode","$11b5dd198626e1de$export$3988ae62b71be9a3","$fb75384508533d8f$export$79376507b09a66f","c1","c2","radius","lat1","toRadians","lat2","deltaLatBy2","deltaLonBy2","atan2","$9c4744460e43e41b$var$showCoordinateWarning","$9c4744460e43e41b$export$ed949affbc7c4223","disable","$9c4744460e43e41b$export$dd516654c5f598fb","$9c4744460e43e41b$export$83e8ab53904f8022","$9c4744460e43e41b$export$59ae956cd3e343f7","$9c4744460e43e41b$export$3988ae62b71be9a3","projectionLike","$9c4744460e43e41b$export$2d8f7b4eec383d44","pointResolution","getter","projUnits","toEPSG4326","$9c4744460e43e41b$export$e3c4995a701c26a3","vertices","metersPerUnit1","$9c4744460e43e41b$export$eeb8392580a05a37","projections","$9c4744460e43e41b$export$638ad73f7aafb913","$9c4744460e43e41b$export$549167224996a0fb","defaultCode","$9c4744460e43e41b$export$6b4aafd331159e0d","coordTransform","pointLength","jj","$9c4744460e43e41b$export$6b1c2e6623f4f49d","forward","inverse","sourceProj","destProj","$9c4744460e43e41b$export$fe091d73a555748b","projection1","projection2","equalUnits","sourceProjection","destinationProjection","transformFunc","$9c4744460e43e41b$export$fce0c6cfca85ed96","$9c4744460e43e41b$export$51186ad6e864892a","$9c4744460e43e41b$export$751c68e0e0efff79","applyTransform","$9c4744460e43e41b$var$userProjection","$9c4744460e43e41b$export$698f563af1ba02a5","$9c4744460e43e41b$export$d4b8ec0b96db1ee2","destProjection","console","warn","$9c4744460e43e41b$export$96bfd09e2cffb006","$9c4744460e43e41b$export$494be3a3a25689ca","$9c4744460e43e41b$export$1873f9cfeb8bd1d6","coord","transformed","sourceExtent","projections2","forwardTransform","inverseTransform","$b21a6e049949bb31$export$c2f0af2c946f6897","onlyCenter","smooth","isMoving","centerShift","viewWidth","viewHeight","shiftX","shiftY","ratio","$b21a6e049949bb31$export$f883a24d5edde77c","$bac43a1f4a628548$var$getViewportClampedResolution","maxExtent","viewportSize","showFullExtent","xResolution","yResolution","getHeight","$bac43a1f4a628548$var$getSmoothClampedResolution","$bac43a1f4a628548$export$d65a517690fc4385","cappedMaxRes","capped","z","linearFindNearest","$bac43a1f4a628548$export$22ac0f6b219de91a","power","tolerance","minZoomLevel","cappedZoomLevel","zoomLevel","newResolution","$bac43a1f4a628548$export$1c4e6da9b4b066fe","$d65f0a322291d127$export$e20fbacbb41798b","$d65f0a322291d127$export$f883a24d5edde77c","$d65f0a322291d127$export$9ba78806de831083","theta","$d65f0a322291d127$export$17a6e6f3448b17e8","$c7ccf7e681a9b333$export$929e5a82286172a6","$c7ccf7e681a9b333$export$57636bb43b1ccbb0","$c7ccf7e681a9b333$export$9b47139b511b56e4","$c7ccf7e681a9b333$export$45db2fc2f15997e7","$14c6e714516e527b$export$b92b2dedcfff79de","$14c6e714516e527b$export$bb628a54ab399bc9","anchor","anchorX","anchorY","$14c6e714516e527b$export$dcdf75081b88279d","$14c6e714516e527b$export$d73ee8ef04f5226a","$50db89a00eb954f6$var$tmpTransform","$50db89a00eb954f6$var$Geometry","createEmpty","extentRevision_","simplifiedGeometryMaxMinSquaredTolerance","simplifiedGeometryRevision","simplifyTransformedInternal","memoizeOne","revision","squaredTolerance","getSimplifiedGeometry","clone","simplifyTransformed","closestPointXY","closestPoint","minSquaredDistance","containsXY","getClosestPoint","NaN","intersectsCoordinate","computeExtent","isNaN","createOrUpdateEmpty","returnOrUpdate","rotate","scale","simplify","getType","intersectsExtent","translate","inCoordinates","outCoordinates","pixelExtent","projectedExtent","$50db89a00eb954f6$export$2e2bcd8739ae039","$c76e993e57efc8c4$export$6af0c1b4a8549a43","layout","$c76e993e57efc8c4$export$2e2bcd8739ae039","createOrUpdateFromFlatCoordinates","getCoordinates","getFirstCoordinate","getFlatCoordinates","getLastCoordinate","getLayout","simplifiedGeometry","getSimplifiedGeometryInternal","getStride","setFlatCoordinates","setCoordinates","setLayout","nesting","$c76e993e57efc8c4$var$getLayoutForStride","getCenter","$bf5604c1b8258b71$var$assignClosest","offset1","offset2","lerp","$bf5604c1b8258b71$export$bc2eb611ddf80103","squaredDelta","squaredDistance","$bf5604c1b8258b71$export$fbf31c8f2668ed5a","ends","$bf5604c1b8258b71$export$4adc8e5135fb44c","maxDelta","isRing","tmpPoint","$bf5604c1b8258b71$export$5a48a0eefcf14992","$6b086aa46281540d$export$60815ead40ec79ab","$6b086aa46281540d$export$5c4daf67e03c190f","$6b086aa46281540d$export$47c3746a74384d45","coordinatess","$8780aae6970f5f65$export$ef693d1572e64fb8","simplifiedFlatCoordinates","simplifiedOffset","markers","stack","last","first","maxSquaredDistance","squaredSegmentDistance","$8780aae6970f5f65$export$51a0620f7a28532b","$8780aae6970f5f65$export$b84e8d2c4920a0c6","$8780aae6970f5f65$export$60a9904b67f8d51b","simplifiedEnds","$5454470599558ddd$export$9c0934e4e9c3f61e","$5454470599558ddd$export$cbb9596fc0f40db2","$01ff26a2f986a1d0$export$3c5e1905f889266e","twiceArea","$01ff26a2f986a1d0$export$7a8ee541dfdf2ed5","$548636579b4087f2$var$LinearRing","maxDelta_","maxDeltaRevision_","closestSquaredDistanceXY","getArea","$548636579b4087f2$export$2e2bcd8739ae039","$6eced4c969949f6b$var$Point","createOrUpdateFromCoordinate","$6eced4c969949f6b$export$2e2bcd8739ae039","$239aa88e7a573859$export$cedabedc7ac0e138","forEachCorner","$239aa88e7a573859$export$949a7a3a4b6f34fa","wn","$239aa88e7a573859$export$ae868c0f6acc3355","$2166f19777f69377$export$50e3b25928a5e892","flatCenters","flatCentersOffset","intersections","rr","pointX","maxSegmentLength","numberSafeCompareFunction","segmentLength","$3e64078bffae1cbd$export$4b80e395e36b5a56","ret","$acee589e5b390c5c$export$40d8d71841a3d779","coordinatesExtent","extendFlatCoordinates","containsExtent","point1","point2","intersectsSegment","$acee589e5b390c5c$export$830a0dafbb2ef1c5","$acee589e5b390c5c$export$76dcd8f8f83b6ddb","$155dc783a4ec227e$export$741858880c96b18c","$7892dc06ffd23218$export$318f2842ed17e094","edge","$7892dc06ffd23218$export$f27cd06e85f4ba28","right","isClockwise","$7892dc06ffd23218$export$b71b604ddfc778c7","$40aa8d43bbe572bf$var$Polygon","ends_","flatInteriorPointRevision_","flatInteriorPoint_","orientedRevision_","orientedFlatCoordinates_","appendLinearRing","linearRing","polygon","getOrientedFlatCoordinates","getEnds","getFlatInteriorPoint","flatCenter","getInteriorPoint","getLinearRingCount","getLinearRing","getLinearRings","linearRings","$40aa8d43bbe572bf$export$2e2bcd8739ae039","$40aa8d43bbe572bf$export$c16b671815801c75","$70364d0195659942$var$View","hints_","animations_","updateAnimationKey_","projection_","viewportSize_","targetCenter_","targetResolution_","targetRotation_","nextCenter_","nextResolution_","nextRotation_","cancelAnchor_","applyOptions_","resolutionConstraintInfo","resolutionConstraint","defaultMaxZoom","defaultZoomFactor","zoomFactor","multiWorld","smoothResolutionConstraint","projExtent","constrainOnlyCenter","constrainResolution","defaultMaxResolution","defaultMinResolution","constraint","$70364d0195659942$export$c68d65f9148da196","maxResolution_","minResolution_","zoomFactor_","resolutions_","padding_","padding","minZoom_","centerConstraint","smoothExtentConstraint","$70364d0195659942$export$964345001ee9ac52","rotationConstraint","enableRotation","constrainRotation","$70364d0195659942$export$4eeaa08dd550e3c0","constraints_","setRotation","setCenterInternal","setResolution","setZoom","oldPadding","newPadding","getResolution","offsetX","offsetY","getUpdatedOptions_","newOptions","getZoom","getCenterInternal","getRotation","animate","var_args","isDef","getAnimating","resolveConstraints","args","getProjection","animateInternal","animationCount","$70364d0195659942$var$animationCallback","Date","now","series","animation","complete","duration","easing","sourceCenter","targetCenter","sourceResolution","targetResolution","getResolutionForZoom","sourceRotation","delta","modulo","targetRotation","$70364d0195659942$export$ee75376562060184","setHint","updateAnimations_","getInteracting","cancelAnimations","cancelAnimationFrame","more","seriesComplete","elapsed","fraction","progress","getViewportSize_","constrainedResolution","calculateCenterZoom","applyTargetState_","constrainedRotation","calculateCenterRotate","filter","Boolean","requestAnimationFrame","currentCenter","currentResolution","w","h","setViewportSize","getConstraints","getConstrainResolution","getHints","hints","calculateExtent","calculateExtentInternal","getViewportSizeMinusPadding_","getForViewAndSize","getZoomForResolution","setConstrainResolution","enabled","getResolutions","getResolutionForExtent","getResolutionForExtentInternal","getResolutionForValueFunction","getConstrainedResolution","getValueForResolutionFunction","logPower","reducedSize","$70364d0195659942$var$calculateCenterOn","nextCenter","nextResolution","nextRotation","nearest","baseLevel","fit","geometryOrExtent","userProjection","fitInternal","rotatedExtentForGeometry","coords","minRotX","minRotY","maxRotX","maxRotY","rotX","rotY","rotatedExtent","centerRot","centerX","centerY","getConstrainedCenter","centerOn","centerOnInternal","calculateCenterShift","shiftedCenter","adjustCenter","deltaCoordinates","setCenter","adjustCenterInternal","adjustResolution","adjustResolutionInternal","adjustZoom","adjustRotation","adjustRotationInternal","newRotation","hint","doNotCancelAnims","forceMoving","newCenter","resolutionDirection","beginInteraction","endInteraction","endInteractionInternal","getConstrainedZoom","targetZoom","targetRes","returnValue","$70364d0195659942$export$2e2bcd8739ae039","$fVglf","$6a26ab11104d2c24$var$Attribution","ulElement_","collapsed_","collapsed","userCollapsed_","overrideCollapsible_","collapsible","collapsible_","tipLabel","expandClassName","collapseLabel","collapseClassName","collapseLabel_","textContent","label","label_","activeLabel","toggleButton_","setAttribute","title","handleClick_","cssClasses","renderedAttributions_","collectSourceAttributions_","lookup","visibleAttributions","attributionGetter","getAttributions","attributions","getAttributionsCollapsible","setCollapsible","updateElement_","removeChildren","innerHTML","handleToggle_","classList","toggle","replaceNode","getCollapsible","setCollapsed","getCollapsed","$6a26ab11104d2c24$export$2e2bcd8739ae039","$a305cff1f91b3b86$var$Rotate","compassClassName","add","callResetNorth_","resetNorth","duration_","autoHide_","autoHide","rotation_","resetNorth_","view","getView","contains","$a305cff1f91b3b86$export$2e2bcd8739ae039","$4901e3e27e30416a$var$Zoom","zoomInClassName","zoomOutClassName","zoomInLabel","zoomOutLabel","zoomInTipLabel","zoomOutTipLabel","inElement","createTextNode","outElement","zoomByDelta_","currentZoom","newZoom","$4901e3e27e30416a$export$2e2bcd8739ae039","$af7495b2f822d5e9$export$ebe90cb607ad99e","controls","zoomOptions","rotateOptions","attribution","attributionOptions","$2c9e42723ccf2bfb$export$2e2bcd8739ae039","ACTIVE","$39210df8527e63e5$var$Interaction","setActive","getActive","mapBrowserEvent","active","$39210df8527e63e5$export$4c486572e961a974","$39210df8527e63e5$export$ace321ff2a8016ef","$39210df8527e63e5$export$2e2bcd8739ae039","$b50403621294a654$export$2e2bcd8739ae039","delta_","stopEvent","browserEvent","shiftKey","$cf1eb502962d87a8$export$e2a20c553f6c85ce","$cf1eb502962d87a8$export$2e2bcd8739ae039","handleDownEvent","handleDragEvent","handleMoveEvent","handleUpEvent","stopDown","handlingDownUpSequence","targetPointers","getPointerCount","updateTrackedPointers_","handledUp","handled","$edf87b50170125f7$export$84bf76cd7afc7469","conditions","pass","$edf87b50170125f7$export$4e5f01653f9f1f82","altKey","metaKey","ctrlKey","$edf87b50170125f7$export$ae2cdf064e3b0c55","getTargetElement","hasAttribute","targetElement","activeElement","$edf87b50170125f7$export$d7ddd398f22d79ef","$edf87b50170125f7$export$ba9e5d519bc326ca","$edf87b50170125f7$export$1238ad6b5e7fff70","WEBKIT","MAC","$edf87b50170125f7$export$fdc892d0d8fe3bfb","FALSE","$edf87b50170125f7$export$5d31fe68a477cfbb","$edf87b50170125f7$export$e5570ca80cd8fd54","tagName","isContentEditable","$edf87b50170125f7$export$abb7acbfa76bf3c4","pointerType","$edf87b50170125f7$export$189f0d593022b199","isPrimary","$c11585da26a016db$export$2e2bcd8739ae039","kinetic_","kinetic","lastCentroid","lastPointersCount_","panning_","condition","condition_","onFocusOnly","noKinetic_","centroid","update","begin","distance","getDistance","getAngle","centerpx","getPixelFromCoordinateInternal","getCoordinateFromPixelInternal","$197c7092261b2aa0$export$2e2bcd8739ae039","lastAngle_","getSize","$c47adf75308683a6$var$RenderBox","geometry_","startPixel_","endPixel_","render_","startPixel","endPixel","px","left","top","getOverlayContainer","setPixels","createOrUpdateGeometry","getGeometry","$c47adf75308683a6$export$2e2bcd8739ae039","$e05f414bc3918235$var$DragBoxEventType","$e05f414bc3918235$export$7053c33c051365ea","$e05f414bc3918235$export$2e2bcd8739ae039","box_","minArea_","minArea","onBoxEnd","boxEndCondition_","boxEndCondition","defaultBoxEndCondition","completeBox","$afc7f51010a5b660$export$2e2bcd8739ae039","out_","out","$82662515908d12f9$export$2e2bcd8739ae039","UP","DOWN","$178bb1517d626802$export$2e2bcd8739ae039","defaultCondition_","pixelDelta_","pixelDelta","keyEvent","keyCode","mapUnitsDelta","$2237fabfa170eefc$export$2e2bcd8739ae039","charCode","charCodeAt","$9a54ea8d5f7a49ee$export$2e2bcd8739ae039","decay","minVelocity","delay","decay_","minVelocity_","delay_","points_","angle_","initialVelocity_","lastIndex","firstIndex","$aaa378764710d71e$export$2e2bcd8739ae039","totalDelta_","lastDelta_","timeout_","timeout","useAnchor_","useAnchor","constrainResolution_","lastAnchor_","startTime_","timeoutId_","mode_","trackpadEventGap_","trackpadTimeoutId_","deltaPerZoom_","endInteraction_","wheelEvent","FIREFOX","deltaMode","WheelEvent","DOM_DELTA_PIXEL","DEVICE_PIXEL_RATIO","DOM_DELTA_LINE","timeLeft","handleWheelZoom_","setMouseAnchor","$9727451f2459496c$export$2e2bcd8739ae039","pointerOptions","anchor_","rotating_","rotationDelta_","threshold_","threshold","rotationDelta","touch0","touch1","viewportPosition","getBoundingClientRect","$79c946b60b88d4a6$export$2e2bcd8739ae039","lastDistance_","lastScaleDelta_","scaleDelta","$e3fbd36d629ecc04$export$ebe90cb607ad99e","interactions","altShiftDragRotate","doubleClickZoom","zoomDelta","zoomDuration","dragPan","pinchRotate","pinchZoom","keyboard","mouseWheelZoom","shiftDragZoom","$cc435a5409103773$export$622c471beb1693c7","$cc435a5409103773$export$a71a825ff42fb8e1","$41aa29ae0c4b607a$var$removeLayerMapProperty","$YSU3I","$41aa29ae0c4b607a$var$setLayerMapProperty","$41aa29ae0c4b607a$var$Map","optionsInternal","keyboardEventTarget","layerGroup","overlays","$41aa29ae0c4b607a$var$createOptionsInternal","renderComplete_","loaded_","boundHandleBrowserEvent_","handleBrowserEvent","maxTilesLoading_","maxTilesLoading","pixelRatio_","pixelRatio","postRenderTimeoutHandle_","animationDelayKey_","animationDelay_","coordinateToPixelTransform_","pixelToCoordinateTransform_","frameIndex_","frameState_","previousExtent_","viewPropertyListenerKey_","viewChangeListenerKey_","layerGroupPropertyListenerKeys_","viewport_","overflow","overlayContainer_","overlayContainerStopEvent_","mapBrowserEventHandler_","keyboardEventTarget_","targetChangeHandlerKeys_","overlays_","overlayIdIndex_","postRenderFunctions_","tileQueue_","getTilePriority","handleTileChange_","handleLayerGroupChanged_","handleViewChanged_","handleSizeChanged_","handleTargetChanged_","then","viewOptions","setView","addOverlayInternal_","getId","toString","control","interaction","addControl","getControls","addInteraction","getInteractions","addLayer","getLayerGroup","handleLayerAdd_","addOverlay","overlay","getOverlays","forEachFeatureAtPixel","getFeaturesAtPixel","features","getAllLayers","addLayersFrom","hasFeatureAtPixel","getEventCoordinate","getEventCoordinateInternal","eventPosition","changedTouches","getTarget","getOverlayById","group","getLoadingOrNotReady","renderer","ready","loading","getPixelFromCoordinate","viewCoordinate","ownerDocument","handleMapBrowserEvent","rootNode","documentElement","interactionsArray","handlePostRender","tileQueue","viewHints","lowOnFrameBudget","time","defaultView","updateSize","handleViewPropertyChanged_","updateViewportSize_","GroupEvent","handleLayerRemove_","isRendered","renderFrame_","renderSync","handleFontsChanged","removeControl","removeInteraction","removeLayer","removeOverlay","previousFrameState","declutterTree","usedTiles","mapId","renderTargets","nextExtent","setLayerGroup","oldLayerGroup","computedStyle","offsetWidth","offsetHeight","getClientRects","$41aa29ae0c4b607a$export$2e2bcd8739ae039","$0f235d2d04095c6e$var$Tile","tileCoord","interimTile","transition_","transition","transitionStarts_","interpolate","release","setState","getInterimTile","refreshInterimChain","getTileCoord","getAlpha","inTransition","endTransition","$0f235d2d04095c6e$export$2e2bcd8739ae039","$5edd00bd92be9cf8$var$ImageBase","getImage","getPixelRatio","$5edd00bd92be9cf8$export$2e2bcd8739ae039","$7eb75c96a6b6f2c6$export$2e2bcd8739ae039","$b54439be79d4619a$export$bc96ecc7c2a50764","image","loadHandler","errorHandler","img","listening","decoding","loaded","IMAGE_DECODE","catch","$b54439be79d4619a$export$2e2bcd8739ae039","imageLoadFunction","src_","image_","unlisten_","imageLoadFunction_","handleImageError_","unlistenImage_","handleImageLoad_","setImage","$cd3bc8d185522361$export$2e2bcd8739ae039","tileLoadFunction","crossOrigin_","tileLoadFunction_","ctx","fillStyle","fillRect","$cd3bc8d185522361$var$getBlankImage","naturalWidth","naturalHeight","$6be53f6edfbf1854$export$2e2bcd8739ae039","targetProj","targetExtent","maxSourceExtent","errorThreshold","destinationResolution","sourceProj_","targetProj_","transformInvCache","transformInv","transformInv_","maxSourceExtent_","errorThresholdSquared_","triangles_","wrapsXInSource_","canWrapXInSource_","sourceWorldWidth_","targetWorldWidth_","destinationTopLeft","getTopLeft","destinationTopRight","getTopRight","destinationBottomRight","getBottomRight","destinationBottomLeft","getBottomLeft","sourceTopLeft","sourceTopRight","sourceBottomRight","sourceBottomLeft","maxSubdivision","log2","addQuad_","leftBound","triangle","newTriangle","addTriangle_","aSrc","bSrc","cSrc","dSrc","sourceQuadExtent","boundingExtent","sourceCoverageX","sourceWorldWidth","wrapsX","needsSubdivision","targetQuadExtent","isFinite","isNotFinite","centerSrc","bc","bcSrc","da","daSrc","ab","abSrc","cd","cdSrc","calculateSourceExtent","extendCoordinate","getTriangles","$2b0a118af78fb031$var$brokenDiagonalRendering_","$2b0a118af78fb031$export$a166f0857c555517","$2b0a118af78fb031$var$drawTestTriangle","u1","u2","beginPath","moveTo","lineTo","closePath","save","clip","restore","$2b0a118af78fb031$var$verifyBrokenDiagonalRendering","$2b0a118af78fb031$export$5fbb958059b7e71f","targetMetersPerUnit","sourceMetersPerUnit","containsCoordinate","compensationFactor","$2b0a118af78fb031$export$16d356211d01f1cc","$2b0a118af78fb031$export$b3890eb0ae9dca99","triangulation","sources","gutter","renderEdges","imageSmoothingEnabled","pixelRound","globalCompositeOperation","sourceDataExtent","canvasWidthInUnits","canvasHeightInUnits","stitchContext","stitchScale","xPos","yPos","srcWidth","srcHeight","drawImage","targetTopLeft","u0","v0","sourceNumericalShiftX","sourceNumericalShiftY","augmentedMatrix","affineCoefs","solveLinearSystem","getImageData","$2b0a118af78fb031$var$isBrokenDiagonalRendering","steps","ud","vd","step","strokeStyle","lineWidth","stroke","$398e350e33050c07$export$2e2bcd8739ae039","sourceTileGrid","targetTileGrid","wrappedTileCoord","getTileFunction","renderEdges_","gutter_","canvas_","sourceTileGrid_","targetTileGrid_","wrappedTileCoord_","sourceTiles_","sourcesListenerKeys_","sourceZ_","getTileCoordExtent","maxTargetExtent","limitedTargetExtent","sourceProjExtent","errorThresholdInPixels","triangulation_","getZForResolution","sourceRange","getTileRangeForExtentAndZ","srcX","srcY","reproject_","getTileSize","leftToLoad","sourceListenKey","unlistenSources_","releaseCanvas","$859b1614288c6316$export$2e2bcd8739ae039","highWaterMark","count_","entries_","oldest_","newest_","expireCache","keep","containsKey","entry","value_","key_","newer","older","getValues","peekLast","peekLastKey","peekFirstKey","peek","$bf2a04496fadabc6$export$958e3e1a02eac4b6","$bf2a04496fadabc6$export$92d0df0f1d25c63c","$bf2a04496fadabc6$export$a47fb462a08de82f","$bf2a04496fadabc6$export$a807b7874eb66454","$bf2a04496fadabc6$export$d6af199866bfb566","$bf2a04496fadabc6$export$60bedf8e3e3c3dbe","tileRange","getFullTileRange","$a12e09565a34db59$export$2e2bcd8739ae039","pruneExceptNewestZ","$7e3d7a0f8b272861$export$2e2bcd8739ae039","TILELOADSTART","TILELOADEND","TILELOADERROR","$ed6dc99f268f3882$var$Source","attributions_","$ed6dc99f268f3882$var$adaptAttributions","attributionsCollapsible_","attributionsCollapsible","wrapX_","wrapX","interpolate_","viewResolver","viewRejector","viewPromise_","reject","getInterpolate","refresh","setAttributions","attributionLike","$ed6dc99f268f3882$export$2e2bcd8739ae039","$550e524b0d1b61d4$var$TileRange","containsTileRange","$550e524b0d1b61d4$export$958e3e1a02eac4b6","$550e524b0d1b61d4$export$2e2bcd8739ae039","$bb602a307ef98bb5$var$tmpTileCoord","$bb602a307ef98bb5$export$2e2bcd8739ae039","isSorted","origins","origin_","origin","origins_","tileSizes_","tileSizes","tileSize_","tileSize","fullTileRanges_","tmpSize_","tmpExtent_","sizes","restrictedTileRange","calculateTileRanges_","forEachTileCoord","forEachTileCoordParentTileRange","tempTileRange","tempExtent","tileCoordExtent","getOrigin","getTileCoordChildTileRange","getTileRangeForTileCoordAndZ","tileCoordZ","tileCoordX","tileCoordY","getTileRangeExtent","createOrUpdate","getTileCoordForXYAndZ_","getTileCoordCenter","getTileCoordForCoordAndResolution","opt_tileCoord","getTileCoordForXYAndResolution_","reverseIntersectionPolicy","getTileCoordForCoordAndZ","getTileCoordResolution","opt_direction","tileCoordIntersectsViewport","viewport","fullTileRanges","$5779655d81caea04$export$1f4812384df8a9c5","$5779655d81caea04$var$resolutionsFromExtent","getCorner","$5779655d81caea04$export$ce88871416242df8","$5779655d81caea04$export$7b5b6ef8fd55fac4","$5779655d81caea04$export$a251b12f5601c16f","$5779655d81caea04$export$39a9ce3624977b84","half","$988a11d09320f6a8$export$c571855c51e6c4b6","$988a11d09320f6a8$export$2e2bcd8739ae039","opaque_","tilePixelRatio_","tilePixelRatio","tileCache","tmpSize","tileOptions","zDirection","getTileCacheForProjection","forEachLoadedTile","tileCoordKey","covered","getGutterForProjection","setKey","getOpaque","getTile","getTileGrid","getTileGridForProjection","getTilePixelRatio","getTilePixelSize","getTileCoordForTileUrlFunction","updateCacheSize","tileCount","useTile","$91dd08a0f5859882$export$f0ecb46e90798741","template","zRegEx","xRegEx","yRegEx","dashYRegEx","range","$91dd08a0f5859882$export$436f44dbcc31fea3","templates","tileUrlFunctions","$91dd08a0f5859882$export$4229b1d9af69b3be","$91dd08a0f5859882$export$2a1fa079bfd73dde","url","urls","startCharCode","stopCharCode","fromCharCode","stop","$e6408236331c2614$var$UrlTile","generateTileUrlFunction_","tileUrlFunction","setUrls","setUrl","tileLoadingKeys_","getTileLoadFunction","getTileUrlFunction","getPrototypeOf","getUrls","uid","tileState","setTileLoadFunction","setTileUrlFunction","$e6408236331c2614$export$2e2bcd8739ae039","$51d055913ca55b5e$var$defaultTileLoadFunction","imageTile","$51d055913ca55b5e$export$2e2bcd8739ae039","tileClass","tileCacheForProjection","tileGridForProjection","reprojectionErrorThreshold_","reprojectionErrorThreshold","renderReprojectionEdges_","usedTileCache","getGutter","thisProj","projKey","createTile_","urlTileCoord","tileUrl","newTile","getTileInternal","setRenderReprojectionEdges","setTileGridForProjection","tilegrid","proj","$60db182c0252e220$export$c202e3cb8db99a95","uri","params","keyParams","encodeURIComponent","qs","$17e2c305e5143e39$var$WMTSTileGrid","matrixIds_","matrixIds","getMatrixId","getMatrixIds","$17e2c305e5143e39$export$2e2bcd8739ae039","$03da246cb7c9d812$export$2e2bcd8739ae039","requestEncoding","version_","format_","format","dimensions_","dimensions","layer_","matrixSet_","matrixSet","style_","requestEncoding_","getKeyForDimensions_","createFromWMTSTemplate","getDimensions","getFormat","getLayer","getMatrixSet","getRequestEncoding","getStyle","getVersion","updateDimensions","tilematrixset","Version","p","localContext","TileMatrix","TileCol","TileRow","$351df830ee0a9d9c$export$2e2bcd8739ae039","$cb18cdefd702a327$var$LayerRenderer","boundHandleImageChange_","handleImageChange_","declutterExecutorGroup","loadedTileCallback","tiles","createLoadedTileFinder","renderIfReadyAndVisible","loadImage","imageState","$cb18cdefd702a327$export$2e2bcd8739ae039","$42152f52b26b6ca7$var$pixelContext","$42152f52b26b6ca7$export$2e2bcd8739ae039","renderedResolution","tempTransform","pixelTransform","containerReused","pixelContext_","col","row","$42152f52b26b6ca7$var$createPixelContext","err","useContainer","backgroundColor","layerClassName","HTMLCanvasElement","canvas1","transformOrigin","clipUnrotated","topLeft","topRight","bottomRight","bottomLeft","inverted","dispatchRenderEvent_","preRender","postRender","getRenderTransform","$d08a3a38b8c630d8$export$2e2bcd8739ae039","imageLayer","viewResolution","imageSource","renderedExtent","layerExtent","imageExtent","imageMapWidth","imageMapHeight","imageResolution","imagePixelRatio","viewCenter","canvasTransform","clipped","dw","dh","previousAlpha","globalAlpha","$14618f63634d34fc$export$2e2bcd8739ae039","$e4c61536de922b84$export$2e2bcd8739ae039","PRELOAD","USE_INTERIM_TILES_ON_ERROR","$93be2de6a052f587$export$2e2bcd8739ae039","preload","useInterimTilesOnError","setPreload","setUseInterimTilesOnError","getPreload","getUseInterimTilesOnError","$02fffef185f4339b$export$2e2bcd8739ae039","tileLayer","extentChanged","renderedExtent_","renderedPixelRatio","renderedProjection","renderedRevision","renderedTiles","newTiles_","tmpExtent","tmpTileRange_","isDrawableTile","tileOrigin","tileSource","sourceRevision","canvasExtent","tilesToDrawByZ","findLoadedTiles","tmpTileRange","getRotatedViewport","childTileRange","canvasScale","clips","clipZs","currentClip","zs","reverse","currentZ","currentTilePixelSize","currentScale","originTileCoord","originTileExtent","tileGutter","tilesToDraw","tile1","xIndex","nextX","yIndex","nextY","inTransition1","contextSaved","drawTileImage","unshift","updateUsedTiles","manageTilePyramid","scheduleExpireCache","getTileImage","alpha","alphaChanged","postRenderFunction","tileCallback","$32e67a4d3559554a$export$2e2bcd8739ae039","$c0ecbd71ed29ee86$export$f504979d7e0a75c7","$c0ecbd71ed29ee86$export$10cb69dd603c11b0","$c0ecbd71ed29ee86$export$6eec49b1a6289c4e","$c0ed0517e336f22b$export$2e2bcd8739ae039","$4d34d8675ead8d22$export$2e2bcd8739ae039","to_meter","$ccc3ecc4732a4173$var$ignoredChar","$ccc3ecc4732a4173$export$2e2bcd8739ae039","testkey","lkey","$583158df16d3522c$export$2e2bcd8739ae039","defData","paramName","paramVal","paramOutname","paramObj","v","reduce","datum","rf","lat_0","lat0","lat_1","lat_2","lat_ts","lon_0","long0","lon_1","long1","lon_2","long2","gamma","rectified_grid_angle","lonc","longc","x_0","y_0","k_0","k0","r_a","R_A","zone","south","utmSouth","towgs84","datum_params","unit","from_greenwich","pm","nadgrids","datumCode","axis","legalAxis","approx","$4f92c43f9960a1f4$var$whitespace","$4f92c43f9960a1f4$var$latin","$4f92c43f9960a1f4$var$keyword","$4f92c43f9960a1f4$var$endThings","$4f92c43f9960a1f4$var$digets","$4f92c43f9960a1f4$var$Parser","level","place","root","currentObject","$5bda1e467f1c2649$var$mapit","thing","newObj","$5bda1e467f1c2649$export$337bc7a3aef1f775","convert","readCharicter","char","neutral","keyword","quoted","afterquote","number","word","afterItem","newObjects","defs","$5c3aabf591259c07$var$d2r","$5c3aabf591259c07$export$2e2bcd8739ae039","wkt","lisp","projName","local","PROJECTION","AXIS","axisOrder","UNIT","DATUM","SPHEROID","geogcs","GEOGCS","toMeter","sphere","ellps","TOWGS84","outName","inName","$5c3aabf591259c07$var$cleanWKT","$a9b3183caccb3297$var$defs","that","def","charAt","EPSG","ESRI","IAU2000","WGS84","GOOGLE","$a9b3183caccb3297$export$2e2bcd8739ae039","$bddd3b9c0d2064cd$var$codeWords","$bddd3b9c0d2064cd$var$codes","$bddd3b9c0d2064cd$export$2e2bcd8739ae039","$bddd3b9c0d2064cd$var$testObj","$bddd3b9c0d2064cd$var$testDef","$bddd3b9c0d2064cd$var$testWKT","auth","$bddd3b9c0d2064cd$var$checkMercator","maybeProjStr","ext","$bddd3b9c0d2064cd$var$checkProjStr","$bddd3b9c0d2064cd$var$testProj","$96b30a4c80088893$export$2e2bcd8739ae039","$8386063044328ea8$export$2e2bcd8739ae039","eccent","sinphi","cosphi","con","$84ccc316da8510bf$export$2e2bcd8739ae039","$763e06e438986b6c$export$2e2bcd8739ae039","$2942018063c2eff1$export$2e2bcd8739ae039","phi","com","$1e3eece278ef2a71$export$2e2bcd8739ae039","ts","dphi","eccnth","$dad2845bfa7291b9$export$174bb771924e7eb1","pt","$169de593aeaa174c$var$projs","init","es","lon","lat","names","$169de593aeaa174c$var$names","$169de593aeaa174c$var$projStore","$169de593aeaa174c$export$e16d8520af44a096","$169de593aeaa174c$export$2e2bcd8739ae039","$8988c354f092c217$export$2e2bcd8739ae039","ellipseName","$8988c354f092c217$export$a1db874f6c0f1ba1","$98f4ab684186b766$export$b2690196de52b050","ellipse","$c36bbc8057de3d00$export$2e2bcd8739ae039","wgs84","datumName","ch1903","ggrs87","nad83","nad27","potsdam","carthage","hermannskogel","osni52","ire65","rassadiran","nzgd49","osgb36","s_jtsk","beduaram","gunung_segara","rnb72","$2c13a87cc45f972b$export$2e2bcd8739ae039","ep2","datum_type","grids","$b2d482da445fbb18$var$loadedNadgrids","$b2d482da445fbb18$export$31c4d9288d81329a","$b2d482da445fbb18$var$parseNadgridString","optional","mandatory","grid","isNull","$b2d482da445fbb18$var$secondsToRadians","seconds","$b2d482da445fbb18$var$decodeString","Uint8Array","buffer","$b2d482da445fbb18$var$mapNodes","nodes","longitudeShift","latitudeShift","$b2d482da445fbb18$var$readGridHeader","isLittleEndian","lowerLatitude","getFloat64","upperLatitude","lowerLongitude","upperLongitude","latitudeInterval","longitudeInterval","gridNodeCount","getInt32","$b2d482da445fbb18$var$readGridNodes","gridHeader","nodesOffset","gridShiftRecords","record","getFloat32","latitudeAccuracy","longitudeAccuracy","$24869d6338533b3b$var$Projection","srsCode","json","ourProj","datumDef","a2","b2","sphere_","ecc","datumObj","$24869d6338533b3b$export$2e2bcd8739ae039","$3a04bd721826a648$export$68c8d8590fbb24e4","$3a04bd721826a648$export$4a4ae2976f9a808a","Rn","Sin_Lat","Sin2_Lat","Cos_Lat","Longitude","Latitude","Height","$3a04bd721826a648$export$26210192c8922750","P","RR","CT","ST","RX","RK","RN","CPHI0","SPHI0","CPHI","SPHI","SDPHI","iter","genau","X","Y","Z","$3a04bd721826a648$export$d18952b9ecb47c8f","Dx_BF","Dy_BF","Dz_BF","Rx_BF","Ry_BF","Rz_BF","M_BF","$3a04bd721826a648$export$2b744ad521e7ac0b","x_tmp","y_tmp","z_tmp","$98d040a88dc0214f$var$checkParams","$98d040a88dc0214f$export$2e2bcd8739ae039","source_a","source_es","$98d040a88dc0214f$export$cfa06df23524576a","dest_a","dest_b","dest_es","attemptedGrids","subgrid","subgrids","epsilon","del","ll","lim","$98d040a88dc0214f$var$applySubgridShift","pin","ct","tb","$98d040a88dc0214f$var$nadInterpolate","dif","inx","indx","frct","f00","cvs","f10","f11","f01","m11","m10","m00","m01","$cedb7bb5617791b0$export$2e2bcd8739ae039","denorm","xin","yin","zin","$01093474ae9bd8f6$export$2e2bcd8739ae039","$906e8b8bdc80d434$export$2e2bcd8739ae039","$906e8b8bdc80d434$var$checkCoord","num","TypeError","$8e8cfb7cbefc2113$export$2e2bcd8739ae039","enforceAxis","$8e8cfb7cbefc2113$var$checkNotWGS","$471507637a3ff861$var$wgs84","$471507637a3ff861$var$transformer","from","to","transformedArray","$471507637a3ff861$var$checkProj","oProj","$471507637a3ff861$export$2e2bcd8739ae039","fromProj","toProj","single","$31ee54b8e1d1cd8f$export$2e2bcd8739ae039","$31ee54b8e1d1cd8f$export$174bb771924e7eb1","mgrs","bbox","$31ee54b8e1d1cd8f$var$UTMtoLL","$31ee54b8e1d1cd8f$var$decode","toUpperCase","bottom","toPoint","$31ee54b8e1d1cd8f$export$b63cca88ddc558a9","accuracy","utm","seasting","easting","snorthing","northing","zoneNumber","zoneLetter","setParm","$31ee54b8e1d1cd8f$var$get100kSetForZone","setColumn","setRow","column","parm","colOrigin","rowOrigin","colInt","rowInt","rollover","$31ee54b8e1d1cd8f$var$encode","eccPrimeSquared","N","T","C","A","M","LongOriginRad","ZoneNumber","Lat","Long","eccSquared","LatRad","$31ee54b8e1d1cd8f$var$degToRad","LongRad","UTMEasting","UTMNorthing","$31ee54b8e1d1cd8f$var$getLetterDesignator","$31ee54b8e1d1cd8f$var$LLtoUTM","deg","$31ee54b8e1d1cd8f$var$radToDeg","rad","N1","T1","C1","R1","D","LongOrigin","mu","phi1Rad","e1","LetterDesignator","mgrsString","testChar","hunK","sb","substring","east100k","curCol","eastingValue","rewindMarker","$31ee54b8e1d1cd8f$var$getEastingFromChar","north100k","curRow","northingValue","$31ee54b8e1d1cd8f$var$getNorthingFromChar","$31ee54b8e1d1cd8f$var$getMinNorthing","remainder","accuracyBonus","sepEastingString","sepNorthingString","sep","sepEasting","sepNorthing","$d8ec3fc1ff061c76$var$Point","fromMGRS","mgrsStr","toMGRS","$d8ec3fc1ff061c76$export$2e2bcd8739ae039","$bf6313ff986be9ac$export$2e2bcd8739ae039","en","$cae0dd692f473684$export$2e2bcd8739ae039","sphi","cphi","$e73ee39023f9c198$export$2e2bcd8739ae039","arg","$6e495242beb4668f$export$2e2bcd8739ae039","ml0","delta_lon","sin_phi","cos_phi","al","als","cs","tq","ml","acos","tan_phi","ds","temp","asin","$06b03d370063c40e$export$2e2bcd8739ae039","$e7d754d244264a37$export$2e2bcd8739ae039","$ba9a64430787103e$export$2e2bcd8739ae039","$96919c3c2b0cfee9$export$2e2bcd8739ae039","$ecee41736c9c0e4b$export$2e2bcd8739ae039","pp","B","cos_2B","h1","h2","$e909e682fc23c405$export$2e2bcd8739ae039","arg_r","hr","hr1","hr2","$925c5d35b4e59088$export$2e2bcd8739ae039","$da7beda932685c15$export$2e2bcd8739ae039","arg_i","hi2","sin_arg_r","cos_arg_r","sinh_arg_i","cosh_arg_i","hi1","hi","$6f7c72613b8aa92a$export$2e2bcd8739ae039","cgb","cbg","utg","gtu","np","Qn","Zb","Ce","Cn","sin_Cn","cos_Cn","sin_Ce","cos_Ce","$810f2c2910fd20b1$export$2e2bcd8739ae039","$efe46ba059d82de2$export$2e2bcd8739ae039","dependsOn","$5db95ad4da70d3a6$export$2e2bcd8739ae039","esinp","$06b464b721451620$export$2e2bcd8739ae039","rc","phic0","ratexp","K","$4279f8b9d31284e6$export$2e2bcd8739ae039","sinc0","cosc0","R2","sinc","cosc","cosl","rho","$f8ad4802022ce868$export$2e2bcd8739ae039","coslat0","sinlat0","cons","ms1","X0","ssfn_","cosX0","sinX0","sinX","cosX","rh","sinlat","coslat","dlon","ce","Chi","phit","eccen","$31a8278a941356d4$export$2e2bcd8739ae039","phy0","lambda0","sinPhy0","semiMajorAxis","flattening","e2","R","b0","k1","k2","k3","Sa1","Sa2","S","I","rotI","rotB","lambda","phy","prevPhy","iteration","$a6cb33582cb5910b$export$2e2bcd8739ae039","cosph0","F","H","L","sinph0","J","gamma0","projectionName","lamc","lam1","lam2","phi1","phi2","alpha_c","no_off","no_rot","alp","gam","one_es","E","lam0","pi","singam","cosgam","sinrot","cosrot","rB","ArB","BrA","u_0","v_pole_n","v_pole_s","U","V","W","u","Qp","Sp","Tp","Vp","Up","$d753eaf12887a276$export$2e2bcd8739ae039","sin1","cos1","ts1","sin2","cos2","ms2","ts2","ts0","ns","f0","rh1","$c765c705b741a192$export$2e2bcd8739ae039","s45","s90","fi0","alfa","uq","n0","s0","ro0","ad","gfi","deltav","eps","ro","czech","fi1","ok","$af51062589eeb2ce$export$2e2bcd8739ae039","e0","e3","$8b22a51ec249391e$export$2e2bcd8739ae039","$d08e0117e308bb87$export$2e2bcd8739ae039","$d36e2161accfe0ec$export$2e2bcd8739ae039","$89245c5bc9a5a616$export$2e2bcd8739ae039","$259e1333723cc7cb$export$2e2bcd8739ae039","$7bf9815baea17aa9$export$2e2bcd8739ae039","$8ebd4771f70de1ee$export$2e2bcd8739ae039","$00f791059e8f61f5$export$2e2bcd8739ae039","lam","nl","tl","asq","cl","dd","nl1","rl1","tl1","dl","dsq","$5e82a7153665d151$export$2e2bcd8739ae039","$9a24067d8ab69621$export$2e2bcd8739ae039","mode","S_POLE","N_POLE","EQUIT","OBLIQ","qp","mmf","apa","APA","$9a24067d8ab69621$var$authset","rq","xmf","ymf","sinb1","cosb1","coslam","sinlam","q","sinb","cosb","cCe","sCe","beta","cosz","sinz","$f8538120e633ea57$export$2e2bcd8739ae039","$615dc6dbd83ac6d5$export$2e2bcd8739ae039","sin_po","cos_po","t1","qs1","t2","qs2","t3","qs0","ns0","phi1z","eccnts","$dbf05e97c9232a2a$export$2e2bcd8739ae039","sin_p14","cos_p14","infinity_dist","coslon","$81070f0f2a61f650$export$2e2bcd8739ae039","$4d31684dfe594c29$export$2e2bcd8739ae039","$936a7dd52884a3fc$export$2e2bcd8739ae039","dlat","$20353e9e716518d0$export$2e2bcd8739ae039","bl","tanphi","mln","mlnp","ma","$4d7dc5ed367b221e$export$2e2bcd8739ae039","B_re","B_im","C_re","C_im","d_phi","d_lambda","d_phi_n","d_psi","th_n_im1","th_re","th_im","th_n_re","th_n_im","z_re","z_im","z_n_im1","delta_x","z_n_re","z_n_im","iterations","num_re","num_im","den_re","den_im","den2","d_psi_n","$b37863f65bf2a2a4$export$2e2bcd8739ae039","$a9d7febe7a8566f2$export$2e2bcd8739ae039","C_y","C_x","$57490138fba0a0b8$export$2e2bcd8739ae039","delta_theta","$cab513e7d920927e$export$2e2bcd8739ae039","ml1","ml2","$168e5f6524a6fc5f$export$2e2bcd8739ae039","sinth","costh","gsq","msq","xx","yy","xys","c3","a1","m1","th1","$d2d34f4dbda3af26$export$2e2bcd8739ae039","sin_p12","cos_p12","Mlp","Ml","Nl1","Nl","psi","Az","G","GH","Hs","kp","cos_c","s3","s4","cosAz","Ee","sinpsi","$24629f153ebf2c1f$export$2e2bcd8739ae039","$228cab2632c5bcf7$var$FACE_ENUM","$228cab2632c5bcf7$var$AREA_ENUM","$228cab2632c5bcf7$var$qsc_fwd_equat_face_theta","$228cab2632c5bcf7$var$qsc_shift_lon_origin","slon","$228cab2632c5bcf7$export$2e2bcd8739ae039","face","one_minus_f","one_minus_f_squared","xy","sinlon","nu","cosmu","tannu","tantheta","invert_sign","xa","lp","$86b26d30d3579075$var$COEFS_X","$86b26d30d3579075$var$COEFS_Y","$86b26d30d3579075$var$poly3_val","coefs","$86b26d30d3579075$export$2e2bcd8739ae039","$86b26d30d3579075$var$NODES","f_df","max_err","iters","upd","$86b26d30d3579075$var$newton_rapshon","$86b26d30d3579075$var$poly3_der","$07c2abe70612fbc5$export$2e2bcd8739ae039","$ab98c67e9f567a4b$var$mode","$ab98c67e9f567a4b$var$params","azi","tilt","$ab98c67e9f567a4b$export$2e2bcd8739ae039","pn1","rp","pfact","omega","cg","sg","cw","sw","yt","ba","bm","bq","proj4","$e5c7855edcbcda04$export$2e2bcd8739ae039","flip_axis","sweep","radius_g_1","radius_g","rone_es","radius_p","radius_p2","radius_p_inv2","shape","v_x","v_y","v_z","v_zp","defaultDatum","Proj","Point","nadgrid","DataView","nFields","$b2d482da445fbb18$var$detectLittleEndian","header","nSubgridFields","nSubgrids","shiftType","fromSemiMajorAxis","fromSemiMinorAxis","toSemiMajorAxis","toSemiMinorAxis","$b2d482da445fbb18$var$readHeader","gridOffset","subHeader","lngColumnCount","latColumnCount","$b2d482da445fbb18$var$readSubgrids","$a52c207aab93bf4f$export$2e2bcd8739ae039","$22666d8766dd8ace$export$2e2bcd8739ae039","getImageFunction","sourceImage","sourcePixelRatio","targetExtent_","sourceImage_","sourcePixelRatio_","sourceListenerKey_","unlistenSource_","$ff537d321d4e1584$export$4e0f6da20e5dcc4f","$ff537d321d4e1584$export$58d3276cd83daede","$ff537d321d4e1584$export$584f102f75ff44b3","$ff537d321d4e1584$export$2e2bcd8739ae039","reprojectedImage_","reprojectedRevision_","findNearestResolution","idx","getImageInternal","handleImageChange","$481c7fd2f8a9fd17$var$GETFEATUREINFO_IMAGE_SIZE","$35da740d59af89ba$var$currentLayer","$481c7fd2f8a9fd17$export$2e2bcd8739ae039","url_","params_","v13_","updateV13_","serverType_","serverType","hidpi_","hidpi","imageSize_","renderedRevision_","ratio_","getFeatureInfoUrl","projectionObj","sourceProjectionObj","baseParams","SERVICE","VERSION","REQUEST","FORMAT","TRANSPARENT","QUERY_LAYERS","getRequestUrl_","getLegendUrl","LAYERS","mpu","pixelSize","getParams","viewExtent","requestWidth","requestHeight","requestExtent","getImageLoadFunction","dpi","getUrl","setImageLoadFunction","updateParams","$06593976e64c4282$exports","Control","ol_Observable","LayerGroup","CSS_PREFIX","opt_options","activationMode","startActive","collapseTipLabel","groupSelectStyle","LayerSwitcher","getGroupSelectStyle","mapListeners","hiddenClassName","isTouchDevice_","shownClassName","panel","enableTouchScroll_","onclick","hidePanel","showPanel","onmouseover","onmouseout","relatedTarget","updateButton","unByKey","renderPanel","render_event","Event","ensureTopVisibleBaseLayerShown","forEachRecursive","_idx","_a","setGroupVisibility","setChildVisibility","ul","renderLayers_","_changedLyr","rendercomplete_event","grp","lyrs","getGroupsAndLayers","isBaseGroup","descendantVisibility","groupVisible","groupIndeterminate","lastVisibleBaseLyr","lyr","_arr","setVisible_","filterFn","_lyr","static","li","lyrTitle","checkboxId","uuid","factory","projCodes","code1","proj1","code2","proj2","$35da740d59af89ba$var$RDPROJECTION","$35da740d59af89ba$var$RESOLUTIONS","$35da740d59af89ba$var$MATRIXIDS","$35da740d59af89ba$var$i","$35da740d59af89ba$var$stripQueryParams","serviceUrl","urlObj","URL","protocol","host","pathname","$35da740d59af89ba$var$getWMSLayer","serviceTitle","styles","layersParam","stylesParam","wmsSource","MAP_RESOLUTION","STYLES","$35da740d59af89ba$var$switchLayer","$35da740d59af89ba$var$MAP","els","getElementsByClassName","styleEls","checked","currentLayer","styleEl","styleLyrName","$35da740d59af89ba$var$getWmtsLayer","layername","$35da740d59af89ba$var$getBRTALayer","$35da740d59af89ba$var$brtWmtsLayer","$35da740d59af89ba$var$brtGrijsWmtsLayer","$35da740d59af89ba$var$brtPastelWmtsLayer","$35da740d59af89ba$var$brtWaterWmtsLayer","$35da740d59af89ba$var$lufoLayer","$35da740d59af89ba$var$top10nlLayer","$35da740d59af89ba$var$SERVICE_URL","$35da740d59af89ba$var$SERVICE_TITLE","$35da740d59af89ba$var$LAYERSWITCHER","$parcel$interopDefault","$35da740d59af89ba$var$unpackLayers","capObj","mapCanvas","mapContext","querySelectorAll","matrix","CanvasRenderingContext2D","setTransform","msSaveBlob","msToBlob","link","href","toDataURL","click","getMapUrlEl","fetch","response","layerNames","tbl","tblBody","$35da740d59af89ba$var$dragOver","$35da740d59af89ba$var$dragStart","cell","cellText","checkbox","cell2","cell3","selectList","option","$35da740d59af89ba$var$DRAG_EL","closestRow","closest","el1","el2","cur","previousSibling","$35da740d59af89ba$var$isBefore","dataTransfer","effectAllowed","setData","$35da740d59af89ba$var$SIZE_SELECT_EL","$35da740d59af89ba$var$SIZE_INPUT_EL","$35da740d59af89ba$var$updateMapSize","sizeString","mapEl","alert","$35da740d59af89ba$var$grayscaleCheckbox","$35da740d59af89ba$var$postRender","$35da740d59af89ba$var$GRAYSCALE","$35da740d59af89ba$var$rad","select"],"version":3,"file":"index.e2c00fb8.js.map"}